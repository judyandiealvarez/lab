2025-11-26 22:58:58 - commands.deploy           - INFO - 
2025-11-26 22:58:58 - commands.deploy           - INFO - Deploy plan (total 53 steps, running 1-53):
2025-11-26 22:58:58 - commands.deploy           - INFO -   [ 1] RUN  apt-cache: create container
2025-11-26 22:58:58 - commands.deploy           - INFO -   [ 2] RUN  apt-cache: cloud-init wait
2025-11-26 22:58:58 - commands.deploy           - INFO -   [ 3] RUN  apt-cache: AppArmor parser stub
2025-11-26 22:58:58 - commands.deploy           - INFO -   [ 4] RUN  apt-cache: disable automatic apt units
2025-11-26 22:58:58 - commands.deploy           - INFO -   [ 5] RUN  apt-cache: systemd sysctl override
2025-11-26 22:58:58 - commands.deploy           - INFO -   [ 6] RUN  apt-cache: apt-cacher-ng installation
2025-11-26 22:58:58 - commands.deploy           - INFO -   [ 7] RUN  apt-cache: apt-cacher-ng port configuration
2025-11-26 22:58:58 - commands.deploy           - INFO -   [ 8] RUN  apt-cache: apt-cacher-ng service enablement
2025-11-26 22:58:58 - commands.deploy           - INFO -   [ 9] RUN  ubuntu-tmpl: create template
2025-11-26 22:58:58 - commands.deploy           - INFO -   [10] RUN  ubuntu-tmpl: apt cache proxy configuration
2025-11-26 22:58:58 - commands.deploy           - INFO -   [11] RUN  ubuntu-tmpl: AppArmor parser stub
2025-11-26 22:58:58 - commands.deploy           - INFO -   [12] RUN  ubuntu-tmpl: apt sources fix
2025-11-26 22:58:58 - commands.deploy           - INFO -   [13] RUN  ubuntu-tmpl: system upgrade
2025-11-26 22:58:58 - commands.deploy           - INFO -   [14] RUN  ubuntu-tmpl: openssh-server installation
2025-11-26 22:58:58 - commands.deploy           - INFO -   [15] RUN  ubuntu-tmpl: SSH service enablement
2025-11-26 22:58:58 - commands.deploy           - INFO -   [16] RUN  ubuntu-tmpl: base tools installation
2025-11-26 22:58:58 - commands.deploy           - INFO -   [17] RUN  ubuntu-tmpl: template cleanup
2025-11-26 22:58:58 - commands.deploy           - INFO -   [18] RUN  ubuntu-tmpl: template archive creation
2025-11-26 22:58:58 - commands.deploy           - INFO -   [19] RUN  docker-tmpl: create template
2025-11-26 22:58:58 - commands.deploy           - INFO -   [20] RUN  docker-tmpl: Docker installation
2025-11-26 22:58:58 - commands.deploy           - INFO -   [21] RUN  docker-tmpl: Docker service start
2025-11-26 22:58:58 - commands.deploy           - INFO -   [22] RUN  docker-tmpl: template cleanup
2025-11-26 22:58:58 - commands.deploy           - INFO -   [23] RUN  docker-tmpl: template archive creation
2025-11-26 22:58:58 - commands.deploy           - INFO -   [24] RUN  pgsql: create container
2025-11-26 22:58:58 - commands.deploy           - INFO -   [25] RUN  pgsql: cloud-init wait
2025-11-26 22:58:58 - commands.deploy           - INFO -   [26] RUN  pgsql: postgresql installation
2025-11-26 22:58:58 - commands.deploy           - INFO -   [27] RUN  pgsql: postgresql service configuration
2025-11-26 22:58:58 - commands.deploy           - INFO -   [28] RUN  pgsql: postgresql files configuration
2025-11-26 22:58:58 - commands.deploy           - INFO -   [29] RUN  pgsql: postgresql password setup
2025-11-26 22:58:58 - commands.deploy           - INFO -   [30] RUN  haproxy: create container
2025-11-26 22:58:58 - commands.deploy           - INFO -   [31] RUN  haproxy: cloud-init wait
2025-11-26 22:58:58 - commands.deploy           - INFO -   [32] RUN  haproxy: haproxy installation
2025-11-26 22:58:58 - commands.deploy           - INFO -   [33] RUN  haproxy: haproxy configuration
2025-11-26 22:58:58 - commands.deploy           - INFO -   [34] RUN  haproxy: haproxy systemd override
2025-11-26 22:58:58 - commands.deploy           - INFO -   [35] RUN  haproxy: haproxy service enablement
2025-11-26 22:58:58 - commands.deploy           - INFO -   [36] RUN  dns: create container
2025-11-26 22:58:58 - commands.deploy           - INFO -   [37] RUN  dns: cloud-init wait
2025-11-26 22:58:58 - commands.deploy           - INFO -   [38] RUN  dns: dotnet installation
2025-11-26 22:58:58 - commands.deploy           - INFO -   [39] RUN  dns: disable systemd resolved
2025-11-26 22:58:58 - commands.deploy           - INFO -   [40] RUN  dns: sins dns installation
2025-11-26 22:58:58 - commands.deploy           - INFO -   [41] RUN  dns: sins dns service configuration
2025-11-26 22:58:58 - commands.deploy           - INFO -   [42] RUN  dns: sins dns service enablement
2025-11-26 22:58:58 - commands.deploy           - INFO -   [43] RUN  swarm-manager: create container
2025-11-26 22:58:58 - commands.deploy           - INFO -   [44] RUN  swarm-manager: cloud-init wait
2025-11-26 22:58:58 - commands.deploy           - INFO -   [45] RUN  swarm-manager: lxc sysctl access configuration
2025-11-26 22:58:58 - commands.deploy           - INFO -   [46] RUN  swarm-manager: docker service start
2025-11-26 22:58:58 - commands.deploy           - INFO -   [47] RUN  swarm-manager: docker sysctl configuration
2025-11-26 22:58:58 - commands.deploy           - INFO -   [48] RUN  swarm-node-1: create container
2025-11-26 22:58:58 - commands.deploy           - INFO -   [49] RUN  swarm-node-1: cloud-init wait
2025-11-26 22:58:58 - commands.deploy           - INFO -   [50] RUN  swarm-node-1: docker service start
2025-11-26 22:58:58 - commands.deploy           - INFO -   [51] RUN  swarm-node-2: create container
2025-11-26 22:58:58 - commands.deploy           - INFO -   [52] RUN  swarm-node-2: cloud-init wait
2025-11-26 22:58:58 - commands.deploy           - INFO -   [53] RUN  swarm-node-2: docker service start
2025-11-26 22:58:58 - commands.deploy           - INFO - ==================================================
2025-11-26 22:58:58 - commands.deploy           - INFO - Executing Deployment
2025-11-26 22:58:58 - commands.deploy           - INFO - ==================================================
2025-11-26 22:58:58 - commands.deploy           - INFO - ==================================================
2025-11-26 22:58:58 - commands.deploy           - INFO - [Overall: 1%] [Step: 1/53] Executing: apt-cache - create container
2025-11-26 22:58:58 - commands.deploy           - INFO - ==================================================
2025-11-26 22:58:58 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 22:58:59 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 22:58:59 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 22:58:59 - services.ssh              - INFO - Running: pct destroy 3020 --force
2025-11-26 22:59:00 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/ubuntu-25.04-template_*_amd64.tar.zst 2>/dev/null | head -1 | xargs basename 2>/dev/null
2025-11-26 22:59:00 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst && echo exists || echo missing
2025-11-26 22:59:00 - services.template         - INFO - Base template not found. Downloading ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst...
2025-11-26 22:59:00 - services.template         - INFO - Running: pveam download local ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst
2025-11-26 22:59:00 - services.ssh              - INFO - Running: pveam download local ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst
2025-11-26 22:59:05 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst && echo exists || echo missing
2025-11-26 22:59:05 - services.template         - INFO - Template ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst downloaded successfully
2025-11-26 22:59:05 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst && test -r /var/lib/vz/template/cache/ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst && echo 'valid' || echo 'invalid'
2025-11-26 22:59:05 - actions.create_container  - INFO - Checking if container 3020 already exists...
2025-11-26 22:59:06 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 22:59:06 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 22:59:06 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 22:59:06 - services.ssh              - INFO - Running: pct list | grep '^3020 '
2025-11-26 22:59:07 - actions.create_container  - INFO - Creating container 3020 from template...
2025-11-26 22:59:07 - services.ssh              - INFO - Running: pct create 3020 /var/lib/vz/template/cache/ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst --hostname apt-cache --memory 2048 --swap 2048 --cores 4 --net0 name=eth0,bridge=vmbr0,firewall=0,gw=10.11.3.253,ip=10.11.3.20/24,ip6=dhcp,type=veth --rootfs sdb:20 --unprivileged 1 --ostype ubuntu --arch amd64
2025-11-26 22:59:15 - actions.create_container  - INFO - Setting container features...
2025-11-26 22:59:15 - services.ssh              - INFO - Running: pct set 3020 --features nesting=1,keyctl=1,fuse=1
2025-11-26 22:59:16 - actions.create_container  - INFO - Starting container 3020...
2025-11-26 22:59:16 - services.ssh              - INFO - Running: pct start 3020
2025-11-26 22:59:20 - actions.create_container  - INFO - Bringing up network interface...
2025-11-26 22:59:20 - services.pct              - INFO - Running in container 3020: ping -c 1 8.8.8.8
2025-11-26 22:59:20 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo cGluZyAtYyAxIDguOC44Ljg= | base64 -d | bash"
2025-11-26 22:59:22 - actions.create_container  - INFO - Network interface is up and reachable
2025-11-26 22:59:22 - services.pct              - INFO - Running in container 3020: id -u jaal >/dev/null 2>&1 || useradd -m -s /bin/bash -G sudo jaal
2025-11-26 22:59:22 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgfHwgdXNlcmFkZCAtbSAtcyAvYmluL2Jhc2ggLUcgc3VkbyBqYWFs | base64 -d | bash"
2025-11-26 22:59:23 - services.pct              - INFO - Running in container 3020: echo jaal:jaal123 | chpasswd
2025-11-26 22:59:23 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo ZWNobyBqYWFsOmphYWwxMjMgfCBjaHBhc3N3ZA== | base64 -d | bash"
2025-11-26 22:59:24 - actions.create_container  - INFO - Password set for user jaal
2025-11-26 22:59:24 - services.pct              - INFO - Running in container 3020: printf 'jaal ALL=(ALL) NOPASSWD: ALL
' > /etc/sudoers.d/jaal 2>&1
2025-11-26 22:59:24 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo cHJpbnRmICdqYWFsIEFMTD0oQUxMKSBOT1BBU1NXRDogQUxMCicgPiAvZXRjL3N1ZG9lcnMuZC9qYWFsIDI+JjE= | base64 -d | bash"
2025-11-26 22:59:25 - services.pct              - INFO - Running in container 3020: chmod 440 /etc/sudoers.d/jaal 2>&1
2025-11-26 22:59:25 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo Y2htb2QgNDQwIC9ldGMvc3Vkb2Vycy5kL2phYWwgMj4mMQ== | base64 -d | bash"
2025-11-26 22:59:26 - services.pct              - INFO - Running in container 3020: id -u jaal >/dev/null 2>&1 && echo 'exists' || echo 'missing'
2025-11-26 22:59:26 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyAnZXhpc3RzJyB8fCBlY2hvICdtaXNzaW5nJw== | base64 -d | bash"
2025-11-26 22:59:28 - services.pct              - INFO - Running in container 3020: mkdir -p /home/jaal/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /home/jaal/.ssh/authorized_keys && chmod 600 /home/jaal/.ssh/authorized_keys && chown jaal:jaal /home/jaal/.ssh/authorized_keys && chown -R jaal:jaal /home/jaal/.ssh && chmod 700 /home/jaal/.ssh
2025-11-26 22:59:28 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo bWtkaXIgLXAgL2hvbWUvamFhbC8uc3NoICYmIGVjaG8gYzNOb0xYSnpZU0JCUVVGQlFqTk9lbUZETVhsak1rVkJRVUZCUkVGUlFVSkJRVUZDWjFGRVNHaHpaeTlTUWxNeFpXOW1aRUowVDIxU1oyNXJObkpSWlZkTU5XVkVRMEZHVWxsaGRHOXRiMjV4ZWxaUVNHNVZhRWRCVjB4M2NFRnBibFJMV1RCaWNtVkhOMUozWTFCNlUzazRaa1V6YkhCQmVHUTNaRFUxTVZOcmIzZFJUM3BNVHpGaGRWSlVka05IWjBkS1RVTlphSE5wVDFSRVpHYzBlVU5IWkdoMWRsUnNaMGN5VDNnNFkwTkZXVGt6VG5Ob05HSnFXRE50Tm13NVluQnhWMkZ0Wkd4WU5WSklOV0pNZVhCNk5XeHhMME5rTTJWVWNISkdXRU5uY1VwUFkxSlVMemRCTWxSeFJHVklTM1pGTTNwWlRUWjBaV2RyWlN0a1VXRmtUalF4Y21nNWMxa3pTME5ITUhGbVJqVTRkRzR5Umt4NlNuZzNNMGc1ZDFKSFpVTlhlRlJvY2tZMWQxTjZaM0pHUkVsWlIxUktWRTFWY1V0bllrcFdWbGxYV0M5aVdTOXVVVmRVT0ZaUE5tWk1lbWtyTUhCQlQzbzVNekZ4TkdWdVNIUlBOVFpVTkRSaVJYRjBabWMxWkZONE4ySk1SMGx5TlRaSWJXeHVNVWRJYUc5MVZTdDFOelpqVmxSWFQyOXFSRlkxVkRGWGMxSkJWSFE0WVVRNU1EZERhVGszUmxBdk5EWmpValY1U2xSNFlWUndLM0I0VjNCdGFESjNZVWRsUkZKRVYxRnpkRVZzU0c5VGFuUlFlVzkxZVZWMVYySXpNVzlVUW14ck9FdDNaMDlsY0RONk1UZHhLMWxKYUZwWFVVZElkbTFqVWt0SU1sQkJPVGhKVW5CcFNsWlNlbVk0YzFoS01HTmthMjkxUVRWWFFsTkVaV2RVYjBJMVZ6ZFJVRzFsYUVVOUlITm9ZV1J2ZDJOb1lXMWlaWEpBVTJoaFpHOTNZMmhoYldKbGNuTXRUV0ZqTFcxcGJta3ViRzlqWVd3PSB8IGJhc2U2NCAtZCA+IC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2htb2QgNjAwIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gLVIgamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaCAmJiBjaG1vZCA3MDAgL2hvbWUvamFhbC8uc3No | base64 -d | bash"
2025-11-26 22:59:29 - services.pct              - INFO - Running in container 3020: mkdir -p /root/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /root/.ssh/authorized_keys && chmod 600 /root/.ssh/authorized_keys
2025-11-26 22:59:29 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo bWtkaXIgLXAgL3Jvb3QvLnNzaCAmJiBlY2hvIGMzTm9MWEp6WVNCQlFVRkJRak5PZW1GRE1YbGpNa1ZCUVVGQlJFRlJRVUpCUVVGQ1oxRkVTR2h6Wnk5U1FsTXhaVzltWkVKMFQyMVNaMjVyTm5KUlpWZE1OV1ZFUTBGR1VsbGhkRzl0YjI1eGVsWlFTRzVWYUVkQlYweDNjRUZwYmxSTFdUQmljbVZITjFKM1kxQjZVM2s0WmtVemJIQkJlR1EzWkRVMU1WTnJiM2RSVDNwTVR6RmhkVkpVZGtOSFowZEtUVU5aYUhOcFQxUkVaR2MwZVVOSFpHaDFkbFJzWjBjeVQzZzRZME5GV1RrelRuTm9OR0pxV0ROdE5tdzVZbkJ4VjJGdFpHeFlOVkpJTldKTWVYQjZOV3h4TDBOa00yVlVjSEpHV0VObmNVcFBZMUpVTHpkQk1sUnhSR1ZJUzNaRk0zcFpUVFowWldkclpTdGtVV0ZrVGpReGNtZzVjMWt6UzBOSE1IRm1SalU0ZEc0eVJreDZTbmczTTBnNWQxSkhaVU5YZUZSb2NrWTFkMU42WjNKR1JFbFpSMVJLVkUxVmNVdG5Za3BXVmxsWFdDOWlXUzl1VVZkVU9GWlBObVpNZW1rck1IQkJUM281TXpGeE5HVnVTSFJQTlRaVU5EUmlSWEYwWm1jMVpGTjROMkpNUjBseU5UWkliV3h1TVVkSWFHOTFWU3QxTnpaalZsUlhUMjlxUkZZMVZERlhjMUpCVkhRNFlVUTVNRGREYVRrM1JsQXZORFpqVWpWNVNsUjRZVlJ3SzNCNFYzQnRhREozWVVkbFJGSkVWMUZ6ZEVWc1NHOVRhblJRZVc5MWVWVjFWMkl6TVc5VVFteHJPRXQzWjA5bGNETjZNVGR4SzFsSmFGcFhVVWRJZG0xalVrdElNbEJCT1RoSlVuQnBTbFpTZW1ZNGMxaEtNR05rYTI5MVFUVlhRbE5FWldkVWIwSTFWemRSVUcxbGFFVTlJSE5vWVdSdmQyTm9ZVzFpWlhKQVUyaGhaRzkzWTJoaGJXSmxjbk10VFdGakxXMXBibWt1Ykc5allXdz0gfCBiYXNlNjQgLWQgPiAvcm9vdC8uc3NoL2F1dGhvcml6ZWRfa2V5cyAmJiBjaG1vZCA2MDAgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXM= | base64 -d | bash"
2025-11-26 22:59:30 - services.pct              - INFO - Running in container 3020: test -f /home/jaal/.ssh/authorized_keys && test -f /root/.ssh/authorized_keys && echo 'keys_exist' || echo 'keys_missing'
2025-11-26 22:59:30 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo dGVzdCAtZiAvaG9tZS9qYWFsLy5zc2gvYXV0aG9yaXplZF9rZXlzICYmIHRlc3QgLWYgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgZWNobyAna2V5c19leGlzdCcgfHwgZWNobyAna2V5c19taXNzaW5nJw== | base64 -d | bash"
2025-11-26 22:59:31 - services.pct              - INFO - SSH key setup verified successfully
2025-11-26 22:59:31 - services.pct              - INFO - Running in container 3020: dpkg -l | grep -q '^ii.*openssh-server' || echo 'not_installed'
2025-11-26 22:59:31 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo ZHBrZyAtbCB8IGdyZXAgLXEgJ15paS4qb3BlbnNzaC1zZXJ2ZXInIHx8IGVjaG8gJ25vdF9pbnN0YWxsZWQn | base64 -d | bash"
2025-11-26 22:59:32 - services.pct              - INFO - Running in container 3020: systemctl enable ssh 2>&1
2025-11-26 22:59:32 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 22:59:34 - services.pct              - INFO - Running in container 3020: systemctl start ssh 2>&1
2025-11-26 22:59:34 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 22:59:38 - services.pct              - INFO - Running in container 3020: systemctl is-active ssh 2>/dev/null || echo inactive
2025-11-26 22:59:38 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBzc2ggMj4vZGV2L251bGwgfHwgZWNobyBpbmFjdGl2ZQ== | base64 -d | bash"
2025-11-26 22:59:39 - services.pct              - INFO - SSH service is running
2025-11-26 22:59:39 - services.pct              - INFO - Running in container 3020: ss -tlnp | grep ':22 ' || netstat -tlnp 2>/dev/null | grep ':22 ' || echo 'not_listening'
2025-11-26 22:59:39 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo c3MgLXRsbnAgfCBncmVwICc6MjIgJyB8fCBuZXRzdGF0IC10bG5wIDI+L2Rldi9udWxsIHwgZ3JlcCAnOjIyICcgfHwgZWNobyAnbm90X2xpc3RlbmluZyc= | base64 -d | bash"
2025-11-26 22:59:41 - services.pct              - INFO - SSH listening check: LISTEN 0      4096         0.0.0.0:22        0.0.0.0:*    users:(("sshd",pid=431,fd=3),("systemd",pid=1,fd=120))
LISTEN 0      4096            [::]:22           [::]:*    users:(("sshd",pid=431,fd=4),("systemd",pid=1,fd=121))
2025-11-26 22:59:41 - services.pct              - INFO - Running in container 3020: grep -E '^ListenAddress|^#ListenAddress' /etc/ssh/sshd_config 2>/dev/null | head -5 || echo 'config_check_failed'
2025-11-26 22:59:41 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo Z3JlcCAtRSAnXkxpc3RlbkFkZHJlc3N8XiNMaXN0ZW5BZGRyZXNzJyAvZXRjL3NzaC9zc2hkX2NvbmZpZyAyPi9kZXYvbnVsbCB8IGhlYWQgLTUgfHwgZWNobyAnY29uZmlnX2NoZWNrX2ZhaWxlZCc= | base64 -d | bash"
2025-11-26 22:59:42 - services.pct              - INFO - SSH config check: #ListenAddress 0.0.0.0
#ListenAddress ::
2025-11-26 22:59:42 - services.pct              - INFO - Running in container 3020: timeout 1 bash -c '</dev/tcp/127.0.0.1/22' 2>&1 && echo 'localhost_ok' || echo 'localhost_failed'
2025-11-26 22:59:42 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo dGltZW91dCAxIGJhc2ggLWMgJzwvZGV2L3RjcC8xMjcuMC4wLjEvMjInIDI+JjEgJiYgZWNobyAnbG9jYWxob3N0X29rJyB8fCBlY2hvICdsb2NhbGhvc3RfZmFpbGVkJw== | base64 -d | bash"
2025-11-26 22:59:43 - services.pct              - INFO - SSH localhost connection test: localhost_ok
2025-11-26 22:59:43 - actions.create_container  - INFO - Waiting for container to be ready with SSH connectivity (up to 10 minutes)...
2025-11-26 22:59:43 - services.ssh              - INFO - Running: pct status 3020
2025-11-26 22:59:44 - services.pct              - INFO - Running in container 3020: echo test
2025-11-26 22:59:44 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo ZWNobyB0ZXN0 | base64 -d | bash"
2025-11-26 22:59:45 - services.pct              - INFO - Testing SSH connection to jaal@10.11.3.20...
2025-11-26 22:59:45 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 22:59:45 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 22:59:45 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.20
2025-11-26 22:59:45 - services.ssh              - INFO - Running: echo 'SSH connection test successful'
2025-11-26 22:59:46 - services.pct              - INFO - SSH connectivity verified - connection successful
2025-11-26 22:59:46 - services.pct              - INFO - Container is ready and SSH is accessible!
2025-11-26 22:59:46 - actions.create_container  - INFO - Container 3020 created successfully
2025-11-26 22:59:46 - commands.deploy           - INFO - Container 'apt-cache' created successfully
2025-11-26 22:59:46 - commands.deploy           - INFO - Setting up SSH connection to container apt-cache...
2025-11-26 22:59:46 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 22:59:46 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 22:59:46 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.20
2025-11-26 22:59:48 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 22:59:49 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 22:59:49 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 22:59:49 - commands.deploy           - INFO - ==================================================
2025-11-26 22:59:49 - commands.deploy           - INFO - [Overall: 3%] [Step: 2/53] Executing: apt-cache - cloud-init wait
2025-11-26 22:59:49 - commands.deploy           - INFO - ==================================================
2025-11-26 22:59:49 - services.ssh              - INFO - Running: command -v cloud-init
2025-11-26 22:59:49 - actions.cloud_init_wait   - INFO - cloud-init not found, skipping
2025-11-26 22:59:49 - commands.deploy           - INFO - Action 'cloud-init wait' for container 'apt-cache' completed successfully
2025-11-26 22:59:49 - commands.deploy           - INFO - ==================================================
2025-11-26 22:59:49 - commands.deploy           - INFO - [Overall: 5%] [Step: 3/53] Executing: apt-cache - AppArmor parser stub
2025-11-26 22:59:49 - commands.deploy           - INFO - ==================================================
2025-11-26 22:59:49 - services.ssh              - INFO - Running: sudo -n bash -c 'echo CkFQUEFSTU9SX0JJTj0vdXNyL3NiaW4vYXBwYXJtb3JfcGFyc2VyCmlmIGNvbW1hbmQgLXYgZHBrZy1kaXZlcnQgPi9kZXYvbnVsbCAyPiYxICYmIFsgLWYgIiRBUFBBUk1PUl9CSU4iIF07IHRoZW4KICBkcGtnLWRpdmVydCAtLXF1aWV0IC0tbG9jYWwgLS1yZW5hbWUgLS1hZGQgIiRBUFBBUk1PUl9CSU4iID4vZGV2L251bGwgMj4mMSB8fCB0cnVlCiAgaWYgWyAtZiAiJEFQUEFSTU9SX0JJTi5kaXN0cmliIiBdOyB0aGVuCiAgICBjYXQgPDwnQVBQQVJNT1JfU1RVQicgPiAiJEFQUEFSTU9SX0JJTiIKIyEvYmluL3NoCmlmIFsgIiQxIiA9ICItLXZlcnNpb24iIF0gfHwgWyAiJDEiID0gIi1WIiBdOyB0aGVuCiAgZXhlYyAvdXNyL3NiaW4vYXBwYXJtb3JfcGFyc2VyLmRpc3RyaWIgIiRAIgpmaQpleGl0IDAKQVBQQVJNT1JfU1RVQgogICAgY2htb2QgK3ggIiRBUFBBUk1PUl9CSU4iIDI+L2Rldi9udWxsIHx8IHRydWUKICBmaQpmaQplY2hvIGFwcGFybW9yX3N0dWJfZG9uZQo= | base64 -d | bash'
2025-11-26 22:59:49 - commands.deploy           - INFO - Action 'AppArmor parser stub' for container 'apt-cache' completed successfully
2025-11-26 22:59:49 - commands.deploy           - INFO - ==================================================
2025-11-26 22:59:49 - commands.deploy           - INFO - [Overall: 7%] [Step: 4/53] Executing: apt-cache - disable automatic apt units
2025-11-26 22:59:49 - commands.deploy           - INFO - ==================================================
2025-11-26 22:59:49 - services.ssh              - INFO - Running: sudo -n bash -c 'for unit in apt-daily.service apt-daily.timer apt-daily-upgrade.service apt-daily-upgrade.timer; do systemctl stop "$unit" 2>/dev/null || true; systemctl disable "$unit" 2>/dev/null || true; systemctl mask "$unit" 2>/dev/null || true; done'
2025-11-26 22:59:50 - commands.deploy           - INFO - Action 'disable automatic apt units' for container 'apt-cache' completed successfully
2025-11-26 22:59:50 - commands.deploy           - INFO - ==================================================
2025-11-26 22:59:50 - commands.deploy           - INFO - [Overall: 9%] [Step: 5/53] Executing: apt-cache - systemd sysctl override
2025-11-26 22:59:50 - commands.deploy           - INFO - ==================================================
2025-11-26 22:59:50 - services.pct              - INFO - Running in container 3020: mkdir -p /etc/systemd/system/systemd-sysctl.service.d 2>&1
2025-11-26 22:59:50 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo bWtkaXIgLXAgL2V0Yy9zeXN0ZW1kL3N5c3RlbS9zeXN0ZW1kLXN5c2N0bC5zZXJ2aWNlLmQgMj4mMQ== | base64 -d | bash"
2025-11-26 22:59:51 - services.pct              - INFO - Running in container 3020: printf '[Service]
ImportCredential=
' > /etc/systemd/system/systemd-sysctl.service.d/override.conf 2>&1
2025-11-26 22:59:51 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo cHJpbnRmICdbU2VydmljZV0KSW1wb3J0Q3JlZGVudGlhbD0KJyA+IC9ldGMvc3lzdGVtZC9zeXN0ZW0vc3lzdGVtZC1zeXNjdGwuc2VydmljZS5kL292ZXJyaWRlLmNvbmYgMj4mMQ== | base64 -d | bash"
2025-11-26 22:59:53 - services.pct              - INFO - Running in container 3020: systemctl daemon-reload && systemctl stop systemd-sysctl.service 2>/dev/null || true && systemctl start systemd-sysctl.service 2>/dev/null || true
2025-11-26 22:59:53 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo c3lzdGVtY3RsIGRhZW1vbi1yZWxvYWQgJiYgc3lzdGVtY3RsIHN0b3Agc3lzdGVtZC1zeXNjdGwuc2VydmljZSAyPi9kZXYvbnVsbCB8fCB0cnVlICYmIHN5c3RlbWN0bCBzdGFydCBzeXN0ZW1kLXN5c2N0bC5zZXJ2aWNlIDI+L2Rldi9udWxsIHx8IHRydWU= | base64 -d | bash"
2025-11-26 22:59:54 - commands.deploy           - INFO - Action 'systemd sysctl override' for container 'apt-cache' completed successfully
2025-11-26 22:59:54 - commands.deploy           - INFO - ==================================================
2025-11-26 22:59:54 - commands.deploy           - INFO - [Overall: 11%] [Step: 6/53] Executing: apt-cache - apt-cacher-ng installation
2025-11-26 22:59:54 - commands.deploy           - INFO - ==================================================
2025-11-26 22:59:54 - actions.install_apt_cacher - INFO - Installing apt-cacher-ng package...
2025-11-26 22:59:54 - services.ssh              - INFO - Running: sudo -n bash -c 'echo ZWNobyAnYXB0LWNhY2hlci1uZyBhcHQtY2FjaGVyLW5nL3R1bm5lbGVuYWJsZSBib29sZWFuIGZhbHNlCmFwdC1jYWNoZXItbmcgYXB0LWNhY2hlci1uZy9iaW5kYWRkcmVzcyBzdHJpbmcgMC4wLjAuMAonIHwgZGViY29uZi1zZXQtc2VsZWN0aW9ucw== | base64 -d | bash'
2025-11-26 22:59:54 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 22:59:54 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 22:59:55 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 22:59:55 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 22:59:55 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 22:59:55 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 22:59:55 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 22:59:55 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 22:59:55 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 22:59:55 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 22:59:55 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 22:59:56 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 22:59:56 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 22:59:56 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 22:59:56 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 22:59:56 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 22:59:56 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 22:59:56 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 22:59:56 - services.ssh              - INFO - Running: sudo -n apt-get update -o APT::Get::Hide-Progress=true < /dev/null
2025-11-26 23:00:00 - services.apt              - INFO - apt update succeeded on attempt 1/20
2025-11-26 23:00:00 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:00:00 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:00:00 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:00:01 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:00:01 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:00:01 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:00:01 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:00:01 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:00:01 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:00:01 - services.ssh              - INFO - Running: sudo -n DEBIAN_PRIORITY=critical DEBIAN_FRONTEND=noninteractive apt-get install -y -o Dpkg::Options::=--force-confdef -o Dpkg::Options::=--force-confold -o DPkg::Pre-Install-Pkgs='' -o APT::Get::Hide-Progress=true apt-cacher-ng < /dev/null
2025-11-26 23:00:06 - services.ssh              - INFO - Running: command -v apt-cacher-ng >/dev/null && echo exists || echo not_found
2025-11-26 23:00:07 - services.ssh              - INFO - Running: systemctl list-unit-files apt-cacher-ng.service 2>&1 | grep -q apt-cacher-ng.service && echo 'exists' || echo 'missing'
2025-11-26 23:00:07 - commands.deploy           - INFO - Action 'apt-cacher-ng installation' for container 'apt-cache' completed successfully
2025-11-26 23:00:07 - commands.deploy           - INFO - ==================================================
2025-11-26 23:00:07 - commands.deploy           - INFO - [Overall: 13%] [Step: 7/53] Executing: apt-cache - apt-cacher-ng port configuration
2025-11-26 23:00:07 - commands.deploy           - INFO - ==================================================
2025-11-26 23:00:07 - services.ssh              - INFO - Running: sudo -n bash -c 'sed -i '"'"'s/^#\s*Port:.*/Port: 3142/'"'"' /etc/apt-cacher-ng/acng.conf 2>&1'
2025-11-26 23:00:07 - actions.configure_cache_port - INFO - Configuring apt-cacher-ng timeout and retry settings...
2025-11-26 23:00:07 - services.ssh              - INFO - Running: sudo -n bash -c 'grep -E '"'"'^#?DlMaxRetries:'"'"' /etc/apt-cacher-ng/acng.conf || echo '"'"'not_found'"'"''
2025-11-26 23:00:07 - services.ssh              - INFO - Running: sudo -n bash -c 'echo cHJpbnRmICdEbE1heFJldHJpZXM6IDUKJyA+PiAvZXRjL2FwdC1jYWNoZXItbmcvYWNuZy5jb25mIDI+JjE= | base64 -d | bash'
2025-11-26 23:00:07 - services.ssh              - INFO - Running: sudo -n bash -c 'grep -E '"'"'^#?NetworkTimeout:'"'"' /etc/apt-cacher-ng/acng.conf || echo '"'"'not_found'"'"''
2025-11-26 23:00:07 - services.ssh              - INFO - Running: sudo -n bash -c 'echo cHJpbnRmICdOZXR3b3JrVGltZW91dDogMTIwCicgPj4gL2V0Yy9hcHQtY2FjaGVyLW5nL2FjbmcuY29uZiAyPiYx | base64 -d | bash'
2025-11-26 23:00:07 - services.ssh              - INFO - Running: sudo -n bash -c 'grep -E '"'"'^#?DisconnectTimeout:'"'"' /etc/apt-cacher-ng/acng.conf || echo '"'"'not_found'"'"''
2025-11-26 23:00:07 - services.ssh              - INFO - Running: sudo -n bash -c 'echo cHJpbnRmICdEaXNjb25uZWN0VGltZW91dDogMzAKJyA+PiAvZXRjL2FwdC1jYWNoZXItbmcvYWNuZy5jb25mIDI+JjE= | base64 -d | bash'
2025-11-26 23:00:07 - actions.configure_cache_port - INFO - Restarting apt-cacher-ng service to apply configuration changes...
2025-11-26 23:00:07 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl restart apt-cacher-ng 2>&1'
2025-11-26 23:00:09 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active apt-cacher-ng 2>/dev/null || echo inactive'
2025-11-26 23:00:09 - commands.deploy           - INFO - Action 'apt-cacher-ng port configuration' for container 'apt-cache' completed successfully
2025-11-26 23:00:09 - commands.deploy           - INFO - ==================================================
2025-11-26 23:00:09 - commands.deploy           - INFO - [Overall: 15%] [Step: 8/53] Executing: apt-cache - apt-cacher-ng service enablement
2025-11-26 23:00:09 - commands.deploy           - INFO - ==================================================
2025-11-26 23:00:09 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl enable apt-cacher-ng 2>&1'
2025-11-26 23:00:10 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl restart apt-cacher-ng 2>&1'
2025-11-26 23:00:12 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active apt-cacher-ng 2>/dev/null || echo inactive'
2025-11-26 23:00:14 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active apt-cacher-ng 2>/dev/null || echo inactive'
2025-11-26 23:00:14 - commands.deploy           - INFO - Action 'apt-cacher-ng service enablement' for container 'apt-cache' completed successfully
2025-11-26 23:00:14 - commands.deploy           - INFO - ==================================================
2025-11-26 23:00:14 - commands.deploy           - INFO - [Overall: 16%] [Step: 9/53] Executing: ubuntu-tmpl - create container
2025-11-26 23:00:14 - commands.deploy           - INFO - ==================================================
2025-11-26 23:00:15 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:00:15 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:00:15 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:00:15 - services.ssh              - INFO - Running: pct destroy 3010 --force
2025-11-26 23:00:16 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst && echo exists || echo missing
2025-11-26 23:00:16 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst && test -r /var/lib/vz/template/cache/ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst && echo 'valid' || echo 'invalid'
2025-11-26 23:00:16 - actions.create_container  - INFO - Checking if container 3010 already exists...
2025-11-26 23:00:17 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:00:17 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:00:17 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:00:17 - services.ssh              - INFO - Running: pct list | grep '^3010 '
2025-11-26 23:00:18 - actions.create_container  - INFO - Creating container 3010 from template...
2025-11-26 23:00:18 - services.ssh              - INFO - Running: pct create 3010 /var/lib/vz/template/cache/ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst --hostname ubuntu-tmpl --memory 2048 --swap 2048 --cores 4 --net0 name=eth0,bridge=vmbr0,firewall=0,gw=10.11.3.253,ip=10.11.3.10/24,ip6=dhcp,type=veth --rootfs sdb:20 --unprivileged 1 --ostype ubuntu --arch amd64
2025-11-26 23:00:24 - actions.create_container  - INFO - Setting container features...
2025-11-26 23:00:24 - services.ssh              - INFO - Running: pct set 3010 --features nesting=1,keyctl=1,fuse=1
2025-11-26 23:00:26 - actions.create_container  - INFO - Starting container 3010...
2025-11-26 23:00:26 - services.ssh              - INFO - Running: pct start 3010
2025-11-26 23:00:30 - actions.create_container  - INFO - Bringing up network interface...
2025-11-26 23:00:30 - services.pct              - INFO - Running in container 3010: ping -c 1 8.8.8.8
2025-11-26 23:00:30 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo cGluZyAtYyAxIDguOC44Ljg= | base64 -d | bash"
2025-11-26 23:00:31 - actions.create_container  - INFO - Network interface is up and reachable
2025-11-26 23:00:31 - services.pct              - INFO - Running in container 3010: id -u jaal >/dev/null 2>&1 || useradd -m -s /bin/bash -G sudo jaal
2025-11-26 23:00:31 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgfHwgdXNlcmFkZCAtbSAtcyAvYmluL2Jhc2ggLUcgc3VkbyBqYWFs | base64 -d | bash"
2025-11-26 23:00:32 - services.pct              - INFO - Running in container 3010: echo jaal:jaal123 | chpasswd
2025-11-26 23:00:32 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo ZWNobyBqYWFsOmphYWwxMjMgfCBjaHBhc3N3ZA== | base64 -d | bash"
2025-11-26 23:00:33 - actions.create_container  - INFO - Password set for user jaal
2025-11-26 23:00:33 - services.pct              - INFO - Running in container 3010: printf 'jaal ALL=(ALL) NOPASSWD: ALL
' > /etc/sudoers.d/jaal 2>&1
2025-11-26 23:00:33 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo cHJpbnRmICdqYWFsIEFMTD0oQUxMKSBOT1BBU1NXRDogQUxMCicgPiAvZXRjL3N1ZG9lcnMuZC9qYWFsIDI+JjE= | base64 -d | bash"
2025-11-26 23:00:34 - services.pct              - INFO - Running in container 3010: chmod 440 /etc/sudoers.d/jaal 2>&1
2025-11-26 23:00:34 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo Y2htb2QgNDQwIC9ldGMvc3Vkb2Vycy5kL2phYWwgMj4mMQ== | base64 -d | bash"
2025-11-26 23:00:36 - services.pct              - INFO - Running in container 3010: id -u jaal >/dev/null 2>&1 && echo 'exists' || echo 'missing'
2025-11-26 23:00:36 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyAnZXhpc3RzJyB8fCBlY2hvICdtaXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:00:37 - services.pct              - INFO - Running in container 3010: mkdir -p /home/jaal/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /home/jaal/.ssh/authorized_keys && chmod 600 /home/jaal/.ssh/authorized_keys && chown jaal:jaal /home/jaal/.ssh/authorized_keys && chown -R jaal:jaal /home/jaal/.ssh && chmod 700 /home/jaal/.ssh
2025-11-26 23:00:37 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo bWtkaXIgLXAgL2hvbWUvamFhbC8uc3NoICYmIGVjaG8gYzNOb0xYSnpZU0JCUVVGQlFqTk9lbUZETVhsak1rVkJRVUZCUkVGUlFVSkJRVUZDWjFGRVNHaHpaeTlTUWxNeFpXOW1aRUowVDIxU1oyNXJObkpSWlZkTU5XVkVRMEZHVWxsaGRHOXRiMjV4ZWxaUVNHNVZhRWRCVjB4M2NFRnBibFJMV1RCaWNtVkhOMUozWTFCNlUzazRaa1V6YkhCQmVHUTNaRFUxTVZOcmIzZFJUM3BNVHpGaGRWSlVka05IWjBkS1RVTlphSE5wVDFSRVpHYzBlVU5IWkdoMWRsUnNaMGN5VDNnNFkwTkZXVGt6VG5Ob05HSnFXRE50Tm13NVluQnhWMkZ0Wkd4WU5WSklOV0pNZVhCNk5XeHhMME5rTTJWVWNISkdXRU5uY1VwUFkxSlVMemRCTWxSeFJHVklTM1pGTTNwWlRUWjBaV2RyWlN0a1VXRmtUalF4Y21nNWMxa3pTME5ITUhGbVJqVTRkRzR5Umt4NlNuZzNNMGc1ZDFKSFpVTlhlRlJvY2tZMWQxTjZaM0pHUkVsWlIxUktWRTFWY1V0bllrcFdWbGxYV0M5aVdTOXVVVmRVT0ZaUE5tWk1lbWtyTUhCQlQzbzVNekZ4TkdWdVNIUlBOVFpVTkRSaVJYRjBabWMxWkZONE4ySk1SMGx5TlRaSWJXeHVNVWRJYUc5MVZTdDFOelpqVmxSWFQyOXFSRlkxVkRGWGMxSkJWSFE0WVVRNU1EZERhVGszUmxBdk5EWmpValY1U2xSNFlWUndLM0I0VjNCdGFESjNZVWRsUkZKRVYxRnpkRVZzU0c5VGFuUlFlVzkxZVZWMVYySXpNVzlVUW14ck9FdDNaMDlsY0RONk1UZHhLMWxKYUZwWFVVZElkbTFqVWt0SU1sQkJPVGhKVW5CcFNsWlNlbVk0YzFoS01HTmthMjkxUVRWWFFsTkVaV2RVYjBJMVZ6ZFJVRzFsYUVVOUlITm9ZV1J2ZDJOb1lXMWlaWEpBVTJoaFpHOTNZMmhoYldKbGNuTXRUV0ZqTFcxcGJta3ViRzlqWVd3PSB8IGJhc2U2NCAtZCA+IC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2htb2QgNjAwIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gLVIgamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaCAmJiBjaG1vZCA3MDAgL2hvbWUvamFhbC8uc3No | base64 -d | bash"
2025-11-26 23:00:38 - services.pct              - INFO - Running in container 3010: mkdir -p /root/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /root/.ssh/authorized_keys && chmod 600 /root/.ssh/authorized_keys
2025-11-26 23:00:38 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo bWtkaXIgLXAgL3Jvb3QvLnNzaCAmJiBlY2hvIGMzTm9MWEp6WVNCQlFVRkJRak5PZW1GRE1YbGpNa1ZCUVVGQlJFRlJRVUpCUVVGQ1oxRkVTR2h6Wnk5U1FsTXhaVzltWkVKMFQyMVNaMjVyTm5KUlpWZE1OV1ZFUTBGR1VsbGhkRzl0YjI1eGVsWlFTRzVWYUVkQlYweDNjRUZwYmxSTFdUQmljbVZITjFKM1kxQjZVM2s0WmtVemJIQkJlR1EzWkRVMU1WTnJiM2RSVDNwTVR6RmhkVkpVZGtOSFowZEtUVU5aYUhOcFQxUkVaR2MwZVVOSFpHaDFkbFJzWjBjeVQzZzRZME5GV1RrelRuTm9OR0pxV0ROdE5tdzVZbkJ4VjJGdFpHeFlOVkpJTldKTWVYQjZOV3h4TDBOa00yVlVjSEpHV0VObmNVcFBZMUpVTHpkQk1sUnhSR1ZJUzNaRk0zcFpUVFowWldkclpTdGtVV0ZrVGpReGNtZzVjMWt6UzBOSE1IRm1SalU0ZEc0eVJreDZTbmczTTBnNWQxSkhaVU5YZUZSb2NrWTFkMU42WjNKR1JFbFpSMVJLVkUxVmNVdG5Za3BXVmxsWFdDOWlXUzl1VVZkVU9GWlBObVpNZW1rck1IQkJUM281TXpGeE5HVnVTSFJQTlRaVU5EUmlSWEYwWm1jMVpGTjROMkpNUjBseU5UWkliV3h1TVVkSWFHOTFWU3QxTnpaalZsUlhUMjlxUkZZMVZERlhjMUpCVkhRNFlVUTVNRGREYVRrM1JsQXZORFpqVWpWNVNsUjRZVlJ3SzNCNFYzQnRhREozWVVkbFJGSkVWMUZ6ZEVWc1NHOVRhblJRZVc5MWVWVjFWMkl6TVc5VVFteHJPRXQzWjA5bGNETjZNVGR4SzFsSmFGcFhVVWRJZG0xalVrdElNbEJCT1RoSlVuQnBTbFpTZW1ZNGMxaEtNR05rYTI5MVFUVlhRbE5FWldkVWIwSTFWemRSVUcxbGFFVTlJSE5vWVdSdmQyTm9ZVzFpWlhKQVUyaGhaRzkzWTJoaGJXSmxjbk10VFdGakxXMXBibWt1Ykc5allXdz0gfCBiYXNlNjQgLWQgPiAvcm9vdC8uc3NoL2F1dGhvcml6ZWRfa2V5cyAmJiBjaG1vZCA2MDAgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXM= | base64 -d | bash"
2025-11-26 23:00:39 - services.pct              - INFO - Running in container 3010: test -f /home/jaal/.ssh/authorized_keys && test -f /root/.ssh/authorized_keys && echo 'keys_exist' || echo 'keys_missing'
2025-11-26 23:00:39 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo dGVzdCAtZiAvaG9tZS9qYWFsLy5zc2gvYXV0aG9yaXplZF9rZXlzICYmIHRlc3QgLWYgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgZWNobyAna2V5c19leGlzdCcgfHwgZWNobyAna2V5c19taXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:00:40 - services.pct              - INFO - SSH key setup verified successfully
2025-11-26 23:00:40 - services.pct              - INFO - Running in container 3010: dpkg -l | grep -q '^ii.*openssh-server' || echo 'not_installed'
2025-11-26 23:00:40 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo ZHBrZyAtbCB8IGdyZXAgLXEgJ15paS4qb3BlbnNzaC1zZXJ2ZXInIHx8IGVjaG8gJ25vdF9pbnN0YWxsZWQn | base64 -d | bash"
2025-11-26 23:00:41 - services.pct              - INFO - Running in container 3010: systemctl enable ssh 2>&1
2025-11-26 23:00:41 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 23:00:43 - services.pct              - INFO - Running in container 3010: systemctl start ssh 2>&1
2025-11-26 23:00:43 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 23:00:47 - services.pct              - INFO - Running in container 3010: systemctl is-active ssh 2>/dev/null || echo inactive
2025-11-26 23:00:47 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBzc2ggMj4vZGV2L251bGwgfHwgZWNobyBpbmFjdGl2ZQ== | base64 -d | bash"
2025-11-26 23:00:48 - services.pct              - INFO - SSH service is running
2025-11-26 23:00:48 - services.pct              - INFO - Running in container 3010: ss -tlnp | grep ':22 ' || netstat -tlnp 2>/dev/null | grep ':22 ' || echo 'not_listening'
2025-11-26 23:00:48 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo c3MgLXRsbnAgfCBncmVwICc6MjIgJyB8fCBuZXRzdGF0IC10bG5wIDI+L2Rldi9udWxsIHwgZ3JlcCAnOjIyICcgfHwgZWNobyAnbm90X2xpc3RlbmluZyc= | base64 -d | bash"
2025-11-26 23:00:50 - services.pct              - INFO - SSH listening check: LISTEN 0      4096         0.0.0.0:22        0.0.0.0:*    users:(("sshd",pid=435,fd=3),("systemd",pid=1,fd=96))
LISTEN 0      4096            [::]:22           [::]:*    users:(("sshd",pid=435,fd=4),("systemd",pid=1,fd=97))
2025-11-26 23:00:50 - services.pct              - INFO - Running in container 3010: grep -E '^ListenAddress|^#ListenAddress' /etc/ssh/sshd_config 2>/dev/null | head -5 || echo 'config_check_failed'
2025-11-26 23:00:50 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo Z3JlcCAtRSAnXkxpc3RlbkFkZHJlc3N8XiNMaXN0ZW5BZGRyZXNzJyAvZXRjL3NzaC9zc2hkX2NvbmZpZyAyPi9kZXYvbnVsbCB8IGhlYWQgLTUgfHwgZWNobyAnY29uZmlnX2NoZWNrX2ZhaWxlZCc= | base64 -d | bash"
2025-11-26 23:00:51 - services.pct              - INFO - SSH config check: #ListenAddress 0.0.0.0
#ListenAddress ::
2025-11-26 23:00:51 - services.pct              - INFO - Running in container 3010: timeout 1 bash -c '</dev/tcp/127.0.0.1/22' 2>&1 && echo 'localhost_ok' || echo 'localhost_failed'
2025-11-26 23:00:51 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo dGltZW91dCAxIGJhc2ggLWMgJzwvZGV2L3RjcC8xMjcuMC4wLjEvMjInIDI+JjEgJiYgZWNobyAnbG9jYWxob3N0X29rJyB8fCBlY2hvICdsb2NhbGhvc3RfZmFpbGVkJw== | base64 -d | bash"
2025-11-26 23:00:52 - services.pct              - INFO - SSH localhost connection test: localhost_ok
2025-11-26 23:00:52 - actions.create_container  - INFO - Waiting for container to be ready with SSH connectivity (up to 10 minutes)...
2025-11-26 23:00:52 - services.ssh              - INFO - Running: pct status 3010
2025-11-26 23:00:53 - services.pct              - INFO - Running in container 3010: echo test
2025-11-26 23:00:53 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo ZWNobyB0ZXN0 | base64 -d | bash"
2025-11-26 23:00:54 - services.pct              - INFO - Testing SSH connection to jaal@10.11.3.10...
2025-11-26 23:00:54 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:00:55 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:00:55 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.10
2025-11-26 23:00:55 - services.ssh              - INFO - Running: echo 'SSH connection test successful'
2025-11-26 23:00:55 - services.pct              - INFO - SSH connectivity verified - connection successful
2025-11-26 23:00:55 - services.pct              - INFO - Container is ready and SSH is accessible!
2025-11-26 23:00:55 - actions.create_container  - INFO - Container 3010 created successfully
2025-11-26 23:00:55 - commands.deploy           - INFO - Container 'ubuntu-tmpl' created successfully
2025-11-26 23:00:55 - commands.deploy           - INFO - Setting up SSH connection to container ubuntu-tmpl...
2025-11-26 23:00:55 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:00:55 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:00:55 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.10
2025-11-26 23:00:58 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:00:58 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:00:58 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:00:58 - commands.deploy           - INFO - ==================================================
2025-11-26 23:00:58 - commands.deploy           - INFO - [Overall: 18%] [Step: 10/53] Executing: ubuntu-tmpl - apt cache proxy configuration
2025-11-26 23:00:58 - commands.deploy           - INFO - ==================================================
2025-11-26 23:00:58 - services.pct              - INFO - Running in container 3010: printf 'Acquire::http::Proxy "http://10.11.3.20:3142";
' > /etc/apt/apt.conf.d/01proxy 2>&1
2025-11-26 23:00:58 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo cHJpbnRmICdBY3F1aXJlOjpodHRwOjpQcm94eSAiaHR0cDovLzEwLjExLjMuMjA6MzE0MiI7CicgPiAvZXRjL2FwdC9hcHQuY29uZi5kLzAxcHJveHkgMj4mMQ== | base64 -d | bash"
2025-11-26 23:00:59 - commands.deploy           - INFO - Action 'apt cache proxy configuration' for container 'ubuntu-tmpl' completed successfully
2025-11-26 23:00:59 - commands.deploy           - INFO - ==================================================
2025-11-26 23:00:59 - commands.deploy           - INFO - [Overall: 20%] [Step: 11/53] Executing: ubuntu-tmpl - AppArmor parser stub
2025-11-26 23:00:59 - commands.deploy           - INFO - ==================================================
2025-11-26 23:00:59 - services.ssh              - INFO - Running: sudo -n bash -c 'echo CkFQUEFSTU9SX0JJTj0vdXNyL3NiaW4vYXBwYXJtb3JfcGFyc2VyCmlmIGNvbW1hbmQgLXYgZHBrZy1kaXZlcnQgPi9kZXYvbnVsbCAyPiYxICYmIFsgLWYgIiRBUFBBUk1PUl9CSU4iIF07IHRoZW4KICBkcGtnLWRpdmVydCAtLXF1aWV0IC0tbG9jYWwgLS1yZW5hbWUgLS1hZGQgIiRBUFBBUk1PUl9CSU4iID4vZGV2L251bGwgMj4mMSB8fCB0cnVlCiAgaWYgWyAtZiAiJEFQUEFSTU9SX0JJTi5kaXN0cmliIiBdOyB0aGVuCiAgICBjYXQgPDwnQVBQQVJNT1JfU1RVQicgPiAiJEFQUEFSTU9SX0JJTiIKIyEvYmluL3NoCmlmIFsgIiQxIiA9ICItLXZlcnNpb24iIF0gfHwgWyAiJDEiID0gIi1WIiBdOyB0aGVuCiAgZXhlYyAvdXNyL3NiaW4vYXBwYXJtb3JfcGFyc2VyLmRpc3RyaWIgIiRAIgpmaQpleGl0IDAKQVBQQVJNT1JfU1RVQgogICAgY2htb2QgK3ggIiRBUFBBUk1PUl9CSU4iIDI+L2Rldi9udWxsIHx8IHRydWUKICBmaQpmaQplY2hvIGFwcGFybW9yX3N0dWJfZG9uZQo= | base64 -d | bash'
2025-11-26 23:00:59 - commands.deploy           - INFO - Action 'AppArmor parser stub' for container 'ubuntu-tmpl' completed successfully
2025-11-26 23:00:59 - commands.deploy           - INFO - ==================================================
2025-11-26 23:00:59 - commands.deploy           - INFO - [Overall: 22%] [Step: 12/53] Executing: ubuntu-tmpl - apt sources fix
2025-11-26 23:00:59 - commands.deploy           - INFO - ==================================================
2025-11-26 23:00:59 - services.pct              - INFO - Running in container 3010: sed -i 's/oracular/plucky/g' /etc/apt/sources.list 2>&1
2025-11-26 23:00:59 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo c2VkIC1pICdzL29yYWN1bGFyL3BsdWNreS9nJyAvZXRjL2FwdC9zb3VyY2VzLmxpc3QgMj4mMQ== | base64 -d | bash"
2025-11-26 23:01:00 - actions.fix_apt_sources   - INFO - sources.list not found (may use sources.list.d), skipping fix
2025-11-26 23:01:00 - services.pct              - INFO - Running in container 3010: sed -i 's/old-releases.ubuntu.com/archive.ubuntu.com/g' /etc/apt/sources.list 2>&1
2025-11-26 23:01:00 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo c2VkIC1pICdzL29sZC1yZWxlYXNlcy51YnVudHUuY29tL2FyY2hpdmUudWJ1bnR1LmNvbS9nJyAvZXRjL2FwdC9zb3VyY2VzLmxpc3QgMj4mMQ== | base64 -d | bash"
2025-11-26 23:01:02 - actions.fix_apt_sources   - INFO - sources.list not found (may use sources.list.d), skipping fix
2025-11-26 23:01:02 - commands.deploy           - INFO - Action 'apt sources fix' for container 'ubuntu-tmpl' completed successfully
2025-11-26 23:01:02 - commands.deploy           - INFO - ==================================================
2025-11-26 23:01:02 - commands.deploy           - INFO - [Overall: 24%] [Step: 13/53] Executing: ubuntu-tmpl - system upgrade
2025-11-26 23:01:02 - commands.deploy           - INFO - ==================================================
2025-11-26 23:01:02 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:01:02 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:01:02 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:01:02 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:01:02 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:01:02 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:01:02 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:01:02 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:01:03 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:01:03 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:01:03 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:01:03 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:01:03 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:01:03 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:01:03 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:01:03 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:01:03 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:01:04 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:01:04 - services.ssh              - INFO - Running: sudo -n apt-get update -o APT::Get::Hide-Progress=true < /dev/null
2025-11-26 23:01:07 - services.apt              - INFO - apt update succeeded on attempt 1/20
2025-11-26 23:01:07 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:01:07 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:01:08 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:01:08 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:01:08 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:01:08 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:01:08 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:01:08 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:01:08 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:01:08 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:01:08 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:01:09 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:01:09 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:01:09 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:01:09 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:01:09 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:01:09 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:01:09 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:01:09 - services.ssh              - INFO - Running: sudo -n apt-get update -o APT::Get::Hide-Progress=true < /dev/null
2025-11-26 23:01:11 - services.apt              - INFO - apt update succeeded on attempt 1/20
2025-11-26 23:01:11 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:01:11 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:01:11 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:01:11 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:01:11 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:01:12 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:01:12 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:01:12 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:01:12 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:01:12 - services.ssh              - INFO - Running: sudo -n DEBIAN_PRIORITY=critical apt dist-upgrade -y -o Dpkg::Options::=--force-confdef -o Dpkg::Options::=--force-confold -o APT::Get::Hide-Progress=true
2025-11-26 23:02:06 - commands.deploy           - INFO - Action 'system upgrade' for container 'ubuntu-tmpl' completed successfully
2025-11-26 23:02:06 - commands.deploy           - INFO - ==================================================
2025-11-26 23:02:06 - commands.deploy           - INFO - [Overall: 26%] [Step: 14/53] Executing: ubuntu-tmpl - openssh-server installation
2025-11-26 23:02:06 - commands.deploy           - INFO - ==================================================
2025-11-26 23:02:06 - services.pct              - INFO - Running in container 3010: apt install -y -o APT::Get::Hide-Progress=true openssh-server
2025-11-26 23:02:06 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo YXB0IGluc3RhbGwgLXkgLW8gQVBUOjpHZXQ6OkhpZGUtUHJvZ3Jlc3M9dHJ1ZSBvcGVuc3NoLXNlcnZlcg== | base64 -d | bash"
2025-11-26 23:02:08 - commands.deploy           - INFO - Action 'openssh-server installation' for container 'ubuntu-tmpl' completed successfully
2025-11-26 23:02:08 - commands.deploy           - INFO - ==================================================
2025-11-26 23:02:08 - commands.deploy           - INFO - [Overall: 28%] [Step: 15/53] Executing: ubuntu-tmpl - SSH service enablement
2025-11-26 23:02:08 - commands.deploy           - INFO - ==================================================
2025-11-26 23:02:08 - services.pct              - INFO - Running in container 3010: systemctl enable ssh 2>&1
2025-11-26 23:02:08 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 23:02:09 - services.pct              - INFO - Running in container 3010: systemctl start ssh 2>&1
2025-11-26 23:02:09 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 23:02:10 - commands.deploy           - INFO - Action 'SSH service enablement' for container 'ubuntu-tmpl' completed successfully
2025-11-26 23:02:10 - commands.deploy           - INFO - ==================================================
2025-11-26 23:02:10 - commands.deploy           - INFO - [Overall: 30%] [Step: 16/53] Executing: ubuntu-tmpl - base tools installation
2025-11-26 23:02:10 - commands.deploy           - INFO - ==================================================
2025-11-26 23:02:10 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:02:10 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:02:11 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:02:11 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:02:11 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:02:11 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:02:11 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:02:11 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:02:11 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:02:11 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:02:11 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:02:12 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:02:12 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:02:12 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:02:12 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:02:12 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:02:12 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:02:12 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:02:12 - services.ssh              - INFO - Running: sudo -n apt-get update -o APT::Get::Hide-Progress=true < /dev/null
2025-11-26 23:02:14 - services.apt              - INFO - apt update succeeded on attempt 1/20
2025-11-26 23:02:14 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:02:14 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:02:14 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:02:14 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:02:15 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:02:15 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:02:15 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:02:15 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:02:15 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:02:15 - services.ssh              - INFO - Running: sudo -n apt install -y -o APT::Get::Hide-Progress=true ca-certificates curl
2025-11-26 23:02:19 - commands.deploy           - INFO - Action 'base tools installation' for container 'ubuntu-tmpl' completed successfully
2025-11-26 23:02:19 - commands.deploy           - INFO - ==================================================
2025-11-26 23:02:19 - commands.deploy           - INFO - [Overall: 32%] [Step: 17/53] Executing: ubuntu-tmpl - template cleanup
2025-11-26 23:02:19 - commands.deploy           - INFO - ==================================================
2025-11-26 23:02:19 - services.pct              - INFO - Running in container 3010: rm -f /etc/apt/apt.conf.d/01proxy 2>&1
2025-11-26 23:02:19 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo cm0gLWYgL2V0Yy9hcHQvYXB0LmNvbmYuZC8wMXByb3h5IDI+JjE= | base64 -d | bash"
2025-11-26 23:02:20 - services.pct              - INFO - Running in container 3010: rm -f /etc/ssh/ssh_host_* 2>&1
2025-11-26 23:02:20 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo cm0gLWYgL2V0Yy9zc2gvc3NoX2hvc3RfKiAyPiYx | base64 -d | bash"
2025-11-26 23:02:22 - services.pct              - INFO - Running in container 3010: truncate -s 0 /etc/machine-id 2>&1
2025-11-26 23:02:22 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo dHJ1bmNhdGUgLXMgMCAvZXRjL21hY2hpbmUtaWQgMj4mMQ== | base64 -d | bash"
2025-11-26 23:02:23 - services.pct              - INFO - Running in container 3010: rm -f /var/lib/dbus/machine-id 2>&1
2025-11-26 23:02:23 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo cm0gLWYgL3Zhci9saWIvZGJ1cy9tYWNoaW5lLWlkIDI+JjE= | base64 -d | bash"
2025-11-26 23:02:24 - services.pct              - INFO - Running in container 3010: ln -s /etc/machine-id /var/lib/dbus/machine-id 2>&1
2025-11-26 23:02:24 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo bG4gLXMgL2V0Yy9tYWNoaW5lLWlkIC92YXIvbGliL2RidXMvbWFjaGluZS1pZCAyPiYx | base64 -d | bash"
2025-11-26 23:02:25 - services.pct              - INFO - Running in container 3010: rm -rf /var/lib/apt/lists/* 2>&1
2025-11-26 23:02:25 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo cm0gLXJmIC92YXIvbGliL2FwdC9saXN0cy8qIDI+JjE= | base64 -d | bash"
2025-11-26 23:02:26 - services.pct              - INFO - Running in container 3010: find /var/log -type f -name '*.log' -delete 2>/dev/null
2025-11-26 23:02:26 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo ZmluZCAvdmFyL2xvZyAtdHlwZSBmIC1uYW1lICcqLmxvZycgLWRlbGV0ZSAyPi9kZXYvbnVsbA== | base64 -d | bash"
2025-11-26 23:02:28 - services.pct              - INFO - Running in container 3010: find /var/log -type f -name '*.gz' -delete 2>/dev/null
2025-11-26 23:02:28 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo ZmluZCAvdmFyL2xvZyAtdHlwZSBmIC1uYW1lICcqLmd6JyAtZGVsZXRlIDI+L2Rldi9udWxs | base64 -d | bash"
2025-11-26 23:02:29 - services.pct              - INFO - Running in container 3010: truncate -s 0 /root/.bash_history 2>/dev/null
2025-11-26 23:02:29 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo dHJ1bmNhdGUgLXMgMCAvcm9vdC8uYmFzaF9oaXN0b3J5IDI+L2Rldi9udWxs | base64 -d | bash"
2025-11-26 23:02:30 - services.pct              - INFO - Running in container 3010: truncate -s 0 /home/jaal/.bash_history 2>/dev/null
2025-11-26 23:02:30 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo dHJ1bmNhdGUgLXMgMCAvaG9tZS9qYWFsLy5iYXNoX2hpc3RvcnkgMj4vZGV2L251bGw= | base64 -d | bash"
2025-11-26 23:02:31 - services.pct              - INFO - Running in container 3010: apt clean
2025-11-26 23:02:31 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo YXB0IGNsZWFu | base64 -d | bash"
2025-11-26 23:02:32 - commands.deploy           - INFO - Action 'template cleanup' for container 'ubuntu-tmpl' completed successfully
2025-11-26 23:02:32 - commands.deploy           - INFO - ==================================================
2025-11-26 23:02:32 - commands.deploy           - INFO - [Overall: 33%] [Step: 18/53] Executing: ubuntu-tmpl - template archive creation
2025-11-26 23:02:32 - commands.deploy           - INFO - ==================================================
2025-11-26 23:02:32 - actions.create_template_archive - INFO - Stopping container...
2025-11-26 23:02:32 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:02:33 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:02:33 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:02:33 - services.ssh              - INFO - Running: pct stop 3010 2>&1
2025-11-26 23:02:38 - actions.create_template_archive - INFO - Creating template archive for container 3010 in directory /var/lib/vz/template/cache
2025-11-26 23:02:38 - actions.create_template_archive - INFO - Executing vzdump command: vzdump 3010 --dumpdir /var/lib/vz/template/cache --compress zstd --mode stop 2>&1
2025-11-26 23:02:38 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:02:39 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:02:39 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:02:39 - services.ssh              - INFO - Running: vzdump 3010 --dumpdir /var/lib/vz/template/cache --compress zstd --mode stop 2>&1
2025-11-26 23:02:46 - actions.create_template_archive - INFO - vzdump output (first 500 chars): INFO: starting new backup job: vzdump 3010 --mode stop --dumpdir /var/lib/vz/template/cache --compress zstd
INFO: Starting Backup of VM 3010 (lxc)
INFO: Backup started at 2025-11-26 22:02:40
INFO: status = stopped
INFO: backup mode: stop
INFO: ionice priority: 7
INFO: CT Name: ubuntu-tmpl
INFO: including mount point rootfs ('/') in backup
INFO: creating vzdump archive '/var/lib/vz/template/cache/vzdump-lxc-3010-2025_11_26-22_02_40.tar.zst'
INFO: Total bytes written: 551792640 (527MiB, 9
2025-11-26 23:02:46 - actions.create_template_archive - INFO - Waiting for template archive to be ready (max 120 seconds)...
2025-11-26 23:02:48 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:02:48 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:02:48 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:02:48 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/vzdump-lxc-3010-*.tar.zst 2>/dev/null | head -1
2025-11-26 23:02:49 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:02:49 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:02:49 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:02:49 - services.ssh              - INFO - Running: stat -c%s '/var/lib/vz/template/cache/vzdump-lxc-3010-2025_11_26-22_02_40.tar.zst' 2>/dev/null || echo '0'
2025-11-26 23:02:51 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:02:51 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:02:51 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:02:51 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/vzdump-lxc-3010-*.tar.zst 2>/dev/null | head -1
2025-11-26 23:02:52 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:02:52 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:02:52 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:02:52 - services.ssh              - INFO - Running: stat -c%s '/var/lib/vz/template/cache/vzdump-lxc-3010-2025_11_26-22_02_40.tar.zst' 2>/dev/null || echo '0'
2025-11-26 23:02:54 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:02:54 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:02:54 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:02:54 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/vzdump-lxc-3010-*.tar.zst 2>/dev/null | head -1
2025-11-26 23:02:55 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:02:55 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:02:55 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:02:55 - services.ssh              - INFO - Running: stat -c%s '/var/lib/vz/template/cache/vzdump-lxc-3010-2025_11_26-22_02_40.tar.zst' 2>/dev/null || echo '0'
2025-11-26 23:02:57 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:02:57 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:02:57 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:02:57 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/vzdump-lxc-3010-*.tar.zst 2>/dev/null | head -1
2025-11-26 23:02:58 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:02:58 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:02:58 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:02:58 - services.ssh              - INFO - Running: stat -c%s '/var/lib/vz/template/cache/vzdump-lxc-3010-2025_11_26-22_02_40.tar.zst' 2>/dev/null || echo '0'
2025-11-26 23:02:58 - actions.create_template_archive - INFO - Template archive file found: /var/lib/vz/template/cache/vzdump-lxc-3010-2025_11_26-22_02_40.tar.zst
2025-11-26 23:02:58 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:02:58 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:02:58 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:02:58 - services.ssh              - INFO - Running: stat -c%s '/var/lib/vz/template/cache/vzdump-lxc-3010-2025_11_26-22_02_40.tar.zst' 2>/dev/null || echo '0'
2025-11-26 23:02:58 - actions.create_template_archive - INFO - Template archive size: 160.44 MB
2025-11-26 23:02:58 - actions.create_template_archive - INFO - Template type: ubuntu
2025-11-26 23:02:58 - actions.create_template_archive - INFO - Template pattern: ubuntu-25.04-template_{date}_amd64.tar.zst
2025-11-26 23:02:58 - actions.create_template_archive - INFO - Final template name: ubuntu-25.04-template_20251126_amd64.tar.zst
2025-11-26 23:02:58 - actions.create_template_archive - INFO - Moving template from /var/lib/vz/template/cache/vzdump-lxc-3010-2025_11_26-22_02_40.tar.zst to /var/lib/vz/template/cache/ubuntu-25.04-template_20251126_amd64.tar.zst
2025-11-26 23:02:59 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:02:59 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:02:59 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:02:59 - services.ssh              - INFO - Running: mv '/var/lib/vz/template/cache/vzdump-lxc-3010-2025_11_26-22_02_40.tar.zst' /var/lib/vz/template/cache/ubuntu-25.04-template_20251126_amd64.tar.zst 2>&1
2025-11-26 23:02:59 - actions.create_template_archive - INFO - Template moved to storage location: /var/lib/vz/template/cache/ubuntu-25.04-template_20251126_amd64.tar.zst
2025-11-26 23:02:59 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:02:59 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:02:59 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:02:59 - services.ssh              - INFO - Running: pveam update 2>&1
2025-11-26 23:03:02 - actions.create_template_archive - INFO - Cleaning up other template archives...
2025-11-26 23:03:02 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:03:02 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:03:02 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:03:02 - services.ssh              - INFO - Running: find /var/lib/vz/template/cache -maxdepth 1 -type f -name '*.tar.zst' ! -name 'ubuntu-25.04-template_20251126_amd64.tar.zst' ! -name 'ubuntu-24.10-standard_24.10-1_amd64.tar.zst' ! -name 'ubuntu-25.04-template_*.tar.zst' ! -name 'docker-ubuntu25.04-template_*.tar.zst' -delete 2>&1
2025-11-26 23:03:02 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:03:03 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:03:03 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:03:03 - services.ssh              - INFO - Running: find /var/lib/vz/template/cache -maxdepth 1 -type f -name '*.tar.zst' ! -name 'ubuntu-25.04-template_20251126_amd64.tar.zst' ! -name 'ubuntu-24.10-standard_24.10-1_amd64.tar.zst' ! -name 'ubuntu-25.04-template_*.tar.zst' ! -name 'docker-ubuntu25.04-template_*.tar.zst' ! -name 'ubuntu-24.10-standard_24.10-1_amd64.tar.zst' -delete 2>&1
2025-11-26 23:03:03 - services.ssh              - INFO - Running: pct list | grep '^3010 ' || echo 'not_found'
2025-11-26 23:03:04 - libs.common               - INFO - Stopping and destroying container 3010...
2025-11-26 23:03:04 - services.ssh              - INFO - Running: pct stop 3010 2>/dev/null || true; sleep 2; pct destroy 3010 2>&1
2025-11-26 23:03:08 - services.ssh              - INFO - Running: pct list | grep '^3010 ' || echo 'not_found'
2025-11-26 23:03:10 - libs.common               - INFO - Container 3010 destroyed
2025-11-26 23:03:10 - actions.create_template_archive - INFO - Container 3010 destroyed after template archive creation
2025-11-26 23:03:10 - commands.deploy           - INFO - Action 'template archive creation' for container 'ubuntu-tmpl' completed successfully
2025-11-26 23:03:10 - commands.deploy           - INFO - ==================================================
2025-11-26 23:03:10 - commands.deploy           - INFO - [Overall: 35%] [Step: 19/53] Executing: docker-tmpl - create container
2025-11-26 23:03:10 - commands.deploy           - INFO - ==================================================
2025-11-26 23:03:10 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:03:10 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:03:10 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:03:10 - services.ssh              - INFO - Running: pct destroy 3008 --force
2025-11-26 23:03:11 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/ubuntu-25.04-template_*_amd64.tar.zst 2>/dev/null | head -1 | xargs basename 2>/dev/null
2025-11-26 23:03:11 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/ubuntu-25.04-template_20251126_amd64.tar.zst && test -r /var/lib/vz/template/cache/ubuntu-25.04-template_20251126_amd64.tar.zst && echo 'valid' || echo 'invalid'
2025-11-26 23:03:11 - actions.create_container  - INFO - Checking if container 3008 already exists...
2025-11-26 23:03:12 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:03:12 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:03:12 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:03:12 - services.ssh              - INFO - Running: pct list | grep '^3008 '
2025-11-26 23:03:13 - actions.create_container  - INFO - Creating container 3008 from template...
2025-11-26 23:03:13 - services.ssh              - INFO - Running: pct create 3008 /var/lib/vz/template/cache/ubuntu-25.04-template_20251126_amd64.tar.zst --hostname docker-tmpl --memory 4096 --swap 4096 --cores 8 --net0 name=eth0,bridge=vmbr0,firewall=0,gw=10.11.3.253,ip=10.11.3.8/24,ip6=dhcp,type=veth --rootfs sdb:40 --unprivileged 1 --ostype ubuntu --arch amd64
2025-11-26 23:03:19 - actions.create_container  - INFO - Setting container features...
2025-11-26 23:03:19 - services.ssh              - INFO - Running: pct set 3008 --features nesting=1,keyctl=1,fuse=1
2025-11-26 23:03:20 - actions.create_container  - INFO - Starting container 3008...
2025-11-26 23:03:20 - services.ssh              - INFO - Running: pct start 3008
2025-11-26 23:03:24 - actions.create_container  - INFO - Bringing up network interface...
2025-11-26 23:03:24 - services.pct              - INFO - Running in container 3008: ping -c 1 8.8.8.8
2025-11-26 23:03:24 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo cGluZyAtYyAxIDguOC44Ljg= | base64 -d | bash"
2025-11-26 23:03:25 - actions.create_container  - INFO - Network interface is up and reachable
2025-11-26 23:03:25 - services.pct              - INFO - Running in container 3008: id -u jaal >/dev/null 2>&1 || useradd -m -s /bin/bash -G sudo jaal
2025-11-26 23:03:25 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgfHwgdXNlcmFkZCAtbSAtcyAvYmluL2Jhc2ggLUcgc3VkbyBqYWFs | base64 -d | bash"
2025-11-26 23:03:27 - services.pct              - INFO - Running in container 3008: echo jaal:jaal123 | chpasswd
2025-11-26 23:03:27 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo ZWNobyBqYWFsOmphYWwxMjMgfCBjaHBhc3N3ZA== | base64 -d | bash"
2025-11-26 23:03:28 - actions.create_container  - INFO - Password set for user jaal
2025-11-26 23:03:28 - services.pct              - INFO - Running in container 3008: printf 'jaal ALL=(ALL) NOPASSWD: ALL
' > /etc/sudoers.d/jaal 2>&1
2025-11-26 23:03:28 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo cHJpbnRmICdqYWFsIEFMTD0oQUxMKSBOT1BBU1NXRDogQUxMCicgPiAvZXRjL3N1ZG9lcnMuZC9qYWFsIDI+JjE= | base64 -d | bash"
2025-11-26 23:03:29 - services.pct              - INFO - Running in container 3008: chmod 440 /etc/sudoers.d/jaal 2>&1
2025-11-26 23:03:29 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo Y2htb2QgNDQwIC9ldGMvc3Vkb2Vycy5kL2phYWwgMj4mMQ== | base64 -d | bash"
2025-11-26 23:03:30 - services.pct              - INFO - Running in container 3008: id -u jaal >/dev/null 2>&1 && echo 'exists' || echo 'missing'
2025-11-26 23:03:30 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyAnZXhpc3RzJyB8fCBlY2hvICdtaXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:03:31 - services.pct              - INFO - Running in container 3008: mkdir -p /home/jaal/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /home/jaal/.ssh/authorized_keys && chmod 600 /home/jaal/.ssh/authorized_keys && chown jaal:jaal /home/jaal/.ssh/authorized_keys && chown -R jaal:jaal /home/jaal/.ssh && chmod 700 /home/jaal/.ssh
2025-11-26 23:03:31 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo bWtkaXIgLXAgL2hvbWUvamFhbC8uc3NoICYmIGVjaG8gYzNOb0xYSnpZU0JCUVVGQlFqTk9lbUZETVhsak1rVkJRVUZCUkVGUlFVSkJRVUZDWjFGRVNHaHpaeTlTUWxNeFpXOW1aRUowVDIxU1oyNXJObkpSWlZkTU5XVkVRMEZHVWxsaGRHOXRiMjV4ZWxaUVNHNVZhRWRCVjB4M2NFRnBibFJMV1RCaWNtVkhOMUozWTFCNlUzazRaa1V6YkhCQmVHUTNaRFUxTVZOcmIzZFJUM3BNVHpGaGRWSlVka05IWjBkS1RVTlphSE5wVDFSRVpHYzBlVU5IWkdoMWRsUnNaMGN5VDNnNFkwTkZXVGt6VG5Ob05HSnFXRE50Tm13NVluQnhWMkZ0Wkd4WU5WSklOV0pNZVhCNk5XeHhMME5rTTJWVWNISkdXRU5uY1VwUFkxSlVMemRCTWxSeFJHVklTM1pGTTNwWlRUWjBaV2RyWlN0a1VXRmtUalF4Y21nNWMxa3pTME5ITUhGbVJqVTRkRzR5Umt4NlNuZzNNMGc1ZDFKSFpVTlhlRlJvY2tZMWQxTjZaM0pHUkVsWlIxUktWRTFWY1V0bllrcFdWbGxYV0M5aVdTOXVVVmRVT0ZaUE5tWk1lbWtyTUhCQlQzbzVNekZ4TkdWdVNIUlBOVFpVTkRSaVJYRjBabWMxWkZONE4ySk1SMGx5TlRaSWJXeHVNVWRJYUc5MVZTdDFOelpqVmxSWFQyOXFSRlkxVkRGWGMxSkJWSFE0WVVRNU1EZERhVGszUmxBdk5EWmpValY1U2xSNFlWUndLM0I0VjNCdGFESjNZVWRsUkZKRVYxRnpkRVZzU0c5VGFuUlFlVzkxZVZWMVYySXpNVzlVUW14ck9FdDNaMDlsY0RONk1UZHhLMWxKYUZwWFVVZElkbTFqVWt0SU1sQkJPVGhKVW5CcFNsWlNlbVk0YzFoS01HTmthMjkxUVRWWFFsTkVaV2RVYjBJMVZ6ZFJVRzFsYUVVOUlITm9ZV1J2ZDJOb1lXMWlaWEpBVTJoaFpHOTNZMmhoYldKbGNuTXRUV0ZqTFcxcGJta3ViRzlqWVd3PSB8IGJhc2U2NCAtZCA+IC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2htb2QgNjAwIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gLVIgamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaCAmJiBjaG1vZCA3MDAgL2hvbWUvamFhbC8uc3No | base64 -d | bash"
2025-11-26 23:03:32 - services.pct              - INFO - Running in container 3008: mkdir -p /root/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /root/.ssh/authorized_keys && chmod 600 /root/.ssh/authorized_keys
2025-11-26 23:03:32 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo bWtkaXIgLXAgL3Jvb3QvLnNzaCAmJiBlY2hvIGMzTm9MWEp6WVNCQlFVRkJRak5PZW1GRE1YbGpNa1ZCUVVGQlJFRlJRVUpCUVVGQ1oxRkVTR2h6Wnk5U1FsTXhaVzltWkVKMFQyMVNaMjVyTm5KUlpWZE1OV1ZFUTBGR1VsbGhkRzl0YjI1eGVsWlFTRzVWYUVkQlYweDNjRUZwYmxSTFdUQmljbVZITjFKM1kxQjZVM2s0WmtVemJIQkJlR1EzWkRVMU1WTnJiM2RSVDNwTVR6RmhkVkpVZGtOSFowZEtUVU5aYUhOcFQxUkVaR2MwZVVOSFpHaDFkbFJzWjBjeVQzZzRZME5GV1RrelRuTm9OR0pxV0ROdE5tdzVZbkJ4VjJGdFpHeFlOVkpJTldKTWVYQjZOV3h4TDBOa00yVlVjSEpHV0VObmNVcFBZMUpVTHpkQk1sUnhSR1ZJUzNaRk0zcFpUVFowWldkclpTdGtVV0ZrVGpReGNtZzVjMWt6UzBOSE1IRm1SalU0ZEc0eVJreDZTbmczTTBnNWQxSkhaVU5YZUZSb2NrWTFkMU42WjNKR1JFbFpSMVJLVkUxVmNVdG5Za3BXVmxsWFdDOWlXUzl1VVZkVU9GWlBObVpNZW1rck1IQkJUM281TXpGeE5HVnVTSFJQTlRaVU5EUmlSWEYwWm1jMVpGTjROMkpNUjBseU5UWkliV3h1TVVkSWFHOTFWU3QxTnpaalZsUlhUMjlxUkZZMVZERlhjMUpCVkhRNFlVUTVNRGREYVRrM1JsQXZORFpqVWpWNVNsUjRZVlJ3SzNCNFYzQnRhREozWVVkbFJGSkVWMUZ6ZEVWc1NHOVRhblJRZVc5MWVWVjFWMkl6TVc5VVFteHJPRXQzWjA5bGNETjZNVGR4SzFsSmFGcFhVVWRJZG0xalVrdElNbEJCT1RoSlVuQnBTbFpTZW1ZNGMxaEtNR05rYTI5MVFUVlhRbE5FWldkVWIwSTFWemRSVUcxbGFFVTlJSE5vWVdSdmQyTm9ZVzFpWlhKQVUyaGhaRzkzWTJoaGJXSmxjbk10VFdGakxXMXBibWt1Ykc5allXdz0gfCBiYXNlNjQgLWQgPiAvcm9vdC8uc3NoL2F1dGhvcml6ZWRfa2V5cyAmJiBjaG1vZCA2MDAgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXM= | base64 -d | bash"
2025-11-26 23:03:34 - services.pct              - INFO - Running in container 3008: test -f /home/jaal/.ssh/authorized_keys && test -f /root/.ssh/authorized_keys && echo 'keys_exist' || echo 'keys_missing'
2025-11-26 23:03:34 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo dGVzdCAtZiAvaG9tZS9qYWFsLy5zc2gvYXV0aG9yaXplZF9rZXlzICYmIHRlc3QgLWYgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgZWNobyAna2V5c19leGlzdCcgfHwgZWNobyAna2V5c19taXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:03:35 - services.pct              - INFO - SSH key setup verified successfully
2025-11-26 23:03:35 - services.pct              - INFO - Running in container 3008: dpkg -l | grep -q '^ii.*openssh-server' || echo 'not_installed'
2025-11-26 23:03:35 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo ZHBrZyAtbCB8IGdyZXAgLXEgJ15paS4qb3BlbnNzaC1zZXJ2ZXInIHx8IGVjaG8gJ25vdF9pbnN0YWxsZWQn | base64 -d | bash"
2025-11-26 23:03:36 - services.pct              - INFO - Running in container 3008: systemctl enable ssh 2>&1
2025-11-26 23:03:36 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 23:03:38 - services.pct              - INFO - Running in container 3008: systemctl start ssh 2>&1
2025-11-26 23:03:38 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 23:03:42 - services.pct              - INFO - Running in container 3008: systemctl is-active ssh 2>/dev/null || echo inactive
2025-11-26 23:03:42 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBzc2ggMj4vZGV2L251bGwgfHwgZWNobyBpbmFjdGl2ZQ== | base64 -d | bash"
2025-11-26 23:03:43 - services.pct              - INFO - SSH service is running
2025-11-26 23:03:43 - services.pct              - INFO - Running in container 3008: ss -tlnp | grep ':22 ' || netstat -tlnp 2>/dev/null | grep ':22 ' || echo 'not_listening'
2025-11-26 23:03:43 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo c3MgLXRsbnAgfCBncmVwICc6MjIgJyB8fCBuZXRzdGF0IC10bG5wIDI+L2Rldi9udWxsIHwgZ3JlcCAnOjIyICcgfHwgZWNobyAnbm90X2xpc3RlbmluZyc= | base64 -d | bash"
2025-11-26 23:03:44 - services.pct              - INFO - SSH listening check: LISTEN 0      4096         0.0.0.0:22        0.0.0.0:*    users:(("sshd",pid=157,fd=3),("systemd",pid=1,fd=116))
LISTEN 0      4096            [::]:22           [::]:*    users:(("sshd",pid=157,fd=4),("systemd",pid=1,fd=117))
2025-11-26 23:03:44 - services.pct              - INFO - Running in container 3008: grep -E '^ListenAddress|^#ListenAddress' /etc/ssh/sshd_config 2>/dev/null | head -5 || echo 'config_check_failed'
2025-11-26 23:03:44 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo Z3JlcCAtRSAnXkxpc3RlbkFkZHJlc3N8XiNMaXN0ZW5BZGRyZXNzJyAvZXRjL3NzaC9zc2hkX2NvbmZpZyAyPi9kZXYvbnVsbCB8IGhlYWQgLTUgfHwgZWNobyAnY29uZmlnX2NoZWNrX2ZhaWxlZCc= | base64 -d | bash"
2025-11-26 23:03:45 - services.pct              - INFO - SSH config check: #ListenAddress 0.0.0.0
#ListenAddress ::
2025-11-26 23:03:45 - services.pct              - INFO - Running in container 3008: timeout 1 bash -c '</dev/tcp/127.0.0.1/22' 2>&1 && echo 'localhost_ok' || echo 'localhost_failed'
2025-11-26 23:03:45 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo dGltZW91dCAxIGJhc2ggLWMgJzwvZGV2L3RjcC8xMjcuMC4wLjEvMjInIDI+JjEgJiYgZWNobyAnbG9jYWxob3N0X29rJyB8fCBlY2hvICdsb2NhbGhvc3RfZmFpbGVkJw== | base64 -d | bash"
2025-11-26 23:03:47 - services.pct              - INFO - SSH localhost connection test: localhost_ok
2025-11-26 23:03:47 - actions.create_container  - INFO - Waiting for container to be ready with SSH connectivity (up to 10 minutes)...
2025-11-26 23:03:47 - services.ssh              - INFO - Running: pct status 3008
2025-11-26 23:03:48 - services.pct              - INFO - Running in container 3008: echo test
2025-11-26 23:03:48 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo ZWNobyB0ZXN0 | base64 -d | bash"
2025-11-26 23:03:49 - services.pct              - INFO - Testing SSH connection to jaal@10.11.3.8...
2025-11-26 23:03:49 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:03:49 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:03:49 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.8
2025-11-26 23:03:49 - services.ssh              - INFO - Running: echo 'SSH connection test successful'
2025-11-26 23:03:50 - services.pct              - INFO - SSH connectivity verified - connection successful
2025-11-26 23:03:50 - services.pct              - INFO - Container is ready and SSH is accessible!
2025-11-26 23:03:50 - actions.create_container  - INFO - Container 3008 created successfully
2025-11-26 23:03:50 - commands.deploy           - INFO - Container 'docker-tmpl' created successfully
2025-11-26 23:03:50 - commands.deploy           - INFO - Setting up SSH connection to container docker-tmpl...
2025-11-26 23:03:50 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:03:50 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:03:50 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.8
2025-11-26 23:03:52 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:03:52 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:03:52 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:03:52 - commands.deploy           - INFO - ==================================================
2025-11-26 23:03:52 - commands.deploy           - INFO - [Overall: 37%] [Step: 20/53] Executing: docker-tmpl - Docker installation
2025-11-26 23:03:52 - commands.deploy           - INFO - ==================================================
2025-11-26 23:03:52 - actions.install_docker    - INFO - Installing Docker...
2025-11-26 23:03:52 - services.ssh              - INFO - Running: command -v curl
2025-11-26 23:03:52 - actions.install_docker    - INFO - Downloading Docker install script...
2025-11-26 23:03:52 - services.ssh              - INFO - Running: curl -f -s -S -L -o /tmp/get-docker.sh https://get.docker.com 2>&1
2025-11-26 23:03:53 - actions.install_docker    - INFO - Running Docker install script...
2025-11-26 23:03:53 - services.ssh              - INFO - Running: sh /tmp/get-docker.sh 2>&1
2025-11-26 23:04:22 - services.ssh              - INFO - Running: sudo -n bash -c 'command -v docker >/dev/null 2>&1 && echo installed || echo not_installed'
2025-11-26 23:04:22 - actions.install_docker    - INFO - Docker installed successfully via install script
2025-11-26 23:04:22 - commands.deploy           - INFO - Action 'Docker installation' for container 'docker-tmpl' completed successfully
2025-11-26 23:04:22 - commands.deploy           - INFO - ==================================================
2025-11-26 23:04:22 - commands.deploy           - INFO - [Overall: 39%] [Step: 21/53] Executing: docker-tmpl - Docker service start
2025-11-26 23:04:22 - commands.deploy           - INFO - ==================================================
2025-11-26 23:04:22 - actions.start_docker_service - INFO - Ensuring Docker service is running...
2025-11-26 23:04:22 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active docker 2>/dev/null || echo inactive'
2025-11-26 23:04:22 - actions.start_docker_service - INFO - Docker service already active, skipping start
2025-11-26 23:04:22 - commands.deploy           - INFO - Action 'Docker service start' for container 'docker-tmpl' completed successfully
2025-11-26 23:04:22 - commands.deploy           - INFO - ==================================================
2025-11-26 23:04:22 - commands.deploy           - INFO - [Overall: 41%] [Step: 22/53] Executing: docker-tmpl - template cleanup
2025-11-26 23:04:22 - commands.deploy           - INFO - ==================================================
2025-11-26 23:04:22 - services.pct              - INFO - Running in container 3008: rm -f /etc/apt/apt.conf.d/01proxy 2>&1
2025-11-26 23:04:22 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo cm0gLWYgL2V0Yy9hcHQvYXB0LmNvbmYuZC8wMXByb3h5IDI+JjE= | base64 -d | bash"
2025-11-26 23:04:24 - services.pct              - INFO - Running in container 3008: rm -f /etc/ssh/ssh_host_* 2>&1
2025-11-26 23:04:24 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo cm0gLWYgL2V0Yy9zc2gvc3NoX2hvc3RfKiAyPiYx | base64 -d | bash"
2025-11-26 23:04:25 - services.pct              - INFO - Running in container 3008: truncate -s 0 /etc/machine-id 2>&1
2025-11-26 23:04:25 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo dHJ1bmNhdGUgLXMgMCAvZXRjL21hY2hpbmUtaWQgMj4mMQ== | base64 -d | bash"
2025-11-26 23:04:26 - services.pct              - INFO - Running in container 3008: rm -f /var/lib/dbus/machine-id 2>&1
2025-11-26 23:04:26 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo cm0gLWYgL3Zhci9saWIvZGJ1cy9tYWNoaW5lLWlkIDI+JjE= | base64 -d | bash"
2025-11-26 23:04:27 - services.pct              - INFO - Running in container 3008: ln -s /etc/machine-id /var/lib/dbus/machine-id 2>&1
2025-11-26 23:04:27 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo bG4gLXMgL2V0Yy9tYWNoaW5lLWlkIC92YXIvbGliL2RidXMvbWFjaGluZS1pZCAyPiYx | base64 -d | bash"
2025-11-26 23:04:28 - services.pct              - INFO - Running in container 3008: rm -rf /var/lib/apt/lists/* 2>&1
2025-11-26 23:04:28 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo cm0gLXJmIC92YXIvbGliL2FwdC9saXN0cy8qIDI+JjE= | base64 -d | bash"
2025-11-26 23:04:30 - services.pct              - INFO - Running in container 3008: find /var/log -type f -name '*.log' -delete 2>/dev/null
2025-11-26 23:04:30 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo ZmluZCAvdmFyL2xvZyAtdHlwZSBmIC1uYW1lICcqLmxvZycgLWRlbGV0ZSAyPi9kZXYvbnVsbA== | base64 -d | bash"
2025-11-26 23:04:31 - services.pct              - INFO - Running in container 3008: find /var/log -type f -name '*.gz' -delete 2>/dev/null
2025-11-26 23:04:31 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo ZmluZCAvdmFyL2xvZyAtdHlwZSBmIC1uYW1lICcqLmd6JyAtZGVsZXRlIDI+L2Rldi9udWxs | base64 -d | bash"
2025-11-26 23:04:32 - services.pct              - INFO - Running in container 3008: truncate -s 0 /root/.bash_history 2>/dev/null
2025-11-26 23:04:32 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo dHJ1bmNhdGUgLXMgMCAvcm9vdC8uYmFzaF9oaXN0b3J5IDI+L2Rldi9udWxs | base64 -d | bash"
2025-11-26 23:04:33 - services.pct              - INFO - Running in container 3008: truncate -s 0 /home/jaal/.bash_history 2>/dev/null
2025-11-26 23:04:33 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo dHJ1bmNhdGUgLXMgMCAvaG9tZS9qYWFsLy5iYXNoX2hpc3RvcnkgMj4vZGV2L251bGw= | base64 -d | bash"
2025-11-26 23:04:34 - services.pct              - INFO - Running in container 3008: apt clean
2025-11-26 23:04:34 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo YXB0IGNsZWFu | base64 -d | bash"
2025-11-26 23:04:36 - commands.deploy           - INFO - Action 'template cleanup' for container 'docker-tmpl' completed successfully
2025-11-26 23:04:36 - commands.deploy           - INFO - ==================================================
2025-11-26 23:04:36 - commands.deploy           - INFO - [Overall: 43%] [Step: 23/53] Executing: docker-tmpl - template archive creation
2025-11-26 23:04:36 - commands.deploy           - INFO - ==================================================
2025-11-26 23:04:36 - actions.create_template_archive - INFO - Stopping container...
2025-11-26 23:04:36 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:04:36 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:04:36 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:04:36 - services.ssh              - INFO - Running: pct stop 3008 2>&1
2025-11-26 23:04:42 - actions.create_template_archive - INFO - Creating template archive for container 3008 in directory /var/lib/vz/template/cache
2025-11-26 23:04:42 - actions.create_template_archive - INFO - Executing vzdump command: vzdump 3008 --dumpdir /var/lib/vz/template/cache --compress zstd --mode stop 2>&1
2025-11-26 23:04:42 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:04:42 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:04:42 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:04:42 - services.ssh              - INFO - Running: vzdump 3008 --dumpdir /var/lib/vz/template/cache --compress zstd --mode stop 2>&1
2025-11-26 23:04:54 - actions.create_template_archive - INFO - vzdump output (first 500 chars): INFO: starting new backup job: vzdump 3008 --dumpdir /var/lib/vz/template/cache --compress zstd --mode stop
INFO: Starting Backup of VM 3008 (lxc)
INFO: Backup started at 2025-11-26 22:04:43
INFO: status = stopped
INFO: backup mode: stop
INFO: ionice priority: 7
INFO: CT Name: docker-tmpl
INFO: including mount point rootfs ('/') in backup
INFO: creating vzdump archive '/var/lib/vz/template/cache/vzdump-lxc-3008-2025_11_26-22_04_43.tar.zst'
INFO: Total bytes written: 1082009600 (1.1GiB, 
2025-11-26 23:04:54 - actions.create_template_archive - INFO - Waiting for template archive to be ready (max 120 seconds)...
2025-11-26 23:04:56 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:04:56 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:04:56 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:04:56 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/vzdump-lxc-3008-*.tar.zst 2>/dev/null | head -1
2025-11-26 23:04:56 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:04:57 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:04:57 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:04:57 - services.ssh              - INFO - Running: stat -c%s '/var/lib/vz/template/cache/vzdump-lxc-3008-2025_11_26-22_04_43.tar.zst' 2>/dev/null || echo '0'
2025-11-26 23:04:59 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:04:59 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:04:59 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:04:59 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/vzdump-lxc-3008-*.tar.zst 2>/dev/null | head -1
2025-11-26 23:04:59 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:05:00 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:05:00 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:05:00 - services.ssh              - INFO - Running: stat -c%s '/var/lib/vz/template/cache/vzdump-lxc-3008-2025_11_26-22_04_43.tar.zst' 2>/dev/null || echo '0'
2025-11-26 23:05:02 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:05:02 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:05:02 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:05:02 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/vzdump-lxc-3008-*.tar.zst 2>/dev/null | head -1
2025-11-26 23:05:02 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:05:03 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:05:03 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:05:03 - services.ssh              - INFO - Running: stat -c%s '/var/lib/vz/template/cache/vzdump-lxc-3008-2025_11_26-22_04_43.tar.zst' 2>/dev/null || echo '0'
2025-11-26 23:05:05 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:05:05 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:05:05 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:05:05 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/vzdump-lxc-3008-*.tar.zst 2>/dev/null | head -1
2025-11-26 23:05:05 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:05:06 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:05:06 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:05:06 - services.ssh              - INFO - Running: stat -c%s '/var/lib/vz/template/cache/vzdump-lxc-3008-2025_11_26-22_04_43.tar.zst' 2>/dev/null || echo '0'
2025-11-26 23:05:06 - actions.create_template_archive - INFO - Template archive file found: /var/lib/vz/template/cache/vzdump-lxc-3008-2025_11_26-22_04_43.tar.zst
2025-11-26 23:05:06 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:05:06 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:05:06 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:05:06 - services.ssh              - INFO - Running: stat -c%s '/var/lib/vz/template/cache/vzdump-lxc-3008-2025_11_26-22_04_43.tar.zst' 2>/dev/null || echo '0'
2025-11-26 23:05:06 - actions.create_template_archive - INFO - Template archive size: 312.69 MB
2025-11-26 23:05:06 - actions.create_template_archive - INFO - Template type: ubuntu+docker
2025-11-26 23:05:06 - actions.create_template_archive - INFO - Template pattern: docker-ubuntu25.04-template_{date}_amd64.tar.zst
2025-11-26 23:05:06 - actions.create_template_archive - INFO - Final template name: docker-ubuntu25.04-template_20251126_amd64.tar.zst
2025-11-26 23:05:06 - actions.create_template_archive - INFO - Moving template from /var/lib/vz/template/cache/vzdump-lxc-3008-2025_11_26-22_04_43.tar.zst to /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst
2025-11-26 23:05:06 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:05:07 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:05:07 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:05:07 - services.ssh              - INFO - Running: mv '/var/lib/vz/template/cache/vzdump-lxc-3008-2025_11_26-22_04_43.tar.zst' /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst 2>&1
2025-11-26 23:05:07 - actions.create_template_archive - INFO - Template moved to storage location: /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst
2025-11-26 23:05:07 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:05:07 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:05:07 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:05:07 - services.ssh              - INFO - Running: pveam update 2>&1
2025-11-26 23:05:10 - actions.create_template_archive - INFO - Cleaning up other template archives...
2025-11-26 23:05:10 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:05:10 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:05:10 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:05:10 - services.ssh              - INFO - Running: find /var/lib/vz/template/cache -maxdepth 1 -type f -name '*.tar.zst' ! -name 'docker-ubuntu25.04-template_20251126_amd64.tar.zst' ! -name 'ubuntu-24.10-standard_24.10-1_amd64.tar.zst' ! -name 'ubuntu-25.04-template_*.tar.zst' ! -name 'docker-ubuntu25.04-template_*.tar.zst' -delete 2>&1
2025-11-26 23:05:10 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:05:10 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:05:10 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:05:10 - services.ssh              - INFO - Running: find /var/lib/vz/template/cache -maxdepth 1 -type f -name '*.tar.zst' ! -name 'docker-ubuntu25.04-template_20251126_amd64.tar.zst' ! -name 'ubuntu-24.10-standard_24.10-1_amd64.tar.zst' ! -name 'ubuntu-25.04-template_*.tar.zst' ! -name 'docker-ubuntu25.04-template_*.tar.zst' ! -name 'ubuntu-24.10-standard_24.10-1_amd64.tar.zst' -delete 2>&1
2025-11-26 23:05:11 - services.ssh              - INFO - Running: pct list | grep '^3008 ' || echo 'not_found'
2025-11-26 23:05:12 - libs.common               - INFO - Stopping and destroying container 3008...
2025-11-26 23:05:12 - services.ssh              - INFO - Running: pct stop 3008 2>/dev/null || true; sleep 2; pct destroy 3008 2>&1
2025-11-26 23:05:16 - services.ssh              - INFO - Running: pct list | grep '^3008 ' || echo 'not_found'
2025-11-26 23:05:18 - libs.common               - INFO - Container 3008 destroyed
2025-11-26 23:05:18 - actions.create_template_archive - INFO - Container 3008 destroyed after template archive creation
2025-11-26 23:05:18 - commands.deploy           - INFO - Action 'template archive creation' for container 'docker-tmpl' completed successfully
2025-11-26 23:05:18 - commands.deploy           - INFO - ==================================================
2025-11-26 23:05:18 - commands.deploy           - INFO - [Overall: 45%] [Step: 24/53] Executing: pgsql - create container
2025-11-26 23:05:18 - commands.deploy           - INFO - ==================================================
2025-11-26 23:05:18 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:05:18 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:05:18 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:05:18 - services.ssh              - INFO - Running: pct destroy 3018 --force
2025-11-26 23:05:19 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/ubuntu-25.04-template_*_amd64.tar.zst 2>/dev/null | head -1 | xargs basename 2>/dev/null
2025-11-26 23:05:19 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/ubuntu-25.04-template_20251126_amd64.tar.zst && test -r /var/lib/vz/template/cache/ubuntu-25.04-template_20251126_amd64.tar.zst && echo 'valid' || echo 'invalid'
2025-11-26 23:05:19 - actions.create_container  - INFO - Checking if container 3018 already exists...
2025-11-26 23:05:20 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:05:20 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:05:20 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:05:20 - services.ssh              - INFO - Running: pct list | grep '^3018 '
2025-11-26 23:05:21 - actions.create_container  - INFO - Creating container 3018 from template...
2025-11-26 23:05:21 - services.ssh              - INFO - Running: pct create 3018 /var/lib/vz/template/cache/ubuntu-25.04-template_20251126_amd64.tar.zst --hostname pgsql --memory 2048 --swap 2048 --cores 2 --net0 name=eth0,bridge=vmbr0,firewall=0,gw=10.11.3.253,ip=10.11.3.18/24,ip6=dhcp,type=veth --rootfs sdb:30 --unprivileged 1 --ostype ubuntu --arch amd64
2025-11-26 23:05:28 - actions.create_container  - INFO - Setting container features...
2025-11-26 23:05:28 - services.ssh              - INFO - Running: pct set 3018 --features nesting=1,keyctl=1,fuse=1
2025-11-26 23:05:29 - actions.create_container  - INFO - Starting container 3018...
2025-11-26 23:05:29 - services.ssh              - INFO - Running: pct start 3018
2025-11-26 23:05:33 - actions.create_container  - INFO - Bringing up network interface...
2025-11-26 23:05:33 - services.pct              - INFO - Running in container 3018: ping -c 1 8.8.8.8
2025-11-26 23:05:33 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo cGluZyAtYyAxIDguOC44Ljg= | base64 -d | bash"
2025-11-26 23:05:35 - actions.create_container  - INFO - Network interface is up and reachable
2025-11-26 23:05:35 - services.pct              - INFO - Running in container 3018: id -u jaal >/dev/null 2>&1 || useradd -m -s /bin/bash -G sudo jaal
2025-11-26 23:05:35 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgfHwgdXNlcmFkZCAtbSAtcyAvYmluL2Jhc2ggLUcgc3VkbyBqYWFs | base64 -d | bash"
2025-11-26 23:05:36 - services.pct              - INFO - Running in container 3018: echo jaal:jaal123 | chpasswd
2025-11-26 23:05:36 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo ZWNobyBqYWFsOmphYWwxMjMgfCBjaHBhc3N3ZA== | base64 -d | bash"
2025-11-26 23:05:37 - actions.create_container  - INFO - Password set for user jaal
2025-11-26 23:05:37 - services.pct              - INFO - Running in container 3018: printf 'jaal ALL=(ALL) NOPASSWD: ALL
' > /etc/sudoers.d/jaal 2>&1
2025-11-26 23:05:37 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo cHJpbnRmICdqYWFsIEFMTD0oQUxMKSBOT1BBU1NXRDogQUxMCicgPiAvZXRjL3N1ZG9lcnMuZC9qYWFsIDI+JjE= | base64 -d | bash"
2025-11-26 23:05:38 - services.pct              - INFO - Running in container 3018: chmod 440 /etc/sudoers.d/jaal 2>&1
2025-11-26 23:05:38 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo Y2htb2QgNDQwIC9ldGMvc3Vkb2Vycy5kL2phYWwgMj4mMQ== | base64 -d | bash"
2025-11-26 23:05:39 - services.pct              - INFO - Running in container 3018: id -u jaal >/dev/null 2>&1 && echo 'exists' || echo 'missing'
2025-11-26 23:05:39 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyAnZXhpc3RzJyB8fCBlY2hvICdtaXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:05:41 - services.pct              - INFO - Running in container 3018: mkdir -p /home/jaal/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /home/jaal/.ssh/authorized_keys && chmod 600 /home/jaal/.ssh/authorized_keys && chown jaal:jaal /home/jaal/.ssh/authorized_keys && chown -R jaal:jaal /home/jaal/.ssh && chmod 700 /home/jaal/.ssh
2025-11-26 23:05:41 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo bWtkaXIgLXAgL2hvbWUvamFhbC8uc3NoICYmIGVjaG8gYzNOb0xYSnpZU0JCUVVGQlFqTk9lbUZETVhsak1rVkJRVUZCUkVGUlFVSkJRVUZDWjFGRVNHaHpaeTlTUWxNeFpXOW1aRUowVDIxU1oyNXJObkpSWlZkTU5XVkVRMEZHVWxsaGRHOXRiMjV4ZWxaUVNHNVZhRWRCVjB4M2NFRnBibFJMV1RCaWNtVkhOMUozWTFCNlUzazRaa1V6YkhCQmVHUTNaRFUxTVZOcmIzZFJUM3BNVHpGaGRWSlVka05IWjBkS1RVTlphSE5wVDFSRVpHYzBlVU5IWkdoMWRsUnNaMGN5VDNnNFkwTkZXVGt6VG5Ob05HSnFXRE50Tm13NVluQnhWMkZ0Wkd4WU5WSklOV0pNZVhCNk5XeHhMME5rTTJWVWNISkdXRU5uY1VwUFkxSlVMemRCTWxSeFJHVklTM1pGTTNwWlRUWjBaV2RyWlN0a1VXRmtUalF4Y21nNWMxa3pTME5ITUhGbVJqVTRkRzR5Umt4NlNuZzNNMGc1ZDFKSFpVTlhlRlJvY2tZMWQxTjZaM0pHUkVsWlIxUktWRTFWY1V0bllrcFdWbGxYV0M5aVdTOXVVVmRVT0ZaUE5tWk1lbWtyTUhCQlQzbzVNekZ4TkdWdVNIUlBOVFpVTkRSaVJYRjBabWMxWkZONE4ySk1SMGx5TlRaSWJXeHVNVWRJYUc5MVZTdDFOelpqVmxSWFQyOXFSRlkxVkRGWGMxSkJWSFE0WVVRNU1EZERhVGszUmxBdk5EWmpValY1U2xSNFlWUndLM0I0VjNCdGFESjNZVWRsUkZKRVYxRnpkRVZzU0c5VGFuUlFlVzkxZVZWMVYySXpNVzlVUW14ck9FdDNaMDlsY0RONk1UZHhLMWxKYUZwWFVVZElkbTFqVWt0SU1sQkJPVGhKVW5CcFNsWlNlbVk0YzFoS01HTmthMjkxUVRWWFFsTkVaV2RVYjBJMVZ6ZFJVRzFsYUVVOUlITm9ZV1J2ZDJOb1lXMWlaWEpBVTJoaFpHOTNZMmhoYldKbGNuTXRUV0ZqTFcxcGJta3ViRzlqWVd3PSB8IGJhc2U2NCAtZCA+IC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2htb2QgNjAwIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gLVIgamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaCAmJiBjaG1vZCA3MDAgL2hvbWUvamFhbC8uc3No | base64 -d | bash"
2025-11-26 23:05:42 - services.pct              - INFO - Running in container 3018: mkdir -p /root/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /root/.ssh/authorized_keys && chmod 600 /root/.ssh/authorized_keys
2025-11-26 23:05:42 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo bWtkaXIgLXAgL3Jvb3QvLnNzaCAmJiBlY2hvIGMzTm9MWEp6WVNCQlFVRkJRak5PZW1GRE1YbGpNa1ZCUVVGQlJFRlJRVUpCUVVGQ1oxRkVTR2h6Wnk5U1FsTXhaVzltWkVKMFQyMVNaMjVyTm5KUlpWZE1OV1ZFUTBGR1VsbGhkRzl0YjI1eGVsWlFTRzVWYUVkQlYweDNjRUZwYmxSTFdUQmljbVZITjFKM1kxQjZVM2s0WmtVemJIQkJlR1EzWkRVMU1WTnJiM2RSVDNwTVR6RmhkVkpVZGtOSFowZEtUVU5aYUhOcFQxUkVaR2MwZVVOSFpHaDFkbFJzWjBjeVQzZzRZME5GV1RrelRuTm9OR0pxV0ROdE5tdzVZbkJ4VjJGdFpHeFlOVkpJTldKTWVYQjZOV3h4TDBOa00yVlVjSEpHV0VObmNVcFBZMUpVTHpkQk1sUnhSR1ZJUzNaRk0zcFpUVFowWldkclpTdGtVV0ZrVGpReGNtZzVjMWt6UzBOSE1IRm1SalU0ZEc0eVJreDZTbmczTTBnNWQxSkhaVU5YZUZSb2NrWTFkMU42WjNKR1JFbFpSMVJLVkUxVmNVdG5Za3BXVmxsWFdDOWlXUzl1VVZkVU9GWlBObVpNZW1rck1IQkJUM281TXpGeE5HVnVTSFJQTlRaVU5EUmlSWEYwWm1jMVpGTjROMkpNUjBseU5UWkliV3h1TVVkSWFHOTFWU3QxTnpaalZsUlhUMjlxUkZZMVZERlhjMUpCVkhRNFlVUTVNRGREYVRrM1JsQXZORFpqVWpWNVNsUjRZVlJ3SzNCNFYzQnRhREozWVVkbFJGSkVWMUZ6ZEVWc1NHOVRhblJRZVc5MWVWVjFWMkl6TVc5VVFteHJPRXQzWjA5bGNETjZNVGR4SzFsSmFGcFhVVWRJZG0xalVrdElNbEJCT1RoSlVuQnBTbFpTZW1ZNGMxaEtNR05rYTI5MVFUVlhRbE5FWldkVWIwSTFWemRSVUcxbGFFVTlJSE5vWVdSdmQyTm9ZVzFpWlhKQVUyaGhaRzkzWTJoaGJXSmxjbk10VFdGakxXMXBibWt1Ykc5allXdz0gfCBiYXNlNjQgLWQgPiAvcm9vdC8uc3NoL2F1dGhvcml6ZWRfa2V5cyAmJiBjaG1vZCA2MDAgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXM= | base64 -d | bash"
2025-11-26 23:05:43 - services.pct              - INFO - Running in container 3018: test -f /home/jaal/.ssh/authorized_keys && test -f /root/.ssh/authorized_keys && echo 'keys_exist' || echo 'keys_missing'
2025-11-26 23:05:43 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo dGVzdCAtZiAvaG9tZS9qYWFsLy5zc2gvYXV0aG9yaXplZF9rZXlzICYmIHRlc3QgLWYgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgZWNobyAna2V5c19leGlzdCcgfHwgZWNobyAna2V5c19taXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:05:44 - services.pct              - INFO - SSH key setup verified successfully
2025-11-26 23:05:44 - services.pct              - INFO - Running in container 3018: dpkg -l | grep -q '^ii.*openssh-server' || echo 'not_installed'
2025-11-26 23:05:44 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo ZHBrZyAtbCB8IGdyZXAgLXEgJ15paS4qb3BlbnNzaC1zZXJ2ZXInIHx8IGVjaG8gJ25vdF9pbnN0YWxsZWQn | base64 -d | bash"
2025-11-26 23:05:45 - services.pct              - INFO - Running in container 3018: systemctl enable ssh 2>&1
2025-11-26 23:05:45 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 23:05:47 - services.pct              - INFO - Running in container 3018: systemctl start ssh 2>&1
2025-11-26 23:05:47 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 23:05:51 - services.pct              - INFO - Running in container 3018: systemctl is-active ssh 2>/dev/null || echo inactive
2025-11-26 23:05:51 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBzc2ggMj4vZGV2L251bGwgfHwgZWNobyBpbmFjdGl2ZQ== | base64 -d | bash"
2025-11-26 23:05:52 - services.pct              - INFO - SSH service is running
2025-11-26 23:05:52 - services.pct              - INFO - Running in container 3018: ss -tlnp | grep ':22 ' || netstat -tlnp 2>/dev/null | grep ':22 ' || echo 'not_listening'
2025-11-26 23:05:52 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo c3MgLXRsbnAgfCBncmVwICc6MjIgJyB8fCBuZXRzdGF0IC10bG5wIDI+L2Rldi9udWxsIHwgZ3JlcCAnOjIyICcgfHwgZWNobyAnbm90X2xpc3RlbmluZyc= | base64 -d | bash"
2025-11-26 23:05:54 - services.pct              - INFO - SSH listening check: LISTEN 0      4096         0.0.0.0:22        0.0.0.0:*    users:(("sshd",pid=163,fd=3),("systemd",pid=1,fd=95))
LISTEN 0      4096            [::]:22           [::]:*    users:(("sshd",pid=163,fd=4),("systemd",pid=1,fd=97))
2025-11-26 23:05:54 - services.pct              - INFO - Running in container 3018: grep -E '^ListenAddress|^#ListenAddress' /etc/ssh/sshd_config 2>/dev/null | head -5 || echo 'config_check_failed'
2025-11-26 23:05:54 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo Z3JlcCAtRSAnXkxpc3RlbkFkZHJlc3N8XiNMaXN0ZW5BZGRyZXNzJyAvZXRjL3NzaC9zc2hkX2NvbmZpZyAyPi9kZXYvbnVsbCB8IGhlYWQgLTUgfHwgZWNobyAnY29uZmlnX2NoZWNrX2ZhaWxlZCc= | base64 -d | bash"
2025-11-26 23:05:55 - services.pct              - INFO - SSH config check: #ListenAddress 0.0.0.0
#ListenAddress ::
2025-11-26 23:05:55 - services.pct              - INFO - Running in container 3018: timeout 1 bash -c '</dev/tcp/127.0.0.1/22' 2>&1 && echo 'localhost_ok' || echo 'localhost_failed'
2025-11-26 23:05:55 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo dGltZW91dCAxIGJhc2ggLWMgJzwvZGV2L3RjcC8xMjcuMC4wLjEvMjInIDI+JjEgJiYgZWNobyAnbG9jYWxob3N0X29rJyB8fCBlY2hvICdsb2NhbGhvc3RfZmFpbGVkJw== | base64 -d | bash"
2025-11-26 23:05:56 - services.pct              - INFO - SSH localhost connection test: localhost_ok
2025-11-26 23:05:56 - actions.create_container  - INFO - Waiting for container to be ready with SSH connectivity (up to 10 minutes)...
2025-11-26 23:05:56 - services.ssh              - INFO - Running: pct status 3018
2025-11-26 23:05:57 - services.pct              - INFO - Running in container 3018: echo test
2025-11-26 23:05:57 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo ZWNobyB0ZXN0 | base64 -d | bash"
2025-11-26 23:05:58 - services.pct              - INFO - Testing SSH connection to jaal@10.11.3.18...
2025-11-26 23:05:59 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:05:59 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:05:59 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.18
2025-11-26 23:05:59 - services.ssh              - INFO - Running: echo 'SSH connection test successful'
2025-11-26 23:05:59 - services.pct              - INFO - SSH connectivity verified - connection successful
2025-11-26 23:05:59 - services.pct              - INFO - Container is ready and SSH is accessible!
2025-11-26 23:05:59 - actions.create_container  - INFO - Container 3018 created successfully
2025-11-26 23:05:59 - commands.deploy           - INFO - Container 'pgsql' created successfully
2025-11-26 23:05:59 - commands.deploy           - INFO - Setting up SSH connection to container pgsql...
2025-11-26 23:05:59 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:06:00 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:06:00 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.18
2025-11-26 23:06:02 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:06:02 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:06:02 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:06:02 - commands.deploy           - INFO - ==================================================
2025-11-26 23:06:02 - commands.deploy           - INFO - [Overall: 47%] [Step: 25/53] Executing: pgsql - cloud-init wait
2025-11-26 23:06:02 - commands.deploy           - INFO - ==================================================
2025-11-26 23:06:02 - services.ssh              - INFO - Running: command -v cloud-init
2025-11-26 23:06:02 - actions.cloud_init_wait   - INFO - cloud-init not found, skipping
2025-11-26 23:06:02 - commands.deploy           - INFO - Action 'cloud-init wait' for container 'pgsql' completed successfully
2025-11-26 23:06:02 - commands.deploy           - INFO - ==================================================
2025-11-26 23:06:02 - commands.deploy           - INFO - [Overall: 49%] [Step: 26/53] Executing: pgsql - postgresql installation
2025-11-26 23:06:02 - commands.deploy           - INFO - ==================================================
2025-11-26 23:06:02 - actions.install_postgresql - INFO - Installing PostgreSQL 17 package...
2025-11-26 23:06:02 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:06:02 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:06:02 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:06:02 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:06:02 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:06:03 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:06:03 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:06:03 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:06:03 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:06:03 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:06:03 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:06:03 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:06:03 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:06:03 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:06:03 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:06:04 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:06:04 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:06:04 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:06:04 - services.ssh              - INFO - Running: sudo -n apt-get update -o APT::Get::Hide-Progress=true < /dev/null
2025-11-26 23:06:09 - services.apt              - INFO - apt update succeeded on attempt 1/20
2025-11-26 23:06:09 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:06:09 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:06:10 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:06:10 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:06:10 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:06:10 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:06:10 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:06:10 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:06:10 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:06:10 - services.ssh              - INFO - Running: sudo -n apt install -y -o APT::Get::Hide-Progress=true postgresql-17 postgresql-contrib
2025-11-26 23:06:29 - commands.deploy           - INFO - Action 'postgresql installation' for container 'pgsql' completed successfully
2025-11-26 23:06:29 - commands.deploy           - INFO - ==================================================
2025-11-26 23:06:29 - commands.deploy           - INFO - [Overall: 50%] [Step: 27/53] Executing: pgsql - postgresql service configuration
2025-11-26 23:06:29 - commands.deploy           - INFO - ==================================================
2025-11-26 23:06:29 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl enable postgresql@17-main && systemctl start postgresql@17-main 2>&1'
2025-11-26 23:06:39 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active postgresql@17-main 2>/dev/null || echo inactive'
2025-11-26 23:06:39 - services.ssh              - INFO - Running: sudo -n bash -c 'ss -tlnp | grep :5432 | grep -v '"'"'127.0.0.1'"'"' || echo '"'"'not_listening'"'"''
2025-11-26 23:06:39 - actions.configure_postgres_service - INFO - PostgreSQL is listening on all interfaces
2025-11-26 23:06:39 - commands.deploy           - INFO - Action 'postgresql service configuration' for container 'pgsql' completed successfully
2025-11-26 23:06:39 - commands.deploy           - INFO - ==================================================
2025-11-26 23:06:39 - commands.deploy           - INFO - [Overall: 52%] [Step: 28/53] Executing: pgsql - postgresql files configuration
2025-11-26 23:06:39 - commands.deploy           - INFO - ==================================================
2025-11-26 23:06:39 - services.ssh              - INFO - Running: sudo -n bash -c 'sed -i '"'"'/^#*listen_addresses.*/d'"'"' /etc/postgresql/17/main/postgresql.conf'
2025-11-26 23:06:39 - services.ssh              - INFO - Running: sudo -n bash -c 'grep -q '"'"'^listen_addresses ='"'"' /etc/postgresql/17/main/postgresql.conf && echo exists || echo not_exists'
2025-11-26 23:06:40 - services.ssh              - INFO - Running: sudo -n bash -c 'grep -n '"'"'^# CONNECTIONS AND AUTHENTICATION'"'"' /etc/postgresql/17/main/postgresql.conf | cut -d: -f1'
2025-11-26 23:06:40 - services.ssh              - INFO - Running: sudo -n bash -c 'echo YXdrIC12IG49NTUgLXYgcz0ibGlzdGVuX2FkZHJlc3NlcyA9ICcqJyIgJ05SPT1uIHtwcmludDsgcHJpbnQgczsgbmV4dH0xJyAvZXRjL3Bvc3RncmVzcWwvMTcvbWFpbi9wb3N0Z3Jlc3FsLmNvbmYgPiAvZXRjL3Bvc3RncmVzcWwvMTcvbWFpbi9wb3N0Z3Jlc3FsLmNvbmYudG1wICYmIG12IC9ldGMvcG9zdGdyZXNxbC8xNy9tYWluL3Bvc3RncmVzcWwuY29uZi50bXAgL2V0Yy9wb3N0Z3Jlc3FsLzE3L21haW4vcG9zdGdyZXNxbC5jb25mCg== | base64 -d | bash'
2025-11-26 23:06:40 - services.ssh              - INFO - Running: sudo -n bash -c 'sed -i '"'"'s/^#?port.*/port = 5432/'"'"' /etc/postgresql/17/main/postgresql.conf 2>&1'
2025-11-26 23:06:40 - services.ssh              - INFO - Running: sudo -n bash -c 'echo cHJpbnRmICdsb2NhbCBhbGwgYWxsIHBlZXIKaG9zdCBhbGwgYWxsIDEwLjExLjMuMC8yNCBtZDUKJyA+IC9ldGMvcG9zdGdyZXNxbC8xNy9tYWluL3BnX2hiYS5jb25mIDI+JjE= | base64 -d | bash'
2025-11-26 23:06:40 - actions.configure_postgres_files - INFO - Restarting PostgreSQL to apply configuration changes...
2025-11-26 23:06:40 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl restart postgresql@17-main 2>&1'
2025-11-26 23:06:46 - services.ssh              - INFO - Running: sudo -n bash -c 'ss -tlnp | grep :5432 | grep -v '"'"'127.0.0.1'"'"' || echo '"'"'not_listening'"'"''
2025-11-26 23:06:46 - actions.configure_postgres_files - INFO - PostgreSQL is listening on all interfaces after restart
2025-11-26 23:06:46 - commands.deploy           - INFO - Action 'postgresql files configuration' for container 'pgsql' completed successfully
2025-11-26 23:06:46 - commands.deploy           - INFO - ==================================================
2025-11-26 23:06:46 - commands.deploy           - INFO - [Overall: 54%] [Step: 29/53] Executing: pgsql - postgresql password setup
2025-11-26 23:06:46 - commands.deploy           - INFO - ==================================================
2025-11-26 23:06:46 - services.ssh              - INFO - Running: sudo -n -u postgres psql -c "ALTER USER postgres WITH PASSWORD 'postgres';" 2>&1
2025-11-26 23:06:46 - commands.deploy           - INFO - Action 'postgresql password setup' for container 'pgsql' completed successfully
2025-11-26 23:06:46 - commands.deploy           - INFO - ==================================================
2025-11-26 23:06:46 - commands.deploy           - INFO - [Overall: 56%] [Step: 30/53] Executing: haproxy - create container
2025-11-26 23:06:46 - commands.deploy           - INFO - ==================================================
2025-11-26 23:06:46 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:06:46 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:06:46 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:06:46 - services.ssh              - INFO - Running: pct destroy 3017 --force
2025-11-26 23:06:47 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/ubuntu-25.04-template_*_amd64.tar.zst 2>/dev/null | head -1 | xargs basename 2>/dev/null
2025-11-26 23:06:47 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/ubuntu-25.04-template_20251126_amd64.tar.zst && test -r /var/lib/vz/template/cache/ubuntu-25.04-template_20251126_amd64.tar.zst && echo 'valid' || echo 'invalid'
2025-11-26 23:06:48 - actions.create_container  - INFO - Checking if container 3017 already exists...
2025-11-26 23:06:48 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:06:48 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:06:48 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:06:48 - services.ssh              - INFO - Running: pct list | grep '^3017 '
2025-11-26 23:06:49 - actions.create_container  - INFO - Creating container 3017 from template...
2025-11-26 23:06:49 - services.ssh              - INFO - Running: pct create 3017 /var/lib/vz/template/cache/ubuntu-25.04-template_20251126_amd64.tar.zst --hostname haproxy --memory 1024 --swap 1024 --cores 2 --net0 name=eth0,bridge=vmbr0,firewall=0,gw=10.11.3.253,ip=10.11.3.17/24,ip6=dhcp,type=veth --rootfs sdb:10 --unprivileged 1 --ostype ubuntu --arch amd64
2025-11-26 23:06:56 - actions.create_container  - INFO - Setting container features...
2025-11-26 23:06:56 - services.ssh              - INFO - Running: pct set 3017 --features nesting=1,keyctl=1,fuse=1
2025-11-26 23:06:57 - actions.create_container  - INFO - Starting container 3017...
2025-11-26 23:06:57 - services.ssh              - INFO - Running: pct start 3017
2025-11-26 23:07:01 - actions.create_container  - INFO - Bringing up network interface...
2025-11-26 23:07:01 - services.pct              - INFO - Running in container 3017: ping -c 1 8.8.8.8
2025-11-26 23:07:01 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo cGluZyAtYyAxIDguOC44Ljg= | base64 -d | bash"
2025-11-26 23:07:03 - actions.create_container  - INFO - Network interface is up and reachable
2025-11-26 23:07:03 - services.pct              - INFO - Running in container 3017: id -u jaal >/dev/null 2>&1 || useradd -m -s /bin/bash -G sudo jaal
2025-11-26 23:07:03 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgfHwgdXNlcmFkZCAtbSAtcyAvYmluL2Jhc2ggLUcgc3VkbyBqYWFs | base64 -d | bash"
2025-11-26 23:07:04 - services.pct              - INFO - Running in container 3017: echo jaal:jaal123 | chpasswd
2025-11-26 23:07:04 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo ZWNobyBqYWFsOmphYWwxMjMgfCBjaHBhc3N3ZA== | base64 -d | bash"
2025-11-26 23:07:05 - actions.create_container  - INFO - Password set for user jaal
2025-11-26 23:07:05 - services.pct              - INFO - Running in container 3017: printf 'jaal ALL=(ALL) NOPASSWD: ALL
' > /etc/sudoers.d/jaal 2>&1
2025-11-26 23:07:05 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo cHJpbnRmICdqYWFsIEFMTD0oQUxMKSBOT1BBU1NXRDogQUxMCicgPiAvZXRjL3N1ZG9lcnMuZC9qYWFsIDI+JjE= | base64 -d | bash"
2025-11-26 23:07:06 - services.pct              - INFO - Running in container 3017: chmod 440 /etc/sudoers.d/jaal 2>&1
2025-11-26 23:07:06 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo Y2htb2QgNDQwIC9ldGMvc3Vkb2Vycy5kL2phYWwgMj4mMQ== | base64 -d | bash"
2025-11-26 23:07:07 - services.pct              - INFO - Running in container 3017: id -u jaal >/dev/null 2>&1 && echo 'exists' || echo 'missing'
2025-11-26 23:07:07 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyAnZXhpc3RzJyB8fCBlY2hvICdtaXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:07:08 - services.pct              - INFO - Running in container 3017: mkdir -p /home/jaal/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /home/jaal/.ssh/authorized_keys && chmod 600 /home/jaal/.ssh/authorized_keys && chown jaal:jaal /home/jaal/.ssh/authorized_keys && chown -R jaal:jaal /home/jaal/.ssh && chmod 700 /home/jaal/.ssh
2025-11-26 23:07:08 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo bWtkaXIgLXAgL2hvbWUvamFhbC8uc3NoICYmIGVjaG8gYzNOb0xYSnpZU0JCUVVGQlFqTk9lbUZETVhsak1rVkJRVUZCUkVGUlFVSkJRVUZDWjFGRVNHaHpaeTlTUWxNeFpXOW1aRUowVDIxU1oyNXJObkpSWlZkTU5XVkVRMEZHVWxsaGRHOXRiMjV4ZWxaUVNHNVZhRWRCVjB4M2NFRnBibFJMV1RCaWNtVkhOMUozWTFCNlUzazRaa1V6YkhCQmVHUTNaRFUxTVZOcmIzZFJUM3BNVHpGaGRWSlVka05IWjBkS1RVTlphSE5wVDFSRVpHYzBlVU5IWkdoMWRsUnNaMGN5VDNnNFkwTkZXVGt6VG5Ob05HSnFXRE50Tm13NVluQnhWMkZ0Wkd4WU5WSklOV0pNZVhCNk5XeHhMME5rTTJWVWNISkdXRU5uY1VwUFkxSlVMemRCTWxSeFJHVklTM1pGTTNwWlRUWjBaV2RyWlN0a1VXRmtUalF4Y21nNWMxa3pTME5ITUhGbVJqVTRkRzR5Umt4NlNuZzNNMGc1ZDFKSFpVTlhlRlJvY2tZMWQxTjZaM0pHUkVsWlIxUktWRTFWY1V0bllrcFdWbGxYV0M5aVdTOXVVVmRVT0ZaUE5tWk1lbWtyTUhCQlQzbzVNekZ4TkdWdVNIUlBOVFpVTkRSaVJYRjBabWMxWkZONE4ySk1SMGx5TlRaSWJXeHVNVWRJYUc5MVZTdDFOelpqVmxSWFQyOXFSRlkxVkRGWGMxSkJWSFE0WVVRNU1EZERhVGszUmxBdk5EWmpValY1U2xSNFlWUndLM0I0VjNCdGFESjNZVWRsUkZKRVYxRnpkRVZzU0c5VGFuUlFlVzkxZVZWMVYySXpNVzlVUW14ck9FdDNaMDlsY0RONk1UZHhLMWxKYUZwWFVVZElkbTFqVWt0SU1sQkJPVGhKVW5CcFNsWlNlbVk0YzFoS01HTmthMjkxUVRWWFFsTkVaV2RVYjBJMVZ6ZFJVRzFsYUVVOUlITm9ZV1J2ZDJOb1lXMWlaWEpBVTJoaFpHOTNZMmhoYldKbGNuTXRUV0ZqTFcxcGJta3ViRzlqWVd3PSB8IGJhc2U2NCAtZCA+IC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2htb2QgNjAwIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gLVIgamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaCAmJiBjaG1vZCA3MDAgL2hvbWUvamFhbC8uc3No | base64 -d | bash"
2025-11-26 23:07:10 - services.pct              - INFO - Running in container 3017: mkdir -p /root/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /root/.ssh/authorized_keys && chmod 600 /root/.ssh/authorized_keys
2025-11-26 23:07:10 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo bWtkaXIgLXAgL3Jvb3QvLnNzaCAmJiBlY2hvIGMzTm9MWEp6WVNCQlFVRkJRak5PZW1GRE1YbGpNa1ZCUVVGQlJFRlJRVUpCUVVGQ1oxRkVTR2h6Wnk5U1FsTXhaVzltWkVKMFQyMVNaMjVyTm5KUlpWZE1OV1ZFUTBGR1VsbGhkRzl0YjI1eGVsWlFTRzVWYUVkQlYweDNjRUZwYmxSTFdUQmljbVZITjFKM1kxQjZVM2s0WmtVemJIQkJlR1EzWkRVMU1WTnJiM2RSVDNwTVR6RmhkVkpVZGtOSFowZEtUVU5aYUhOcFQxUkVaR2MwZVVOSFpHaDFkbFJzWjBjeVQzZzRZME5GV1RrelRuTm9OR0pxV0ROdE5tdzVZbkJ4VjJGdFpHeFlOVkpJTldKTWVYQjZOV3h4TDBOa00yVlVjSEpHV0VObmNVcFBZMUpVTHpkQk1sUnhSR1ZJUzNaRk0zcFpUVFowWldkclpTdGtVV0ZrVGpReGNtZzVjMWt6UzBOSE1IRm1SalU0ZEc0eVJreDZTbmczTTBnNWQxSkhaVU5YZUZSb2NrWTFkMU42WjNKR1JFbFpSMVJLVkUxVmNVdG5Za3BXVmxsWFdDOWlXUzl1VVZkVU9GWlBObVpNZW1rck1IQkJUM281TXpGeE5HVnVTSFJQTlRaVU5EUmlSWEYwWm1jMVpGTjROMkpNUjBseU5UWkliV3h1TVVkSWFHOTFWU3QxTnpaalZsUlhUMjlxUkZZMVZERlhjMUpCVkhRNFlVUTVNRGREYVRrM1JsQXZORFpqVWpWNVNsUjRZVlJ3SzNCNFYzQnRhREozWVVkbFJGSkVWMUZ6ZEVWc1NHOVRhblJRZVc5MWVWVjFWMkl6TVc5VVFteHJPRXQzWjA5bGNETjZNVGR4SzFsSmFGcFhVVWRJZG0xalVrdElNbEJCT1RoSlVuQnBTbFpTZW1ZNGMxaEtNR05rYTI5MVFUVlhRbE5FWldkVWIwSTFWemRSVUcxbGFFVTlJSE5vWVdSdmQyTm9ZVzFpWlhKQVUyaGhaRzkzWTJoaGJXSmxjbk10VFdGakxXMXBibWt1Ykc5allXdz0gfCBiYXNlNjQgLWQgPiAvcm9vdC8uc3NoL2F1dGhvcml6ZWRfa2V5cyAmJiBjaG1vZCA2MDAgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXM= | base64 -d | bash"
2025-11-26 23:07:11 - services.pct              - INFO - Running in container 3017: test -f /home/jaal/.ssh/authorized_keys && test -f /root/.ssh/authorized_keys && echo 'keys_exist' || echo 'keys_missing'
2025-11-26 23:07:11 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo dGVzdCAtZiAvaG9tZS9qYWFsLy5zc2gvYXV0aG9yaXplZF9rZXlzICYmIHRlc3QgLWYgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgZWNobyAna2V5c19leGlzdCcgfHwgZWNobyAna2V5c19taXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:07:12 - services.pct              - INFO - SSH key setup verified successfully
2025-11-26 23:07:12 - services.pct              - INFO - Running in container 3017: dpkg -l | grep -q '^ii.*openssh-server' || echo 'not_installed'
2025-11-26 23:07:12 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo ZHBrZyAtbCB8IGdyZXAgLXEgJ15paS4qb3BlbnNzaC1zZXJ2ZXInIHx8IGVjaG8gJ25vdF9pbnN0YWxsZWQn | base64 -d | bash"
2025-11-26 23:07:13 - services.pct              - INFO - Running in container 3017: systemctl enable ssh 2>&1
2025-11-26 23:07:13 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 23:07:15 - services.pct              - INFO - Running in container 3017: systemctl start ssh 2>&1
2025-11-26 23:07:15 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 23:07:19 - services.pct              - INFO - Running in container 3017: systemctl is-active ssh 2>/dev/null || echo inactive
2025-11-26 23:07:19 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBzc2ggMj4vZGV2L251bGwgfHwgZWNobyBpbmFjdGl2ZQ== | base64 -d | bash"
2025-11-26 23:07:20 - services.pct              - INFO - SSH service is running
2025-11-26 23:07:20 - services.pct              - INFO - Running in container 3017: ss -tlnp | grep ':22 ' || netstat -tlnp 2>/dev/null | grep ':22 ' || echo 'not_listening'
2025-11-26 23:07:20 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo c3MgLXRsbnAgfCBncmVwICc6MjIgJyB8fCBuZXRzdGF0IC10bG5wIDI+L2Rldi9udWxsIHwgZ3JlcCAnOjIyICcgfHwgZWNobyAnbm90X2xpc3RlbmluZyc= | base64 -d | bash"
2025-11-26 23:07:21 - services.pct              - INFO - SSH listening check: LISTEN 0      4096         0.0.0.0:22        0.0.0.0:*    users:(("sshd",pid=159,fd=3),("systemd",pid=1,fd=99)) 
LISTEN 0      4096            [::]:22           [::]:*    users:(("sshd",pid=159,fd=4),("systemd",pid=1,fd=103))
2025-11-26 23:07:21 - services.pct              - INFO - Running in container 3017: grep -E '^ListenAddress|^#ListenAddress' /etc/ssh/sshd_config 2>/dev/null | head -5 || echo 'config_check_failed'
2025-11-26 23:07:21 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo Z3JlcCAtRSAnXkxpc3RlbkFkZHJlc3N8XiNMaXN0ZW5BZGRyZXNzJyAvZXRjL3NzaC9zc2hkX2NvbmZpZyAyPi9kZXYvbnVsbCB8IGhlYWQgLTUgfHwgZWNobyAnY29uZmlnX2NoZWNrX2ZhaWxlZCc= | base64 -d | bash"
2025-11-26 23:07:23 - services.pct              - INFO - SSH config check: #ListenAddress 0.0.0.0
#ListenAddress ::
2025-11-26 23:07:23 - services.pct              - INFO - Running in container 3017: timeout 1 bash -c '</dev/tcp/127.0.0.1/22' 2>&1 && echo 'localhost_ok' || echo 'localhost_failed'
2025-11-26 23:07:23 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo dGltZW91dCAxIGJhc2ggLWMgJzwvZGV2L3RjcC8xMjcuMC4wLjEvMjInIDI+JjEgJiYgZWNobyAnbG9jYWxob3N0X29rJyB8fCBlY2hvICdsb2NhbGhvc3RfZmFpbGVkJw== | base64 -d | bash"
2025-11-26 23:07:24 - services.pct              - INFO - SSH localhost connection test: localhost_ok
2025-11-26 23:07:24 - actions.create_container  - INFO - Waiting for container to be ready with SSH connectivity (up to 10 minutes)...
2025-11-26 23:07:24 - services.ssh              - INFO - Running: pct status 3017
2025-11-26 23:07:25 - services.pct              - INFO - Running in container 3017: echo test
2025-11-26 23:07:25 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo ZWNobyB0ZXN0 | base64 -d | bash"
2025-11-26 23:07:26 - services.pct              - INFO - Testing SSH connection to jaal@10.11.3.17...
2025-11-26 23:07:26 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:07:27 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:07:27 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.17
2025-11-26 23:07:27 - services.ssh              - INFO - Running: echo 'SSH connection test successful'
2025-11-26 23:07:27 - services.pct              - INFO - SSH connectivity verified - connection successful
2025-11-26 23:07:27 - services.pct              - INFO - Container is ready and SSH is accessible!
2025-11-26 23:07:27 - actions.create_container  - INFO - Container 3017 created successfully
2025-11-26 23:07:27 - commands.deploy           - INFO - Container 'haproxy' created successfully
2025-11-26 23:07:27 - commands.deploy           - INFO - Setting up SSH connection to container haproxy...
2025-11-26 23:07:27 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:07:27 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:07:27 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.17
2025-11-26 23:07:29 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:07:30 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:07:30 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:07:30 - commands.deploy           - INFO - ==================================================
2025-11-26 23:07:30 - commands.deploy           - INFO - [Overall: 58%] [Step: 31/53] Executing: haproxy - cloud-init wait
2025-11-26 23:07:30 - commands.deploy           - INFO - ==================================================
2025-11-26 23:07:30 - services.ssh              - INFO - Running: command -v cloud-init
2025-11-26 23:07:30 - actions.cloud_init_wait   - INFO - cloud-init not found, skipping
2025-11-26 23:07:30 - commands.deploy           - INFO - Action 'cloud-init wait' for container 'haproxy' completed successfully
2025-11-26 23:07:30 - commands.deploy           - INFO - ==================================================
2025-11-26 23:07:30 - commands.deploy           - INFO - [Overall: 60%] [Step: 32/53] Executing: haproxy - haproxy installation
2025-11-26 23:07:30 - commands.deploy           - INFO - ==================================================
2025-11-26 23:07:30 - actions.install_haproxy   - INFO - Installing haproxy package...
2025-11-26 23:07:30 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:07:30 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:07:30 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:07:30 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:07:30 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:07:30 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:07:30 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:07:30 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:07:31 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:07:31 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:07:31 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:07:31 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:07:31 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:07:31 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:07:31 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:07:31 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:07:31 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:07:32 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:07:32 - services.ssh              - INFO - Running: sudo -n apt-get update -o APT::Get::Hide-Progress=true < /dev/null
2025-11-26 23:07:38 - services.apt              - INFO - apt update succeeded on attempt 1/20
2025-11-26 23:07:38 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:07:38 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:07:38 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:07:39 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:07:39 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:07:39 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:07:39 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:07:39 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:07:39 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:07:39 - services.ssh              - INFO - Running: sudo -n apt install -y -o APT::Get::Hide-Progress=true haproxy
2025-11-26 23:07:45 - commands.deploy           - INFO - Action 'haproxy installation' for container 'haproxy' completed successfully
2025-11-26 23:07:45 - commands.deploy           - INFO - ==================================================
2025-11-26 23:07:45 - commands.deploy           - INFO - [Overall: 62%] [Step: 33/53] Executing: haproxy - haproxy configuration
2025-11-26 23:07:45 - commands.deploy           - INFO - ==================================================
2025-11-26 23:07:45 - services.ssh              - INFO - Running: sudo -n bash -c 'echo cHJpbnRmICdnbG9iYWwKICAgICAgICBsb2cgL2Rldi9sb2cgbG9jYWwwCiAgICAgICAgbG9nIC9kZXYvbG9nIGxvY2FsMSBub3RpY2UKICAgICAgICBtYXhjb25uIDIwNDgKICAgICAgICBkYWVtb24KICAgIGRlZmF1bHRzCiAgICAgICAgbG9nICAgICBnbG9iYWwKICAgICAgICBtb2RlICAgIGh0dHAKICAgICAgICBvcHRpb24gIGh0dHBsb2cKICAgICAgICBvcHRpb24gIGRvbnRsb2dudWxsCiAgICAgICAgdGltZW91dCBjb25uZWN0IDVzCiAgICAgICAgdGltZW91dCBjbGllbnQgIDUwcwogICAgICAgIHRpbWVvdXQgc2VydmVyICA1MHMKICAgIGZyb250ZW5kIGh0dHAtaW4KICAgICAgICBiaW5kICo6ODAKICAgICAgICBkZWZhdWx0X2JhY2tlbmQgbm9kZXMKICAgIGZyb250ZW5kIGh0dHBzLWluCiAgICAgICAgYmluZCAqOjQ0MwogICAgICAgIG1vZGUgaHR0cAogICAgICAgIGRlZmF1bHRfYmFja2VuZCBub2RlcwogICAgYmFja2VuZCBub2RlcwpzZXJ2ZXIgbm9kZTEgMTAuMTEuMy41OjgwIGNoZWNrCnNlcnZlciBub2RlMiAxMC4xMS4zLjY6ODAgY2hlY2sKc2VydmVyIG5vZGUzIDEwLjExLjMuNzo4MCBjaGVjawogICAgbGlzdGVuIHN0YXRzCiAgICAgICAgYmluZCAqOjg0MDQKICAgICAgICBtb2RlIGh0dHAKICAgICAgICBzdGF0cyBlbmFibGUKICAgICAgICBzdGF0cyB1cmkgLwogICAgICAgIHN0YXRzIHJlZnJlc2ggMTBzCicgPiAvZXRjL2hhcHJveHkvaGFwcm94eS5jZmcgMj4mMQ== | base64 -d | bash'
2025-11-26 23:07:45 - commands.deploy           - INFO - Action 'haproxy configuration' for container 'haproxy' completed successfully
2025-11-26 23:07:45 - commands.deploy           - INFO - ==================================================
2025-11-26 23:07:45 - commands.deploy           - INFO - [Overall: 64%] [Step: 34/53] Executing: haproxy - haproxy systemd override
2025-11-26 23:07:45 - commands.deploy           - INFO - ==================================================
2025-11-26 23:07:45 - services.ssh              - INFO - Running: sudo -n bash -c 'mkdir -p /etc/systemd/system/haproxy.service.d 2>&1'
2025-11-26 23:07:45 - services.ssh              - INFO - Running: sudo -n bash -c 'echo cHJpbnRmICdbU2VydmljZV0KVHlwZT1ub3RpZnkKUHJpdmF0ZU5ldHdvcms9bm8KUHJvdGVjdFN5c3RlbT1ubwpQcm90ZWN0SG9tZT1ubwpFeGVjU3RhcnQ9CkV4ZWNTdGFydD0vdXNyL3NiaW4vaGFwcm94eSAtV3MgLWYgJENPTkZJRyAtcCAkUElERklMRSAkRVhUUkFPUFRTCicgPiAvZXRjL3N5c3RlbWQvc3lzdGVtL2hhcHJveHkuc2VydmljZS5kL292ZXJyaWRlLmNvbmYgMj4mMQ== | base64 -d | bash'
2025-11-26 23:07:45 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl daemon-reload'
2025-11-26 23:07:45 - commands.deploy           - INFO - Action 'haproxy systemd override' for container 'haproxy' completed successfully
2025-11-26 23:07:45 - commands.deploy           - INFO - ==================================================
2025-11-26 23:07:45 - commands.deploy           - INFO - [Overall: 66%] [Step: 35/53] Executing: haproxy - haproxy service enablement
2025-11-26 23:07:45 - commands.deploy           - INFO - ==================================================
2025-11-26 23:07:45 - services.ssh              - INFO - Running: sudo -n bash -c 'haproxy -c -f /etc/haproxy/haproxy.cfg 2>&1'
2025-11-26 23:07:45 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl restart haproxy 2>&1'
2025-11-26 23:07:45 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl enable haproxy 2>&1'
2025-11-26 23:07:48 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active haproxy 2>/dev/null || echo inactive'
2025-11-26 23:07:48 - commands.deploy           - INFO - Action 'haproxy service enablement' for container 'haproxy' completed successfully
2025-11-26 23:07:48 - commands.deploy           - INFO - ==================================================
2025-11-26 23:07:48 - commands.deploy           - INFO - [Overall: 67%] [Step: 36/53] Executing: dns - create container
2025-11-26 23:07:48 - commands.deploy           - INFO - ==================================================
2025-11-26 23:07:48 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:07:49 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:07:49 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:07:49 - services.ssh              - INFO - Running: pct destroy 3019 --force
2025-11-26 23:07:50 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/docker-ubuntu25.04-template_*_amd64.tar.zst 2>/dev/null | head -1 | xargs basename 2>/dev/null
2025-11-26 23:07:50 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && test -r /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && echo 'valid' || echo 'invalid'
2025-11-26 23:07:50 - actions.create_container  - INFO - Checking if container 3019 already exists...
2025-11-26 23:07:50 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:07:50 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:07:50 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:07:50 - services.ssh              - INFO - Running: pct list | grep '^3019 '
2025-11-26 23:07:52 - actions.create_container  - INFO - Creating container 3019 from template...
2025-11-26 23:07:52 - services.ssh              - INFO - Running: pct create 3019 /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst --hostname dns --memory 2048 --swap 2048 --cores 4 --net0 name=eth0,bridge=vmbr0,firewall=0,gw=10.11.3.253,ip=10.11.3.19/24,ip6=dhcp,type=veth --rootfs sdb:20 --unprivileged 0 --ostype ubuntu --arch amd64
2025-11-26 23:08:01 - actions.create_container  - INFO - Setting container features...
2025-11-26 23:08:01 - services.ssh              - INFO - Running: pct set 3019 --features nesting=1,keyctl=1,fuse=1
2025-11-26 23:08:03 - actions.create_container  - INFO - Starting container 3019...
2025-11-26 23:08:03 - services.ssh              - INFO - Running: pct start 3019
2025-11-26 23:08:07 - actions.create_container  - INFO - Bringing up network interface...
2025-11-26 23:08:07 - services.pct              - INFO - Running in container 3019: ping -c 1 8.8.8.8
2025-11-26 23:08:07 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo cGluZyAtYyAxIDguOC44Ljg= | base64 -d | bash"
2025-11-26 23:08:08 - actions.create_container  - INFO - Network interface is up and reachable
2025-11-26 23:08:08 - services.pct              - INFO - Running in container 3019: id -u jaal >/dev/null 2>&1 || useradd -m -s /bin/bash -G sudo jaal
2025-11-26 23:08:08 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgfHwgdXNlcmFkZCAtbSAtcyAvYmluL2Jhc2ggLUcgc3VkbyBqYWFs | base64 -d | bash"
2025-11-26 23:08:09 - services.pct              - INFO - Running in container 3019: echo jaal:jaal123 | chpasswd
2025-11-26 23:08:09 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo ZWNobyBqYWFsOmphYWwxMjMgfCBjaHBhc3N3ZA== | base64 -d | bash"
2025-11-26 23:08:10 - actions.create_container  - INFO - Password set for user jaal
2025-11-26 23:08:10 - services.pct              - INFO - Running in container 3019: printf 'jaal ALL=(ALL) NOPASSWD: ALL
' > /etc/sudoers.d/jaal 2>&1
2025-11-26 23:08:10 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo cHJpbnRmICdqYWFsIEFMTD0oQUxMKSBOT1BBU1NXRDogQUxMCicgPiAvZXRjL3N1ZG9lcnMuZC9qYWFsIDI+JjE= | base64 -d | bash"
2025-11-26 23:08:11 - services.pct              - INFO - Running in container 3019: chmod 440 /etc/sudoers.d/jaal 2>&1
2025-11-26 23:08:11 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo Y2htb2QgNDQwIC9ldGMvc3Vkb2Vycy5kL2phYWwgMj4mMQ== | base64 -d | bash"
2025-11-26 23:08:13 - services.pct              - INFO - Running in container 3019: id -u jaal >/dev/null 2>&1 && echo 'exists' || echo 'missing'
2025-11-26 23:08:13 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyAnZXhpc3RzJyB8fCBlY2hvICdtaXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:08:14 - services.pct              - INFO - Running in container 3019: mkdir -p /home/jaal/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /home/jaal/.ssh/authorized_keys && chmod 600 /home/jaal/.ssh/authorized_keys && chown jaal:jaal /home/jaal/.ssh/authorized_keys && chown -R jaal:jaal /home/jaal/.ssh && chmod 700 /home/jaal/.ssh
2025-11-26 23:08:14 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo bWtkaXIgLXAgL2hvbWUvamFhbC8uc3NoICYmIGVjaG8gYzNOb0xYSnpZU0JCUVVGQlFqTk9lbUZETVhsak1rVkJRVUZCUkVGUlFVSkJRVUZDWjFGRVNHaHpaeTlTUWxNeFpXOW1aRUowVDIxU1oyNXJObkpSWlZkTU5XVkVRMEZHVWxsaGRHOXRiMjV4ZWxaUVNHNVZhRWRCVjB4M2NFRnBibFJMV1RCaWNtVkhOMUozWTFCNlUzazRaa1V6YkhCQmVHUTNaRFUxTVZOcmIzZFJUM3BNVHpGaGRWSlVka05IWjBkS1RVTlphSE5wVDFSRVpHYzBlVU5IWkdoMWRsUnNaMGN5VDNnNFkwTkZXVGt6VG5Ob05HSnFXRE50Tm13NVluQnhWMkZ0Wkd4WU5WSklOV0pNZVhCNk5XeHhMME5rTTJWVWNISkdXRU5uY1VwUFkxSlVMemRCTWxSeFJHVklTM1pGTTNwWlRUWjBaV2RyWlN0a1VXRmtUalF4Y21nNWMxa3pTME5ITUhGbVJqVTRkRzR5Umt4NlNuZzNNMGc1ZDFKSFpVTlhlRlJvY2tZMWQxTjZaM0pHUkVsWlIxUktWRTFWY1V0bllrcFdWbGxYV0M5aVdTOXVVVmRVT0ZaUE5tWk1lbWtyTUhCQlQzbzVNekZ4TkdWdVNIUlBOVFpVTkRSaVJYRjBabWMxWkZONE4ySk1SMGx5TlRaSWJXeHVNVWRJYUc5MVZTdDFOelpqVmxSWFQyOXFSRlkxVkRGWGMxSkJWSFE0WVVRNU1EZERhVGszUmxBdk5EWmpValY1U2xSNFlWUndLM0I0VjNCdGFESjNZVWRsUkZKRVYxRnpkRVZzU0c5VGFuUlFlVzkxZVZWMVYySXpNVzlVUW14ck9FdDNaMDlsY0RONk1UZHhLMWxKYUZwWFVVZElkbTFqVWt0SU1sQkJPVGhKVW5CcFNsWlNlbVk0YzFoS01HTmthMjkxUVRWWFFsTkVaV2RVYjBJMVZ6ZFJVRzFsYUVVOUlITm9ZV1J2ZDJOb1lXMWlaWEpBVTJoaFpHOTNZMmhoYldKbGNuTXRUV0ZqTFcxcGJta3ViRzlqWVd3PSB8IGJhc2U2NCAtZCA+IC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2htb2QgNjAwIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gLVIgamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaCAmJiBjaG1vZCA3MDAgL2hvbWUvamFhbC8uc3No | base64 -d | bash"
2025-11-26 23:08:15 - services.pct              - INFO - Running in container 3019: mkdir -p /root/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /root/.ssh/authorized_keys && chmod 600 /root/.ssh/authorized_keys
2025-11-26 23:08:15 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo bWtkaXIgLXAgL3Jvb3QvLnNzaCAmJiBlY2hvIGMzTm9MWEp6WVNCQlFVRkJRak5PZW1GRE1YbGpNa1ZCUVVGQlJFRlJRVUpCUVVGQ1oxRkVTR2h6Wnk5U1FsTXhaVzltWkVKMFQyMVNaMjVyTm5KUlpWZE1OV1ZFUTBGR1VsbGhkRzl0YjI1eGVsWlFTRzVWYUVkQlYweDNjRUZwYmxSTFdUQmljbVZITjFKM1kxQjZVM2s0WmtVemJIQkJlR1EzWkRVMU1WTnJiM2RSVDNwTVR6RmhkVkpVZGtOSFowZEtUVU5aYUhOcFQxUkVaR2MwZVVOSFpHaDFkbFJzWjBjeVQzZzRZME5GV1RrelRuTm9OR0pxV0ROdE5tdzVZbkJ4VjJGdFpHeFlOVkpJTldKTWVYQjZOV3h4TDBOa00yVlVjSEpHV0VObmNVcFBZMUpVTHpkQk1sUnhSR1ZJUzNaRk0zcFpUVFowWldkclpTdGtVV0ZrVGpReGNtZzVjMWt6UzBOSE1IRm1SalU0ZEc0eVJreDZTbmczTTBnNWQxSkhaVU5YZUZSb2NrWTFkMU42WjNKR1JFbFpSMVJLVkUxVmNVdG5Za3BXVmxsWFdDOWlXUzl1VVZkVU9GWlBObVpNZW1rck1IQkJUM281TXpGeE5HVnVTSFJQTlRaVU5EUmlSWEYwWm1jMVpGTjROMkpNUjBseU5UWkliV3h1TVVkSWFHOTFWU3QxTnpaalZsUlhUMjlxUkZZMVZERlhjMUpCVkhRNFlVUTVNRGREYVRrM1JsQXZORFpqVWpWNVNsUjRZVlJ3SzNCNFYzQnRhREozWVVkbFJGSkVWMUZ6ZEVWc1NHOVRhblJRZVc5MWVWVjFWMkl6TVc5VVFteHJPRXQzWjA5bGNETjZNVGR4SzFsSmFGcFhVVWRJZG0xalVrdElNbEJCT1RoSlVuQnBTbFpTZW1ZNGMxaEtNR05rYTI5MVFUVlhRbE5FWldkVWIwSTFWemRSVUcxbGFFVTlJSE5vWVdSdmQyTm9ZVzFpWlhKQVUyaGhaRzkzWTJoaGJXSmxjbk10VFdGakxXMXBibWt1Ykc5allXdz0gfCBiYXNlNjQgLWQgPiAvcm9vdC8uc3NoL2F1dGhvcml6ZWRfa2V5cyAmJiBjaG1vZCA2MDAgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXM= | base64 -d | bash"
2025-11-26 23:08:16 - services.pct              - INFO - Running in container 3019: test -f /home/jaal/.ssh/authorized_keys && test -f /root/.ssh/authorized_keys && echo 'keys_exist' || echo 'keys_missing'
2025-11-26 23:08:16 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo dGVzdCAtZiAvaG9tZS9qYWFsLy5zc2gvYXV0aG9yaXplZF9rZXlzICYmIHRlc3QgLWYgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgZWNobyAna2V5c19leGlzdCcgfHwgZWNobyAna2V5c19taXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:08:17 - services.pct              - INFO - SSH key setup verified successfully
2025-11-26 23:08:17 - services.pct              - INFO - Running in container 3019: dpkg -l | grep -q '^ii.*openssh-server' || echo 'not_installed'
2025-11-26 23:08:17 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo ZHBrZyAtbCB8IGdyZXAgLXEgJ15paS4qb3BlbnNzaC1zZXJ2ZXInIHx8IGVjaG8gJ25vdF9pbnN0YWxsZWQn | base64 -d | bash"
2025-11-26 23:08:18 - services.pct              - INFO - Running in container 3019: systemctl enable ssh 2>&1
2025-11-26 23:08:18 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 23:08:20 - services.pct              - INFO - Running in container 3019: systemctl start ssh 2>&1
2025-11-26 23:08:20 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 23:08:24 - services.pct              - INFO - Running in container 3019: systemctl is-active ssh 2>/dev/null || echo inactive
2025-11-26 23:08:24 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBzc2ggMj4vZGV2L251bGwgfHwgZWNobyBpbmFjdGl2ZQ== | base64 -d | bash"
2025-11-26 23:08:25 - services.pct              - INFO - SSH service is running
2025-11-26 23:08:25 - services.pct              - INFO - Running in container 3019: ss -tlnp | grep ':22 ' || netstat -tlnp 2>/dev/null | grep ':22 ' || echo 'not_listening'
2025-11-26 23:08:25 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo c3MgLXRsbnAgfCBncmVwICc6MjIgJyB8fCBuZXRzdGF0IC10bG5wIDI+L2Rldi9udWxsIHwgZ3JlcCAnOjIyICcgfHwgZWNobyAnbm90X2xpc3RlbmluZyc= | base64 -d | bash"
2025-11-26 23:08:27 - services.pct              - INFO - SSH listening check: LISTEN 0      4096         0.0.0.0:22        0.0.0.0:*    users:(("sshd",pid=148,fd=3),("systemd",pid=1,fd=123))
LISTEN 0      4096            [::]:22           [::]:*    users:(("sshd",pid=148,fd=4),("systemd",pid=1,fd=124))
2025-11-26 23:08:27 - services.pct              - INFO - Running in container 3019: grep -E '^ListenAddress|^#ListenAddress' /etc/ssh/sshd_config 2>/dev/null | head -5 || echo 'config_check_failed'
2025-11-26 23:08:27 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo Z3JlcCAtRSAnXkxpc3RlbkFkZHJlc3N8XiNMaXN0ZW5BZGRyZXNzJyAvZXRjL3NzaC9zc2hkX2NvbmZpZyAyPi9kZXYvbnVsbCB8IGhlYWQgLTUgfHwgZWNobyAnY29uZmlnX2NoZWNrX2ZhaWxlZCc= | base64 -d | bash"
2025-11-26 23:08:28 - services.pct              - INFO - SSH config check: #ListenAddress 0.0.0.0
#ListenAddress ::
2025-11-26 23:08:28 - services.pct              - INFO - Running in container 3019: timeout 1 bash -c '</dev/tcp/127.0.0.1/22' 2>&1 && echo 'localhost_ok' || echo 'localhost_failed'
2025-11-26 23:08:28 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo dGltZW91dCAxIGJhc2ggLWMgJzwvZGV2L3RjcC8xMjcuMC4wLjEvMjInIDI+JjEgJiYgZWNobyAnbG9jYWxob3N0X29rJyB8fCBlY2hvICdsb2NhbGhvc3RfZmFpbGVkJw== | base64 -d | bash"
2025-11-26 23:08:29 - services.pct              - INFO - SSH localhost connection test: localhost_ok
2025-11-26 23:08:29 - actions.create_container  - INFO - Waiting for container to be ready with SSH connectivity (up to 10 minutes)...
2025-11-26 23:08:29 - services.ssh              - INFO - Running: pct status 3019
2025-11-26 23:08:30 - services.pct              - INFO - Running in container 3019: echo test
2025-11-26 23:08:30 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo ZWNobyB0ZXN0 | base64 -d | bash"
2025-11-26 23:08:31 - services.pct              - INFO - Testing SSH connection to jaal@10.11.3.19...
2025-11-26 23:08:32 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:08:32 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:08:32 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.19
2025-11-26 23:08:32 - services.ssh              - INFO - Running: echo 'SSH connection test successful'
2025-11-26 23:08:32 - services.pct              - INFO - SSH connectivity verified - connection successful
2025-11-26 23:08:32 - services.pct              - INFO - Container is ready and SSH is accessible!
2025-11-26 23:08:32 - actions.create_container  - INFO - Container 3019 created successfully
2025-11-26 23:08:32 - commands.deploy           - INFO - Container 'dns' created successfully
2025-11-26 23:08:32 - commands.deploy           - INFO - Setting up SSH connection to container dns...
2025-11-26 23:08:32 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:08:33 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:08:33 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.19
2025-11-26 23:08:35 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:08:35 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:08:35 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:08:35 - commands.deploy           - INFO - ==================================================
2025-11-26 23:08:35 - commands.deploy           - INFO - [Overall: 69%] [Step: 37/53] Executing: dns - cloud-init wait
2025-11-26 23:08:35 - commands.deploy           - INFO - ==================================================
2025-11-26 23:08:35 - services.ssh              - INFO - Running: command -v cloud-init
2025-11-26 23:08:35 - actions.cloud_init_wait   - INFO - cloud-init not found, skipping
2025-11-26 23:08:35 - commands.deploy           - INFO - Action 'cloud-init wait' for container 'dns' completed successfully
2025-11-26 23:08:35 - commands.deploy           - INFO - ==================================================
2025-11-26 23:08:35 - commands.deploy           - INFO - [Overall: 71%] [Step: 38/53] Executing: dns - dotnet installation
2025-11-26 23:08:35 - commands.deploy           - INFO - ==================================================
2025-11-26 23:08:35 - actions.install_dotnet    - INFO - Installing .NET SDK...
2025-11-26 23:08:35 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:08:35 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:08:35 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:08:35 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:08:35 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:08:36 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:08:36 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:08:36 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:08:36 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:08:36 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:08:36 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:08:36 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:08:36 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:08:36 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:08:37 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:08:37 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:08:37 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:08:37 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:08:37 - services.ssh              - INFO - Running: sudo -n apt-get update -o APT::Get::Hide-Progress=true < /dev/null
2025-11-26 23:08:44 - services.apt              - INFO - apt update succeeded on attempt 1/20
2025-11-26 23:08:44 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:08:44 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:08:44 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:08:44 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:08:44 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:08:45 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:08:45 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:08:45 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:08:45 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:08:45 - services.ssh              - INFO - Running: sudo -n apt install -y -o APT::Get::Hide-Progress=true dotnet-sdk-8.0
2025-11-26 23:09:03 - commands.deploy           - INFO - Action 'dotnet installation' for container 'dns' completed successfully
2025-11-26 23:09:03 - commands.deploy           - INFO - ==================================================
2025-11-26 23:09:03 - commands.deploy           - INFO - [Overall: 73%] [Step: 39/53] Executing: dns - disable systemd resolved
2025-11-26 23:09:03 - commands.deploy           - INFO - ==================================================
2025-11-26 23:09:03 - actions.disable_systemd_resolved - INFO - Disabling systemd-resolved to free port 53...
2025-11-26 23:09:03 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl stop systemd-resolved 2>&1'
2025-11-26 23:09:03 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl disable systemd-resolved 2>&1'
2025-11-26 23:09:03 - actions.disable_systemd_resolved - INFO - Configuring static resolv.conf...
2025-11-26 23:09:03 - services.ssh              - INFO - Running: sudo -n bash -c 'rm -f /etc/resolv.conf'
2025-11-26 23:09:03 - services.ssh              - INFO - Running: sudo -n bash -c 'echo cHJpbnRmICduYW1lc2VydmVyIDguOC44LjgKbmFtZXNlcnZlciAxLjEuMS4xCm5hbWVzZXJ2ZXIgOC44LjQuNAonID4gL2V0Yy9yZXNvbHYuY29uZiAyPiYx | base64 -d | bash'
2025-11-26 23:09:03 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active systemd-resolved 2>/dev/null || echo inactive'
2025-11-26 23:09:03 - actions.disable_systemd_resolved - INFO - systemd-resolved is stopped and disabled
2025-11-26 23:09:03 - commands.deploy           - INFO - Action 'disable systemd resolved' for container 'dns' completed successfully
2025-11-26 23:09:03 - commands.deploy           - INFO - ==================================================
2025-11-26 23:09:03 - commands.deploy           - INFO - [Overall: 75%] [Step: 40/53] Executing: dns - sins dns installation
2025-11-26 23:09:03 - commands.deploy           - INFO - ==================================================
2025-11-26 23:09:03 - actions.install_sins_dns  - INFO - Ensuring git is installed...
2025-11-26 23:09:03 - services.ssh              - INFO - Running: sudo -n bash -c 'command -v git >/dev/null && echo exists || echo missing'
2025-11-26 23:09:03 - actions.install_sins_dns  - INFO - Cloning SiNS repository...
2025-11-26 23:09:03 - services.ssh              - INFO - Running: sudo -n bash -c 'cd /opt && rm -rf sins && git clone https://github.com/judyandiealvarez/SiNS.git sins'
2025-11-26 23:09:04 - services.ssh              - INFO - Running: sudo -n bash -c 'test -d /opt/sins && echo exists || echo missing'
2025-11-26 23:09:05 - actions.install_sins_dns  - INFO - Configuring SiNS application settings...
2025-11-26 23:09:05 - services.ssh              - INFO - Running: sudo -n bash -c 'echo ewogICJDb25uZWN0aW9uU3RyaW5ncyI6IHsKICAgICJEZWZhdWx0Q29ubmVjdGlvbiI6ICJIb3N0PTEwLjExLjMuMTg7UG9ydD01NDMyO0RhdGFiYXNlPWRuc19zZXJ2ZXI7VXNlcm5hbWU9cG9zdGdyZXM7UGFzc3dvcmQ9cG9zdGdyZXMiCiAgfSwKICAiRG5zU2V0dGluZ3MiOiB7CiAgICAiUG9ydCI6IDUzCiAgfSwKICAiV2ViU2V0dGluZ3MiOiB7CiAgICAiUG9ydCI6IDgwCiAgfQp9 | base64 -d > /opt/sins/sins/appsettings.Production.json'
2025-11-26 23:09:05 - actions.install_sins_dns  - INFO - Building SiNS application...
2025-11-26 23:09:05 - services.ssh              - INFO - Running: sudo -n bash -c 'cd /opt/sins/sins && dotnet publish -c Release -o /opt/sins/app'
2025-11-26 23:09:19 - services.ssh              - INFO - Running: sudo -n bash -c 'test -f /opt/sins/app/sins.dll && echo exists || echo missing'
2025-11-26 23:09:19 - services.ssh              - INFO - Running: sudo -n bash -c 'echo ewogICJDb25uZWN0aW9uU3RyaW5ncyI6IHsKICAgICJEZWZhdWx0Q29ubmVjdGlvbiI6ICJIb3N0PTEwLjExLjMuMTg7UG9ydD01NDMyO0RhdGFiYXNlPWRuc19zZXJ2ZXI7VXNlcm5hbWU9cG9zdGdyZXM7UGFzc3dvcmQ9cG9zdGdyZXMiCiAgfSwKICAiRG5zU2V0dGluZ3MiOiB7CiAgICAiUG9ydCI6IDUzCiAgfSwKICAiV2ViU2V0dGluZ3MiOiB7CiAgICAiUG9ydCI6IDgwCiAgfQp9 | base64 -d > /opt/sins/app/appsettings.json'
2025-11-26 23:09:20 - commands.deploy           - INFO - Action 'sins dns installation' for container 'dns' completed successfully
2025-11-26 23:09:20 - commands.deploy           - INFO - ==================================================
2025-11-26 23:09:20 - commands.deploy           - INFO - [Overall: 77%] [Step: 41/53] Executing: dns - sins dns service configuration
2025-11-26 23:09:20 - commands.deploy           - INFO - ==================================================
2025-11-26 23:09:20 - actions.configure_sins_service - INFO - Creating SiNS systemd service...
2025-11-26 23:09:20 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl stop sins 2>/dev/null || true; echo W1VuaXRdCkRlc2NyaXB0aW9uPVNpTlMgRE5TIFNlcnZlcgpBZnRlcj1uZXR3b3JrLnRhcmdldAoKW1NlcnZpY2VdClR5cGU9c2ltcGxlClVzZXI9cm9vdApXb3JraW5nRGlyZWN0b3J5PS9vcHQvc2lucy9hcHAKRXhlY1N0YXJ0PS91c3IvYmluL2RvdG5ldCAvb3B0L3NpbnMvYXBwL3NpbnMuZGxsClJlc3RhcnQ9YWx3YXlzClJlc3RhcnRTZWM9MTAKCltJbnN0YWxsXQpXYW50ZWRCeT1tdWx0aS11c2VyLnRhcmdldAo= | base64 -d > /etc/systemd/system/sins.service && systemctl daemon-reload'
2025-11-26 23:09:20 - commands.deploy           - INFO - Action 'sins dns service configuration' for container 'dns' completed successfully
2025-11-26 23:09:20 - commands.deploy           - INFO - ==================================================
2025-11-26 23:09:20 - commands.deploy           - INFO - [Overall: 79%] [Step: 42/53] Executing: dns - sins dns service enablement
2025-11-26 23:09:20 - commands.deploy           - INFO - ==================================================
2025-11-26 23:09:20 - actions.enable_sins_service - INFO - Enabling and starting SiNS service...
2025-11-26 23:09:20 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl enable sins && systemctl start sins 2>&1'
2025-11-26 23:09:23 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active sins 2>/dev/null || echo inactive'
2025-11-26 23:09:23 - services.ssh              - INFO - Running: sudo -n bash -c 'ss -tulnp | grep -E '"'"':53.*sins|:53.*dotnet'"'"' || echo '"'"'not_listening'"'"''
2025-11-26 23:09:23 - actions.enable_sins_service - WARNING - SiNS service is active but not listening on port 53
2025-11-26 23:09:23 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl status sins --no-pager 2>&1'
2025-11-26 23:09:24 - services.ssh              - INFO - Running: sudo -n bash -c 'pgrep -f sins.dll >/dev/null && echo running || echo not_running'
2025-11-26 23:09:24 - actions.enable_sins_service - INFO - SiNS process is running despite inactive systemd status
2025-11-26 23:09:24 - commands.deploy           - INFO - Action 'sins dns service enablement' for container 'dns' completed successfully
2025-11-26 23:09:24 - commands.deploy           - INFO - ==================================================
2025-11-26 23:09:24 - commands.deploy           - INFO - [Overall: 81%] [Step: 43/53] Executing: swarm-manager - create container
2025-11-26 23:09:24 - commands.deploy           - INFO - ==================================================
2025-11-26 23:09:24 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:09:24 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:09:24 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:09:24 - services.ssh              - INFO - Running: pct destroy 3005 --force
2025-11-26 23:09:25 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/docker-ubuntu25.04-template_*_amd64.tar.zst 2>/dev/null | head -1 | xargs basename 2>/dev/null
2025-11-26 23:09:25 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && test -r /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && echo 'valid' || echo 'invalid'
2025-11-26 23:09:25 - actions.create_container  - INFO - Checking if container 3005 already exists...
2025-11-26 23:09:26 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:09:26 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:09:26 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:09:26 - services.ssh              - INFO - Running: pct list | grep '^3005 '
2025-11-26 23:09:27 - actions.create_container  - INFO - Creating container 3005 from template...
2025-11-26 23:09:27 - services.ssh              - INFO - Running: pct create 3005 /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst --hostname swarm-manager --memory 4096 --swap 4096 --cores 8 --net0 name=eth0,bridge=vmbr0,firewall=0,gw=10.11.3.253,ip=10.11.3.5/24,ip6=dhcp,type=veth --rootfs sdb:40 --unprivileged 0 --ostype ubuntu --arch amd64
2025-11-26 23:09:36 - actions.create_container  - INFO - Setting container features...
2025-11-26 23:09:37 - services.ssh              - INFO - Running: pct set 3005 --features nesting=1,keyctl=1,fuse=1
2025-11-26 23:09:38 - actions.create_container  - INFO - Starting container 3005...
2025-11-26 23:09:38 - services.ssh              - INFO - Running: pct start 3005
2025-11-26 23:09:42 - actions.create_container  - INFO - Bringing up network interface...
2025-11-26 23:09:42 - services.pct              - INFO - Running in container 3005: ping -c 1 8.8.8.8
2025-11-26 23:09:42 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo cGluZyAtYyAxIDguOC44Ljg= | base64 -d | bash"
2025-11-26 23:09:43 - actions.create_container  - INFO - Network interface is up and reachable
2025-11-26 23:09:43 - services.pct              - INFO - Running in container 3005: id -u jaal >/dev/null 2>&1 || useradd -m -s /bin/bash -G sudo jaal
2025-11-26 23:09:43 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgfHwgdXNlcmFkZCAtbSAtcyAvYmluL2Jhc2ggLUcgc3VkbyBqYWFs | base64 -d | bash"
2025-11-26 23:09:44 - services.pct              - INFO - Running in container 3005: echo jaal:jaal123 | chpasswd
2025-11-26 23:09:44 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo ZWNobyBqYWFsOmphYWwxMjMgfCBjaHBhc3N3ZA== | base64 -d | bash"
2025-11-26 23:09:45 - actions.create_container  - INFO - Password set for user jaal
2025-11-26 23:09:45 - services.pct              - INFO - Running in container 3005: printf 'jaal ALL=(ALL) NOPASSWD: ALL
' > /etc/sudoers.d/jaal 2>&1
2025-11-26 23:09:45 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo cHJpbnRmICdqYWFsIEFMTD0oQUxMKSBOT1BBU1NXRDogQUxMCicgPiAvZXRjL3N1ZG9lcnMuZC9qYWFsIDI+JjE= | base64 -d | bash"
2025-11-26 23:09:47 - services.pct              - INFO - Running in container 3005: chmod 440 /etc/sudoers.d/jaal 2>&1
2025-11-26 23:09:47 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo Y2htb2QgNDQwIC9ldGMvc3Vkb2Vycy5kL2phYWwgMj4mMQ== | base64 -d | bash"
2025-11-26 23:09:48 - services.pct              - INFO - Running in container 3005: id -u jaal >/dev/null 2>&1 && echo 'exists' || echo 'missing'
2025-11-26 23:09:48 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyAnZXhpc3RzJyB8fCBlY2hvICdtaXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:09:49 - services.pct              - INFO - Running in container 3005: mkdir -p /home/jaal/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /home/jaal/.ssh/authorized_keys && chmod 600 /home/jaal/.ssh/authorized_keys && chown jaal:jaal /home/jaal/.ssh/authorized_keys && chown -R jaal:jaal /home/jaal/.ssh && chmod 700 /home/jaal/.ssh
2025-11-26 23:09:49 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo bWtkaXIgLXAgL2hvbWUvamFhbC8uc3NoICYmIGVjaG8gYzNOb0xYSnpZU0JCUVVGQlFqTk9lbUZETVhsak1rVkJRVUZCUkVGUlFVSkJRVUZDWjFGRVNHaHpaeTlTUWxNeFpXOW1aRUowVDIxU1oyNXJObkpSWlZkTU5XVkVRMEZHVWxsaGRHOXRiMjV4ZWxaUVNHNVZhRWRCVjB4M2NFRnBibFJMV1RCaWNtVkhOMUozWTFCNlUzazRaa1V6YkhCQmVHUTNaRFUxTVZOcmIzZFJUM3BNVHpGaGRWSlVka05IWjBkS1RVTlphSE5wVDFSRVpHYzBlVU5IWkdoMWRsUnNaMGN5VDNnNFkwTkZXVGt6VG5Ob05HSnFXRE50Tm13NVluQnhWMkZ0Wkd4WU5WSklOV0pNZVhCNk5XeHhMME5rTTJWVWNISkdXRU5uY1VwUFkxSlVMemRCTWxSeFJHVklTM1pGTTNwWlRUWjBaV2RyWlN0a1VXRmtUalF4Y21nNWMxa3pTME5ITUhGbVJqVTRkRzR5Umt4NlNuZzNNMGc1ZDFKSFpVTlhlRlJvY2tZMWQxTjZaM0pHUkVsWlIxUktWRTFWY1V0bllrcFdWbGxYV0M5aVdTOXVVVmRVT0ZaUE5tWk1lbWtyTUhCQlQzbzVNekZ4TkdWdVNIUlBOVFpVTkRSaVJYRjBabWMxWkZONE4ySk1SMGx5TlRaSWJXeHVNVWRJYUc5MVZTdDFOelpqVmxSWFQyOXFSRlkxVkRGWGMxSkJWSFE0WVVRNU1EZERhVGszUmxBdk5EWmpValY1U2xSNFlWUndLM0I0VjNCdGFESjNZVWRsUkZKRVYxRnpkRVZzU0c5VGFuUlFlVzkxZVZWMVYySXpNVzlVUW14ck9FdDNaMDlsY0RONk1UZHhLMWxKYUZwWFVVZElkbTFqVWt0SU1sQkJPVGhKVW5CcFNsWlNlbVk0YzFoS01HTmthMjkxUVRWWFFsTkVaV2RVYjBJMVZ6ZFJVRzFsYUVVOUlITm9ZV1J2ZDJOb1lXMWlaWEpBVTJoaFpHOTNZMmhoYldKbGNuTXRUV0ZqTFcxcGJta3ViRzlqWVd3PSB8IGJhc2U2NCAtZCA+IC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2htb2QgNjAwIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gLVIgamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaCAmJiBjaG1vZCA3MDAgL2hvbWUvamFhbC8uc3No | base64 -d | bash"
2025-11-26 23:09:50 - services.pct              - INFO - Running in container 3005: mkdir -p /root/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /root/.ssh/authorized_keys && chmod 600 /root/.ssh/authorized_keys
2025-11-26 23:09:50 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo bWtkaXIgLXAgL3Jvb3QvLnNzaCAmJiBlY2hvIGMzTm9MWEp6WVNCQlFVRkJRak5PZW1GRE1YbGpNa1ZCUVVGQlJFRlJRVUpCUVVGQ1oxRkVTR2h6Wnk5U1FsTXhaVzltWkVKMFQyMVNaMjVyTm5KUlpWZE1OV1ZFUTBGR1VsbGhkRzl0YjI1eGVsWlFTRzVWYUVkQlYweDNjRUZwYmxSTFdUQmljbVZITjFKM1kxQjZVM2s0WmtVemJIQkJlR1EzWkRVMU1WTnJiM2RSVDNwTVR6RmhkVkpVZGtOSFowZEtUVU5aYUhOcFQxUkVaR2MwZVVOSFpHaDFkbFJzWjBjeVQzZzRZME5GV1RrelRuTm9OR0pxV0ROdE5tdzVZbkJ4VjJGdFpHeFlOVkpJTldKTWVYQjZOV3h4TDBOa00yVlVjSEpHV0VObmNVcFBZMUpVTHpkQk1sUnhSR1ZJUzNaRk0zcFpUVFowWldkclpTdGtVV0ZrVGpReGNtZzVjMWt6UzBOSE1IRm1SalU0ZEc0eVJreDZTbmczTTBnNWQxSkhaVU5YZUZSb2NrWTFkMU42WjNKR1JFbFpSMVJLVkUxVmNVdG5Za3BXVmxsWFdDOWlXUzl1VVZkVU9GWlBObVpNZW1rck1IQkJUM281TXpGeE5HVnVTSFJQTlRaVU5EUmlSWEYwWm1jMVpGTjROMkpNUjBseU5UWkliV3h1TVVkSWFHOTFWU3QxTnpaalZsUlhUMjlxUkZZMVZERlhjMUpCVkhRNFlVUTVNRGREYVRrM1JsQXZORFpqVWpWNVNsUjRZVlJ3SzNCNFYzQnRhREozWVVkbFJGSkVWMUZ6ZEVWc1NHOVRhblJRZVc5MWVWVjFWMkl6TVc5VVFteHJPRXQzWjA5bGNETjZNVGR4SzFsSmFGcFhVVWRJZG0xalVrdElNbEJCT1RoSlVuQnBTbFpTZW1ZNGMxaEtNR05rYTI5MVFUVlhRbE5FWldkVWIwSTFWemRSVUcxbGFFVTlJSE5vWVdSdmQyTm9ZVzFpWlhKQVUyaGhaRzkzWTJoaGJXSmxjbk10VFdGakxXMXBibWt1Ykc5allXdz0gfCBiYXNlNjQgLWQgPiAvcm9vdC8uc3NoL2F1dGhvcml6ZWRfa2V5cyAmJiBjaG1vZCA2MDAgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXM= | base64 -d | bash"
2025-11-26 23:09:51 - services.pct              - INFO - Running in container 3005: test -f /home/jaal/.ssh/authorized_keys && test -f /root/.ssh/authorized_keys && echo 'keys_exist' || echo 'keys_missing'
2025-11-26 23:09:51 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo dGVzdCAtZiAvaG9tZS9qYWFsLy5zc2gvYXV0aG9yaXplZF9rZXlzICYmIHRlc3QgLWYgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgZWNobyAna2V5c19leGlzdCcgfHwgZWNobyAna2V5c19taXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:09:52 - services.pct              - INFO - SSH key setup verified successfully
2025-11-26 23:09:52 - services.pct              - INFO - Running in container 3005: dpkg -l | grep -q '^ii.*openssh-server' || echo 'not_installed'
2025-11-26 23:09:52 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo ZHBrZyAtbCB8IGdyZXAgLXEgJ15paS4qb3BlbnNzaC1zZXJ2ZXInIHx8IGVjaG8gJ25vdF9pbnN0YWxsZWQn | base64 -d | bash"
2025-11-26 23:09:54 - services.pct              - INFO - Running in container 3005: systemctl enable ssh 2>&1
2025-11-26 23:09:54 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 23:09:55 - services.pct              - INFO - Running in container 3005: systemctl start ssh 2>&1
2025-11-26 23:09:55 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 23:10:00 - services.pct              - INFO - Running in container 3005: systemctl is-active ssh 2>/dev/null || echo inactive
2025-11-26 23:10:00 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBzc2ggMj4vZGV2L251bGwgfHwgZWNobyBpbmFjdGl2ZQ== | base64 -d | bash"
2025-11-26 23:10:01 - services.pct              - INFO - SSH service is running
2025-11-26 23:10:01 - services.pct              - INFO - Running in container 3005: ss -tlnp | grep ':22 ' || netstat -tlnp 2>/dev/null | grep ':22 ' || echo 'not_listening'
2025-11-26 23:10:01 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo c3MgLXRsbnAgfCBncmVwICc6MjIgJyB8fCBuZXRzdGF0IC10bG5wIDI+L2Rldi9udWxsIHwgZ3JlcCAnOjIyICcgfHwgZWNobyAnbm90X2xpc3RlbmluZyc= | base64 -d | bash"
2025-11-26 23:10:02 - services.pct              - INFO - SSH listening check: LISTEN 0      4096         0.0.0.0:22        0.0.0.0:*    users:(("sshd",pid=148,fd=3),("systemd",pid=1,fd=115))
LISTEN 0      4096            [::]:22           [::]:*    users:(("sshd",pid=148,fd=4),("systemd",pid=1,fd=116))
2025-11-26 23:10:02 - services.pct              - INFO - Running in container 3005: grep -E '^ListenAddress|^#ListenAddress' /etc/ssh/sshd_config 2>/dev/null | head -5 || echo 'config_check_failed'
2025-11-26 23:10:02 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo Z3JlcCAtRSAnXkxpc3RlbkFkZHJlc3N8XiNMaXN0ZW5BZGRyZXNzJyAvZXRjL3NzaC9zc2hkX2NvbmZpZyAyPi9kZXYvbnVsbCB8IGhlYWQgLTUgfHwgZWNobyAnY29uZmlnX2NoZWNrX2ZhaWxlZCc= | base64 -d | bash"
2025-11-26 23:10:03 - services.pct              - INFO - SSH config check: #ListenAddress 0.0.0.0
#ListenAddress ::
2025-11-26 23:10:03 - services.pct              - INFO - Running in container 3005: timeout 1 bash -c '</dev/tcp/127.0.0.1/22' 2>&1 && echo 'localhost_ok' || echo 'localhost_failed'
2025-11-26 23:10:03 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo dGltZW91dCAxIGJhc2ggLWMgJzwvZGV2L3RjcC8xMjcuMC4wLjEvMjInIDI+JjEgJiYgZWNobyAnbG9jYWxob3N0X29rJyB8fCBlY2hvICdsb2NhbGhvc3RfZmFpbGVkJw== | base64 -d | bash"
2025-11-26 23:10:04 - services.pct              - INFO - SSH localhost connection test: localhost_ok
2025-11-26 23:10:04 - actions.create_container  - INFO - Waiting for container to be ready with SSH connectivity (up to 10 minutes)...
2025-11-26 23:10:04 - services.ssh              - INFO - Running: pct status 3005
2025-11-26 23:10:05 - services.pct              - INFO - Running in container 3005: echo test
2025-11-26 23:10:05 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo ZWNobyB0ZXN0 | base64 -d | bash"
2025-11-26 23:10:07 - services.pct              - INFO - Testing SSH connection to jaal@10.11.3.5...
2025-11-26 23:10:07 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:10:07 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:10:07 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.5
2025-11-26 23:10:07 - services.ssh              - INFO - Running: echo 'SSH connection test successful'
2025-11-26 23:10:07 - services.pct              - INFO - SSH connectivity verified - connection successful
2025-11-26 23:10:07 - services.pct              - INFO - Container is ready and SSH is accessible!
2025-11-26 23:10:07 - actions.create_container  - INFO - Container 3005 created successfully
2025-11-26 23:10:07 - commands.deploy           - INFO - Container 'swarm-manager' created successfully
2025-11-26 23:10:07 - commands.deploy           - INFO - Setting up SSH connection to container swarm-manager...
2025-11-26 23:10:08 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:10:08 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:10:08 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.5
2025-11-26 23:10:10 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:10:10 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:10:10 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:10:10 - commands.deploy           - INFO - ==================================================
2025-11-26 23:10:10 - commands.deploy           - INFO - [Overall: 83%] [Step: 44/53] Executing: swarm-manager - cloud-init wait
2025-11-26 23:10:10 - commands.deploy           - INFO - ==================================================
2025-11-26 23:10:10 - services.ssh              - INFO - Running: command -v cloud-init
2025-11-26 23:10:10 - actions.cloud_init_wait   - INFO - cloud-init not found, skipping
2025-11-26 23:10:10 - commands.deploy           - INFO - Action 'cloud-init wait' for container 'swarm-manager' completed successfully
2025-11-26 23:10:10 - commands.deploy           - INFO - ==================================================
2025-11-26 23:10:10 - commands.deploy           - INFO - [Overall: 84%] [Step: 45/53] Executing: swarm-manager - lxc sysctl access configuration
2025-11-26 23:10:10 - commands.deploy           - INFO - ==================================================
2025-11-26 23:10:10 - actions.configure_lxc_sysctl_access - INFO - Configuring LXC container for sysctl access...
2025-11-26 23:10:10 - services.ssh              - INFO - Running: pct set 3005 -lxc.cgroup2.devices.allow 'c 10:200 rwm' 2>/dev/null || true
2025-11-26 23:10:11 - services.ssh              - INFO - Running: pct set 3005 -lxc.mount.auto 'proc:rw sys:rw' 2>/dev/null || true
2025-11-26 23:10:12 - commands.deploy           - INFO - Action 'lxc sysctl access configuration' for container 'swarm-manager' completed successfully
2025-11-26 23:10:12 - commands.deploy           - INFO - ==================================================
2025-11-26 23:10:12 - commands.deploy           - INFO - [Overall: 86%] [Step: 46/53] Executing: swarm-manager - docker service start
2025-11-26 23:10:12 - commands.deploy           - INFO - ==================================================
2025-11-26 23:10:12 - actions.start_docker_service - INFO - Ensuring Docker service is running...
2025-11-26 23:10:12 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active docker 2>/dev/null || echo inactive'
2025-11-26 23:10:12 - actions.start_docker_service - INFO - Docker service already active, skipping start
2025-11-26 23:10:12 - commands.deploy           - INFO - Action 'docker service start' for container 'swarm-manager' completed successfully
2025-11-26 23:10:12 - commands.deploy           - INFO - ==================================================
2025-11-26 23:10:12 - commands.deploy           - INFO - [Overall: 88%] [Step: 47/53] Executing: swarm-manager - docker sysctl configuration
2025-11-26 23:10:12 - commands.deploy           - INFO - ==================================================
2025-11-26 23:10:12 - actions.configure_docker_sysctl - INFO - Configuring sysctl for Docker containers...
2025-11-26 23:10:12 - services.ssh              - INFO - Running: sudo -n bash -c 'sysctl -w net.ipv4.ip_unprivileged_port_start=0 2>/dev/null || true; echo '"'"'net.ipv4.ip_unprivileged_port_start=0'"'"' >> /etc/sysctl.conf 2>/dev/null || true'
2025-11-26 23:10:13 - commands.deploy           - INFO - Action 'docker sysctl configuration' for container 'swarm-manager' completed successfully
2025-11-26 23:10:13 - commands.deploy           - INFO - ==================================================
2025-11-26 23:10:13 - commands.deploy           - INFO - [Overall: 90%] [Step: 48/53] Executing: swarm-node-1 - create container
2025-11-26 23:10:13 - commands.deploy           - INFO - ==================================================
2025-11-26 23:10:13 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:10:13 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:10:13 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:10:13 - services.ssh              - INFO - Running: pct destroy 3006 --force
2025-11-26 23:10:14 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/docker-ubuntu25.04-template_*_amd64.tar.zst 2>/dev/null | head -1 | xargs basename 2>/dev/null
2025-11-26 23:10:14 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && test -r /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && echo 'valid' || echo 'invalid'
2025-11-26 23:10:14 - actions.create_container  - INFO - Checking if container 3006 already exists...
2025-11-26 23:10:14 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:10:15 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:10:15 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:10:15 - services.ssh              - INFO - Running: pct list | grep '^3006 '
2025-11-26 23:10:16 - actions.create_container  - INFO - Creating container 3006 from template...
2025-11-26 23:10:16 - services.ssh              - INFO - Running: pct create 3006 /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst --hostname swarm-node-1 --memory 4096 --swap 4096 --cores 8 --net0 name=eth0,bridge=vmbr0,firewall=0,gw=10.11.3.253,ip=10.11.3.6/24,ip6=dhcp,type=veth --rootfs sdb:40 --unprivileged 0 --ostype ubuntu --arch amd64
2025-11-26 23:10:26 - actions.create_container  - INFO - Setting container features...
2025-11-26 23:10:26 - services.ssh              - INFO - Running: pct set 3006 --features nesting=1,keyctl=1,fuse=1
2025-11-26 23:10:27 - actions.create_container  - INFO - Starting container 3006...
2025-11-26 23:10:27 - services.ssh              - INFO - Running: pct start 3006
2025-11-26 23:10:31 - actions.create_container  - INFO - Bringing up network interface...
2025-11-26 23:10:31 - services.pct              - INFO - Running in container 3006: ping -c 1 8.8.8.8
2025-11-26 23:10:31 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo cGluZyAtYyAxIDguOC44Ljg= | base64 -d | bash"
2025-11-26 23:10:32 - actions.create_container  - INFO - Network interface is up and reachable
2025-11-26 23:10:32 - services.pct              - INFO - Running in container 3006: id -u jaal >/dev/null 2>&1 || useradd -m -s /bin/bash -G sudo jaal
2025-11-26 23:10:32 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgfHwgdXNlcmFkZCAtbSAtcyAvYmluL2Jhc2ggLUcgc3VkbyBqYWFs | base64 -d | bash"
2025-11-26 23:10:33 - services.pct              - INFO - Running in container 3006: echo jaal:jaal123 | chpasswd
2025-11-26 23:10:33 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo ZWNobyBqYWFsOmphYWwxMjMgfCBjaHBhc3N3ZA== | base64 -d | bash"
2025-11-26 23:10:34 - actions.create_container  - INFO - Password set for user jaal
2025-11-26 23:10:34 - services.pct              - INFO - Running in container 3006: printf 'jaal ALL=(ALL) NOPASSWD: ALL
' > /etc/sudoers.d/jaal 2>&1
2025-11-26 23:10:34 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo cHJpbnRmICdqYWFsIEFMTD0oQUxMKSBOT1BBU1NXRDogQUxMCicgPiAvZXRjL3N1ZG9lcnMuZC9qYWFsIDI+JjE= | base64 -d | bash"
2025-11-26 23:10:36 - services.pct              - INFO - Running in container 3006: chmod 440 /etc/sudoers.d/jaal 2>&1
2025-11-26 23:10:36 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo Y2htb2QgNDQwIC9ldGMvc3Vkb2Vycy5kL2phYWwgMj4mMQ== | base64 -d | bash"
2025-11-26 23:10:37 - services.pct              - INFO - Running in container 3006: id -u jaal >/dev/null 2>&1 && echo 'exists' || echo 'missing'
2025-11-26 23:10:37 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyAnZXhpc3RzJyB8fCBlY2hvICdtaXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:10:38 - services.pct              - INFO - Running in container 3006: mkdir -p /home/jaal/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /home/jaal/.ssh/authorized_keys && chmod 600 /home/jaal/.ssh/authorized_keys && chown jaal:jaal /home/jaal/.ssh/authorized_keys && chown -R jaal:jaal /home/jaal/.ssh && chmod 700 /home/jaal/.ssh
2025-11-26 23:10:38 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo bWtkaXIgLXAgL2hvbWUvamFhbC8uc3NoICYmIGVjaG8gYzNOb0xYSnpZU0JCUVVGQlFqTk9lbUZETVhsak1rVkJRVUZCUkVGUlFVSkJRVUZDWjFGRVNHaHpaeTlTUWxNeFpXOW1aRUowVDIxU1oyNXJObkpSWlZkTU5XVkVRMEZHVWxsaGRHOXRiMjV4ZWxaUVNHNVZhRWRCVjB4M2NFRnBibFJMV1RCaWNtVkhOMUozWTFCNlUzazRaa1V6YkhCQmVHUTNaRFUxTVZOcmIzZFJUM3BNVHpGaGRWSlVka05IWjBkS1RVTlphSE5wVDFSRVpHYzBlVU5IWkdoMWRsUnNaMGN5VDNnNFkwTkZXVGt6VG5Ob05HSnFXRE50Tm13NVluQnhWMkZ0Wkd4WU5WSklOV0pNZVhCNk5XeHhMME5rTTJWVWNISkdXRU5uY1VwUFkxSlVMemRCTWxSeFJHVklTM1pGTTNwWlRUWjBaV2RyWlN0a1VXRmtUalF4Y21nNWMxa3pTME5ITUhGbVJqVTRkRzR5Umt4NlNuZzNNMGc1ZDFKSFpVTlhlRlJvY2tZMWQxTjZaM0pHUkVsWlIxUktWRTFWY1V0bllrcFdWbGxYV0M5aVdTOXVVVmRVT0ZaUE5tWk1lbWtyTUhCQlQzbzVNekZ4TkdWdVNIUlBOVFpVTkRSaVJYRjBabWMxWkZONE4ySk1SMGx5TlRaSWJXeHVNVWRJYUc5MVZTdDFOelpqVmxSWFQyOXFSRlkxVkRGWGMxSkJWSFE0WVVRNU1EZERhVGszUmxBdk5EWmpValY1U2xSNFlWUndLM0I0VjNCdGFESjNZVWRsUkZKRVYxRnpkRVZzU0c5VGFuUlFlVzkxZVZWMVYySXpNVzlVUW14ck9FdDNaMDlsY0RONk1UZHhLMWxKYUZwWFVVZElkbTFqVWt0SU1sQkJPVGhKVW5CcFNsWlNlbVk0YzFoS01HTmthMjkxUVRWWFFsTkVaV2RVYjBJMVZ6ZFJVRzFsYUVVOUlITm9ZV1J2ZDJOb1lXMWlaWEpBVTJoaFpHOTNZMmhoYldKbGNuTXRUV0ZqTFcxcGJta3ViRzlqWVd3PSB8IGJhc2U2NCAtZCA+IC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2htb2QgNjAwIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gLVIgamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaCAmJiBjaG1vZCA3MDAgL2hvbWUvamFhbC8uc3No | base64 -d | bash"
2025-11-26 23:10:39 - services.pct              - INFO - Running in container 3006: mkdir -p /root/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /root/.ssh/authorized_keys && chmod 600 /root/.ssh/authorized_keys
2025-11-26 23:10:39 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo bWtkaXIgLXAgL3Jvb3QvLnNzaCAmJiBlY2hvIGMzTm9MWEp6WVNCQlFVRkJRak5PZW1GRE1YbGpNa1ZCUVVGQlJFRlJRVUpCUVVGQ1oxRkVTR2h6Wnk5U1FsTXhaVzltWkVKMFQyMVNaMjVyTm5KUlpWZE1OV1ZFUTBGR1VsbGhkRzl0YjI1eGVsWlFTRzVWYUVkQlYweDNjRUZwYmxSTFdUQmljbVZITjFKM1kxQjZVM2s0WmtVemJIQkJlR1EzWkRVMU1WTnJiM2RSVDNwTVR6RmhkVkpVZGtOSFowZEtUVU5aYUhOcFQxUkVaR2MwZVVOSFpHaDFkbFJzWjBjeVQzZzRZME5GV1RrelRuTm9OR0pxV0ROdE5tdzVZbkJ4VjJGdFpHeFlOVkpJTldKTWVYQjZOV3h4TDBOa00yVlVjSEpHV0VObmNVcFBZMUpVTHpkQk1sUnhSR1ZJUzNaRk0zcFpUVFowWldkclpTdGtVV0ZrVGpReGNtZzVjMWt6UzBOSE1IRm1SalU0ZEc0eVJreDZTbmczTTBnNWQxSkhaVU5YZUZSb2NrWTFkMU42WjNKR1JFbFpSMVJLVkUxVmNVdG5Za3BXVmxsWFdDOWlXUzl1VVZkVU9GWlBObVpNZW1rck1IQkJUM281TXpGeE5HVnVTSFJQTlRaVU5EUmlSWEYwWm1jMVpGTjROMkpNUjBseU5UWkliV3h1TVVkSWFHOTFWU3QxTnpaalZsUlhUMjlxUkZZMVZERlhjMUpCVkhRNFlVUTVNRGREYVRrM1JsQXZORFpqVWpWNVNsUjRZVlJ3SzNCNFYzQnRhREozWVVkbFJGSkVWMUZ6ZEVWc1NHOVRhblJRZVc5MWVWVjFWMkl6TVc5VVFteHJPRXQzWjA5bGNETjZNVGR4SzFsSmFGcFhVVWRJZG0xalVrdElNbEJCT1RoSlVuQnBTbFpTZW1ZNGMxaEtNR05rYTI5MVFUVlhRbE5FWldkVWIwSTFWemRSVUcxbGFFVTlJSE5vWVdSdmQyTm9ZVzFpWlhKQVUyaGhaRzkzWTJoaGJXSmxjbk10VFdGakxXMXBibWt1Ykc5allXdz0gfCBiYXNlNjQgLWQgPiAvcm9vdC8uc3NoL2F1dGhvcml6ZWRfa2V5cyAmJiBjaG1vZCA2MDAgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXM= | base64 -d | bash"
2025-11-26 23:10:40 - services.pct              - INFO - Running in container 3006: test -f /home/jaal/.ssh/authorized_keys && test -f /root/.ssh/authorized_keys && echo 'keys_exist' || echo 'keys_missing'
2025-11-26 23:10:40 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo dGVzdCAtZiAvaG9tZS9qYWFsLy5zc2gvYXV0aG9yaXplZF9rZXlzICYmIHRlc3QgLWYgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgZWNobyAna2V5c19leGlzdCcgfHwgZWNobyAna2V5c19taXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:10:41 - services.pct              - INFO - SSH key setup verified successfully
2025-11-26 23:10:41 - services.pct              - INFO - Running in container 3006: dpkg -l | grep -q '^ii.*openssh-server' || echo 'not_installed'
2025-11-26 23:10:41 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo ZHBrZyAtbCB8IGdyZXAgLXEgJ15paS4qb3BlbnNzaC1zZXJ2ZXInIHx8IGVjaG8gJ25vdF9pbnN0YWxsZWQn | base64 -d | bash"
2025-11-26 23:10:42 - services.pct              - INFO - Running in container 3006: systemctl enable ssh 2>&1
2025-11-26 23:10:42 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 23:10:44 - services.pct              - INFO - Running in container 3006: systemctl start ssh 2>&1
2025-11-26 23:10:44 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 23:10:48 - services.pct              - INFO - Running in container 3006: systemctl is-active ssh 2>/dev/null || echo inactive
2025-11-26 23:10:48 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBzc2ggMj4vZGV2L251bGwgfHwgZWNobyBpbmFjdGl2ZQ== | base64 -d | bash"
2025-11-26 23:10:49 - services.pct              - INFO - SSH service is running
2025-11-26 23:10:49 - services.pct              - INFO - Running in container 3006: ss -tlnp | grep ':22 ' || netstat -tlnp 2>/dev/null | grep ':22 ' || echo 'not_listening'
2025-11-26 23:10:49 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo c3MgLXRsbnAgfCBncmVwICc6MjIgJyB8fCBuZXRzdGF0IC10bG5wIDI+L2Rldi9udWxsIHwgZ3JlcCAnOjIyICcgfHwgZWNobyAnbm90X2xpc3RlbmluZyc= | base64 -d | bash"
2025-11-26 23:10:51 - services.pct              - INFO - SSH listening check: LISTEN 0      4096         0.0.0.0:22        0.0.0.0:*    users:(("sshd",pid=148,fd=3),("systemd",pid=1,fd=125))
LISTEN 0      4096            [::]:22           [::]:*    users:(("sshd",pid=148,fd=4),("systemd",pid=1,fd=126))
2025-11-26 23:10:51 - services.pct              - INFO - Running in container 3006: grep -E '^ListenAddress|^#ListenAddress' /etc/ssh/sshd_config 2>/dev/null | head -5 || echo 'config_check_failed'
2025-11-26 23:10:51 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo Z3JlcCAtRSAnXkxpc3RlbkFkZHJlc3N8XiNMaXN0ZW5BZGRyZXNzJyAvZXRjL3NzaC9zc2hkX2NvbmZpZyAyPi9kZXYvbnVsbCB8IGhlYWQgLTUgfHwgZWNobyAnY29uZmlnX2NoZWNrX2ZhaWxlZCc= | base64 -d | bash"
2025-11-26 23:10:52 - services.pct              - INFO - SSH config check: #ListenAddress 0.0.0.0
#ListenAddress ::
2025-11-26 23:10:52 - services.pct              - INFO - Running in container 3006: timeout 1 bash -c '</dev/tcp/127.0.0.1/22' 2>&1 && echo 'localhost_ok' || echo 'localhost_failed'
2025-11-26 23:10:52 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo dGltZW91dCAxIGJhc2ggLWMgJzwvZGV2L3RjcC8xMjcuMC4wLjEvMjInIDI+JjEgJiYgZWNobyAnbG9jYWxob3N0X29rJyB8fCBlY2hvICdsb2NhbGhvc3RfZmFpbGVkJw== | base64 -d | bash"
2025-11-26 23:10:53 - services.pct              - INFO - SSH localhost connection test: localhost_ok
2025-11-26 23:10:53 - actions.create_container  - INFO - Waiting for container to be ready with SSH connectivity (up to 10 minutes)...
2025-11-26 23:10:53 - services.ssh              - INFO - Running: pct status 3006
2025-11-26 23:10:54 - services.pct              - INFO - Running in container 3006: echo test
2025-11-26 23:10:54 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo ZWNobyB0ZXN0 | base64 -d | bash"
2025-11-26 23:10:55 - services.pct              - INFO - Testing SSH connection to jaal@10.11.3.6...
2025-11-26 23:10:56 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:10:56 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:10:56 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.6
2025-11-26 23:10:56 - services.ssh              - INFO - Running: echo 'SSH connection test successful'
2025-11-26 23:10:56 - services.pct              - INFO - SSH connectivity verified - connection successful
2025-11-26 23:10:56 - services.pct              - INFO - Container is ready and SSH is accessible!
2025-11-26 23:10:56 - actions.create_container  - INFO - Container 3006 created successfully
2025-11-26 23:10:56 - commands.deploy           - INFO - Container 'swarm-node-1' created successfully
2025-11-26 23:10:56 - commands.deploy           - INFO - Setting up SSH connection to container swarm-node-1...
2025-11-26 23:10:56 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:10:57 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:10:57 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.6
2025-11-26 23:10:59 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:10:59 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:10:59 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:10:59 - commands.deploy           - INFO - ==================================================
2025-11-26 23:10:59 - commands.deploy           - INFO - [Overall: 92%] [Step: 49/53] Executing: swarm-node-1 - cloud-init wait
2025-11-26 23:10:59 - commands.deploy           - INFO - ==================================================
2025-11-26 23:10:59 - services.ssh              - INFO - Running: command -v cloud-init
2025-11-26 23:10:59 - actions.cloud_init_wait   - INFO - cloud-init not found, skipping
2025-11-26 23:10:59 - commands.deploy           - INFO - Action 'cloud-init wait' for container 'swarm-node-1' completed successfully
2025-11-26 23:10:59 - commands.deploy           - INFO - ==================================================
2025-11-26 23:10:59 - commands.deploy           - INFO - [Overall: 94%] [Step: 50/53] Executing: swarm-node-1 - docker service start
2025-11-26 23:10:59 - commands.deploy           - INFO - ==================================================
2025-11-26 23:10:59 - actions.start_docker_service - INFO - Ensuring Docker service is running...
2025-11-26 23:10:59 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active docker 2>/dev/null || echo inactive'
2025-11-26 23:10:59 - actions.start_docker_service - INFO - Docker service already active, skipping start
2025-11-26 23:10:59 - commands.deploy           - INFO - Action 'docker service start' for container 'swarm-node-1' completed successfully
2025-11-26 23:10:59 - commands.deploy           - INFO - ==================================================
2025-11-26 23:10:59 - commands.deploy           - INFO - [Overall: 96%] [Step: 51/53] Executing: swarm-node-2 - create container
2025-11-26 23:10:59 - commands.deploy           - INFO - ==================================================
2025-11-26 23:10:59 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:11:00 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:11:00 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:11:00 - services.ssh              - INFO - Running: pct destroy 3007 --force
2025-11-26 23:11:01 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/docker-ubuntu25.04-template_*_amd64.tar.zst 2>/dev/null | head -1 | xargs basename 2>/dev/null
2025-11-26 23:11:01 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && test -r /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && echo 'valid' || echo 'invalid'
2025-11-26 23:11:01 - actions.create_container  - INFO - Checking if container 3007 already exists...
2025-11-26 23:11:01 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:11:01 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:11:01 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:11:01 - services.ssh              - INFO - Running: pct list | grep '^3007 '
2025-11-26 23:11:03 - actions.create_container  - INFO - Creating container 3007 from template...
2025-11-26 23:11:03 - services.ssh              - INFO - Running: pct create 3007 /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst --hostname swarm-node-2 --memory 4096 --swap 4096 --cores 8 --net0 name=eth0,bridge=vmbr0,firewall=0,gw=10.11.3.253,ip=10.11.3.7/24,ip6=dhcp,type=veth --rootfs sdb:40 --unprivileged 0 --ostype ubuntu --arch amd64
2025-11-26 23:11:11 - actions.create_container  - INFO - Setting container features...
2025-11-26 23:11:11 - services.ssh              - INFO - Running: pct set 3007 --features nesting=1,keyctl=1,fuse=1
2025-11-26 23:11:12 - actions.create_container  - INFO - Starting container 3007...
2025-11-26 23:11:12 - services.ssh              - INFO - Running: pct start 3007
2025-11-26 23:11:16 - actions.create_container  - INFO - Bringing up network interface...
2025-11-26 23:11:16 - services.pct              - INFO - Running in container 3007: ping -c 1 8.8.8.8
2025-11-26 23:11:16 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo cGluZyAtYyAxIDguOC44Ljg= | base64 -d | bash"
2025-11-26 23:11:17 - actions.create_container  - INFO - Network interface is up and reachable
2025-11-26 23:11:17 - services.pct              - INFO - Running in container 3007: id -u jaal >/dev/null 2>&1 || useradd -m -s /bin/bash -G sudo jaal
2025-11-26 23:11:17 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgfHwgdXNlcmFkZCAtbSAtcyAvYmluL2Jhc2ggLUcgc3VkbyBqYWFs | base64 -d | bash"
2025-11-26 23:11:18 - services.pct              - INFO - Running in container 3007: echo jaal:jaal123 | chpasswd
2025-11-26 23:11:18 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo ZWNobyBqYWFsOmphYWwxMjMgfCBjaHBhc3N3ZA== | base64 -d | bash"
2025-11-26 23:11:19 - actions.create_container  - INFO - Password set for user jaal
2025-11-26 23:11:19 - services.pct              - INFO - Running in container 3007: printf 'jaal ALL=(ALL) NOPASSWD: ALL
' > /etc/sudoers.d/jaal 2>&1
2025-11-26 23:11:19 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo cHJpbnRmICdqYWFsIEFMTD0oQUxMKSBOT1BBU1NXRDogQUxMCicgPiAvZXRjL3N1ZG9lcnMuZC9qYWFsIDI+JjE= | base64 -d | bash"
2025-11-26 23:11:21 - services.pct              - INFO - Running in container 3007: chmod 440 /etc/sudoers.d/jaal 2>&1
2025-11-26 23:11:21 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo Y2htb2QgNDQwIC9ldGMvc3Vkb2Vycy5kL2phYWwgMj4mMQ== | base64 -d | bash"
2025-11-26 23:11:22 - services.pct              - INFO - Running in container 3007: id -u jaal >/dev/null 2>&1 && echo 'exists' || echo 'missing'
2025-11-26 23:11:22 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyAnZXhpc3RzJyB8fCBlY2hvICdtaXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:11:23 - services.pct              - INFO - Running in container 3007: mkdir -p /home/jaal/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /home/jaal/.ssh/authorized_keys && chmod 600 /home/jaal/.ssh/authorized_keys && chown jaal:jaal /home/jaal/.ssh/authorized_keys && chown -R jaal:jaal /home/jaal/.ssh && chmod 700 /home/jaal/.ssh
2025-11-26 23:11:23 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo bWtkaXIgLXAgL2hvbWUvamFhbC8uc3NoICYmIGVjaG8gYzNOb0xYSnpZU0JCUVVGQlFqTk9lbUZETVhsak1rVkJRVUZCUkVGUlFVSkJRVUZDWjFGRVNHaHpaeTlTUWxNeFpXOW1aRUowVDIxU1oyNXJObkpSWlZkTU5XVkVRMEZHVWxsaGRHOXRiMjV4ZWxaUVNHNVZhRWRCVjB4M2NFRnBibFJMV1RCaWNtVkhOMUozWTFCNlUzazRaa1V6YkhCQmVHUTNaRFUxTVZOcmIzZFJUM3BNVHpGaGRWSlVka05IWjBkS1RVTlphSE5wVDFSRVpHYzBlVU5IWkdoMWRsUnNaMGN5VDNnNFkwTkZXVGt6VG5Ob05HSnFXRE50Tm13NVluQnhWMkZ0Wkd4WU5WSklOV0pNZVhCNk5XeHhMME5rTTJWVWNISkdXRU5uY1VwUFkxSlVMemRCTWxSeFJHVklTM1pGTTNwWlRUWjBaV2RyWlN0a1VXRmtUalF4Y21nNWMxa3pTME5ITUhGbVJqVTRkRzR5Umt4NlNuZzNNMGc1ZDFKSFpVTlhlRlJvY2tZMWQxTjZaM0pHUkVsWlIxUktWRTFWY1V0bllrcFdWbGxYV0M5aVdTOXVVVmRVT0ZaUE5tWk1lbWtyTUhCQlQzbzVNekZ4TkdWdVNIUlBOVFpVTkRSaVJYRjBabWMxWkZONE4ySk1SMGx5TlRaSWJXeHVNVWRJYUc5MVZTdDFOelpqVmxSWFQyOXFSRlkxVkRGWGMxSkJWSFE0WVVRNU1EZERhVGszUmxBdk5EWmpValY1U2xSNFlWUndLM0I0VjNCdGFESjNZVWRsUkZKRVYxRnpkRVZzU0c5VGFuUlFlVzkxZVZWMVYySXpNVzlVUW14ck9FdDNaMDlsY0RONk1UZHhLMWxKYUZwWFVVZElkbTFqVWt0SU1sQkJPVGhKVW5CcFNsWlNlbVk0YzFoS01HTmthMjkxUVRWWFFsTkVaV2RVYjBJMVZ6ZFJVRzFsYUVVOUlITm9ZV1J2ZDJOb1lXMWlaWEpBVTJoaFpHOTNZMmhoYldKbGNuTXRUV0ZqTFcxcGJta3ViRzlqWVd3PSB8IGJhc2U2NCAtZCA+IC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2htb2QgNjAwIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gLVIgamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaCAmJiBjaG1vZCA3MDAgL2hvbWUvamFhbC8uc3No | base64 -d | bash"
2025-11-26 23:11:24 - services.pct              - INFO - Running in container 3007: mkdir -p /root/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /root/.ssh/authorized_keys && chmod 600 /root/.ssh/authorized_keys
2025-11-26 23:11:24 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo bWtkaXIgLXAgL3Jvb3QvLnNzaCAmJiBlY2hvIGMzTm9MWEp6WVNCQlFVRkJRak5PZW1GRE1YbGpNa1ZCUVVGQlJFRlJRVUpCUVVGQ1oxRkVTR2h6Wnk5U1FsTXhaVzltWkVKMFQyMVNaMjVyTm5KUlpWZE1OV1ZFUTBGR1VsbGhkRzl0YjI1eGVsWlFTRzVWYUVkQlYweDNjRUZwYmxSTFdUQmljbVZITjFKM1kxQjZVM2s0WmtVemJIQkJlR1EzWkRVMU1WTnJiM2RSVDNwTVR6RmhkVkpVZGtOSFowZEtUVU5aYUhOcFQxUkVaR2MwZVVOSFpHaDFkbFJzWjBjeVQzZzRZME5GV1RrelRuTm9OR0pxV0ROdE5tdzVZbkJ4VjJGdFpHeFlOVkpJTldKTWVYQjZOV3h4TDBOa00yVlVjSEpHV0VObmNVcFBZMUpVTHpkQk1sUnhSR1ZJUzNaRk0zcFpUVFowWldkclpTdGtVV0ZrVGpReGNtZzVjMWt6UzBOSE1IRm1SalU0ZEc0eVJreDZTbmczTTBnNWQxSkhaVU5YZUZSb2NrWTFkMU42WjNKR1JFbFpSMVJLVkUxVmNVdG5Za3BXVmxsWFdDOWlXUzl1VVZkVU9GWlBObVpNZW1rck1IQkJUM281TXpGeE5HVnVTSFJQTlRaVU5EUmlSWEYwWm1jMVpGTjROMkpNUjBseU5UWkliV3h1TVVkSWFHOTFWU3QxTnpaalZsUlhUMjlxUkZZMVZERlhjMUpCVkhRNFlVUTVNRGREYVRrM1JsQXZORFpqVWpWNVNsUjRZVlJ3SzNCNFYzQnRhREozWVVkbFJGSkVWMUZ6ZEVWc1NHOVRhblJRZVc5MWVWVjFWMkl6TVc5VVFteHJPRXQzWjA5bGNETjZNVGR4SzFsSmFGcFhVVWRJZG0xalVrdElNbEJCT1RoSlVuQnBTbFpTZW1ZNGMxaEtNR05rYTI5MVFUVlhRbE5FWldkVWIwSTFWemRSVUcxbGFFVTlJSE5vWVdSdmQyTm9ZVzFpWlhKQVUyaGhaRzkzWTJoaGJXSmxjbk10VFdGakxXMXBibWt1Ykc5allXdz0gfCBiYXNlNjQgLWQgPiAvcm9vdC8uc3NoL2F1dGhvcml6ZWRfa2V5cyAmJiBjaG1vZCA2MDAgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXM= | base64 -d | bash"
2025-11-26 23:11:25 - services.pct              - INFO - Running in container 3007: test -f /home/jaal/.ssh/authorized_keys && test -f /root/.ssh/authorized_keys && echo 'keys_exist' || echo 'keys_missing'
2025-11-26 23:11:25 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo dGVzdCAtZiAvaG9tZS9qYWFsLy5zc2gvYXV0aG9yaXplZF9rZXlzICYmIHRlc3QgLWYgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgZWNobyAna2V5c19leGlzdCcgfHwgZWNobyAna2V5c19taXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:11:26 - services.pct              - INFO - SSH key setup verified successfully
2025-11-26 23:11:26 - services.pct              - INFO - Running in container 3007: dpkg -l | grep -q '^ii.*openssh-server' || echo 'not_installed'
2025-11-26 23:11:26 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo ZHBrZyAtbCB8IGdyZXAgLXEgJ15paS4qb3BlbnNzaC1zZXJ2ZXInIHx8IGVjaG8gJ25vdF9pbnN0YWxsZWQn | base64 -d | bash"
2025-11-26 23:11:27 - services.pct              - INFO - Running in container 3007: systemctl enable ssh 2>&1
2025-11-26 23:11:27 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 23:11:29 - services.pct              - INFO - Running in container 3007: systemctl start ssh 2>&1
2025-11-26 23:11:29 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 23:11:33 - services.pct              - INFO - Running in container 3007: systemctl is-active ssh 2>/dev/null || echo inactive
2025-11-26 23:11:33 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBzc2ggMj4vZGV2L251bGwgfHwgZWNobyBpbmFjdGl2ZQ== | base64 -d | bash"
2025-11-26 23:11:34 - services.pct              - INFO - SSH service is running
2025-11-26 23:11:34 - services.pct              - INFO - Running in container 3007: ss -tlnp | grep ':22 ' || netstat -tlnp 2>/dev/null | grep ':22 ' || echo 'not_listening'
2025-11-26 23:11:34 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo c3MgLXRsbnAgfCBncmVwICc6MjIgJyB8fCBuZXRzdGF0IC10bG5wIDI+L2Rldi9udWxsIHwgZ3JlcCAnOjIyICcgfHwgZWNobyAnbm90X2xpc3RlbmluZyc= | base64 -d | bash"
2025-11-26 23:11:36 - services.pct              - INFO - SSH listening check: LISTEN 0      4096         0.0.0.0:22        0.0.0.0:*    users:(("sshd",pid=152,fd=3),("systemd",pid=1,fd=104))
LISTEN 0      4096            [::]:22           [::]:*    users:(("sshd",pid=152,fd=4),("systemd",pid=1,fd=106))
2025-11-26 23:11:36 - services.pct              - INFO - Running in container 3007: grep -E '^ListenAddress|^#ListenAddress' /etc/ssh/sshd_config 2>/dev/null | head -5 || echo 'config_check_failed'
2025-11-26 23:11:36 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo Z3JlcCAtRSAnXkxpc3RlbkFkZHJlc3N8XiNMaXN0ZW5BZGRyZXNzJyAvZXRjL3NzaC9zc2hkX2NvbmZpZyAyPi9kZXYvbnVsbCB8IGhlYWQgLTUgfHwgZWNobyAnY29uZmlnX2NoZWNrX2ZhaWxlZCc= | base64 -d | bash"
2025-11-26 23:11:37 - services.pct              - INFO - SSH config check: #ListenAddress 0.0.0.0
#ListenAddress ::
2025-11-26 23:11:37 - services.pct              - INFO - Running in container 3007: timeout 1 bash -c '</dev/tcp/127.0.0.1/22' 2>&1 && echo 'localhost_ok' || echo 'localhost_failed'
2025-11-26 23:11:37 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo dGltZW91dCAxIGJhc2ggLWMgJzwvZGV2L3RjcC8xMjcuMC4wLjEvMjInIDI+JjEgJiYgZWNobyAnbG9jYWxob3N0X29rJyB8fCBlY2hvICdsb2NhbGhvc3RfZmFpbGVkJw== | base64 -d | bash"
2025-11-26 23:11:38 - services.pct              - INFO - SSH localhost connection test: localhost_ok
2025-11-26 23:11:38 - actions.create_container  - INFO - Waiting for container to be ready with SSH connectivity (up to 10 minutes)...
2025-11-26 23:11:38 - services.ssh              - INFO - Running: pct status 3007
2025-11-26 23:11:39 - services.pct              - INFO - Running in container 3007: echo test
2025-11-26 23:11:39 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo ZWNobyB0ZXN0 | base64 -d | bash"
2025-11-26 23:11:40 - services.pct              - INFO - Testing SSH connection to jaal@10.11.3.7...
2025-11-26 23:11:41 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:11:41 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:11:41 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.7
2025-11-26 23:11:41 - services.ssh              - INFO - Running: echo 'SSH connection test successful'
2025-11-26 23:11:41 - services.pct              - INFO - SSH connectivity verified - connection successful
2025-11-26 23:11:41 - services.pct              - INFO - Container is ready and SSH is accessible!
2025-11-26 23:11:41 - actions.create_container  - INFO - Container 3007 created successfully
2025-11-26 23:11:41 - commands.deploy           - INFO - Container 'swarm-node-2' created successfully
2025-11-26 23:11:41 - commands.deploy           - INFO - Setting up SSH connection to container swarm-node-2...
2025-11-26 23:11:41 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:11:41 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:11:41 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.7
2025-11-26 23:11:44 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:11:44 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:11:44 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:11:44 - commands.deploy           - INFO - ==================================================
2025-11-26 23:11:44 - commands.deploy           - INFO - [Overall: 98%] [Step: 52/53] Executing: swarm-node-2 - cloud-init wait
2025-11-26 23:11:44 - commands.deploy           - INFO - ==================================================
2025-11-26 23:11:44 - services.ssh              - INFO - Running: command -v cloud-init
2025-11-26 23:11:44 - actions.cloud_init_wait   - INFO - cloud-init not found, skipping
2025-11-26 23:11:44 - commands.deploy           - INFO - Action 'cloud-init wait' for container 'swarm-node-2' completed successfully
2025-11-26 23:11:44 - commands.deploy           - INFO - ==================================================
2025-11-26 23:11:44 - commands.deploy           - INFO - [Overall: 100%] [Step: 53/53] Executing: swarm-node-2 - docker service start
2025-11-26 23:11:44 - commands.deploy           - INFO - ==================================================
2025-11-26 23:11:44 - actions.start_docker_service - INFO - Ensuring Docker service is running...
2025-11-26 23:11:44 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active docker 2>/dev/null || echo inactive'
2025-11-26 23:11:44 - actions.start_docker_service - INFO - Docker service already active, skipping start
2025-11-26 23:11:44 - commands.deploy           - INFO - Action 'docker service start' for container 'swarm-node-2' completed successfully
2025-11-26 23:11:44 - commands.deploy           - INFO - ==================================================
2025-11-26 23:11:44 - commands.deploy           - INFO - [Overall: 101%] [Step: 54/53] Executing: swarm - setup swarm
2025-11-26 23:11:44 - commands.deploy           - INFO - ==================================================
2025-11-26 23:11:44 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:11:44 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:11:44 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:11:44 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/docker-ubuntu25.04-template_*_amd64.tar.zst 2>/dev/null | head -1 | xargs basename 2>/dev/null
2025-11-26 23:11:44 - orchestration.swarm       - INFO - Using template: /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst
2025-11-26 23:11:44 - orchestration.swarm       - INFO - 
Deploying container 3005 (swarm-manager)...
2025-11-26 23:11:45 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:11:45 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:11:45 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:11:45 - services.ssh              - INFO - Running: pct destroy 3005 --force
2025-11-26 23:11:48 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/docker-ubuntu25.04-template_*_amd64.tar.zst 2>/dev/null | head -1 | xargs basename 2>/dev/null
2025-11-26 23:11:48 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && test -r /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && echo 'valid' || echo 'invalid'
2025-11-26 23:11:49 - libs.container_manager    - INFO - Checking if container 3005 already exists...
2025-11-26 23:11:49 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:11:49 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:11:49 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:11:49 - services.ssh              - INFO - Running: pct list | grep '^3005 '
2025-11-26 23:11:50 - libs.container_manager    - INFO - Creating container 3005 from template...
2025-11-26 23:11:50 - services.ssh              - INFO - Running: pct create 3005 /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst --hostname swarm-manager --memory 4096 --swap 4096 --cores 8 --net0 name=eth0,bridge=vmbr0,firewall=0,gw=10.11.3.253,ip=10.11.3.5/24,ip6=dhcp,type=veth --rootfs sdb:40 --unprivileged 0 --ostype ubuntu --arch amd64
2025-11-26 23:11:59 - libs.container_manager    - INFO - Setting container features...
2025-11-26 23:11:59 - services.ssh              - INFO - Running: pct set 3005 --features nesting=1,keyctl=1,fuse=1
2025-11-26 23:12:00 - libs.container_manager    - INFO - Starting container 3005...
2025-11-26 23:12:00 - services.ssh              - INFO - Running: pct start 3005
2025-11-26 23:12:04 - libs.container_manager    - INFO - Bringing up network interface...
2025-11-26 23:12:04 - services.pct              - INFO - Running in container 3005: ping -c 1 8.8.8.8
2025-11-26 23:12:04 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo cGluZyAtYyAxIDguOC44Ljg= | base64 -d | bash"
2025-11-26 23:12:06 - libs.container_manager    - INFO - Network interface is up and reachable
2025-11-26 23:12:06 - services.pct              - INFO - Running in container 3005: id -u jaal >/dev/null 2>&1 || useradd -m -s /bin/bash -G sudo jaal
2025-11-26 23:12:06 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgfHwgdXNlcmFkZCAtbSAtcyAvYmluL2Jhc2ggLUcgc3VkbyBqYWFs | base64 -d | bash"
2025-11-26 23:12:07 - services.pct              - INFO - Running in container 3005: echo jaal:jaal123 | chpasswd
2025-11-26 23:12:07 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo ZWNobyBqYWFsOmphYWwxMjMgfCBjaHBhc3N3ZA== | base64 -d | bash"
2025-11-26 23:12:08 - libs.container_manager    - INFO - Password set for user jaal
2025-11-26 23:12:08 - services.pct              - INFO - Running in container 3005: printf 'jaal ALL=(ALL) NOPASSWD: ALL
' > /etc/sudoers.d/jaal 2>&1
2025-11-26 23:12:08 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo cHJpbnRmICdqYWFsIEFMTD0oQUxMKSBOT1BBU1NXRDogQUxMCicgPiAvZXRjL3N1ZG9lcnMuZC9qYWFsIDI+JjE= | base64 -d | bash"
2025-11-26 23:12:09 - services.pct              - INFO - Running in container 3005: chmod 440 /etc/sudoers.d/jaal 2>&1
2025-11-26 23:12:09 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo Y2htb2QgNDQwIC9ldGMvc3Vkb2Vycy5kL2phYWwgMj4mMQ== | base64 -d | bash"
2025-11-26 23:12:10 - services.pct              - INFO - Running in container 3005: id -u jaal >/dev/null 2>&1 && echo 'exists' || echo 'missing'
2025-11-26 23:12:10 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyAnZXhpc3RzJyB8fCBlY2hvICdtaXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:12:11 - services.pct              - INFO - Running in container 3005: mkdir -p /home/jaal/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /home/jaal/.ssh/authorized_keys && chmod 600 /home/jaal/.ssh/authorized_keys && chown jaal:jaal /home/jaal/.ssh/authorized_keys && chown -R jaal:jaal /home/jaal/.ssh && chmod 700 /home/jaal/.ssh
2025-11-26 23:12:11 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo bWtkaXIgLXAgL2hvbWUvamFhbC8uc3NoICYmIGVjaG8gYzNOb0xYSnpZU0JCUVVGQlFqTk9lbUZETVhsak1rVkJRVUZCUkVGUlFVSkJRVUZDWjFGRVNHaHpaeTlTUWxNeFpXOW1aRUowVDIxU1oyNXJObkpSWlZkTU5XVkVRMEZHVWxsaGRHOXRiMjV4ZWxaUVNHNVZhRWRCVjB4M2NFRnBibFJMV1RCaWNtVkhOMUozWTFCNlUzazRaa1V6YkhCQmVHUTNaRFUxTVZOcmIzZFJUM3BNVHpGaGRWSlVka05IWjBkS1RVTlphSE5wVDFSRVpHYzBlVU5IWkdoMWRsUnNaMGN5VDNnNFkwTkZXVGt6VG5Ob05HSnFXRE50Tm13NVluQnhWMkZ0Wkd4WU5WSklOV0pNZVhCNk5XeHhMME5rTTJWVWNISkdXRU5uY1VwUFkxSlVMemRCTWxSeFJHVklTM1pGTTNwWlRUWjBaV2RyWlN0a1VXRmtUalF4Y21nNWMxa3pTME5ITUhGbVJqVTRkRzR5Umt4NlNuZzNNMGc1ZDFKSFpVTlhlRlJvY2tZMWQxTjZaM0pHUkVsWlIxUktWRTFWY1V0bllrcFdWbGxYV0M5aVdTOXVVVmRVT0ZaUE5tWk1lbWtyTUhCQlQzbzVNekZ4TkdWdVNIUlBOVFpVTkRSaVJYRjBabWMxWkZONE4ySk1SMGx5TlRaSWJXeHVNVWRJYUc5MVZTdDFOelpqVmxSWFQyOXFSRlkxVkRGWGMxSkJWSFE0WVVRNU1EZERhVGszUmxBdk5EWmpValY1U2xSNFlWUndLM0I0VjNCdGFESjNZVWRsUkZKRVYxRnpkRVZzU0c5VGFuUlFlVzkxZVZWMVYySXpNVzlVUW14ck9FdDNaMDlsY0RONk1UZHhLMWxKYUZwWFVVZElkbTFqVWt0SU1sQkJPVGhKVW5CcFNsWlNlbVk0YzFoS01HTmthMjkxUVRWWFFsTkVaV2RVYjBJMVZ6ZFJVRzFsYUVVOUlITm9ZV1J2ZDJOb1lXMWlaWEpBVTJoaFpHOTNZMmhoYldKbGNuTXRUV0ZqTFcxcGJta3ViRzlqWVd3PSB8IGJhc2U2NCAtZCA+IC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2htb2QgNjAwIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gLVIgamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaCAmJiBjaG1vZCA3MDAgL2hvbWUvamFhbC8uc3No | base64 -d | bash"
2025-11-26 23:12:13 - services.pct              - INFO - Running in container 3005: mkdir -p /root/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /root/.ssh/authorized_keys && chmod 600 /root/.ssh/authorized_keys
2025-11-26 23:12:13 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo bWtkaXIgLXAgL3Jvb3QvLnNzaCAmJiBlY2hvIGMzTm9MWEp6WVNCQlFVRkJRak5PZW1GRE1YbGpNa1ZCUVVGQlJFRlJRVUpCUVVGQ1oxRkVTR2h6Wnk5U1FsTXhaVzltWkVKMFQyMVNaMjVyTm5KUlpWZE1OV1ZFUTBGR1VsbGhkRzl0YjI1eGVsWlFTRzVWYUVkQlYweDNjRUZwYmxSTFdUQmljbVZITjFKM1kxQjZVM2s0WmtVemJIQkJlR1EzWkRVMU1WTnJiM2RSVDNwTVR6RmhkVkpVZGtOSFowZEtUVU5aYUhOcFQxUkVaR2MwZVVOSFpHaDFkbFJzWjBjeVQzZzRZME5GV1RrelRuTm9OR0pxV0ROdE5tdzVZbkJ4VjJGdFpHeFlOVkpJTldKTWVYQjZOV3h4TDBOa00yVlVjSEpHV0VObmNVcFBZMUpVTHpkQk1sUnhSR1ZJUzNaRk0zcFpUVFowWldkclpTdGtVV0ZrVGpReGNtZzVjMWt6UzBOSE1IRm1SalU0ZEc0eVJreDZTbmczTTBnNWQxSkhaVU5YZUZSb2NrWTFkMU42WjNKR1JFbFpSMVJLVkUxVmNVdG5Za3BXVmxsWFdDOWlXUzl1VVZkVU9GWlBObVpNZW1rck1IQkJUM281TXpGeE5HVnVTSFJQTlRaVU5EUmlSWEYwWm1jMVpGTjROMkpNUjBseU5UWkliV3h1TVVkSWFHOTFWU3QxTnpaalZsUlhUMjlxUkZZMVZERlhjMUpCVkhRNFlVUTVNRGREYVRrM1JsQXZORFpqVWpWNVNsUjRZVlJ3SzNCNFYzQnRhREozWVVkbFJGSkVWMUZ6ZEVWc1NHOVRhblJRZVc5MWVWVjFWMkl6TVc5VVFteHJPRXQzWjA5bGNETjZNVGR4SzFsSmFGcFhVVWRJZG0xalVrdElNbEJCT1RoSlVuQnBTbFpTZW1ZNGMxaEtNR05rYTI5MVFUVlhRbE5FWldkVWIwSTFWemRSVUcxbGFFVTlJSE5vWVdSdmQyTm9ZVzFpWlhKQVUyaGhaRzkzWTJoaGJXSmxjbk10VFdGakxXMXBibWt1Ykc5allXdz0gfCBiYXNlNjQgLWQgPiAvcm9vdC8uc3NoL2F1dGhvcml6ZWRfa2V5cyAmJiBjaG1vZCA2MDAgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXM= | base64 -d | bash"
2025-11-26 23:12:14 - services.pct              - INFO - Running in container 3005: test -f /home/jaal/.ssh/authorized_keys && test -f /root/.ssh/authorized_keys && echo 'keys_exist' || echo 'keys_missing'
2025-11-26 23:12:14 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo dGVzdCAtZiAvaG9tZS9qYWFsLy5zc2gvYXV0aG9yaXplZF9rZXlzICYmIHRlc3QgLWYgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgZWNobyAna2V5c19leGlzdCcgfHwgZWNobyAna2V5c19taXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:12:15 - services.pct              - INFO - SSH key setup verified successfully
2025-11-26 23:12:15 - services.pct              - INFO - Running in container 3005: dpkg -l | grep -q '^ii.*openssh-server' || echo 'not_installed'
2025-11-26 23:12:15 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo ZHBrZyAtbCB8IGdyZXAgLXEgJ15paS4qb3BlbnNzaC1zZXJ2ZXInIHx8IGVjaG8gJ25vdF9pbnN0YWxsZWQn | base64 -d | bash"
2025-11-26 23:12:16 - services.pct              - INFO - Running in container 3005: systemctl enable ssh 2>&1
2025-11-26 23:12:16 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 23:12:18 - services.pct              - INFO - Running in container 3005: systemctl start ssh 2>&1
2025-11-26 23:12:18 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 23:12:22 - services.pct              - INFO - Running in container 3005: systemctl is-active ssh 2>/dev/null || echo inactive
2025-11-26 23:12:22 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBzc2ggMj4vZGV2L251bGwgfHwgZWNobyBpbmFjdGl2ZQ== | base64 -d | bash"
2025-11-26 23:12:23 - services.pct              - INFO - SSH service is running
2025-11-26 23:12:23 - services.pct              - INFO - Running in container 3005: ss -tlnp | grep ':22 ' || netstat -tlnp 2>/dev/null | grep ':22 ' || echo 'not_listening'
2025-11-26 23:12:23 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo c3MgLXRsbnAgfCBncmVwICc6MjIgJyB8fCBuZXRzdGF0IC10bG5wIDI+L2Rldi9udWxsIHwgZ3JlcCAnOjIyICcgfHwgZWNobyAnbm90X2xpc3RlbmluZyc= | base64 -d | bash"
2025-11-26 23:12:24 - services.pct              - INFO - SSH listening check: LISTEN 0      4096         0.0.0.0:22        0.0.0.0:*    users:(("sshd",pid=152,fd=3),("systemd",pid=1,fd=122))
LISTEN 0      4096            [::]:22           [::]:*    users:(("sshd",pid=152,fd=4),("systemd",pid=1,fd=123))
2025-11-26 23:12:24 - services.pct              - INFO - Running in container 3005: grep -E '^ListenAddress|^#ListenAddress' /etc/ssh/sshd_config 2>/dev/null | head -5 || echo 'config_check_failed'
2025-11-26 23:12:24 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo Z3JlcCAtRSAnXkxpc3RlbkFkZHJlc3N8XiNMaXN0ZW5BZGRyZXNzJyAvZXRjL3NzaC9zc2hkX2NvbmZpZyAyPi9kZXYvbnVsbCB8IGhlYWQgLTUgfHwgZWNobyAnY29uZmlnX2NoZWNrX2ZhaWxlZCc= | base64 -d | bash"
2025-11-26 23:12:26 - services.pct              - INFO - SSH config check: #ListenAddress 0.0.0.0
#ListenAddress ::
2025-11-26 23:12:26 - services.pct              - INFO - Running in container 3005: timeout 1 bash -c '</dev/tcp/127.0.0.1/22' 2>&1 && echo 'localhost_ok' || echo 'localhost_failed'
2025-11-26 23:12:26 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo dGltZW91dCAxIGJhc2ggLWMgJzwvZGV2L3RjcC8xMjcuMC4wLjEvMjInIDI+JjEgJiYgZWNobyAnbG9jYWxob3N0X29rJyB8fCBlY2hvICdsb2NhbGhvc3RfZmFpbGVkJw== | base64 -d | bash"
2025-11-26 23:12:27 - services.pct              - INFO - SSH localhost connection test: localhost_ok
2025-11-26 23:12:27 - libs.container_manager    - INFO - Waiting for container to be ready with SSH connectivity (up to 10 minutes)...
2025-11-26 23:12:27 - services.ssh              - INFO - Running: pct status 3005
2025-11-26 23:12:28 - services.pct              - INFO - Running in container 3005: echo test
2025-11-26 23:12:28 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo ZWNobyB0ZXN0 | base64 -d | bash"
2025-11-26 23:12:29 - services.pct              - INFO - Testing SSH connection to jaal@10.11.3.5...
2025-11-26 23:12:29 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:12:30 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:12:30 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.5
2025-11-26 23:12:30 - services.ssh              - INFO - Running: echo 'SSH connection test successful'
2025-11-26 23:12:30 - services.pct              - INFO - SSH connectivity verified - connection successful
2025-11-26 23:12:30 - services.pct              - INFO - Container is ready and SSH is accessible!
2025-11-26 23:12:33 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:12:33 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:12:33 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.5
2025-11-26 23:12:33 - libs.container_manager    - INFO - Executing 4 actions for container 'swarm-manager'
2025-11-26 23:12:33 - libs.container_manager    - INFO - [1/4] Running action: cloud-init wait
2025-11-26 23:12:33 - services.ssh              - INFO - Running: command -v cloud-init
2025-11-26 23:12:33 - actions.cloud_init_wait   - INFO - cloud-init not found, skipping
2025-11-26 23:12:33 - libs.container_manager    - INFO - [1/4] Action 'cloud-init wait' completed successfully
2025-11-26 23:12:33 - libs.container_manager    - INFO - [2/4] Running action: lxc sysctl access configuration
2025-11-26 23:12:33 - actions.configure_lxc_sysctl_access - INFO - Configuring LXC container for sysctl access...
2025-11-26 23:12:33 - services.ssh              - INFO - Running: pct set 3005 -lxc.cgroup2.devices.allow 'c 10:200 rwm' 2>/dev/null || true
2025-11-26 23:12:35 - services.ssh              - INFO - Running: pct set 3005 -lxc.mount.auto 'proc:rw sys:rw' 2>/dev/null || true
2025-11-26 23:12:36 - libs.container_manager    - INFO - [2/4] Action 'lxc sysctl access configuration' completed successfully
2025-11-26 23:12:36 - libs.container_manager    - INFO - [3/4] Running action: docker service start
2025-11-26 23:12:36 - actions.start_docker_service - INFO - Ensuring Docker service is running...
2025-11-26 23:12:36 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active docker 2>/dev/null || echo inactive'
2025-11-26 23:12:36 - actions.start_docker_service - INFO - Docker service already active, skipping start
2025-11-26 23:12:36 - libs.container_manager    - INFO - [3/4] Action 'docker service start' completed successfully
2025-11-26 23:12:36 - libs.container_manager    - INFO - [4/4] Running action: docker sysctl configuration
2025-11-26 23:12:36 - actions.configure_docker_sysctl - INFO - Configuring sysctl for Docker containers...
2025-11-26 23:12:36 - services.ssh              - INFO - Running: sudo -n bash -c 'sysctl -w net.ipv4.ip_unprivileged_port_start=0 2>/dev/null || true; echo '"'"'net.ipv4.ip_unprivileged_port_start=0'"'"' >> /etc/sysctl.conf 2>/dev/null || true'
2025-11-26 23:12:36 - libs.container_manager    - INFO - [4/4] Action 'docker sysctl configuration' completed successfully
2025-11-26 23:12:36 - libs.container_manager    - INFO - Container 'swarm-manager' created successfully
2025-11-26 23:12:36 - orchestration.swarm       - INFO - Container 3005 (swarm-manager) deployed successfully
2025-11-26 23:12:36 - orchestration.swarm       - INFO - 
Deploying container 3006 (swarm-node-1)...
2025-11-26 23:12:36 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:12:36 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:12:36 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:12:36 - services.ssh              - INFO - Running: pct destroy 3006 --force
2025-11-26 23:12:40 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/docker-ubuntu25.04-template_*_amd64.tar.zst 2>/dev/null | head -1 | xargs basename 2>/dev/null
2025-11-26 23:12:40 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && test -r /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && echo 'valid' || echo 'invalid'
2025-11-26 23:12:40 - libs.container_manager    - INFO - Checking if container 3006 already exists...
2025-11-26 23:12:40 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:12:41 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:12:41 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:12:41 - services.ssh              - INFO - Running: pct list | grep '^3006 '
2025-11-26 23:12:42 - libs.container_manager    - INFO - Creating container 3006 from template...
2025-11-26 23:12:42 - services.ssh              - INFO - Running: pct create 3006 /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst --hostname swarm-node-1 --memory 4096 --swap 4096 --cores 8 --net0 name=eth0,bridge=vmbr0,firewall=0,gw=10.11.3.253,ip=10.11.3.6/24,ip6=dhcp,type=veth --rootfs sdb:40 --unprivileged 0 --ostype ubuntu --arch amd64
2025-11-26 23:12:51 - libs.container_manager    - INFO - Setting container features...
2025-11-26 23:12:51 - services.ssh              - INFO - Running: pct set 3006 --features nesting=1,keyctl=1,fuse=1
2025-11-26 23:12:52 - libs.container_manager    - INFO - Starting container 3006...
2025-11-26 23:12:52 - services.ssh              - INFO - Running: pct start 3006
2025-11-26 23:12:56 - libs.container_manager    - INFO - Bringing up network interface...
2025-11-26 23:12:56 - services.pct              - INFO - Running in container 3006: ping -c 1 8.8.8.8
2025-11-26 23:12:56 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo cGluZyAtYyAxIDguOC44Ljg= | base64 -d | bash"
2025-11-26 23:12:57 - libs.container_manager    - INFO - Network interface is up and reachable
2025-11-26 23:12:57 - services.pct              - INFO - Running in container 3006: id -u jaal >/dev/null 2>&1 || useradd -m -s /bin/bash -G sudo jaal
2025-11-26 23:12:57 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgfHwgdXNlcmFkZCAtbSAtcyAvYmluL2Jhc2ggLUcgc3VkbyBqYWFs | base64 -d | bash"
2025-11-26 23:12:59 - services.pct              - INFO - Running in container 3006: echo jaal:jaal123 | chpasswd
2025-11-26 23:12:59 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo ZWNobyBqYWFsOmphYWwxMjMgfCBjaHBhc3N3ZA== | base64 -d | bash"
2025-11-26 23:13:00 - libs.container_manager    - INFO - Password set for user jaal
2025-11-26 23:13:00 - services.pct              - INFO - Running in container 3006: printf 'jaal ALL=(ALL) NOPASSWD: ALL
' > /etc/sudoers.d/jaal 2>&1
2025-11-26 23:13:00 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo cHJpbnRmICdqYWFsIEFMTD0oQUxMKSBOT1BBU1NXRDogQUxMCicgPiAvZXRjL3N1ZG9lcnMuZC9qYWFsIDI+JjE= | base64 -d | bash"
2025-11-26 23:13:01 - services.pct              - INFO - Running in container 3006: chmod 440 /etc/sudoers.d/jaal 2>&1
2025-11-26 23:13:01 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo Y2htb2QgNDQwIC9ldGMvc3Vkb2Vycy5kL2phYWwgMj4mMQ== | base64 -d | bash"
2025-11-26 23:13:02 - services.pct              - INFO - Running in container 3006: id -u jaal >/dev/null 2>&1 && echo 'exists' || echo 'missing'
2025-11-26 23:13:02 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyAnZXhpc3RzJyB8fCBlY2hvICdtaXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:13:03 - services.pct              - INFO - Running in container 3006: mkdir -p /home/jaal/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /home/jaal/.ssh/authorized_keys && chmod 600 /home/jaal/.ssh/authorized_keys && chown jaal:jaal /home/jaal/.ssh/authorized_keys && chown -R jaal:jaal /home/jaal/.ssh && chmod 700 /home/jaal/.ssh
2025-11-26 23:13:03 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo bWtkaXIgLXAgL2hvbWUvamFhbC8uc3NoICYmIGVjaG8gYzNOb0xYSnpZU0JCUVVGQlFqTk9lbUZETVhsak1rVkJRVUZCUkVGUlFVSkJRVUZDWjFGRVNHaHpaeTlTUWxNeFpXOW1aRUowVDIxU1oyNXJObkpSWlZkTU5XVkVRMEZHVWxsaGRHOXRiMjV4ZWxaUVNHNVZhRWRCVjB4M2NFRnBibFJMV1RCaWNtVkhOMUozWTFCNlUzazRaa1V6YkhCQmVHUTNaRFUxTVZOcmIzZFJUM3BNVHpGaGRWSlVka05IWjBkS1RVTlphSE5wVDFSRVpHYzBlVU5IWkdoMWRsUnNaMGN5VDNnNFkwTkZXVGt6VG5Ob05HSnFXRE50Tm13NVluQnhWMkZ0Wkd4WU5WSklOV0pNZVhCNk5XeHhMME5rTTJWVWNISkdXRU5uY1VwUFkxSlVMemRCTWxSeFJHVklTM1pGTTNwWlRUWjBaV2RyWlN0a1VXRmtUalF4Y21nNWMxa3pTME5ITUhGbVJqVTRkRzR5Umt4NlNuZzNNMGc1ZDFKSFpVTlhlRlJvY2tZMWQxTjZaM0pHUkVsWlIxUktWRTFWY1V0bllrcFdWbGxYV0M5aVdTOXVVVmRVT0ZaUE5tWk1lbWtyTUhCQlQzbzVNekZ4TkdWdVNIUlBOVFpVTkRSaVJYRjBabWMxWkZONE4ySk1SMGx5TlRaSWJXeHVNVWRJYUc5MVZTdDFOelpqVmxSWFQyOXFSRlkxVkRGWGMxSkJWSFE0WVVRNU1EZERhVGszUmxBdk5EWmpValY1U2xSNFlWUndLM0I0VjNCdGFESjNZVWRsUkZKRVYxRnpkRVZzU0c5VGFuUlFlVzkxZVZWMVYySXpNVzlVUW14ck9FdDNaMDlsY0RONk1UZHhLMWxKYUZwWFVVZElkbTFqVWt0SU1sQkJPVGhKVW5CcFNsWlNlbVk0YzFoS01HTmthMjkxUVRWWFFsTkVaV2RVYjBJMVZ6ZFJVRzFsYUVVOUlITm9ZV1J2ZDJOb1lXMWlaWEpBVTJoaFpHOTNZMmhoYldKbGNuTXRUV0ZqTFcxcGJta3ViRzlqWVd3PSB8IGJhc2U2NCAtZCA+IC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2htb2QgNjAwIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gLVIgamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaCAmJiBjaG1vZCA3MDAgL2hvbWUvamFhbC8uc3No | base64 -d | bash"
2025-11-26 23:13:04 - services.pct              - INFO - Running in container 3006: mkdir -p /root/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /root/.ssh/authorized_keys && chmod 600 /root/.ssh/authorized_keys
2025-11-26 23:13:04 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo bWtkaXIgLXAgL3Jvb3QvLnNzaCAmJiBlY2hvIGMzTm9MWEp6WVNCQlFVRkJRak5PZW1GRE1YbGpNa1ZCUVVGQlJFRlJRVUpCUVVGQ1oxRkVTR2h6Wnk5U1FsTXhaVzltWkVKMFQyMVNaMjVyTm5KUlpWZE1OV1ZFUTBGR1VsbGhkRzl0YjI1eGVsWlFTRzVWYUVkQlYweDNjRUZwYmxSTFdUQmljbVZITjFKM1kxQjZVM2s0WmtVemJIQkJlR1EzWkRVMU1WTnJiM2RSVDNwTVR6RmhkVkpVZGtOSFowZEtUVU5aYUhOcFQxUkVaR2MwZVVOSFpHaDFkbFJzWjBjeVQzZzRZME5GV1RrelRuTm9OR0pxV0ROdE5tdzVZbkJ4VjJGdFpHeFlOVkpJTldKTWVYQjZOV3h4TDBOa00yVlVjSEpHV0VObmNVcFBZMUpVTHpkQk1sUnhSR1ZJUzNaRk0zcFpUVFowWldkclpTdGtVV0ZrVGpReGNtZzVjMWt6UzBOSE1IRm1SalU0ZEc0eVJreDZTbmczTTBnNWQxSkhaVU5YZUZSb2NrWTFkMU42WjNKR1JFbFpSMVJLVkUxVmNVdG5Za3BXVmxsWFdDOWlXUzl1VVZkVU9GWlBObVpNZW1rck1IQkJUM281TXpGeE5HVnVTSFJQTlRaVU5EUmlSWEYwWm1jMVpGTjROMkpNUjBseU5UWkliV3h1TVVkSWFHOTFWU3QxTnpaalZsUlhUMjlxUkZZMVZERlhjMUpCVkhRNFlVUTVNRGREYVRrM1JsQXZORFpqVWpWNVNsUjRZVlJ3SzNCNFYzQnRhREozWVVkbFJGSkVWMUZ6ZEVWc1NHOVRhblJRZVc5MWVWVjFWMkl6TVc5VVFteHJPRXQzWjA5bGNETjZNVGR4SzFsSmFGcFhVVWRJZG0xalVrdElNbEJCT1RoSlVuQnBTbFpTZW1ZNGMxaEtNR05rYTI5MVFUVlhRbE5FWldkVWIwSTFWemRSVUcxbGFFVTlJSE5vWVdSdmQyTm9ZVzFpWlhKQVUyaGhaRzkzWTJoaGJXSmxjbk10VFdGakxXMXBibWt1Ykc5allXdz0gfCBiYXNlNjQgLWQgPiAvcm9vdC8uc3NoL2F1dGhvcml6ZWRfa2V5cyAmJiBjaG1vZCA2MDAgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXM= | base64 -d | bash"
2025-11-26 23:13:05 - services.pct              - INFO - Running in container 3006: test -f /home/jaal/.ssh/authorized_keys && test -f /root/.ssh/authorized_keys && echo 'keys_exist' || echo 'keys_missing'
2025-11-26 23:13:05 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo dGVzdCAtZiAvaG9tZS9qYWFsLy5zc2gvYXV0aG9yaXplZF9rZXlzICYmIHRlc3QgLWYgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgZWNobyAna2V5c19leGlzdCcgfHwgZWNobyAna2V5c19taXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:13:07 - services.pct              - INFO - SSH key setup verified successfully
2025-11-26 23:13:07 - services.pct              - INFO - Running in container 3006: dpkg -l | grep -q '^ii.*openssh-server' || echo 'not_installed'
2025-11-26 23:13:07 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo ZHBrZyAtbCB8IGdyZXAgLXEgJ15paS4qb3BlbnNzaC1zZXJ2ZXInIHx8IGVjaG8gJ25vdF9pbnN0YWxsZWQn | base64 -d | bash"
2025-11-26 23:13:08 - services.pct              - INFO - Running in container 3006: systemctl enable ssh 2>&1
2025-11-26 23:13:08 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 23:13:10 - services.pct              - INFO - Running in container 3006: systemctl start ssh 2>&1
2025-11-26 23:13:10 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 23:13:14 - services.pct              - INFO - Running in container 3006: systemctl is-active ssh 2>/dev/null || echo inactive
2025-11-26 23:13:14 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBzc2ggMj4vZGV2L251bGwgfHwgZWNobyBpbmFjdGl2ZQ== | base64 -d | bash"
2025-11-26 23:13:15 - services.pct              - INFO - SSH service is running
2025-11-26 23:13:15 - services.pct              - INFO - Running in container 3006: ss -tlnp | grep ':22 ' || netstat -tlnp 2>/dev/null | grep ':22 ' || echo 'not_listening'
2025-11-26 23:13:15 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo c3MgLXRsbnAgfCBncmVwICc6MjIgJyB8fCBuZXRzdGF0IC10bG5wIDI+L2Rldi9udWxsIHwgZ3JlcCAnOjIyICcgfHwgZWNobyAnbm90X2xpc3RlbmluZyc= | base64 -d | bash"
2025-11-26 23:13:16 - services.pct              - INFO - SSH listening check: LISTEN 0      4096         0.0.0.0:22        0.0.0.0:*    users:(("sshd",pid=153,fd=3),("systemd",pid=1,fd=146))
LISTEN 0      4096            [::]:22           [::]:*    users:(("sshd",pid=153,fd=4),("systemd",pid=1,fd=147))
2025-11-26 23:13:16 - services.pct              - INFO - Running in container 3006: grep -E '^ListenAddress|^#ListenAddress' /etc/ssh/sshd_config 2>/dev/null | head -5 || echo 'config_check_failed'
2025-11-26 23:13:16 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo Z3JlcCAtRSAnXkxpc3RlbkFkZHJlc3N8XiNMaXN0ZW5BZGRyZXNzJyAvZXRjL3NzaC9zc2hkX2NvbmZpZyAyPi9kZXYvbnVsbCB8IGhlYWQgLTUgfHwgZWNobyAnY29uZmlnX2NoZWNrX2ZhaWxlZCc= | base64 -d | bash"
2025-11-26 23:13:17 - services.pct              - INFO - SSH config check: #ListenAddress 0.0.0.0
#ListenAddress ::
2025-11-26 23:13:17 - services.pct              - INFO - Running in container 3006: timeout 1 bash -c '</dev/tcp/127.0.0.1/22' 2>&1 && echo 'localhost_ok' || echo 'localhost_failed'
2025-11-26 23:13:17 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo dGltZW91dCAxIGJhc2ggLWMgJzwvZGV2L3RjcC8xMjcuMC4wLjEvMjInIDI+JjEgJiYgZWNobyAnbG9jYWxob3N0X29rJyB8fCBlY2hvICdsb2NhbGhvc3RfZmFpbGVkJw== | base64 -d | bash"
2025-11-26 23:13:19 - services.pct              - INFO - SSH localhost connection test: localhost_ok
2025-11-26 23:13:19 - libs.container_manager    - INFO - Waiting for container to be ready with SSH connectivity (up to 10 minutes)...
2025-11-26 23:13:19 - services.ssh              - INFO - Running: pct status 3006
2025-11-26 23:13:20 - services.pct              - INFO - Running in container 3006: echo test
2025-11-26 23:13:20 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo ZWNobyB0ZXN0 | base64 -d | bash"
2025-11-26 23:13:21 - services.pct              - INFO - Testing SSH connection to jaal@10.11.3.6...
2025-11-26 23:13:21 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:13:21 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:13:21 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.6
2025-11-26 23:13:21 - services.ssh              - INFO - Running: echo 'SSH connection test successful'
2025-11-26 23:13:22 - services.pct              - INFO - SSH connectivity verified - connection successful
2025-11-26 23:13:22 - services.pct              - INFO - Container is ready and SSH is accessible!
2025-11-26 23:13:25 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:13:25 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:13:25 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.6
2025-11-26 23:13:25 - libs.container_manager    - INFO - Executing 2 actions for container 'swarm-node-1'
2025-11-26 23:13:25 - libs.container_manager    - INFO - [1/2] Running action: cloud-init wait
2025-11-26 23:13:25 - services.ssh              - INFO - Running: command -v cloud-init
2025-11-26 23:13:25 - actions.cloud_init_wait   - INFO - cloud-init not found, skipping
2025-11-26 23:13:25 - libs.container_manager    - INFO - [1/2] Action 'cloud-init wait' completed successfully
2025-11-26 23:13:25 - libs.container_manager    - INFO - [2/2] Running action: docker service start
2025-11-26 23:13:25 - actions.start_docker_service - INFO - Ensuring Docker service is running...
2025-11-26 23:13:25 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active docker 2>/dev/null || echo inactive'
2025-11-26 23:13:25 - actions.start_docker_service - INFO - Docker service already active, skipping start
2025-11-26 23:13:25 - libs.container_manager    - INFO - [2/2] Action 'docker service start' completed successfully
2025-11-26 23:13:25 - libs.container_manager    - INFO - Container 'swarm-node-1' created successfully
2025-11-26 23:13:25 - orchestration.swarm       - INFO - Container 3006 (swarm-node-1) deployed successfully
2025-11-26 23:13:25 - orchestration.swarm       - INFO - 
Deploying container 3007 (swarm-node-2)...
2025-11-26 23:13:26 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:13:26 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:13:26 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:13:26 - services.ssh              - INFO - Running: pct destroy 3007 --force
2025-11-26 23:13:29 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/docker-ubuntu25.04-template_*_amd64.tar.zst 2>/dev/null | head -1 | xargs basename 2>/dev/null
2025-11-26 23:13:29 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && test -r /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && echo 'valid' || echo 'invalid'
2025-11-26 23:13:29 - libs.container_manager    - INFO - Checking if container 3007 already exists...
2025-11-26 23:13:30 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:13:30 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:13:30 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:13:30 - services.ssh              - INFO - Running: pct list | grep '^3007 '
2025-11-26 23:13:31 - libs.container_manager    - INFO - Creating container 3007 from template...
2025-11-26 23:13:31 - services.ssh              - INFO - Running: pct create 3007 /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst --hostname swarm-node-2 --memory 4096 --swap 4096 --cores 8 --net0 name=eth0,bridge=vmbr0,firewall=0,gw=10.11.3.253,ip=10.11.3.7/24,ip6=dhcp,type=veth --rootfs sdb:40 --unprivileged 0 --ostype ubuntu --arch amd64
2025-11-26 23:13:39 - libs.container_manager    - INFO - Setting container features...
2025-11-26 23:13:39 - services.ssh              - INFO - Running: pct set 3007 --features nesting=1,keyctl=1,fuse=1
2025-11-26 23:13:41 - libs.container_manager    - INFO - Starting container 3007...
2025-11-26 23:13:41 - services.ssh              - INFO - Running: pct start 3007
2025-11-26 23:13:45 - libs.container_manager    - INFO - Bringing up network interface...
2025-11-26 23:13:45 - services.pct              - INFO - Running in container 3007: ping -c 1 8.8.8.8
2025-11-26 23:13:45 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo cGluZyAtYyAxIDguOC44Ljg= | base64 -d | bash"
2025-11-26 23:13:46 - libs.container_manager    - INFO - Network interface is up and reachable
2025-11-26 23:13:46 - services.pct              - INFO - Running in container 3007: id -u jaal >/dev/null 2>&1 || useradd -m -s /bin/bash -G sudo jaal
2025-11-26 23:13:46 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgfHwgdXNlcmFkZCAtbSAtcyAvYmluL2Jhc2ggLUcgc3VkbyBqYWFs | base64 -d | bash"
2025-11-26 23:13:47 - services.pct              - INFO - Running in container 3007: echo jaal:jaal123 | chpasswd
2025-11-26 23:13:47 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo ZWNobyBqYWFsOmphYWwxMjMgfCBjaHBhc3N3ZA== | base64 -d | bash"
2025-11-26 23:13:48 - libs.container_manager    - INFO - Password set for user jaal
2025-11-26 23:13:48 - services.pct              - INFO - Running in container 3007: printf 'jaal ALL=(ALL) NOPASSWD: ALL
' > /etc/sudoers.d/jaal 2>&1
2025-11-26 23:13:48 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo cHJpbnRmICdqYWFsIEFMTD0oQUxMKSBOT1BBU1NXRDogQUxMCicgPiAvZXRjL3N1ZG9lcnMuZC9qYWFsIDI+JjE= | base64 -d | bash"
2025-11-26 23:13:49 - services.pct              - INFO - Running in container 3007: chmod 440 /etc/sudoers.d/jaal 2>&1
2025-11-26 23:13:49 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo Y2htb2QgNDQwIC9ldGMvc3Vkb2Vycy5kL2phYWwgMj4mMQ== | base64 -d | bash"
2025-11-26 23:13:50 - services.pct              - INFO - Running in container 3007: id -u jaal >/dev/null 2>&1 && echo 'exists' || echo 'missing'
2025-11-26 23:13:50 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyAnZXhpc3RzJyB8fCBlY2hvICdtaXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:13:52 - services.pct              - INFO - Running in container 3007: mkdir -p /home/jaal/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /home/jaal/.ssh/authorized_keys && chmod 600 /home/jaal/.ssh/authorized_keys && chown jaal:jaal /home/jaal/.ssh/authorized_keys && chown -R jaal:jaal /home/jaal/.ssh && chmod 700 /home/jaal/.ssh
2025-11-26 23:13:52 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo bWtkaXIgLXAgL2hvbWUvamFhbC8uc3NoICYmIGVjaG8gYzNOb0xYSnpZU0JCUVVGQlFqTk9lbUZETVhsak1rVkJRVUZCUkVGUlFVSkJRVUZDWjFGRVNHaHpaeTlTUWxNeFpXOW1aRUowVDIxU1oyNXJObkpSWlZkTU5XVkVRMEZHVWxsaGRHOXRiMjV4ZWxaUVNHNVZhRWRCVjB4M2NFRnBibFJMV1RCaWNtVkhOMUozWTFCNlUzazRaa1V6YkhCQmVHUTNaRFUxTVZOcmIzZFJUM3BNVHpGaGRWSlVka05IWjBkS1RVTlphSE5wVDFSRVpHYzBlVU5IWkdoMWRsUnNaMGN5VDNnNFkwTkZXVGt6VG5Ob05HSnFXRE50Tm13NVluQnhWMkZ0Wkd4WU5WSklOV0pNZVhCNk5XeHhMME5rTTJWVWNISkdXRU5uY1VwUFkxSlVMemRCTWxSeFJHVklTM1pGTTNwWlRUWjBaV2RyWlN0a1VXRmtUalF4Y21nNWMxa3pTME5ITUhGbVJqVTRkRzR5Umt4NlNuZzNNMGc1ZDFKSFpVTlhlRlJvY2tZMWQxTjZaM0pHUkVsWlIxUktWRTFWY1V0bllrcFdWbGxYV0M5aVdTOXVVVmRVT0ZaUE5tWk1lbWtyTUhCQlQzbzVNekZ4TkdWdVNIUlBOVFpVTkRSaVJYRjBabWMxWkZONE4ySk1SMGx5TlRaSWJXeHVNVWRJYUc5MVZTdDFOelpqVmxSWFQyOXFSRlkxVkRGWGMxSkJWSFE0WVVRNU1EZERhVGszUmxBdk5EWmpValY1U2xSNFlWUndLM0I0VjNCdGFESjNZVWRsUkZKRVYxRnpkRVZzU0c5VGFuUlFlVzkxZVZWMVYySXpNVzlVUW14ck9FdDNaMDlsY0RONk1UZHhLMWxKYUZwWFVVZElkbTFqVWt0SU1sQkJPVGhKVW5CcFNsWlNlbVk0YzFoS01HTmthMjkxUVRWWFFsTkVaV2RVYjBJMVZ6ZFJVRzFsYUVVOUlITm9ZV1J2ZDJOb1lXMWlaWEpBVTJoaFpHOTNZMmhoYldKbGNuTXRUV0ZqTFcxcGJta3ViRzlqWVd3PSB8IGJhc2U2NCAtZCA+IC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2htb2QgNjAwIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gLVIgamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaCAmJiBjaG1vZCA3MDAgL2hvbWUvamFhbC8uc3No | base64 -d | bash"
2025-11-26 23:13:53 - services.pct              - INFO - Running in container 3007: mkdir -p /root/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /root/.ssh/authorized_keys && chmod 600 /root/.ssh/authorized_keys
2025-11-26 23:13:53 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo bWtkaXIgLXAgL3Jvb3QvLnNzaCAmJiBlY2hvIGMzTm9MWEp6WVNCQlFVRkJRak5PZW1GRE1YbGpNa1ZCUVVGQlJFRlJRVUpCUVVGQ1oxRkVTR2h6Wnk5U1FsTXhaVzltWkVKMFQyMVNaMjVyTm5KUlpWZE1OV1ZFUTBGR1VsbGhkRzl0YjI1eGVsWlFTRzVWYUVkQlYweDNjRUZwYmxSTFdUQmljbVZITjFKM1kxQjZVM2s0WmtVemJIQkJlR1EzWkRVMU1WTnJiM2RSVDNwTVR6RmhkVkpVZGtOSFowZEtUVU5aYUhOcFQxUkVaR2MwZVVOSFpHaDFkbFJzWjBjeVQzZzRZME5GV1RrelRuTm9OR0pxV0ROdE5tdzVZbkJ4VjJGdFpHeFlOVkpJTldKTWVYQjZOV3h4TDBOa00yVlVjSEpHV0VObmNVcFBZMUpVTHpkQk1sUnhSR1ZJUzNaRk0zcFpUVFowWldkclpTdGtVV0ZrVGpReGNtZzVjMWt6UzBOSE1IRm1SalU0ZEc0eVJreDZTbmczTTBnNWQxSkhaVU5YZUZSb2NrWTFkMU42WjNKR1JFbFpSMVJLVkUxVmNVdG5Za3BXVmxsWFdDOWlXUzl1VVZkVU9GWlBObVpNZW1rck1IQkJUM281TXpGeE5HVnVTSFJQTlRaVU5EUmlSWEYwWm1jMVpGTjROMkpNUjBseU5UWkliV3h1TVVkSWFHOTFWU3QxTnpaalZsUlhUMjlxUkZZMVZERlhjMUpCVkhRNFlVUTVNRGREYVRrM1JsQXZORFpqVWpWNVNsUjRZVlJ3SzNCNFYzQnRhREozWVVkbFJGSkVWMUZ6ZEVWc1NHOVRhblJRZVc5MWVWVjFWMkl6TVc5VVFteHJPRXQzWjA5bGNETjZNVGR4SzFsSmFGcFhVVWRJZG0xalVrdElNbEJCT1RoSlVuQnBTbFpTZW1ZNGMxaEtNR05rYTI5MVFUVlhRbE5FWldkVWIwSTFWemRSVUcxbGFFVTlJSE5vWVdSdmQyTm9ZVzFpWlhKQVUyaGhaRzkzWTJoaGJXSmxjbk10VFdGakxXMXBibWt1Ykc5allXdz0gfCBiYXNlNjQgLWQgPiAvcm9vdC8uc3NoL2F1dGhvcml6ZWRfa2V5cyAmJiBjaG1vZCA2MDAgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXM= | base64 -d | bash"
2025-11-26 23:13:54 - services.pct              - INFO - Running in container 3007: test -f /home/jaal/.ssh/authorized_keys && test -f /root/.ssh/authorized_keys && echo 'keys_exist' || echo 'keys_missing'
2025-11-26 23:13:54 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo dGVzdCAtZiAvaG9tZS9qYWFsLy5zc2gvYXV0aG9yaXplZF9rZXlzICYmIHRlc3QgLWYgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgZWNobyAna2V5c19leGlzdCcgfHwgZWNobyAna2V5c19taXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:13:55 - services.pct              - INFO - SSH key setup verified successfully
2025-11-26 23:13:55 - services.pct              - INFO - Running in container 3007: dpkg -l | grep -q '^ii.*openssh-server' || echo 'not_installed'
2025-11-26 23:13:55 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo ZHBrZyAtbCB8IGdyZXAgLXEgJ15paS4qb3BlbnNzaC1zZXJ2ZXInIHx8IGVjaG8gJ25vdF9pbnN0YWxsZWQn | base64 -d | bash"
2025-11-26 23:13:56 - services.pct              - INFO - Running in container 3007: systemctl enable ssh 2>&1
2025-11-26 23:13:56 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 23:13:58 - services.pct              - INFO - Running in container 3007: systemctl start ssh 2>&1
2025-11-26 23:13:58 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 23:14:02 - services.pct              - INFO - Running in container 3007: systemctl is-active ssh 2>/dev/null || echo inactive
2025-11-26 23:14:02 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBzc2ggMj4vZGV2L251bGwgfHwgZWNobyBpbmFjdGl2ZQ== | base64 -d | bash"
2025-11-26 23:14:03 - services.pct              - INFO - SSH service is running
2025-11-26 23:14:03 - services.pct              - INFO - Running in container 3007: ss -tlnp | grep ':22 ' || netstat -tlnp 2>/dev/null | grep ':22 ' || echo 'not_listening'
2025-11-26 23:14:03 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo c3MgLXRsbnAgfCBncmVwICc6MjIgJyB8fCBuZXRzdGF0IC10bG5wIDI+L2Rldi9udWxsIHwgZ3JlcCAnOjIyICcgfHwgZWNobyAnbm90X2xpc3RlbmluZyc= | base64 -d | bash"
2025-11-26 23:14:04 - services.pct              - INFO - SSH listening check: LISTEN 0      4096         0.0.0.0:22        0.0.0.0:*    users:(("sshd",pid=149,fd=3),("systemd",pid=1,fd=146))
LISTEN 0      4096            [::]:22           [::]:*    users:(("sshd",pid=149,fd=4),("systemd",pid=1,fd=147))
2025-11-26 23:14:04 - services.pct              - INFO - Running in container 3007: grep -E '^ListenAddress|^#ListenAddress' /etc/ssh/sshd_config 2>/dev/null | head -5 || echo 'config_check_failed'
2025-11-26 23:14:04 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo Z3JlcCAtRSAnXkxpc3RlbkFkZHJlc3N8XiNMaXN0ZW5BZGRyZXNzJyAvZXRjL3NzaC9zc2hkX2NvbmZpZyAyPi9kZXYvbnVsbCB8IGhlYWQgLTUgfHwgZWNobyAnY29uZmlnX2NoZWNrX2ZhaWxlZCc= | base64 -d | bash"
2025-11-26 23:14:05 - services.pct              - INFO - SSH config check: #ListenAddress 0.0.0.0
#ListenAddress ::
2025-11-26 23:14:05 - services.pct              - INFO - Running in container 3007: timeout 1 bash -c '</dev/tcp/127.0.0.1/22' 2>&1 && echo 'localhost_ok' || echo 'localhost_failed'
2025-11-26 23:14:05 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo dGltZW91dCAxIGJhc2ggLWMgJzwvZGV2L3RjcC8xMjcuMC4wLjEvMjInIDI+JjEgJiYgZWNobyAnbG9jYWxob3N0X29rJyB8fCBlY2hvICdsb2NhbGhvc3RfZmFpbGVkJw== | base64 -d | bash"
2025-11-26 23:14:07 - services.pct              - INFO - SSH localhost connection test: localhost_ok
2025-11-26 23:14:07 - libs.container_manager    - INFO - Waiting for container to be ready with SSH connectivity (up to 10 minutes)...
2025-11-26 23:14:07 - services.ssh              - INFO - Running: pct status 3007
2025-11-26 23:14:08 - services.pct              - INFO - Running in container 3007: echo test
2025-11-26 23:14:08 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo ZWNobyB0ZXN0 | base64 -d | bash"
2025-11-26 23:14:09 - services.pct              - INFO - Testing SSH connection to jaal@10.11.3.7...
2025-11-26 23:14:09 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:14:09 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:14:09 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.7
2025-11-26 23:14:09 - services.ssh              - INFO - Running: echo 'SSH connection test successful'
2025-11-26 23:14:10 - services.pct              - INFO - SSH connectivity verified - connection successful
2025-11-26 23:14:10 - services.pct              - INFO - Container is ready and SSH is accessible!
2025-11-26 23:14:13 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:14:13 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:14:13 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.7
2025-11-26 23:14:13 - libs.container_manager    - INFO - Executing 2 actions for container 'swarm-node-2'
2025-11-26 23:14:13 - libs.container_manager    - INFO - [1/2] Running action: cloud-init wait
2025-11-26 23:14:13 - services.ssh              - INFO - Running: command -v cloud-init
2025-11-26 23:14:13 - actions.cloud_init_wait   - INFO - cloud-init not found, skipping
2025-11-26 23:14:13 - libs.container_manager    - INFO - [1/2] Action 'cloud-init wait' completed successfully
2025-11-26 23:14:13 - libs.container_manager    - INFO - [2/2] Running action: docker service start
2025-11-26 23:14:13 - actions.start_docker_service - INFO - Ensuring Docker service is running...
2025-11-26 23:14:13 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active docker 2>/dev/null || echo inactive'
2025-11-26 23:14:13 - actions.start_docker_service - INFO - Docker service already active, skipping start
2025-11-26 23:14:13 - libs.container_manager    - INFO - [2/2] Action 'docker service start' completed successfully
2025-11-26 23:14:13 - libs.container_manager    - INFO - Container 'swarm-node-2' created successfully
2025-11-26 23:14:13 - orchestration.swarm       - INFO - Container 3007 (swarm-node-2) deployed successfully
2025-11-26 23:14:14 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:14:14 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:14:14 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:14:14 - services.pct              - INFO - Running in container 3005: dpkg -L docker.io 2>/dev/null | grep -E '/bin/docker$' | head -1 || dpkg -L docker-ce 2>/dev/null | grep -E '/bin/docker$' | head -1 || command -v docker 2>/dev/null || which docker 2>/dev/null || find /usr /usr/local -name docker -type f 2>/dev/null | head -1 || test -x /usr/bin/docker && echo /usr/bin/docker || test -x /usr/local/bin/docker && echo /usr/local/bin/docker || echo 'docker'
2025-11-26 23:14:14 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo ZHBrZyAtTCBkb2NrZXIuaW8gMj4vZGV2L251bGwgfCBncmVwIC1FICcvYmluL2RvY2tlciQnIHwgaGVhZCAtMSB8fCBkcGtnIC1MIGRvY2tlci1jZSAyPi9kZXYvbnVsbCB8IGdyZXAgLUUgJy9iaW4vZG9ja2VyJCcgfCBoZWFkIC0xIHx8IGNvbW1hbmQgLXYgZG9ja2VyIDI+L2Rldi9udWxsIHx8IHdoaWNoIGRvY2tlciAyPi9kZXYvbnVsbCB8fCBmaW5kIC91c3IgL3Vzci9sb2NhbCAtbmFtZSBkb2NrZXIgLXR5cGUgZiAyPi9kZXYvbnVsbCB8IGhlYWQgLTEgfHwgdGVzdCAteCAvdXNyL2Jpbi9kb2NrZXIgJiYgZWNobyAvdXNyL2Jpbi9kb2NrZXIgfHwgdGVzdCAteCAvdXNyL2xvY2FsL2Jpbi9kb2NrZXIgJiYgZWNobyAvdXNyL2xvY2FsL2Jpbi9kb2NrZXIgfHwgZWNobyAnZG9ja2VyJw== | base64 -d | bash"
2025-11-26 23:14:15 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:14:15 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:14:15 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:14:15 - services.pct              - INFO - Running in container 3005: command -v /usr/bin/docker >/dev/null 2>&1 && echo installed || echo not_installed
2025-11-26 23:14:15 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo Y29tbWFuZCAtdiAvdXNyL2Jpbi9kb2NrZXIgPi9kZXYvbnVsbCAyPiYxICYmIGVjaG8gaW5zdGFsbGVkIHx8IGVjaG8gbm90X2luc3RhbGxlZA== | base64 -d | bash"
2025-11-26 23:14:17 - orchestration.swarm       - INFO - Docker is available on manager
2025-11-26 23:14:17 - orchestration.swarm       - INFO - 
Initializing Docker Swarm on manager node...
2025-11-26 23:14:17 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:14:17 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:14:17 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:14:17 - services.pct              - INFO - Running in container 3005: /usr/bin/docker swarm init --advertise-addr 10.11.3.5 2>&1
2025-11-26 23:14:17 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9iaW4vZG9ja2VyIHN3YXJtIGluaXQgLS1hZHZlcnRpc2UtYWRkciAxMC4xMS4zLjUgMj4mMQ== | base64 -d | bash"
2025-11-26 23:14:19 - orchestration.swarm       - INFO - Swarm initialized successfully
2025-11-26 23:14:19 - orchestration.swarm       - INFO - Getting worker join token...
2025-11-26 23:14:19 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:14:20 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:14:20 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:14:20 - services.pct              - INFO - Running in container 3005: /usr/bin/docker swarm join-token worker -q 2>&1
2025-11-26 23:14:20 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9iaW4vZG9ja2VyIHN3YXJtIGpvaW4tdG9rZW4gd29ya2VyIC1xIDI+JjE= | base64 -d | bash"
2025-11-26 23:14:21 - orchestration.swarm       - INFO - Setting manager node availability to drain...
2025-11-26 23:14:21 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:14:21 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:14:21 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:14:21 - services.pct              - INFO - Running in container 3005: /usr/bin/docker node update --availability drain swarm-manager 2>&1
2025-11-26 23:14:21 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9iaW4vZG9ja2VyIG5vZGUgdXBkYXRlIC0tYXZhaWxhYmlsaXR5IGRyYWluIHN3YXJtLW1hbmFnZXIgMj4mMQ== | base64 -d | bash"
2025-11-26 23:14:22 - orchestration.swarm       - INFO - Joining swarm-node-1 (10.11.3.6) to swarm...
2025-11-26 23:14:22 - services.pct              - INFO - Running in container 3006: dpkg -L docker.io 2>/dev/null | grep -E '/bin/docker$' | head -1 || dpkg -L docker-ce 2>/dev/null | grep -E '/bin/docker$' | head -1 || command -v docker 2>/dev/null || which docker 2>/dev/null || find /usr /usr/local -name docker -type f 2>/dev/null | head -1 || test -x /usr/bin/docker && echo /usr/bin/docker || test -x /usr/local/bin/docker && echo /usr/local/bin/docker || echo 'docker'
2025-11-26 23:14:22 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo ZHBrZyAtTCBkb2NrZXIuaW8gMj4vZGV2L251bGwgfCBncmVwIC1FICcvYmluL2RvY2tlciQnIHwgaGVhZCAtMSB8fCBkcGtnIC1MIGRvY2tlci1jZSAyPi9kZXYvbnVsbCB8IGdyZXAgLUUgJy9iaW4vZG9ja2VyJCcgfCBoZWFkIC0xIHx8IGNvbW1hbmQgLXYgZG9ja2VyIDI+L2Rldi9udWxsIHx8IHdoaWNoIGRvY2tlciAyPi9kZXYvbnVsbCB8fCBmaW5kIC91c3IgL3Vzci9sb2NhbCAtbmFtZSBkb2NrZXIgLXR5cGUgZiAyPi9kZXYvbnVsbCB8IGhlYWQgLTEgfHwgdGVzdCAteCAvdXNyL2Jpbi9kb2NrZXIgJiYgZWNobyAvdXNyL2Jpbi9kb2NrZXIgfHwgdGVzdCAteCAvdXNyL2xvY2FsL2Jpbi9kb2NrZXIgJiYgZWNobyAvdXNyL2xvY2FsL2Jpbi9kb2NrZXIgfHwgZWNobyAnZG9ja2VyJw== | base64 -d | bash"
2025-11-26 23:14:24 - services.pct              - INFO - Running in container 3006: /usr/bin/docker swarm join --token SWMTKN-1-3qhx20ovb9tijtuanndipt10wsjjax4v550yo5wgsfk4ragqws-7f6pdhntztqer5ux3atkoanr0 10.11.3.5:2377 2>&1
2025-11-26 23:14:24 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo L3Vzci9iaW4vZG9ja2VyIHN3YXJtIGpvaW4gLS10b2tlbiBTV01US04tMS0zcWh4MjBvdmI5dGlqdHVhbm5kaXB0MTB3c2pqYXg0djU1MHlvNXdnc2ZrNHJhZ3F3cy03ZjZwZGhudHp0cWVyNXV4M2F0a29hbnIwIDEwLjExLjMuNToyMzc3IDI+JjE= | base64 -d | bash"
2025-11-26 23:14:25 - orchestration.swarm       - INFO - Node swarm-node-1 joined swarm successfully
2025-11-26 23:14:25 - orchestration.swarm       - INFO - Joining swarm-node-2 (10.11.3.7) to swarm...
2025-11-26 23:14:25 - services.pct              - INFO - Running in container 3007: dpkg -L docker.io 2>/dev/null | grep -E '/bin/docker$' | head -1 || dpkg -L docker-ce 2>/dev/null | grep -E '/bin/docker$' | head -1 || command -v docker 2>/dev/null || which docker 2>/dev/null || find /usr /usr/local -name docker -type f 2>/dev/null | head -1 || test -x /usr/bin/docker && echo /usr/bin/docker || test -x /usr/local/bin/docker && echo /usr/local/bin/docker || echo 'docker'
2025-11-26 23:14:25 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo ZHBrZyAtTCBkb2NrZXIuaW8gMj4vZGV2L251bGwgfCBncmVwIC1FICcvYmluL2RvY2tlciQnIHwgaGVhZCAtMSB8fCBkcGtnIC1MIGRvY2tlci1jZSAyPi9kZXYvbnVsbCB8IGdyZXAgLUUgJy9iaW4vZG9ja2VyJCcgfCBoZWFkIC0xIHx8IGNvbW1hbmQgLXYgZG9ja2VyIDI+L2Rldi9udWxsIHx8IHdoaWNoIGRvY2tlciAyPi9kZXYvbnVsbCB8fCBmaW5kIC91c3IgL3Vzci9sb2NhbCAtbmFtZSBkb2NrZXIgLXR5cGUgZiAyPi9kZXYvbnVsbCB8IGhlYWQgLTEgfHwgdGVzdCAteCAvdXNyL2Jpbi9kb2NrZXIgJiYgZWNobyAvdXNyL2Jpbi9kb2NrZXIgfHwgdGVzdCAteCAvdXNyL2xvY2FsL2Jpbi9kb2NrZXIgJiYgZWNobyAvdXNyL2xvY2FsL2Jpbi9kb2NrZXIgfHwgZWNobyAnZG9ja2VyJw== | base64 -d | bash"
2025-11-26 23:14:26 - services.pct              - INFO - Running in container 3007: /usr/bin/docker swarm join --token SWMTKN-1-3qhx20ovb9tijtuanndipt10wsjjax4v550yo5wgsfk4ragqws-7f6pdhntztqer5ux3atkoanr0 10.11.3.5:2377 2>&1
2025-11-26 23:14:26 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo L3Vzci9iaW4vZG9ja2VyIHN3YXJtIGpvaW4gLS10b2tlbiBTV01US04tMS0zcWh4MjBvdmI5dGlqdHVhbm5kaXB0MTB3c2pqYXg0djU1MHlvNXdnc2ZrNHJhZ3F3cy03ZjZwZGhudHp0cWVyNXV4M2F0a29hbnIwIDEwLjExLjMuNToyMzc3IDI+JjE= | base64 -d | bash"
2025-11-26 23:14:28 - orchestration.swarm       - INFO - Node swarm-node-2 joined swarm successfully
2025-11-26 23:14:28 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:14:28 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:14:28 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:14:28 - orchestration.swarm       - INFO - 
Verifying swarm status...
2025-11-26 23:14:28 - services.pct              - INFO - Running in container 3005: /usr/bin/docker node ls 2>&1
2025-11-26 23:14:28 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9iaW4vZG9ja2VyIG5vZGUgbHMgMj4mMQ== | base64 -d | bash"
2025-11-26 23:14:29 - orchestration.swarm       - INFO - 
Installing Portainer CE...
2025-11-26 23:14:29 - services.pct              - INFO - Running in container 3005: /usr/bin/docker volume create portainer_data 2>/dev/null || true
2025-11-26 23:14:29 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9iaW4vZG9ja2VyIHZvbHVtZSBjcmVhdGUgcG9ydGFpbmVyX2RhdGEgMj4vZGV2L251bGwgfHwgdHJ1ZQ== | base64 -d | bash"
2025-11-26 23:14:31 - services.pct              - INFO - Running in container 3005: /usr/bin/docker stop portainer 2>/dev/null || true; /usr/bin/docker rm portainer 2>/dev/null || true
2025-11-26 23:14:31 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9iaW4vZG9ja2VyIHN0b3AgcG9ydGFpbmVyIDI+L2Rldi9udWxsIHx8IHRydWU7IC91c3IvYmluL2RvY2tlciBybSBwb3J0YWluZXIgMj4vZGV2L251bGwgfHwgdHJ1ZQ== | base64 -d | bash"
2025-11-26 23:14:32 - orchestration.swarm       - INFO - Generating bcrypt hash for Portainer admin password...
2025-11-26 23:14:32 - services.pct              - INFO - Running in container 3005: python3 -c "import bcrypt; print(bcrypt.hashpw('admin123'.encode(), bcrypt.gensalt()).decode())" 2>&1
2025-11-26 23:14:32 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo cHl0aG9uMyAtYyAiaW1wb3J0IGJjcnlwdDsgcHJpbnQoYmNyeXB0Lmhhc2hwdygnYWRtaW4xMjMnLmVuY29kZSgpLCBiY3J5cHQuZ2Vuc2FsdCgpKS5kZWNvZGUoKSkiIDI+JjE= | base64 -d | bash"
2025-11-26 23:14:33 - orchestration.swarm       - WARNING - Python bcrypt failed, trying httpd container method...
2025-11-26 23:14:33 - services.pct              - INFO - Running in container 3005: /usr/bin/docker run --rm --security-opt apparmor=unconfined httpd:2.4-alpine htpasswd -nbB admin 'admin123' 2>&1 | grep '^admin:' | cut -d ':' -f 2- | tr -d '\n'
2025-11-26 23:14:33 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9iaW4vZG9ja2VyIHJ1biAtLXJtIC0tc2VjdXJpdHktb3B0IGFwcGFybW9yPXVuY29uZmluZWQgaHR0cGQ6Mi40LWFscGluZSBodHBhc3N3ZCAtbmJCIGFkbWluICdhZG1pbjEyMycgMj4mMSB8IGdyZXAgJ15hZG1pbjonIHwgY3V0IC1kICc6JyAtZiAyLSB8IHRyIC1kICdcbic= | base64 -d | bash"
2025-11-26 23:14:39 - orchestration.swarm       - WARNING - Failed to generate password hash, Portainer will require manual setup
2025-11-26 23:14:39 - orchestration.swarm       - INFO - Creating Portainer container...
2025-11-26 23:14:39 - services.pct              - INFO - Running in container 3005: /usr/bin/docker run -d --name portainer --restart=always --network host -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data --security-opt apparmor=unconfined portainer/portainer-ce:latest 2>&1
2025-11-26 23:14:39 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9iaW4vZG9ja2VyIHJ1biAtZCAtLW5hbWUgcG9ydGFpbmVyIC0tcmVzdGFydD1hbHdheXMgLS1uZXR3b3JrIGhvc3QgLXYgL3Zhci9ydW4vZG9ja2VyLnNvY2s6L3Zhci9ydW4vZG9ja2VyLnNvY2sgLXYgcG9ydGFpbmVyX2RhdGE6L2RhdGEgLS1zZWN1cml0eS1vcHQgYXBwYXJtb3I9dW5jb25maW5lZCBwb3J0YWluZXIvcG9ydGFpbmVyLWNlOmxhdGVzdCAyPiYx | base64 -d | bash"
2025-11-26 23:14:56 - orchestration.swarm       - INFO - Verifying Portainer is running...
2025-11-26 23:14:56 - services.pct              - INFO - Running in container 3005: /usr/bin/docker ps --format '{{.Names}} {{.Status}}' | grep portainer || /usr/bin/docker ps -a --format '{{.Names}} {{.Status}}' | grep portainer
2025-11-26 23:14:56 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9iaW4vZG9ja2VyIHBzIC0tZm9ybWF0ICd7ey5OYW1lc319IHt7LlN0YXR1c319JyB8IGdyZXAgcG9ydGFpbmVyIHx8IC91c3IvYmluL2RvY2tlciBwcyAtYSAtLWZvcm1hdCAne3suTmFtZXN9fSB7ey5TdGF0dXN9fScgfCBncmVwIHBvcnRhaW5lcg== | base64 -d | bash"
2025-11-26 23:14:57 - orchestration.swarm       - INFO - Portainer status: portainer Up 11 seconds
2025-11-26 23:14:57 - services.pct              - INFO - Running in container 3005: /usr/bin/docker ps --format '{{.Names}}' | grep -q '^portainer$' && echo yes || echo no
2025-11-26 23:14:57 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9iaW4vZG9ja2VyIHBzIC0tZm9ybWF0ICd7ey5OYW1lc319JyB8IGdyZXAgLXEgJ15wb3J0YWluZXIkJyAmJiBlY2hvIHllcyB8fCBlY2hvIG5v | base64 -d | bash"
2025-11-26 23:14:58 - orchestration.swarm       - INFO - Configuring Portainer minimum password length to 8...
2025-11-26 23:14:58 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:14:58 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:14:58 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:14:58 - services.pct              - INFO - Running in container 3005: curl -k -s -o /dev/null -w '%{http_code}' https://10.11.3.5:9443/api/status || echo '000'
2025-11-26 23:14:58 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo Y3VybCAtayAtcyAtbyAvZGV2L251bGwgLXcgJyV7aHR0cF9jb2RlfScgaHR0cHM6Ly8xMC4xMS4zLjU6OTQ0My9hcGkvc3RhdHVzIHx8IGVjaG8gJzAwMCc= | base64 -d | bash"
2025-11-26 23:15:00 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:15:00 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:15:00 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:15:00 - services.pct              - INFO - Running in container 3005: python3 << 'PORTAINER_SCRIPT_EOF'
import json
import urllib.request
import urllib.error
import ssl
import sys

portainer_url = "https://10.11.3.5:9443"
password = "admin123"

ssl_context = ssl.create_default_context()
ssl_context.check_hostname = False
ssl_context.verify_mode = ssl.CERT_NONE

try:
    auth_data = {"Username": "admin", "Password": password}
    auth_json = json.dumps(auth_data).encode()
    req = urllib.request.Request(f"{portainer_url}/api/auth", data=auth_json, headers={"Content-Type": "application/json"})
    with urllib.request.urlopen(req, context=ssl_context) as response:
        auth_result = json.loads(response.read())
        jwt_token = auth_result.get("jwt", "")
        if not jwt_token:
            print("ERROR: No JWT token", file=sys.stderr)
            sys.exit(1)
        settings_req = urllib.request.Request(f"{portainer_url}/api/settings", headers={"Authorization": f"Bearer {jwt_token}"})
        with urllib.request.urlopen(settings_req, context=ssl_context) as settings_response:
            settings = json.loads(settings_response.read())
        if "InternalAuthSettings" not in settings:
            settings["InternalAuthSettings"] = {}
        settings["InternalAuthSettings"]["RequiredPasswordLength"] = 8
        settings_json = json.dumps(settings).encode()
        update_req = urllib.request.Request(
            f"{portainer_url}/api/settings",
            data=settings_json,
            headers={"Authorization": f"Bearer {jwt_token}", "Content-Type": "application/json"},
            method="PUT"
        )
        with urllib.request.urlopen(update_req, context=ssl_context) as update_response:
            json.loads(update_response.read())
            print("SUCCESS: Minimum password length set to 8")
except urllib.error.HTTPError as e:
    error_body = e.read().decode() if e.fp else "No error body"
    print(f"ERROR: HTTP {e.code}: {error_body}", file=sys.stderr)
    sys.exit(1)
except Exception as e:
    print(f"ERROR: {str(e)}", file=sys.stderr)
    sys.exit(1)

PORTAINER_SCRIPT_EOF
2025-11-26 23:15:00 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo cHl0aG9uMyA8PCAnUE9SVEFJTkVSX1NDUklQVF9FT0YnCmltcG9ydCBqc29uCmltcG9ydCB1cmxsaWIucmVxdWVzdAppbXBvcnQgdXJsbGliLmVycm9yCmltcG9ydCBzc2wKaW1wb3J0IHN5cwoKcG9ydGFpbmVyX3VybCA9ICJodHRwczovLzEwLjExLjMuNTo5NDQzIgpwYXNzd29yZCA9ICJhZG1pbjEyMyIKCnNzbF9jb250ZXh0ID0gc3NsLmNyZWF0ZV9kZWZhdWx0X2NvbnRleHQoKQpzc2xfY29udGV4dC5jaGVja19ob3N0bmFtZSA9IEZhbHNlCnNzbF9jb250ZXh0LnZlcmlmeV9tb2RlID0gc3NsLkNFUlRfTk9ORQoKdHJ5OgogICAgYXV0aF9kYXRhID0geyJVc2VybmFtZSI6ICJhZG1pbiIsICJQYXNzd29yZCI6IHBhc3N3b3JkfQogICAgYXV0aF9qc29uID0ganNvbi5kdW1wcyhhdXRoX2RhdGEpLmVuY29kZSgpCiAgICByZXEgPSB1cmxsaWIucmVxdWVzdC5SZXF1ZXN0KGYie3BvcnRhaW5lcl91cmx9L2FwaS9hdXRoIiwgZGF0YT1hdXRoX2pzb24sIGhlYWRlcnM9eyJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiJ9KQogICAgd2l0aCB1cmxsaWIucmVxdWVzdC51cmxvcGVuKHJlcSwgY29udGV4dD1zc2xfY29udGV4dCkgYXMgcmVzcG9uc2U6CiAgICAgICAgYXV0aF9yZXN1bHQgPSBqc29uLmxvYWRzKHJlc3BvbnNlLnJlYWQoKSkKICAgICAgICBqd3RfdG9rZW4gPSBhdXRoX3Jlc3VsdC5nZXQoImp3dCIsICIiKQogICAgICAgIGlmIG5vdCBqd3RfdG9rZW46CiAgICAgICAgICAgIHByaW50KCJFUlJPUjogTm8gSldUIHRva2VuIiwgZmlsZT1zeXMuc3RkZXJyKQogICAgICAgICAgICBzeXMuZXhpdCgxKQogICAgICAgIHNldHRpbmdzX3JlcSA9IHVybGxpYi5yZXF1ZXN0LlJlcXVlc3QoZiJ7cG9ydGFpbmVyX3VybH0vYXBpL3NldHRpbmdzIiwgaGVhZGVycz17IkF1dGhvcml6YXRpb24iOiBmIkJlYXJlciB7and0X3Rva2VufSJ9KQogICAgICAgIHdpdGggdXJsbGliLnJlcXVlc3QudXJsb3BlbihzZXR0aW5nc19yZXEsIGNvbnRleHQ9c3NsX2NvbnRleHQpIGFzIHNldHRpbmdzX3Jlc3BvbnNlOgogICAgICAgICAgICBzZXR0aW5ncyA9IGpzb24ubG9hZHMoc2V0dGluZ3NfcmVzcG9uc2UucmVhZCgpKQogICAgICAgIGlmICJJbnRlcm5hbEF1dGhTZXR0aW5ncyIgbm90IGluIHNldHRpbmdzOgogICAgICAgICAgICBzZXR0aW5nc1siSW50ZXJuYWxBdXRoU2V0dGluZ3MiXSA9IHt9CiAgICAgICAgc2V0dGluZ3NbIkludGVybmFsQXV0aFNldHRpbmdzIl1bIlJlcXVpcmVkUGFzc3dvcmRMZW5ndGgiXSA9IDgKICAgICAgICBzZXR0aW5nc19qc29uID0ganNvbi5kdW1wcyhzZXR0aW5ncykuZW5jb2RlKCkKICAgICAgICB1cGRhdGVfcmVxID0gdXJsbGliLnJlcXVlc3QuUmVxdWVzdCgKICAgICAgICAgICAgZiJ7cG9ydGFpbmVyX3VybH0vYXBpL3NldHRpbmdzIiwKICAgICAgICAgICAgZGF0YT1zZXR0aW5nc19qc29uLAogICAgICAgICAgICBoZWFkZXJzPXsiQXV0aG9yaXphdGlvbiI6IGYiQmVhcmVyIHtqd3RfdG9rZW59IiwgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIn0sCiAgICAgICAgICAgIG1ldGhvZD0iUFVUIgogICAgICAgICkKICAgICAgICB3aXRoIHVybGxpYi5yZXF1ZXN0LnVybG9wZW4odXBkYXRlX3JlcSwgY29udGV4dD1zc2xfY29udGV4dCkgYXMgdXBkYXRlX3Jlc3BvbnNlOgogICAgICAgICAgICBqc29uLmxvYWRzKHVwZGF0ZV9yZXNwb25zZS5yZWFkKCkpCiAgICAgICAgICAgIHByaW50KCJTVUNDRVNTOiBNaW5pbXVtIHBhc3N3b3JkIGxlbmd0aCBzZXQgdG8gOCIpCmV4Y2VwdCB1cmxsaWIuZXJyb3IuSFRUUEVycm9yIGFzIGU6CiAgICBlcnJvcl9ib2R5ID0gZS5yZWFkKCkuZGVjb2RlKCkgaWYgZS5mcCBlbHNlICJObyBlcnJvciBib2R5IgogICAgcHJpbnQoZiJFUlJPUjogSFRUUCB7ZS5jb2RlfToge2Vycm9yX2JvZHl9IiwgZmlsZT1zeXMuc3RkZXJyKQogICAgc3lzLmV4aXQoMSkKZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgcHJpbnQoZiJFUlJPUjoge3N0cihlKX0iLCBmaWxlPXN5cy5zdGRlcnIpCiAgICBzeXMuZXhpdCgxKQoKUE9SVEFJTkVSX1NDUklQVF9FT0Y= | base64 -d | bash"
2025-11-26 23:15:01 - orchestration.swarm       - WARNING - Failed to configure Portainer password length: ERROR: HTTP 422: {"message":"Invalid credentials","details":"Unauthorized"}
2025-11-26 23:15:01 - orchestration.swarm       - INFO - Docker Swarm deployed
2025-11-26 23:15:01 - actions.setup_swarm       - INFO - Docker Swarm setup completed successfully
2025-11-26 23:15:01 - commands.deploy           - INFO - ==================================================
2025-11-26 23:15:01 - commands.deploy           - INFO - [Overall: 103%] [Step: 55/53] Executing: GlusterFS setup
2025-11-26 23:15:01 - commands.deploy           - INFO - ==================================================
2025-11-26 23:15:01 - orchestration.gluster     - INFO - 
[5/7] Setting up GlusterFS distributed storage...
2025-11-26 23:15:01 - orchestration.gluster     - INFO - Installing GlusterFS server on all nodes...
2025-11-26 23:15:01 - orchestration.gluster     - INFO - Fixing apt sources on swarm-manager...
