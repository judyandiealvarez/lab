2025-11-26 14:14:10 - commands.deploy           - INFO - ==================================================
2025-11-26 14:14:10 - commands.deploy           - INFO - Deploying Lab Environment
2025-11-26 14:14:10 - commands.deploy           - INFO - ==================================================
2025-11-26 14:14:10 - commands.deploy           - INFO - 
[1/51] Creating apt-cache container first...
2025-11-26 14:14:10 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 14:14:10 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 14:14:10 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 14:14:10 - services.ssh              - INFO - Running: pct list | grep '^3020 '
2025-11-26 14:14:11 - services.ssh              - INFO - 3020       running                 apt-cache
2025-11-26 14:14:11 - libs.container_manager    - INFO - Container 'apt-cache' already exists and start_step is 2, skipping creation and proceeding to actions
2025-11-26 14:14:12 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 14:14:12 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 14:14:12 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.20
2025-11-26 14:14:14 - libs.container_manager    - INFO - Reached end step 2, stopping container creation
2025-11-26 14:14:14 - tmpl.ubuntu               - INFO - Ubuntu template 'ubuntu-tmpl' created successfully
2025-11-26 14:14:14 - libs.container_manager    - INFO - Reached end step 2, stopping container creation
2025-11-26 14:14:14 - tmpl.ubuntu_docker        - INFO - Ubuntu+Docker template 'docker-tmpl' created successfully
2025-11-26 14:14:14 - libs.container_manager    - INFO - Reached end step 2, stopping container creation
2025-11-26 14:14:14 - libs.container_manager    - INFO - Reached end step 2, stopping container creation
2025-11-26 14:14:14 - libs.container_manager    - INFO - Reached end step 2, stopping container creation
2025-11-26 14:14:14 - commands.deploy           - INFO - 
[7/51] Deploying Docker Swarm...
2025-11-26 14:14:14 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 14:14:14 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 14:14:14 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 14:14:14 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/docker-ubuntu25.04-template_*_amd64.tar.zst 2>/dev/null | head -1 | xargs basename 2>/dev/null
2025-11-26 14:14:15 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 14:14:15 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 14:14:15 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 14:14:15 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst && echo exists || echo missing
2025-11-26 14:14:15 - services.ssh              - INFO - exists
2025-11-26 14:14:15 - orchestration.swarm       - INFO - Using template: /var/lib/vz/template/cache/ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst
2025-11-26 14:14:15 - orchestration.swarm       - INFO - 
Deploying container 3005 (swarm-manager)...
2025-11-26 14:14:15 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 14:14:15 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 14:14:15 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 14:14:15 - services.ssh              - INFO - Running: pct destroy 3005 --force
2025-11-26 14:14:19 - services.ssh              - INFO - forced to stop CT 3005 before destroying!
2025-11-26 14:14:19 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/docker-ubuntu25.04-template_*_amd64.tar.zst 2>/dev/null | head -1 | xargs basename 2>/dev/null
2025-11-26 14:14:19 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst && echo exists || echo missing
2025-11-26 14:14:19 - services.ssh              - INFO - exists
2025-11-26 14:14:19 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst && test -r /var/lib/vz/template/cache/ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst && echo 'valid' || echo 'invalid'
2025-11-26 14:14:19 - services.ssh              - INFO - valid
2025-11-26 14:14:19 - libs.container_manager    - INFO - Checking if container 3005 already exists...
2025-11-26 14:14:19 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 14:14:20 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 14:14:20 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 14:14:20 - services.ssh              - INFO - Running: pct list | grep '^3005 '
2025-11-26 14:14:21 - libs.container_manager    - INFO - Creating container 3005 from template...
2025-11-26 14:14:21 - services.ssh              - INFO - Running: pct create 3005 /var/lib/vz/template/cache/ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst --hostname swarm-manager --memory 4096 --swap 4096 --cores 8 --net0 name=eth0,bridge=vmbr0,firewall=0,gw=10.11.3.253,ip=10.11.3.5/24,ip6=dhcp,type=veth --rootfs sdb:40 --unprivileged 0 --ostype ubuntu --arch amd64
2025-11-26 14:14:28 - services.ssh              - INFO - Formatting '/mnt/pve/sdb/images/3005/vm-3005-disk-0.raw', fmt=raw size=42949672960 preallocation=off
Creating filesystem with 10485760 4k blocks and 2621440 inodes
Filesystem UUID: 46b1a107-4528-466e-8765-c2aa55d112d6
Superblock backups stored on blocks: 
	32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, 
	4096000, 7962624
extracting archive '/var/lib/vz/template/cache/ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst'
Total bytes read: 590848000 (564MiB, 227MiB/s)
Creating SSH host key 'ssh_host_ecdsa_key' - this may take some time ...
done: SHA256:Oh6yTYBli6ruNE3rVXaVMGFZXa+aRJeQ74Tl02s8U2U root@swarm-manager
Creating SSH host key 'ssh_host_dsa_key' - this may take some time ...
done: SHA256:VGbI8mU7M+6FnRJngoe9IAj4Ig34YKyc8XPPh4JiXzs root@swarm-manager
Creating SSH host key 'ssh_host_rsa_key' - this may take some time ...
done: SHA256:FBfFdfvQJ/7AJ3iiShe/xBtqMIcxZJxCQznWBTcxLsw root@swarm-manager
Creating SSH host key 'ssh_host_ed25519_key' - this may take some time ...
done: SHA256:oHwXbbS7CzNrx0dPPv78erWExYbTZvG1pn2w9Y3LCxY root@swarm-manager
2025-11-26 14:14:28 - libs.container_manager    - INFO - Setting container features...
2025-11-26 14:14:28 - services.ssh              - INFO - Running: pct set 3005 --features nesting=1,keyctl=1,fuse=1
2025-11-26 14:14:29 - libs.container_manager    - INFO - Starting container 3005...
2025-11-26 14:14:29 - services.ssh              - INFO - Running: pct start 3005
2025-11-26 14:14:33 - libs.container_manager    - INFO - Bringing up network interface...
2025-11-26 14:14:33 - services.pct              - INFO - Running in container 3005: ping -c 1 8.8.8.8
2025-11-26 14:14:33 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo cGluZyAtYyAxIDguOC44Ljg= | base64 -d | bash"
2025-11-26 14:14:34 - services.ssh              - INFO - PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.
64 bytes from 8.8.8.8: icmp_seq=1 ttl=116 time=17.3 ms

--- 8.8.8.8 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 17.260/17.260/17.260/0.000 ms
2025-11-26 14:14:34 - libs.container_manager    - INFO - Network interface is up and reachable
2025-11-26 14:14:34 - services.pct              - INFO - Running in container 3005: id -u jaal >/dev/null 2>&1 || useradd -m -s /bin/bash -G sudo jaal
2025-11-26 14:14:34 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgfHwgdXNlcmFkZCAtbSAtcyAvYmluL2Jhc2ggLUcgc3VkbyBqYWFs | base64 -d | bash"
2025-11-26 14:14:35 - services.pct              - INFO - Running in container 3005: echo jaal:jaal123 | chpasswd
2025-11-26 14:14:35 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo ZWNobyBqYWFsOmphYWwxMjMgfCBjaHBhc3N3ZA== | base64 -d | bash"
2025-11-26 14:14:37 - libs.container_manager    - INFO - Password set for user jaal
2025-11-26 14:14:37 - services.pct              - INFO - Running in container 3005: printf 'jaal ALL=(ALL) NOPASSWD: ALL
' > /etc/sudoers.d/jaal 2>&1
2025-11-26 14:14:37 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo cHJpbnRmICdqYWFsIEFMTD0oQUxMKSBOT1BBU1NXRDogQUxMCicgPiAvZXRjL3N1ZG9lcnMuZC9qYWFsIDI+JjE= | base64 -d | bash"
2025-11-26 14:14:38 - services.pct              - INFO - Running in container 3005: chmod 440 /etc/sudoers.d/jaal 2>&1
2025-11-26 14:14:38 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo Y2htb2QgNDQwIC9ldGMvc3Vkb2Vycy5kL2phYWwgMj4mMQ== | base64 -d | bash"
2025-11-26 14:14:39 - services.pct              - INFO - Running in container 3005: id -u jaal >/dev/null 2>&1 && echo 'exists' || echo 'missing'
2025-11-26 14:14:39 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyAnZXhpc3RzJyB8fCBlY2hvICdtaXNzaW5nJw== | base64 -d | bash"
2025-11-26 14:14:40 - services.ssh              - INFO - exists
2025-11-26 14:14:40 - services.pct              - INFO - Running in container 3005: mkdir -p /home/jaal/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /home/jaal/.ssh/authorized_keys && chmod 600 /home/jaal/.ssh/authorized_keys && chown jaal:jaal /home/jaal/.ssh/authorized_keys && chown -R jaal:jaal /home/jaal/.ssh && chmod 700 /home/jaal/.ssh
2025-11-26 14:14:40 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo bWtkaXIgLXAgL2hvbWUvamFhbC8uc3NoICYmIGVjaG8gYzNOb0xYSnpZU0JCUVVGQlFqTk9lbUZETVhsak1rVkJRVUZCUkVGUlFVSkJRVUZDWjFGRVNHaHpaeTlTUWxNeFpXOW1aRUowVDIxU1oyNXJObkpSWlZkTU5XVkVRMEZHVWxsaGRHOXRiMjV4ZWxaUVNHNVZhRWRCVjB4M2NFRnBibFJMV1RCaWNtVkhOMUozWTFCNlUzazRaa1V6YkhCQmVHUTNaRFUxTVZOcmIzZFJUM3BNVHpGaGRWSlVka05IWjBkS1RVTlphSE5wVDFSRVpHYzBlVU5IWkdoMWRsUnNaMGN5VDNnNFkwTkZXVGt6VG5Ob05HSnFXRE50Tm13NVluQnhWMkZ0Wkd4WU5WSklOV0pNZVhCNk5XeHhMME5rTTJWVWNISkdXRU5uY1VwUFkxSlVMemRCTWxSeFJHVklTM1pGTTNwWlRUWjBaV2RyWlN0a1VXRmtUalF4Y21nNWMxa3pTME5ITUhGbVJqVTRkRzR5Umt4NlNuZzNNMGc1ZDFKSFpVTlhlRlJvY2tZMWQxTjZaM0pHUkVsWlIxUktWRTFWY1V0bllrcFdWbGxYV0M5aVdTOXVVVmRVT0ZaUE5tWk1lbWtyTUhCQlQzbzVNekZ4TkdWdVNIUlBOVFpVTkRSaVJYRjBabWMxWkZONE4ySk1SMGx5TlRaSWJXeHVNVWRJYUc5MVZTdDFOelpqVmxSWFQyOXFSRlkxVkRGWGMxSkJWSFE0WVVRNU1EZERhVGszUmxBdk5EWmpValY1U2xSNFlWUndLM0I0VjNCdGFESjNZVWRsUkZKRVYxRnpkRVZzU0c5VGFuUlFlVzkxZVZWMVYySXpNVzlVUW14ck9FdDNaMDlsY0RONk1UZHhLMWxKYUZwWFVVZElkbTFqVWt0SU1sQkJPVGhKVW5CcFNsWlNlbVk0YzFoS01HTmthMjkxUVRWWFFsTkVaV2RVYjBJMVZ6ZFJVRzFsYUVVOUlITm9ZV1J2ZDJOb1lXMWlaWEpBVTJoaFpHOTNZMmhoYldKbGNuTXRUV0ZqTFcxcGJta3ViRzlqWVd3PSB8IGJhc2U2NCAtZCA+IC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2htb2QgNjAwIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gLVIgamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaCAmJiBjaG1vZCA3MDAgL2hvbWUvamFhbC8uc3No | base64 -d | bash"
2025-11-26 14:14:41 - services.pct              - INFO - Running in container 3005: mkdir -p /root/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /root/.ssh/authorized_keys && chmod 600 /root/.ssh/authorized_keys
2025-11-26 14:14:41 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo bWtkaXIgLXAgL3Jvb3QvLnNzaCAmJiBlY2hvIGMzTm9MWEp6WVNCQlFVRkJRak5PZW1GRE1YbGpNa1ZCUVVGQlJFRlJRVUpCUVVGQ1oxRkVTR2h6Wnk5U1FsTXhaVzltWkVKMFQyMVNaMjVyTm5KUlpWZE1OV1ZFUTBGR1VsbGhkRzl0YjI1eGVsWlFTRzVWYUVkQlYweDNjRUZwYmxSTFdUQmljbVZITjFKM1kxQjZVM2s0WmtVemJIQkJlR1EzWkRVMU1WTnJiM2RSVDNwTVR6RmhkVkpVZGtOSFowZEtUVU5aYUhOcFQxUkVaR2MwZVVOSFpHaDFkbFJzWjBjeVQzZzRZME5GV1RrelRuTm9OR0pxV0ROdE5tdzVZbkJ4VjJGdFpHeFlOVkpJTldKTWVYQjZOV3h4TDBOa00yVlVjSEpHV0VObmNVcFBZMUpVTHpkQk1sUnhSR1ZJUzNaRk0zcFpUVFowWldkclpTdGtVV0ZrVGpReGNtZzVjMWt6UzBOSE1IRm1SalU0ZEc0eVJreDZTbmczTTBnNWQxSkhaVU5YZUZSb2NrWTFkMU42WjNKR1JFbFpSMVJLVkUxVmNVdG5Za3BXVmxsWFdDOWlXUzl1VVZkVU9GWlBObVpNZW1rck1IQkJUM281TXpGeE5HVnVTSFJQTlRaVU5EUmlSWEYwWm1jMVpGTjROMkpNUjBseU5UWkliV3h1TVVkSWFHOTFWU3QxTnpaalZsUlhUMjlxUkZZMVZERlhjMUpCVkhRNFlVUTVNRGREYVRrM1JsQXZORFpqVWpWNVNsUjRZVlJ3SzNCNFYzQnRhREozWVVkbFJGSkVWMUZ6ZEVWc1NHOVRhblJRZVc5MWVWVjFWMkl6TVc5VVFteHJPRXQzWjA5bGNETjZNVGR4SzFsSmFGcFhVVWRJZG0xalVrdElNbEJCT1RoSlVuQnBTbFpTZW1ZNGMxaEtNR05rYTI5MVFUVlhRbE5FWldkVWIwSTFWemRSVUcxbGFFVTlJSE5vWVdSdmQyTm9ZVzFpWlhKQVUyaGhaRzkzWTJoaGJXSmxjbk10VFdGakxXMXBibWt1Ykc5allXdz0gfCBiYXNlNjQgLWQgPiAvcm9vdC8uc3NoL2F1dGhvcml6ZWRfa2V5cyAmJiBjaG1vZCA2MDAgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXM= | base64 -d | bash"
2025-11-26 14:14:42 - services.pct              - INFO - Running in container 3005: test -f /home/jaal/.ssh/authorized_keys && test -f /root/.ssh/authorized_keys && echo 'keys_exist' || echo 'keys_missing'
2025-11-26 14:14:42 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo dGVzdCAtZiAvaG9tZS9qYWFsLy5zc2gvYXV0aG9yaXplZF9rZXlzICYmIHRlc3QgLWYgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgZWNobyAna2V5c19leGlzdCcgfHwgZWNobyAna2V5c19taXNzaW5nJw== | base64 -d | bash"
2025-11-26 14:14:44 - services.ssh              - INFO - keys_exist
2025-11-26 14:14:44 - services.pct              - INFO - SSH key setup verified successfully
2025-11-26 14:14:44 - services.pct              - INFO - Running in container 3005: dpkg -l | grep -q '^ii.*openssh-server' || echo 'not_installed'
2025-11-26 14:14:44 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo ZHBrZyAtbCB8IGdyZXAgLXEgJ15paS4qb3BlbnNzaC1zZXJ2ZXInIHx8IGVjaG8gJ25vdF9pbnN0YWxsZWQn | base64 -d | bash"
2025-11-26 14:14:45 - services.pct              - INFO - Running in container 3005: systemctl enable ssh 2>&1
2025-11-26 14:14:45 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 14:14:47 - services.ssh              - INFO - Synchronizing state of ssh.service with SysV service script with /usr/lib/systemd/systemd-sysv-install.
Executing: /usr/lib/systemd/systemd-sysv-install enable ssh
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
	LANGUAGE = (unset),
	LC_ALL = (unset),
	LC_CTYPE = (unset),
	LC_NUMERIC = (unset),
	LC_COLLATE = (unset),
	LC_TIME = (unset),
	LC_MESSAGES = (unset),
	LC_MONETARY = (unset),
	LC_ADDRESS = (unset),
	LC_IDENTIFICATION = (unset),
	LC_MEASUREMENT = (unset),
	LC_PAPER = (unset),
	LC_TELEPHONE = (unset),
	LC_NAME = (unset),
	LANG = "en_US.UTF-8"
    are supported and installed on your system.
perl: warning: Falling back to the standard locale ("C").
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
	LANGUAGE = (unset),
	LC_ALL = (unset),
	LC_CTYPE = (unset),
	LC_NUMERIC = (unset),
	LC_COLLATE = (unset),
	LC_TIME = (unset),
	LC_MESSAGES = (unset),
	LC_MONETARY = (unset),
	LC_ADDRESS = (unset),
	LC_IDENTIFICATION = (unset),
	LC_MEASUREMENT = (unset),
	LC_PAPER = (unset),
	LC_TELEPHONE = (unset),
	LC_NAME = (unset),
	LANG = "en_US.UTF-8"
    are supported and installed on your system.
perl: warning: Falling back to the standard locale ("C").
2025-11-26 14:14:47 - services.pct              - INFO - Running in container 3005: systemctl start ssh 2>&1
2025-11-26 14:14:47 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 14:14:51 - services.pct              - INFO - Running in container 3005: systemctl is-active ssh 2>/dev/null || echo inactive
2025-11-26 14:14:51 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBzc2ggMj4vZGV2L251bGwgfHwgZWNobyBpbmFjdGl2ZQ== | base64 -d | bash"
2025-11-26 14:14:52 - services.ssh              - INFO - active
2025-11-26 14:14:52 - services.pct              - INFO - SSH service is running
2025-11-26 14:14:52 - services.pct              - INFO - Running in container 3005: ss -tlnp | grep ':22 ' || netstat -tlnp 2>/dev/null | grep ':22 ' || echo 'not_listening'
2025-11-26 14:14:52 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo c3MgLXRsbnAgfCBncmVwICc6MjIgJyB8fCBuZXRzdGF0IC10bG5wIDI+L2Rldi9udWxsIHwgZ3JlcCAnOjIyICcgfHwgZWNobyAnbm90X2xpc3RlbmluZyc= | base64 -d | bash"
2025-11-26 14:14:53 - services.ssh              - INFO - LISTEN 0      4096         0.0.0.0:22        0.0.0.0:*    users:(("sshd",pid=420,fd=3),("systemd",pid=1,fd=110))
LISTEN 0      4096            [::]:22           [::]:*    users:(("sshd",pid=420,fd=4),("systemd",pid=1,fd=111))
2025-11-26 14:14:53 - services.pct              - INFO - SSH listening check: LISTEN 0      4096         0.0.0.0:22        0.0.0.0:*    users:(("sshd",pid=420,fd=3),("systemd",pid=1,fd=110))
LISTEN 0      4096            [::]:22           [::]:*    users:(("sshd",pid=420,fd=4),("systemd",pid=1,fd=111))
2025-11-26 14:14:53 - services.pct              - INFO - Running in container 3005: grep -E '^ListenAddress|^#ListenAddress' /etc/ssh/sshd_config 2>/dev/null | head -5 || echo 'config_check_failed'
2025-11-26 14:14:53 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo Z3JlcCAtRSAnXkxpc3RlbkFkZHJlc3N8XiNMaXN0ZW5BZGRyZXNzJyAvZXRjL3NzaC9zc2hkX2NvbmZpZyAyPi9kZXYvbnVsbCB8IGhlYWQgLTUgfHwgZWNobyAnY29uZmlnX2NoZWNrX2ZhaWxlZCc= | base64 -d | bash"
2025-11-26 14:14:54 - services.ssh              - INFO - #ListenAddress 0.0.0.0
#ListenAddress ::
2025-11-26 14:14:54 - services.pct              - INFO - SSH config check: #ListenAddress 0.0.0.0
#ListenAddress ::
2025-11-26 14:14:54 - services.pct              - INFO - Running in container 3005: timeout 1 bash -c '</dev/tcp/127.0.0.1/22' 2>&1 && echo 'localhost_ok' || echo 'localhost_failed'
2025-11-26 14:14:54 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo dGltZW91dCAxIGJhc2ggLWMgJzwvZGV2L3RjcC8xMjcuMC4wLjEvMjInIDI+JjEgJiYgZWNobyAnbG9jYWxob3N0X29rJyB8fCBlY2hvICdsb2NhbGhvc3RfZmFpbGVkJw== | base64 -d | bash"
2025-11-26 14:14:55 - services.ssh              - INFO - localhost_ok
2025-11-26 14:14:55 - services.pct              - INFO - SSH localhost connection test: localhost_ok
2025-11-26 14:14:55 - libs.container_manager    - INFO - Waiting for container to be ready with SSH connectivity (up to 10 minutes)...
2025-11-26 14:14:55 - services.ssh              - INFO - Running: pct status 3005
2025-11-26 14:14:57 - services.ssh              - INFO - status: running
2025-11-26 14:14:57 - services.pct              - INFO - Running in container 3005: echo test
2025-11-26 14:14:57 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo ZWNobyB0ZXN0 | base64 -d | bash"
2025-11-26 14:14:58 - services.ssh              - INFO - test
2025-11-26 14:14:58 - services.pct              - INFO - Testing SSH connection to jaal@10.11.3.5...
2025-11-26 14:14:58 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 14:14:58 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 14:14:58 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.5
2025-11-26 14:14:58 - services.ssh              - INFO - Running: echo 'SSH connection test successful'
2025-11-26 14:14:58 - services.ssh              - INFO - SSH connection test successful
2025-11-26 14:14:58 - services.pct              - INFO - SSH connectivity verified - connection successful
2025-11-26 14:14:58 - services.pct              - INFO - Container is ready and SSH is accessible!
2025-11-26 14:15:02 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 14:15:02 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 14:15:02 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.5
2025-11-26 14:15:02 - libs.container_manager    - INFO - Executing 4 actions for container 'swarm-manager'
2025-11-26 14:15:02 - libs.container_manager    - INFO - [1/4] Running action: cloud-init wait
2025-11-26 14:15:02 - services.ssh              - INFO - Running: command -v cloud-init
2025-11-26 14:15:02 - actions.cloud_init_wait   - INFO - cloud-init not found, skipping
2025-11-26 14:15:02 - libs.container_manager    - INFO - [1/4] Action 'cloud-init wait' completed successfully
2025-11-26 14:15:02 - libs.container_manager    - INFO - [2/4] Running action: lxc sysctl access configuration
2025-11-26 14:15:02 - actions.configure_lxc_sysctl_access - INFO - Configuring LXC container for sysctl access...
2025-11-26 14:15:02 - services.ssh              - INFO - Running: pct set 3005 -lxc.cgroup2.devices.allow 'c 10:200 rwm' 2>/dev/null || true
2025-11-26 14:15:03 - services.ssh              - INFO - Running: pct set 3005 -lxc.mount.auto 'proc:rw sys:rw' 2>/dev/null || true
2025-11-26 14:15:04 - libs.container_manager    - INFO - [2/4] Action 'lxc sysctl access configuration' completed successfully
2025-11-26 14:15:04 - libs.container_manager    - INFO - [3/4] Running action: docker service start
2025-11-26 14:15:04 - actions.start_docker_service - INFO - Ensuring Docker service is running...
2025-11-26 14:15:04 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active docker 2>/dev/null || echo inactive'
2025-11-26 14:15:05 - services.ssh              - INFO - inactive
inactive
2025-11-26 14:15:05 - actions.start_docker_service - INFO - Docker service not active, starting socket and triggering activation...
2025-11-26 14:15:05 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl enable docker.socket && systemctl start docker.socket 2>&1'
2025-11-26 14:15:05 - services.ssh              - INFO - [0;1;31mFailed to enable unit: Unit docker.socket does not exist[0m
2025-11-26 14:15:05 - actions.start_docker_service - ERROR - Failed to start docker.socket with exit code 1
2025-11-26 14:15:05 - actions.start_docker_service - ERROR - docker.socket start output: [0;1;31mFailed to enable unit: Unit docker.socket does not exist[0m
2025-11-26 14:15:05 - libs.container_manager    - ERROR - ==================================================
2025-11-26 14:15:05 - libs.container_manager    - ERROR - Action Execution Failed
2025-11-26 14:15:05 - libs.container_manager    - ERROR - ==================================================
2025-11-26 14:15:05 - libs.container_manager    - ERROR - Container: swarm-manager
2025-11-26 14:15:05 - libs.container_manager    - ERROR - Step: 3
2025-11-26 14:15:05 - libs.container_manager    - ERROR - Action: docker service start
2025-11-26 14:15:05 - libs.container_manager    - ERROR - ==================================================
2025-11-26 14:15:05 - orchestration.swarm       - ERROR - Failed to deploy container 3005
2025-11-26 14:15:05 - __main__                  - ERROR - Error during deployment: Docker Swarm deployment failed
2025-11-26 14:15:05 - __main__                  - ERROR - Traceback (most recent call last):
  File "/Users/shadowchamber/Projects/lab/./lab.py", line 95, in cmd_deploy
    run_deploy(cfg, start_step=args.start_step, end_step=args.end_step)
    ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/shadowchamber/Projects/lab/commands/deploy.py", line 39, in run_deploy
    _deploy_swarm_stage(plan)
    ~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/shadowchamber/Projects/lab/commands/deploy.py", line 147, in _deploy_swarm_stage
    raise DeployError("Docker Swarm deployment failed")
commands.deploy.DeployError: Docker Swarm deployment failed

