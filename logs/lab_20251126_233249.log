2025-11-26 23:32:49 - commands.deploy           - INFO - 
2025-11-26 23:32:49 - commands.deploy           - INFO - Deploy plan (total 55 steps, running 1-55):
2025-11-26 23:32:49 - commands.deploy           - INFO -   [ 1] RUN  apt-cache: create container
2025-11-26 23:32:49 - commands.deploy           - INFO -   [ 2] RUN  apt-cache: cloud-init wait
2025-11-26 23:32:49 - commands.deploy           - INFO -   [ 3] RUN  apt-cache: AppArmor parser stub
2025-11-26 23:32:49 - commands.deploy           - INFO -   [ 4] RUN  apt-cache: disable automatic apt units
2025-11-26 23:32:49 - commands.deploy           - INFO -   [ 5] RUN  apt-cache: systemd sysctl override
2025-11-26 23:32:49 - commands.deploy           - INFO -   [ 6] RUN  apt-cache: apt-cacher-ng installation
2025-11-26 23:32:49 - commands.deploy           - INFO -   [ 7] RUN  apt-cache: apt-cacher-ng port configuration
2025-11-26 23:32:49 - commands.deploy           - INFO -   [ 8] RUN  apt-cache: apt-cacher-ng service enablement
2025-11-26 23:32:49 - commands.deploy           - INFO -   [ 9] RUN  ubuntu-tmpl: create template
2025-11-26 23:32:49 - commands.deploy           - INFO -   [10] RUN  ubuntu-tmpl: apt cache proxy configuration
2025-11-26 23:32:49 - commands.deploy           - INFO -   [11] RUN  ubuntu-tmpl: AppArmor parser stub
2025-11-26 23:32:49 - commands.deploy           - INFO -   [12] RUN  ubuntu-tmpl: apt sources fix
2025-11-26 23:32:49 - commands.deploy           - INFO -   [13] RUN  ubuntu-tmpl: system upgrade
2025-11-26 23:32:49 - commands.deploy           - INFO -   [14] RUN  ubuntu-tmpl: openssh-server installation
2025-11-26 23:32:49 - commands.deploy           - INFO -   [15] RUN  ubuntu-tmpl: SSH service enablement
2025-11-26 23:32:49 - commands.deploy           - INFO -   [16] RUN  ubuntu-tmpl: base tools installation
2025-11-26 23:32:49 - commands.deploy           - INFO -   [17] RUN  ubuntu-tmpl: template cleanup
2025-11-26 23:32:49 - commands.deploy           - INFO -   [18] RUN  ubuntu-tmpl: template archive creation
2025-11-26 23:32:49 - commands.deploy           - INFO -   [19] RUN  docker-tmpl: create template
2025-11-26 23:32:49 - commands.deploy           - INFO -   [20] RUN  docker-tmpl: Docker installation
2025-11-26 23:32:49 - commands.deploy           - INFO -   [21] RUN  docker-tmpl: Docker service start
2025-11-26 23:32:49 - commands.deploy           - INFO -   [22] RUN  docker-tmpl: template cleanup
2025-11-26 23:32:49 - commands.deploy           - INFO -   [23] RUN  docker-tmpl: template archive creation
2025-11-26 23:32:49 - commands.deploy           - INFO -   [24] RUN  pgsql: create container
2025-11-26 23:32:49 - commands.deploy           - INFO -   [25] RUN  pgsql: cloud-init wait
2025-11-26 23:32:49 - commands.deploy           - INFO -   [26] RUN  pgsql: postgresql installation
2025-11-26 23:32:49 - commands.deploy           - INFO -   [27] RUN  pgsql: postgresql service configuration
2025-11-26 23:32:49 - commands.deploy           - INFO -   [28] RUN  pgsql: postgresql files configuration
2025-11-26 23:32:49 - commands.deploy           - INFO -   [29] RUN  pgsql: postgresql password setup
2025-11-26 23:32:49 - commands.deploy           - INFO -   [30] RUN  haproxy: create container
2025-11-26 23:32:49 - commands.deploy           - INFO -   [31] RUN  haproxy: cloud-init wait
2025-11-26 23:32:49 - commands.deploy           - INFO -   [32] RUN  haproxy: haproxy installation
2025-11-26 23:32:49 - commands.deploy           - INFO -   [33] RUN  haproxy: haproxy configuration
2025-11-26 23:32:49 - commands.deploy           - INFO -   [34] RUN  haproxy: haproxy systemd override
2025-11-26 23:32:49 - commands.deploy           - INFO -   [35] RUN  haproxy: haproxy service enablement
2025-11-26 23:32:49 - commands.deploy           - INFO -   [36] RUN  dns: create container
2025-11-26 23:32:49 - commands.deploy           - INFO -   [37] RUN  dns: cloud-init wait
2025-11-26 23:32:49 - commands.deploy           - INFO -   [38] RUN  dns: dotnet installation
2025-11-26 23:32:49 - commands.deploy           - INFO -   [39] RUN  dns: disable systemd resolved
2025-11-26 23:32:49 - commands.deploy           - INFO -   [40] RUN  dns: sins dns installation
2025-11-26 23:32:49 - commands.deploy           - INFO -   [41] RUN  dns: sins dns service configuration
2025-11-26 23:32:49 - commands.deploy           - INFO -   [42] RUN  dns: sins dns service enablement
2025-11-26 23:32:49 - commands.deploy           - INFO -   [43] RUN  swarm-manager: create container
2025-11-26 23:32:49 - commands.deploy           - INFO -   [44] RUN  swarm-manager: cloud-init wait
2025-11-26 23:32:49 - commands.deploy           - INFO -   [45] RUN  swarm-manager: lxc sysctl access configuration
2025-11-26 23:32:49 - commands.deploy           - INFO -   [46] RUN  swarm-manager: docker service start
2025-11-26 23:32:49 - commands.deploy           - INFO -   [47] RUN  swarm-manager: docker sysctl configuration
2025-11-26 23:32:49 - commands.deploy           - INFO -   [48] RUN  swarm-node-1: create container
2025-11-26 23:32:49 - commands.deploy           - INFO -   [49] RUN  swarm-node-1: cloud-init wait
2025-11-26 23:32:49 - commands.deploy           - INFO -   [50] RUN  swarm-node-1: docker service start
2025-11-26 23:32:49 - commands.deploy           - INFO -   [51] RUN  swarm-node-2: create container
2025-11-26 23:32:49 - commands.deploy           - INFO -   [52] RUN  swarm-node-2: cloud-init wait
2025-11-26 23:32:49 - commands.deploy           - INFO -   [53] RUN  swarm-node-2: docker service start
2025-11-26 23:32:49 - commands.deploy           - INFO - ==================================================
2025-11-26 23:32:49 - commands.deploy           - INFO - Executing Deployment
2025-11-26 23:32:49 - commands.deploy           - INFO - ==================================================
2025-11-26 23:32:49 - commands.deploy           - INFO - ==================================================
2025-11-26 23:32:49 - commands.deploy           - INFO - [Overall: 1%] [Step: 1/55] Executing: apt-cache - create container
2025-11-26 23:32:49 - commands.deploy           - INFO - ==================================================
2025-11-26 23:32:49 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:32:49 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:32:49 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:32:49 - services.ssh              - INFO - Running: pct destroy 3020 --force
2025-11-26 23:32:51 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/ubuntu-25.04-template_*_amd64.tar.zst 2>/dev/null | head -1 | xargs basename 2>/dev/null
2025-11-26 23:32:51 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst && echo exists || echo missing
2025-11-26 23:32:51 - services.template         - INFO - Base template not found. Downloading ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst...
2025-11-26 23:32:51 - services.template         - INFO - Running: pveam download local ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst
2025-11-26 23:32:51 - services.ssh              - INFO - Running: pveam download local ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst
2025-11-26 23:32:57 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst && echo exists || echo missing
2025-11-26 23:32:57 - services.template         - INFO - Template ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst downloaded successfully
2025-11-26 23:32:57 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst && test -r /var/lib/vz/template/cache/ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst && echo 'valid' || echo 'invalid'
2025-11-26 23:32:57 - actions.create_container  - INFO - Checking if container 3020 already exists...
2025-11-26 23:32:57 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:32:57 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:32:57 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:32:57 - services.ssh              - INFO - Running: pct list | grep '^3020 '
2025-11-26 23:32:59 - actions.create_container  - INFO - Creating container 3020 from template...
2025-11-26 23:32:59 - services.ssh              - INFO - Running: pct create 3020 /var/lib/vz/template/cache/ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst --hostname apt-cache --memory 2048 --swap 2048 --cores 4 --net0 name=eth0,bridge=vmbr0,firewall=0,gw=10.11.3.253,ip=10.11.3.20/24,ip6=dhcp,type=veth --rootfs sdb:20 --unprivileged 1 --ostype ubuntu --arch amd64
2025-11-26 23:33:06 - actions.create_container  - INFO - Setting container features...
2025-11-26 23:33:06 - services.ssh              - INFO - Running: pct set 3020 --features nesting=1,keyctl=1,fuse=1
2025-11-26 23:33:07 - actions.create_container  - INFO - Starting container 3020...
2025-11-26 23:33:07 - services.ssh              - INFO - Running: pct start 3020
2025-11-26 23:33:11 - actions.create_container  - INFO - Bringing up network interface...
2025-11-26 23:33:11 - services.pct              - INFO - Running in container 3020: ping -c 1 8.8.8.8
2025-11-26 23:33:11 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo cGluZyAtYyAxIDguOC44Ljg= | base64 -d | bash"
2025-11-26 23:33:12 - actions.create_container  - INFO - Network interface is up and reachable
2025-11-26 23:33:12 - services.pct              - INFO - Running in container 3020: id -u jaal >/dev/null 2>&1 || useradd -m -s /bin/bash -G sudo jaal
2025-11-26 23:33:12 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgfHwgdXNlcmFkZCAtbSAtcyAvYmluL2Jhc2ggLUcgc3VkbyBqYWFs | base64 -d | bash"
2025-11-26 23:33:14 - services.pct              - INFO - Running in container 3020: echo jaal:jaal123 | chpasswd
2025-11-26 23:33:14 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo ZWNobyBqYWFsOmphYWwxMjMgfCBjaHBhc3N3ZA== | base64 -d | bash"
2025-11-26 23:33:15 - actions.create_container  - INFO - Password set for user jaal
2025-11-26 23:33:15 - services.pct              - INFO - Running in container 3020: printf 'jaal ALL=(ALL) NOPASSWD: ALL
' > /etc/sudoers.d/jaal 2>&1
2025-11-26 23:33:15 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo cHJpbnRmICdqYWFsIEFMTD0oQUxMKSBOT1BBU1NXRDogQUxMCicgPiAvZXRjL3N1ZG9lcnMuZC9qYWFsIDI+JjE= | base64 -d | bash"
2025-11-26 23:33:16 - services.pct              - INFO - Running in container 3020: chmod 440 /etc/sudoers.d/jaal 2>&1
2025-11-26 23:33:16 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo Y2htb2QgNDQwIC9ldGMvc3Vkb2Vycy5kL2phYWwgMj4mMQ== | base64 -d | bash"
2025-11-26 23:33:18 - services.pct              - INFO - Running in container 3020: id -u jaal >/dev/null 2>&1 && echo 'exists' || echo 'missing'
2025-11-26 23:33:18 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyAnZXhpc3RzJyB8fCBlY2hvICdtaXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:33:19 - services.pct              - INFO - Running in container 3020: mkdir -p /home/jaal/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /home/jaal/.ssh/authorized_keys && chmod 600 /home/jaal/.ssh/authorized_keys && chown jaal:jaal /home/jaal/.ssh/authorized_keys && chown -R jaal:jaal /home/jaal/.ssh && chmod 700 /home/jaal/.ssh
2025-11-26 23:33:19 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo bWtkaXIgLXAgL2hvbWUvamFhbC8uc3NoICYmIGVjaG8gYzNOb0xYSnpZU0JCUVVGQlFqTk9lbUZETVhsak1rVkJRVUZCUkVGUlFVSkJRVUZDWjFGRVNHaHpaeTlTUWxNeFpXOW1aRUowVDIxU1oyNXJObkpSWlZkTU5XVkVRMEZHVWxsaGRHOXRiMjV4ZWxaUVNHNVZhRWRCVjB4M2NFRnBibFJMV1RCaWNtVkhOMUozWTFCNlUzazRaa1V6YkhCQmVHUTNaRFUxTVZOcmIzZFJUM3BNVHpGaGRWSlVka05IWjBkS1RVTlphSE5wVDFSRVpHYzBlVU5IWkdoMWRsUnNaMGN5VDNnNFkwTkZXVGt6VG5Ob05HSnFXRE50Tm13NVluQnhWMkZ0Wkd4WU5WSklOV0pNZVhCNk5XeHhMME5rTTJWVWNISkdXRU5uY1VwUFkxSlVMemRCTWxSeFJHVklTM1pGTTNwWlRUWjBaV2RyWlN0a1VXRmtUalF4Y21nNWMxa3pTME5ITUhGbVJqVTRkRzR5Umt4NlNuZzNNMGc1ZDFKSFpVTlhlRlJvY2tZMWQxTjZaM0pHUkVsWlIxUktWRTFWY1V0bllrcFdWbGxYV0M5aVdTOXVVVmRVT0ZaUE5tWk1lbWtyTUhCQlQzbzVNekZ4TkdWdVNIUlBOVFpVTkRSaVJYRjBabWMxWkZONE4ySk1SMGx5TlRaSWJXeHVNVWRJYUc5MVZTdDFOelpqVmxSWFQyOXFSRlkxVkRGWGMxSkJWSFE0WVVRNU1EZERhVGszUmxBdk5EWmpValY1U2xSNFlWUndLM0I0VjNCdGFESjNZVWRsUkZKRVYxRnpkRVZzU0c5VGFuUlFlVzkxZVZWMVYySXpNVzlVUW14ck9FdDNaMDlsY0RONk1UZHhLMWxKYUZwWFVVZElkbTFqVWt0SU1sQkJPVGhKVW5CcFNsWlNlbVk0YzFoS01HTmthMjkxUVRWWFFsTkVaV2RVYjBJMVZ6ZFJVRzFsYUVVOUlITm9ZV1J2ZDJOb1lXMWlaWEpBVTJoaFpHOTNZMmhoYldKbGNuTXRUV0ZqTFcxcGJta3ViRzlqWVd3PSB8IGJhc2U2NCAtZCA+IC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2htb2QgNjAwIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gLVIgamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaCAmJiBjaG1vZCA3MDAgL2hvbWUvamFhbC8uc3No | base64 -d | bash"
2025-11-26 23:33:20 - services.pct              - INFO - Running in container 3020: mkdir -p /root/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /root/.ssh/authorized_keys && chmod 600 /root/.ssh/authorized_keys
2025-11-26 23:33:20 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo bWtkaXIgLXAgL3Jvb3QvLnNzaCAmJiBlY2hvIGMzTm9MWEp6WVNCQlFVRkJRak5PZW1GRE1YbGpNa1ZCUVVGQlJFRlJRVUpCUVVGQ1oxRkVTR2h6Wnk5U1FsTXhaVzltWkVKMFQyMVNaMjVyTm5KUlpWZE1OV1ZFUTBGR1VsbGhkRzl0YjI1eGVsWlFTRzVWYUVkQlYweDNjRUZwYmxSTFdUQmljbVZITjFKM1kxQjZVM2s0WmtVemJIQkJlR1EzWkRVMU1WTnJiM2RSVDNwTVR6RmhkVkpVZGtOSFowZEtUVU5aYUhOcFQxUkVaR2MwZVVOSFpHaDFkbFJzWjBjeVQzZzRZME5GV1RrelRuTm9OR0pxV0ROdE5tdzVZbkJ4VjJGdFpHeFlOVkpJTldKTWVYQjZOV3h4TDBOa00yVlVjSEpHV0VObmNVcFBZMUpVTHpkQk1sUnhSR1ZJUzNaRk0zcFpUVFowWldkclpTdGtVV0ZrVGpReGNtZzVjMWt6UzBOSE1IRm1SalU0ZEc0eVJreDZTbmczTTBnNWQxSkhaVU5YZUZSb2NrWTFkMU42WjNKR1JFbFpSMVJLVkUxVmNVdG5Za3BXVmxsWFdDOWlXUzl1VVZkVU9GWlBObVpNZW1rck1IQkJUM281TXpGeE5HVnVTSFJQTlRaVU5EUmlSWEYwWm1jMVpGTjROMkpNUjBseU5UWkliV3h1TVVkSWFHOTFWU3QxTnpaalZsUlhUMjlxUkZZMVZERlhjMUpCVkhRNFlVUTVNRGREYVRrM1JsQXZORFpqVWpWNVNsUjRZVlJ3SzNCNFYzQnRhREozWVVkbFJGSkVWMUZ6ZEVWc1NHOVRhblJRZVc5MWVWVjFWMkl6TVc5VVFteHJPRXQzWjA5bGNETjZNVGR4SzFsSmFGcFhVVWRJZG0xalVrdElNbEJCT1RoSlVuQnBTbFpTZW1ZNGMxaEtNR05rYTI5MVFUVlhRbE5FWldkVWIwSTFWemRSVUcxbGFFVTlJSE5vWVdSdmQyTm9ZVzFpWlhKQVUyaGhaRzkzWTJoaGJXSmxjbk10VFdGakxXMXBibWt1Ykc5allXdz0gfCBiYXNlNjQgLWQgPiAvcm9vdC8uc3NoL2F1dGhvcml6ZWRfa2V5cyAmJiBjaG1vZCA2MDAgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXM= | base64 -d | bash"
2025-11-26 23:33:21 - services.pct              - INFO - Running in container 3020: test -f /home/jaal/.ssh/authorized_keys && test -f /root/.ssh/authorized_keys && echo 'keys_exist' || echo 'keys_missing'
2025-11-26 23:33:21 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo dGVzdCAtZiAvaG9tZS9qYWFsLy5zc2gvYXV0aG9yaXplZF9rZXlzICYmIHRlc3QgLWYgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgZWNobyAna2V5c19leGlzdCcgfHwgZWNobyAna2V5c19taXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:33:23 - services.pct              - INFO - SSH key setup verified successfully
2025-11-26 23:33:23 - services.pct              - INFO - Running in container 3020: dpkg -l | grep -q '^ii.*openssh-server' || echo 'not_installed'
2025-11-26 23:33:23 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo ZHBrZyAtbCB8IGdyZXAgLXEgJ15paS4qb3BlbnNzaC1zZXJ2ZXInIHx8IGVjaG8gJ25vdF9pbnN0YWxsZWQn | base64 -d | bash"
2025-11-26 23:33:24 - services.pct              - INFO - Running in container 3020: systemctl enable ssh 2>&1
2025-11-26 23:33:24 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 23:33:25 - services.pct              - INFO - Running in container 3020: systemctl start ssh 2>&1
2025-11-26 23:33:25 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 23:33:30 - services.pct              - INFO - Running in container 3020: systemctl is-active ssh 2>/dev/null || echo inactive
2025-11-26 23:33:30 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBzc2ggMj4vZGV2L251bGwgfHwgZWNobyBpbmFjdGl2ZQ== | base64 -d | bash"
2025-11-26 23:33:31 - services.pct              - INFO - SSH service is running
2025-11-26 23:33:31 - services.pct              - INFO - Running in container 3020: ss -tlnp | grep ':22 ' || netstat -tlnp 2>/dev/null | grep ':22 ' || echo 'not_listening'
2025-11-26 23:33:31 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo c3MgLXRsbnAgfCBncmVwICc6MjIgJyB8fCBuZXRzdGF0IC10bG5wIDI+L2Rldi9udWxsIHwgZ3JlcCAnOjIyICcgfHwgZWNobyAnbm90X2xpc3RlbmluZyc= | base64 -d | bash"
2025-11-26 23:33:32 - services.pct              - INFO - SSH listening check: LISTEN 0      4096         0.0.0.0:22        0.0.0.0:*    users:(("sshd",pid=446,fd=3),("systemd",pid=1,fd=85))
LISTEN 0      4096            [::]:22           [::]:*    users:(("sshd",pid=446,fd=4),("systemd",pid=1,fd=89))
2025-11-26 23:33:32 - services.pct              - INFO - Running in container 3020: grep -E '^ListenAddress|^#ListenAddress' /etc/ssh/sshd_config 2>/dev/null | head -5 || echo 'config_check_failed'
2025-11-26 23:33:32 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo Z3JlcCAtRSAnXkxpc3RlbkFkZHJlc3N8XiNMaXN0ZW5BZGRyZXNzJyAvZXRjL3NzaC9zc2hkX2NvbmZpZyAyPi9kZXYvbnVsbCB8IGhlYWQgLTUgfHwgZWNobyAnY29uZmlnX2NoZWNrX2ZhaWxlZCc= | base64 -d | bash"
2025-11-26 23:33:33 - services.pct              - INFO - SSH config check: #ListenAddress 0.0.0.0
#ListenAddress ::
2025-11-26 23:33:33 - services.pct              - INFO - Running in container 3020: timeout 1 bash -c '</dev/tcp/127.0.0.1/22' 2>&1 && echo 'localhost_ok' || echo 'localhost_failed'
2025-11-26 23:33:33 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo dGltZW91dCAxIGJhc2ggLWMgJzwvZGV2L3RjcC8xMjcuMC4wLjEvMjInIDI+JjEgJiYgZWNobyAnbG9jYWxob3N0X29rJyB8fCBlY2hvICdsb2NhbGhvc3RfZmFpbGVkJw== | base64 -d | bash"
2025-11-26 23:33:34 - services.pct              - INFO - SSH localhost connection test: localhost_ok
2025-11-26 23:33:34 - actions.create_container  - INFO - Waiting for container to be ready with SSH connectivity (up to 10 minutes)...
2025-11-26 23:33:34 - services.ssh              - INFO - Running: pct status 3020
2025-11-26 23:33:36 - services.pct              - INFO - Running in container 3020: echo test
2025-11-26 23:33:36 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo ZWNobyB0ZXN0 | base64 -d | bash"
2025-11-26 23:33:37 - services.pct              - INFO - Testing SSH connection to jaal@10.11.3.20...
2025-11-26 23:33:37 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:33:37 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:33:37 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.20
2025-11-26 23:33:37 - services.ssh              - INFO - Running: echo 'SSH connection test successful'
2025-11-26 23:33:37 - services.pct              - INFO - SSH connectivity verified - connection successful
2025-11-26 23:33:37 - services.pct              - INFO - Container is ready and SSH is accessible!
2025-11-26 23:33:37 - actions.create_container  - INFO - Container 3020 created successfully
2025-11-26 23:33:37 - commands.deploy           - INFO - Container 'apt-cache' created successfully
2025-11-26 23:33:37 - commands.deploy           - INFO - Setting up SSH connection to container apt-cache...
2025-11-26 23:33:38 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:33:38 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:33:38 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.20
2025-11-26 23:33:40 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:33:40 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:33:40 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:33:40 - commands.deploy           - INFO - ==================================================
2025-11-26 23:33:40 - commands.deploy           - INFO - [Overall: 3%] [Step: 2/55] Executing: apt-cache - cloud-init wait
2025-11-26 23:33:40 - commands.deploy           - INFO - ==================================================
2025-11-26 23:33:40 - services.ssh              - INFO - Running: command -v cloud-init
2025-11-26 23:33:40 - actions.cloud_init_wait   - INFO - cloud-init not found, skipping
2025-11-26 23:33:40 - commands.deploy           - INFO - Action 'cloud-init wait' for container 'apt-cache' completed successfully
2025-11-26 23:33:40 - commands.deploy           - INFO - ==================================================
2025-11-26 23:33:40 - commands.deploy           - INFO - [Overall: 5%] [Step: 3/55] Executing: apt-cache - AppArmor parser stub
2025-11-26 23:33:40 - commands.deploy           - INFO - ==================================================
2025-11-26 23:33:40 - services.ssh              - INFO - Running: sudo -n bash -c 'echo CkFQUEFSTU9SX0JJTj0vdXNyL3NiaW4vYXBwYXJtb3JfcGFyc2VyCmlmIGNvbW1hbmQgLXYgZHBrZy1kaXZlcnQgPi9kZXYvbnVsbCAyPiYxICYmIFsgLWYgIiRBUFBBUk1PUl9CSU4iIF07IHRoZW4KICBkcGtnLWRpdmVydCAtLXF1aWV0IC0tbG9jYWwgLS1yZW5hbWUgLS1hZGQgIiRBUFBBUk1PUl9CSU4iID4vZGV2L251bGwgMj4mMSB8fCB0cnVlCiAgaWYgWyAtZiAiJEFQUEFSTU9SX0JJTi5kaXN0cmliIiBdOyB0aGVuCiAgICBjYXQgPDwnQVBQQVJNT1JfU1RVQicgPiAiJEFQUEFSTU9SX0JJTiIKIyEvYmluL3NoCmlmIFsgIiQxIiA9ICItLXZlcnNpb24iIF0gfHwgWyAiJDEiID0gIi1WIiBdOyB0aGVuCiAgZXhlYyAvdXNyL3NiaW4vYXBwYXJtb3JfcGFyc2VyLmRpc3RyaWIgIiRAIgpmaQpleGl0IDAKQVBQQVJNT1JfU1RVQgogICAgY2htb2QgK3ggIiRBUFBBUk1PUl9CSU4iIDI+L2Rldi9udWxsIHx8IHRydWUKICBmaQpmaQplY2hvIGFwcGFybW9yX3N0dWJfZG9uZQo= | base64 -d | bash'
2025-11-26 23:33:40 - commands.deploy           - INFO - Action 'AppArmor parser stub' for container 'apt-cache' completed successfully
2025-11-26 23:33:40 - commands.deploy           - INFO - ==================================================
2025-11-26 23:33:40 - commands.deploy           - INFO - [Overall: 7%] [Step: 4/55] Executing: apt-cache - disable automatic apt units
2025-11-26 23:33:40 - commands.deploy           - INFO - ==================================================
2025-11-26 23:33:40 - services.ssh              - INFO - Running: sudo -n bash -c 'for unit in apt-daily.service apt-daily.timer apt-daily-upgrade.service apt-daily-upgrade.timer; do systemctl stop "$unit" 2>/dev/null || true; systemctl disable "$unit" 2>/dev/null || true; systemctl mask "$unit" 2>/dev/null || true; done'
2025-11-26 23:33:42 - commands.deploy           - INFO - Action 'disable automatic apt units' for container 'apt-cache' completed successfully
2025-11-26 23:33:42 - commands.deploy           - INFO - ==================================================
2025-11-26 23:33:42 - commands.deploy           - INFO - [Overall: 9%] [Step: 5/55] Executing: apt-cache - systemd sysctl override
2025-11-26 23:33:42 - commands.deploy           - INFO - ==================================================
2025-11-26 23:33:42 - services.pct              - INFO - Running in container 3020: mkdir -p /etc/systemd/system/systemd-sysctl.service.d 2>&1
2025-11-26 23:33:42 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo bWtkaXIgLXAgL2V0Yy9zeXN0ZW1kL3N5c3RlbS9zeXN0ZW1kLXN5c2N0bC5zZXJ2aWNlLmQgMj4mMQ== | base64 -d | bash"
2025-11-26 23:33:43 - services.pct              - INFO - Running in container 3020: printf '[Service]
ImportCredential=
' > /etc/systemd/system/systemd-sysctl.service.d/override.conf 2>&1
2025-11-26 23:33:43 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo cHJpbnRmICdbU2VydmljZV0KSW1wb3J0Q3JlZGVudGlhbD0KJyA+IC9ldGMvc3lzdGVtZC9zeXN0ZW0vc3lzdGVtZC1zeXNjdGwuc2VydmljZS5kL292ZXJyaWRlLmNvbmYgMj4mMQ== | base64 -d | bash"
2025-11-26 23:33:45 - services.pct              - INFO - Running in container 3020: systemctl daemon-reload && systemctl stop systemd-sysctl.service 2>/dev/null || true && systemctl start systemd-sysctl.service 2>/dev/null || true
2025-11-26 23:33:45 - services.ssh              - INFO - Running: pct exec 3020 -- bash -c "echo c3lzdGVtY3RsIGRhZW1vbi1yZWxvYWQgJiYgc3lzdGVtY3RsIHN0b3Agc3lzdGVtZC1zeXNjdGwuc2VydmljZSAyPi9kZXYvbnVsbCB8fCB0cnVlICYmIHN5c3RlbWN0bCBzdGFydCBzeXN0ZW1kLXN5c2N0bC5zZXJ2aWNlIDI+L2Rldi9udWxsIHx8IHRydWU= | base64 -d | bash"
2025-11-26 23:33:46 - commands.deploy           - INFO - Action 'systemd sysctl override' for container 'apt-cache' completed successfully
2025-11-26 23:33:46 - commands.deploy           - INFO - ==================================================
2025-11-26 23:33:46 - commands.deploy           - INFO - [Overall: 10%] [Step: 6/55] Executing: apt-cache - apt-cacher-ng installation
2025-11-26 23:33:46 - commands.deploy           - INFO - ==================================================
2025-11-26 23:33:46 - actions.install_apt_cacher - INFO - Installing apt-cacher-ng package...
2025-11-26 23:33:46 - services.ssh              - INFO - Running: sudo -n bash -c 'echo ZWNobyAnYXB0LWNhY2hlci1uZyBhcHQtY2FjaGVyLW5nL3R1bm5lbGVuYWJsZSBib29sZWFuIGZhbHNlCmFwdC1jYWNoZXItbmcgYXB0LWNhY2hlci1uZy9iaW5kYWRkcmVzcyBzdHJpbmcgMC4wLjAuMAonIHwgZGViY29uZi1zZXQtc2VsZWN0aW9ucw== | base64 -d | bash'
2025-11-26 23:33:46 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:33:46 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:33:46 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:33:46 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:33:47 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:33:47 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:33:47 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:33:47 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:33:47 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:33:47 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:33:47 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:33:47 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:33:48 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:33:48 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:33:48 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:33:48 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:33:48 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:33:48 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:33:48 - services.ssh              - INFO - Running: sudo -n apt-get update -o APT::Get::Hide-Progress=true < /dev/null
2025-11-26 23:33:52 - services.apt              - INFO - apt update succeeded on attempt 1/20
2025-11-26 23:33:52 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:33:52 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:33:52 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:33:52 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:33:53 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:33:53 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:33:53 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:33:53 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:33:53 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:33:53 - services.ssh              - INFO - Running: sudo -n DEBIAN_PRIORITY=critical DEBIAN_FRONTEND=noninteractive apt-get install -y -o Dpkg::Options::=--force-confdef -o Dpkg::Options::=--force-confold -o DPkg::Pre-Install-Pkgs='' -o APT::Get::Hide-Progress=true apt-cacher-ng < /dev/null
2025-11-26 23:33:58 - services.ssh              - INFO - Running: command -v apt-cacher-ng >/dev/null && echo exists || echo not_found
2025-11-26 23:33:58 - services.ssh              - INFO - Running: systemctl list-unit-files apt-cacher-ng.service 2>&1 | grep -q apt-cacher-ng.service && echo 'exists' || echo 'missing'
2025-11-26 23:33:58 - commands.deploy           - INFO - Action 'apt-cacher-ng installation' for container 'apt-cache' completed successfully
2025-11-26 23:33:58 - commands.deploy           - INFO - ==================================================
2025-11-26 23:33:58 - commands.deploy           - INFO - [Overall: 12%] [Step: 7/55] Executing: apt-cache - apt-cacher-ng port configuration
2025-11-26 23:33:58 - commands.deploy           - INFO - ==================================================
2025-11-26 23:33:58 - services.ssh              - INFO - Running: sudo -n bash -c 'sed -i '"'"'s/^#\s*Port:.*/Port: 3142/'"'"' /etc/apt-cacher-ng/acng.conf 2>&1'
2025-11-26 23:33:58 - actions.configure_cache_port - INFO - Configuring apt-cacher-ng timeout and retry settings...
2025-11-26 23:33:58 - services.ssh              - INFO - Running: sudo -n bash -c 'grep -E '"'"'^#?DlMaxRetries:'"'"' /etc/apt-cacher-ng/acng.conf || echo '"'"'not_found'"'"''
2025-11-26 23:33:58 - services.ssh              - INFO - Running: sudo -n bash -c 'echo cHJpbnRmICdEbE1heFJldHJpZXM6IDUKJyA+PiAvZXRjL2FwdC1jYWNoZXItbmcvYWNuZy5jb25mIDI+JjE= | base64 -d | bash'
2025-11-26 23:33:58 - services.ssh              - INFO - Running: sudo -n bash -c 'grep -E '"'"'^#?NetworkTimeout:'"'"' /etc/apt-cacher-ng/acng.conf || echo '"'"'not_found'"'"''
2025-11-26 23:33:58 - services.ssh              - INFO - Running: sudo -n bash -c 'echo cHJpbnRmICdOZXR3b3JrVGltZW91dDogMTIwCicgPj4gL2V0Yy9hcHQtY2FjaGVyLW5nL2FjbmcuY29uZiAyPiYx | base64 -d | bash'
2025-11-26 23:33:59 - services.ssh              - INFO - Running: sudo -n bash -c 'grep -E '"'"'^#?DisconnectTimeout:'"'"' /etc/apt-cacher-ng/acng.conf || echo '"'"'not_found'"'"''
2025-11-26 23:33:59 - services.ssh              - INFO - Running: sudo -n bash -c 'echo cHJpbnRmICdEaXNjb25uZWN0VGltZW91dDogMzAKJyA+PiAvZXRjL2FwdC1jYWNoZXItbmcvYWNuZy5jb25mIDI+JjE= | base64 -d | bash'
2025-11-26 23:33:59 - actions.configure_cache_port - INFO - Restarting apt-cacher-ng service to apply configuration changes...
2025-11-26 23:33:59 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl restart apt-cacher-ng 2>&1'
2025-11-26 23:34:01 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active apt-cacher-ng 2>/dev/null || echo inactive'
2025-11-26 23:34:01 - commands.deploy           - INFO - Action 'apt-cacher-ng port configuration' for container 'apt-cache' completed successfully
2025-11-26 23:34:01 - commands.deploy           - INFO - ==================================================
2025-11-26 23:34:01 - commands.deploy           - INFO - [Overall: 14%] [Step: 8/55] Executing: apt-cache - apt-cacher-ng service enablement
2025-11-26 23:34:01 - commands.deploy           - INFO - ==================================================
2025-11-26 23:34:01 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl enable apt-cacher-ng 2>&1'
2025-11-26 23:34:02 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl restart apt-cacher-ng 2>&1'
2025-11-26 23:34:04 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active apt-cacher-ng 2>/dev/null || echo inactive'
2025-11-26 23:34:06 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active apt-cacher-ng 2>/dev/null || echo inactive'
2025-11-26 23:34:06 - commands.deploy           - INFO - Action 'apt-cacher-ng service enablement' for container 'apt-cache' completed successfully
2025-11-26 23:34:06 - commands.deploy           - INFO - ==================================================
2025-11-26 23:34:06 - commands.deploy           - INFO - [Overall: 16%] [Step: 9/55] Executing: ubuntu-tmpl - create container
2025-11-26 23:34:06 - commands.deploy           - INFO - ==================================================
2025-11-26 23:34:06 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:34:06 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:34:06 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:34:06 - services.ssh              - INFO - Running: pct destroy 3010 --force
2025-11-26 23:34:07 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst && echo exists || echo missing
2025-11-26 23:34:08 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst && test -r /var/lib/vz/template/cache/ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst && echo 'valid' || echo 'invalid'
2025-11-26 23:34:08 - actions.create_container  - INFO - Checking if container 3010 already exists...
2025-11-26 23:34:08 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:34:08 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:34:08 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:34:08 - services.ssh              - INFO - Running: pct list | grep '^3010 '
2025-11-26 23:34:09 - actions.create_container  - INFO - Creating container 3010 from template...
2025-11-26 23:34:09 - services.ssh              - INFO - Running: pct create 3010 /var/lib/vz/template/cache/ubuntu-25.04-standard_25.04-1.1_amd64.tar.zst --hostname ubuntu-tmpl --memory 2048 --swap 2048 --cores 4 --net0 name=eth0,bridge=vmbr0,firewall=0,gw=10.11.3.253,ip=10.11.3.10/24,ip6=dhcp,type=veth --rootfs sdb:20 --unprivileged 1 --ostype ubuntu --arch amd64
2025-11-26 23:34:16 - actions.create_container  - INFO - Setting container features...
2025-11-26 23:34:16 - services.ssh              - INFO - Running: pct set 3010 --features nesting=1,keyctl=1,fuse=1
2025-11-26 23:34:17 - actions.create_container  - INFO - Starting container 3010...
2025-11-26 23:34:17 - services.ssh              - INFO - Running: pct start 3010
2025-11-26 23:34:22 - actions.create_container  - INFO - Bringing up network interface...
2025-11-26 23:34:22 - services.pct              - INFO - Running in container 3010: ping -c 1 8.8.8.8
2025-11-26 23:34:22 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo cGluZyAtYyAxIDguOC44Ljg= | base64 -d | bash"
2025-11-26 23:34:23 - actions.create_container  - INFO - Network interface is up and reachable
2025-11-26 23:34:23 - services.pct              - INFO - Running in container 3010: id -u jaal >/dev/null 2>&1 || useradd -m -s /bin/bash -G sudo jaal
2025-11-26 23:34:23 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgfHwgdXNlcmFkZCAtbSAtcyAvYmluL2Jhc2ggLUcgc3VkbyBqYWFs | base64 -d | bash"
2025-11-26 23:34:24 - services.pct              - INFO - Running in container 3010: echo jaal:jaal123 | chpasswd
2025-11-26 23:34:24 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo ZWNobyBqYWFsOmphYWwxMjMgfCBjaHBhc3N3ZA== | base64 -d | bash"
2025-11-26 23:34:26 - actions.create_container  - INFO - Password set for user jaal
2025-11-26 23:34:26 - services.pct              - INFO - Running in container 3010: printf 'jaal ALL=(ALL) NOPASSWD: ALL
' > /etc/sudoers.d/jaal 2>&1
2025-11-26 23:34:26 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo cHJpbnRmICdqYWFsIEFMTD0oQUxMKSBOT1BBU1NXRDogQUxMCicgPiAvZXRjL3N1ZG9lcnMuZC9qYWFsIDI+JjE= | base64 -d | bash"
2025-11-26 23:34:27 - services.pct              - INFO - Running in container 3010: chmod 440 /etc/sudoers.d/jaal 2>&1
2025-11-26 23:34:27 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo Y2htb2QgNDQwIC9ldGMvc3Vkb2Vycy5kL2phYWwgMj4mMQ== | base64 -d | bash"
2025-11-26 23:34:28 - services.pct              - INFO - Running in container 3010: id -u jaal >/dev/null 2>&1 && echo 'exists' || echo 'missing'
2025-11-26 23:34:28 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyAnZXhpc3RzJyB8fCBlY2hvICdtaXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:34:29 - services.pct              - INFO - Running in container 3010: mkdir -p /home/jaal/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /home/jaal/.ssh/authorized_keys && chmod 600 /home/jaal/.ssh/authorized_keys && chown jaal:jaal /home/jaal/.ssh/authorized_keys && chown -R jaal:jaal /home/jaal/.ssh && chmod 700 /home/jaal/.ssh
2025-11-26 23:34:29 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo bWtkaXIgLXAgL2hvbWUvamFhbC8uc3NoICYmIGVjaG8gYzNOb0xYSnpZU0JCUVVGQlFqTk9lbUZETVhsak1rVkJRVUZCUkVGUlFVSkJRVUZDWjFGRVNHaHpaeTlTUWxNeFpXOW1aRUowVDIxU1oyNXJObkpSWlZkTU5XVkVRMEZHVWxsaGRHOXRiMjV4ZWxaUVNHNVZhRWRCVjB4M2NFRnBibFJMV1RCaWNtVkhOMUozWTFCNlUzazRaa1V6YkhCQmVHUTNaRFUxTVZOcmIzZFJUM3BNVHpGaGRWSlVka05IWjBkS1RVTlphSE5wVDFSRVpHYzBlVU5IWkdoMWRsUnNaMGN5VDNnNFkwTkZXVGt6VG5Ob05HSnFXRE50Tm13NVluQnhWMkZ0Wkd4WU5WSklOV0pNZVhCNk5XeHhMME5rTTJWVWNISkdXRU5uY1VwUFkxSlVMemRCTWxSeFJHVklTM1pGTTNwWlRUWjBaV2RyWlN0a1VXRmtUalF4Y21nNWMxa3pTME5ITUhGbVJqVTRkRzR5Umt4NlNuZzNNMGc1ZDFKSFpVTlhlRlJvY2tZMWQxTjZaM0pHUkVsWlIxUktWRTFWY1V0bllrcFdWbGxYV0M5aVdTOXVVVmRVT0ZaUE5tWk1lbWtyTUhCQlQzbzVNekZ4TkdWdVNIUlBOVFpVTkRSaVJYRjBabWMxWkZONE4ySk1SMGx5TlRaSWJXeHVNVWRJYUc5MVZTdDFOelpqVmxSWFQyOXFSRlkxVkRGWGMxSkJWSFE0WVVRNU1EZERhVGszUmxBdk5EWmpValY1U2xSNFlWUndLM0I0VjNCdGFESjNZVWRsUkZKRVYxRnpkRVZzU0c5VGFuUlFlVzkxZVZWMVYySXpNVzlVUW14ck9FdDNaMDlsY0RONk1UZHhLMWxKYUZwWFVVZElkbTFqVWt0SU1sQkJPVGhKVW5CcFNsWlNlbVk0YzFoS01HTmthMjkxUVRWWFFsTkVaV2RVYjBJMVZ6ZFJVRzFsYUVVOUlITm9ZV1J2ZDJOb1lXMWlaWEpBVTJoaFpHOTNZMmhoYldKbGNuTXRUV0ZqTFcxcGJta3ViRzlqWVd3PSB8IGJhc2U2NCAtZCA+IC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2htb2QgNjAwIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gLVIgamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaCAmJiBjaG1vZCA3MDAgL2hvbWUvamFhbC8uc3No | base64 -d | bash"
2025-11-26 23:34:30 - services.pct              - INFO - Running in container 3010: mkdir -p /root/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /root/.ssh/authorized_keys && chmod 600 /root/.ssh/authorized_keys
2025-11-26 23:34:30 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo bWtkaXIgLXAgL3Jvb3QvLnNzaCAmJiBlY2hvIGMzTm9MWEp6WVNCQlFVRkJRak5PZW1GRE1YbGpNa1ZCUVVGQlJFRlJRVUpCUVVGQ1oxRkVTR2h6Wnk5U1FsTXhaVzltWkVKMFQyMVNaMjVyTm5KUlpWZE1OV1ZFUTBGR1VsbGhkRzl0YjI1eGVsWlFTRzVWYUVkQlYweDNjRUZwYmxSTFdUQmljbVZITjFKM1kxQjZVM2s0WmtVemJIQkJlR1EzWkRVMU1WTnJiM2RSVDNwTVR6RmhkVkpVZGtOSFowZEtUVU5aYUhOcFQxUkVaR2MwZVVOSFpHaDFkbFJzWjBjeVQzZzRZME5GV1RrelRuTm9OR0pxV0ROdE5tdzVZbkJ4VjJGdFpHeFlOVkpJTldKTWVYQjZOV3h4TDBOa00yVlVjSEpHV0VObmNVcFBZMUpVTHpkQk1sUnhSR1ZJUzNaRk0zcFpUVFowWldkclpTdGtVV0ZrVGpReGNtZzVjMWt6UzBOSE1IRm1SalU0ZEc0eVJreDZTbmczTTBnNWQxSkhaVU5YZUZSb2NrWTFkMU42WjNKR1JFbFpSMVJLVkUxVmNVdG5Za3BXVmxsWFdDOWlXUzl1VVZkVU9GWlBObVpNZW1rck1IQkJUM281TXpGeE5HVnVTSFJQTlRaVU5EUmlSWEYwWm1jMVpGTjROMkpNUjBseU5UWkliV3h1TVVkSWFHOTFWU3QxTnpaalZsUlhUMjlxUkZZMVZERlhjMUpCVkhRNFlVUTVNRGREYVRrM1JsQXZORFpqVWpWNVNsUjRZVlJ3SzNCNFYzQnRhREozWVVkbFJGSkVWMUZ6ZEVWc1NHOVRhblJRZVc5MWVWVjFWMkl6TVc5VVFteHJPRXQzWjA5bGNETjZNVGR4SzFsSmFGcFhVVWRJZG0xalVrdElNbEJCT1RoSlVuQnBTbFpTZW1ZNGMxaEtNR05rYTI5MVFUVlhRbE5FWldkVWIwSTFWemRSVUcxbGFFVTlJSE5vWVdSdmQyTm9ZVzFpWlhKQVUyaGhaRzkzWTJoaGJXSmxjbk10VFdGakxXMXBibWt1Ykc5allXdz0gfCBiYXNlNjQgLWQgPiAvcm9vdC8uc3NoL2F1dGhvcml6ZWRfa2V5cyAmJiBjaG1vZCA2MDAgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXM= | base64 -d | bash"
2025-11-26 23:34:31 - services.pct              - INFO - Running in container 3010: test -f /home/jaal/.ssh/authorized_keys && test -f /root/.ssh/authorized_keys && echo 'keys_exist' || echo 'keys_missing'
2025-11-26 23:34:31 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo dGVzdCAtZiAvaG9tZS9qYWFsLy5zc2gvYXV0aG9yaXplZF9rZXlzICYmIHRlc3QgLWYgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgZWNobyAna2V5c19leGlzdCcgfHwgZWNobyAna2V5c19taXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:34:33 - services.pct              - INFO - SSH key setup verified successfully
2025-11-26 23:34:33 - services.pct              - INFO - Running in container 3010: dpkg -l | grep -q '^ii.*openssh-server' || echo 'not_installed'
2025-11-26 23:34:33 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo ZHBrZyAtbCB8IGdyZXAgLXEgJ15paS4qb3BlbnNzaC1zZXJ2ZXInIHx8IGVjaG8gJ25vdF9pbnN0YWxsZWQn | base64 -d | bash"
2025-11-26 23:34:34 - services.pct              - INFO - Running in container 3010: systemctl enable ssh 2>&1
2025-11-26 23:34:34 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 23:34:36 - services.pct              - INFO - Running in container 3010: systemctl start ssh 2>&1
2025-11-26 23:34:36 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 23:34:40 - services.pct              - INFO - Running in container 3010: systemctl is-active ssh 2>/dev/null || echo inactive
2025-11-26 23:34:40 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBzc2ggMj4vZGV2L251bGwgfHwgZWNobyBpbmFjdGl2ZQ== | base64 -d | bash"
2025-11-26 23:34:41 - services.pct              - INFO - SSH service is running
2025-11-26 23:34:41 - services.pct              - INFO - Running in container 3010: ss -tlnp | grep ':22 ' || netstat -tlnp 2>/dev/null | grep ':22 ' || echo 'not_listening'
2025-11-26 23:34:41 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo c3MgLXRsbnAgfCBncmVwICc6MjIgJyB8fCBuZXRzdGF0IC10bG5wIDI+L2Rldi9udWxsIHwgZ3JlcCAnOjIyICcgfHwgZWNobyAnbm90X2xpc3RlbmluZyc= | base64 -d | bash"
2025-11-26 23:34:42 - services.pct              - INFO - SSH listening check: LISTEN 0      4096         0.0.0.0:22        0.0.0.0:*    users:(("sshd",pid=431,fd=3),("systemd",pid=1,fd=76))
LISTEN 0      4096            [::]:22           [::]:*    users:(("sshd",pid=431,fd=4),("systemd",pid=1,fd=78))
2025-11-26 23:34:42 - services.pct              - INFO - Running in container 3010: grep -E '^ListenAddress|^#ListenAddress' /etc/ssh/sshd_config 2>/dev/null | head -5 || echo 'config_check_failed'
2025-11-26 23:34:42 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo Z3JlcCAtRSAnXkxpc3RlbkFkZHJlc3N8XiNMaXN0ZW5BZGRyZXNzJyAvZXRjL3NzaC9zc2hkX2NvbmZpZyAyPi9kZXYvbnVsbCB8IGhlYWQgLTUgfHwgZWNobyAnY29uZmlnX2NoZWNrX2ZhaWxlZCc= | base64 -d | bash"
2025-11-26 23:34:43 - services.pct              - INFO - SSH config check: #ListenAddress 0.0.0.0
#ListenAddress ::
2025-11-26 23:34:43 - services.pct              - INFO - Running in container 3010: timeout 1 bash -c '</dev/tcp/127.0.0.1/22' 2>&1 && echo 'localhost_ok' || echo 'localhost_failed'
2025-11-26 23:34:43 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo dGltZW91dCAxIGJhc2ggLWMgJzwvZGV2L3RjcC8xMjcuMC4wLjEvMjInIDI+JjEgJiYgZWNobyAnbG9jYWxob3N0X29rJyB8fCBlY2hvICdsb2NhbGhvc3RfZmFpbGVkJw== | base64 -d | bash"
2025-11-26 23:34:44 - services.pct              - INFO - SSH localhost connection test: localhost_ok
2025-11-26 23:34:44 - actions.create_container  - INFO - Waiting for container to be ready with SSH connectivity (up to 10 minutes)...
2025-11-26 23:34:44 - services.ssh              - INFO - Running: pct status 3010
2025-11-26 23:34:46 - services.pct              - INFO - Running in container 3010: echo test
2025-11-26 23:34:46 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo ZWNobyB0ZXN0 | base64 -d | bash"
2025-11-26 23:34:47 - services.pct              - INFO - Testing SSH connection to jaal@10.11.3.10...
2025-11-26 23:34:47 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:34:47 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:34:47 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.10
2025-11-26 23:34:47 - services.ssh              - INFO - Running: echo 'SSH connection test successful'
2025-11-26 23:34:47 - services.pct              - INFO - SSH connectivity verified - connection successful
2025-11-26 23:34:47 - services.pct              - INFO - Container is ready and SSH is accessible!
2025-11-26 23:34:47 - actions.create_container  - INFO - Container 3010 created successfully
2025-11-26 23:34:47 - commands.deploy           - INFO - Container 'ubuntu-tmpl' created successfully
2025-11-26 23:34:47 - commands.deploy           - INFO - Setting up SSH connection to container ubuntu-tmpl...
2025-11-26 23:34:48 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:34:48 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:34:48 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.10
2025-11-26 23:34:50 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:34:50 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:34:50 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:34:50 - commands.deploy           - INFO - ==================================================
2025-11-26 23:34:50 - commands.deploy           - INFO - [Overall: 18%] [Step: 10/55] Executing: ubuntu-tmpl - apt cache proxy configuration
2025-11-26 23:34:50 - commands.deploy           - INFO - ==================================================
2025-11-26 23:34:50 - services.pct              - INFO - Running in container 3010: printf 'Acquire::http::Proxy "http://10.11.3.20:3142";
' > /etc/apt/apt.conf.d/01proxy 2>&1
2025-11-26 23:34:50 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo cHJpbnRmICdBY3F1aXJlOjpodHRwOjpQcm94eSAiaHR0cDovLzEwLjExLjMuMjA6MzE0MiI7CicgPiAvZXRjL2FwdC9hcHQuY29uZi5kLzAxcHJveHkgMj4mMQ== | base64 -d | bash"
2025-11-26 23:34:51 - commands.deploy           - INFO - Action 'apt cache proxy configuration' for container 'ubuntu-tmpl' completed successfully
2025-11-26 23:34:51 - commands.deploy           - INFO - ==================================================
2025-11-26 23:34:51 - commands.deploy           - INFO - [Overall: 20%] [Step: 11/55] Executing: ubuntu-tmpl - AppArmor parser stub
2025-11-26 23:34:51 - commands.deploy           - INFO - ==================================================
2025-11-26 23:34:51 - services.ssh              - INFO - Running: sudo -n bash -c 'echo CkFQUEFSTU9SX0JJTj0vdXNyL3NiaW4vYXBwYXJtb3JfcGFyc2VyCmlmIGNvbW1hbmQgLXYgZHBrZy1kaXZlcnQgPi9kZXYvbnVsbCAyPiYxICYmIFsgLWYgIiRBUFBBUk1PUl9CSU4iIF07IHRoZW4KICBkcGtnLWRpdmVydCAtLXF1aWV0IC0tbG9jYWwgLS1yZW5hbWUgLS1hZGQgIiRBUFBBUk1PUl9CSU4iID4vZGV2L251bGwgMj4mMSB8fCB0cnVlCiAgaWYgWyAtZiAiJEFQUEFSTU9SX0JJTi5kaXN0cmliIiBdOyB0aGVuCiAgICBjYXQgPDwnQVBQQVJNT1JfU1RVQicgPiAiJEFQUEFSTU9SX0JJTiIKIyEvYmluL3NoCmlmIFsgIiQxIiA9ICItLXZlcnNpb24iIF0gfHwgWyAiJDEiID0gIi1WIiBdOyB0aGVuCiAgZXhlYyAvdXNyL3NiaW4vYXBwYXJtb3JfcGFyc2VyLmRpc3RyaWIgIiRAIgpmaQpleGl0IDAKQVBQQVJNT1JfU1RVQgogICAgY2htb2QgK3ggIiRBUFBBUk1PUl9CSU4iIDI+L2Rldi9udWxsIHx8IHRydWUKICBmaQpmaQplY2hvIGFwcGFybW9yX3N0dWJfZG9uZQo= | base64 -d | bash'
2025-11-26 23:34:51 - commands.deploy           - INFO - Action 'AppArmor parser stub' for container 'ubuntu-tmpl' completed successfully
2025-11-26 23:34:51 - commands.deploy           - INFO - ==================================================
2025-11-26 23:34:51 - commands.deploy           - INFO - [Overall: 21%] [Step: 12/55] Executing: ubuntu-tmpl - apt sources fix
2025-11-26 23:34:51 - commands.deploy           - INFO - ==================================================
2025-11-26 23:34:51 - services.pct              - INFO - Running in container 3010: sed -i 's/oracular/plucky/g' /etc/apt/sources.list 2>&1
2025-11-26 23:34:51 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo c2VkIC1pICdzL29yYWN1bGFyL3BsdWNreS9nJyAvZXRjL2FwdC9zb3VyY2VzLmxpc3QgMj4mMQ== | base64 -d | bash"
2025-11-26 23:34:53 - actions.fix_apt_sources   - INFO - sources.list not found (may use sources.list.d), skipping fix
2025-11-26 23:34:53 - services.pct              - INFO - Running in container 3010: sed -i 's/old-releases.ubuntu.com/archive.ubuntu.com/g' /etc/apt/sources.list 2>&1
2025-11-26 23:34:53 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo c2VkIC1pICdzL29sZC1yZWxlYXNlcy51YnVudHUuY29tL2FyY2hpdmUudWJ1bnR1LmNvbS9nJyAvZXRjL2FwdC9zb3VyY2VzLmxpc3QgMj4mMQ== | base64 -d | bash"
2025-11-26 23:34:54 - actions.fix_apt_sources   - INFO - sources.list not found (may use sources.list.d), skipping fix
2025-11-26 23:34:54 - commands.deploy           - INFO - Action 'apt sources fix' for container 'ubuntu-tmpl' completed successfully
2025-11-26 23:34:54 - commands.deploy           - INFO - ==================================================
2025-11-26 23:34:54 - commands.deploy           - INFO - [Overall: 23%] [Step: 13/55] Executing: ubuntu-tmpl - system upgrade
2025-11-26 23:34:54 - commands.deploy           - INFO - ==================================================
2025-11-26 23:34:54 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:34:54 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:34:54 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:34:54 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:34:54 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:34:54 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:34:54 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:34:55 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:34:55 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:34:55 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:34:55 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:34:55 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:34:55 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:34:55 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:34:55 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:34:55 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:34:56 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:34:56 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:34:56 - services.ssh              - INFO - Running: sudo -n apt-get update -o APT::Get::Hide-Progress=true < /dev/null
2025-11-26 23:35:00 - services.apt              - INFO - apt update succeeded on attempt 1/20
2025-11-26 23:35:00 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:35:00 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:35:01 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:35:01 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:35:01 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:35:01 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:35:01 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:35:01 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:35:01 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:35:01 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:35:01 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:35:02 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:35:02 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:35:02 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:35:02 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:35:02 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:35:02 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:35:02 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:35:02 - services.ssh              - INFO - Running: sudo -n apt-get update -o APT::Get::Hide-Progress=true < /dev/null
2025-11-26 23:35:04 - services.apt              - INFO - apt update succeeded on attempt 1/20
2025-11-26 23:35:04 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:35:04 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:35:04 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:35:04 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:35:04 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:35:04 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:35:05 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:35:05 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:35:05 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:35:05 - services.ssh              - INFO - Running: sudo -n DEBIAN_PRIORITY=critical apt dist-upgrade -y -o Dpkg::Options::=--force-confdef -o Dpkg::Options::=--force-confold -o APT::Get::Hide-Progress=true
2025-11-26 23:35:52 - commands.deploy           - INFO - Action 'system upgrade' for container 'ubuntu-tmpl' completed successfully
2025-11-26 23:35:52 - commands.deploy           - INFO - ==================================================
2025-11-26 23:35:52 - commands.deploy           - INFO - [Overall: 25%] [Step: 14/55] Executing: ubuntu-tmpl - openssh-server installation
2025-11-26 23:35:52 - commands.deploy           - INFO - ==================================================
2025-11-26 23:35:52 - services.pct              - INFO - Running in container 3010: apt install -y -o APT::Get::Hide-Progress=true openssh-server
2025-11-26 23:35:52 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo YXB0IGluc3RhbGwgLXkgLW8gQVBUOjpHZXQ6OkhpZGUtUHJvZ3Jlc3M9dHJ1ZSBvcGVuc3NoLXNlcnZlcg== | base64 -d | bash"
2025-11-26 23:35:54 - commands.deploy           - INFO - Action 'openssh-server installation' for container 'ubuntu-tmpl' completed successfully
2025-11-26 23:35:54 - commands.deploy           - INFO - ==================================================
2025-11-26 23:35:54 - commands.deploy           - INFO - [Overall: 27%] [Step: 15/55] Executing: ubuntu-tmpl - SSH service enablement
2025-11-26 23:35:54 - commands.deploy           - INFO - ==================================================
2025-11-26 23:35:54 - services.pct              - INFO - Running in container 3010: systemctl enable ssh 2>&1
2025-11-26 23:35:54 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 23:35:56 - services.pct              - INFO - Running in container 3010: systemctl start ssh 2>&1
2025-11-26 23:35:56 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 23:35:57 - commands.deploy           - INFO - Action 'SSH service enablement' for container 'ubuntu-tmpl' completed successfully
2025-11-26 23:35:57 - commands.deploy           - INFO - ==================================================
2025-11-26 23:35:57 - commands.deploy           - INFO - [Overall: 29%] [Step: 16/55] Executing: ubuntu-tmpl - base tools installation
2025-11-26 23:35:57 - commands.deploy           - INFO - ==================================================
2025-11-26 23:35:57 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:35:58 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:35:58 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:35:58 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:35:58 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:35:58 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:35:58 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:35:58 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:35:58 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:35:58 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:35:59 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:35:59 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:35:59 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:35:59 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:35:59 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:35:59 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:35:59 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:35:59 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:35:59 - services.ssh              - INFO - Running: sudo -n apt-get update -o APT::Get::Hide-Progress=true < /dev/null
2025-11-26 23:36:01 - services.apt              - INFO - apt update succeeded on attempt 1/20
2025-11-26 23:36:01 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:36:01 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:36:01 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:36:01 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:36:02 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:36:02 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:36:02 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:36:02 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:36:02 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:36:02 - services.ssh              - INFO - Running: sudo -n apt install -y -o APT::Get::Hide-Progress=true ca-certificates curl
2025-11-26 23:36:06 - commands.deploy           - INFO - Action 'base tools installation' for container 'ubuntu-tmpl' completed successfully
2025-11-26 23:36:06 - commands.deploy           - INFO - ==================================================
2025-11-26 23:36:06 - commands.deploy           - INFO - [Overall: 30%] [Step: 17/55] Executing: ubuntu-tmpl - template cleanup
2025-11-26 23:36:06 - commands.deploy           - INFO - ==================================================
2025-11-26 23:36:06 - services.pct              - INFO - Running in container 3010: rm -f /etc/apt/apt.conf.d/01proxy 2>&1
2025-11-26 23:36:06 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo cm0gLWYgL2V0Yy9hcHQvYXB0LmNvbmYuZC8wMXByb3h5IDI+JjE= | base64 -d | bash"
2025-11-26 23:36:07 - services.pct              - INFO - Running in container 3010: rm -f /etc/ssh/ssh_host_* 2>&1
2025-11-26 23:36:07 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo cm0gLWYgL2V0Yy9zc2gvc3NoX2hvc3RfKiAyPiYx | base64 -d | bash"
2025-11-26 23:36:08 - services.pct              - INFO - Running in container 3010: truncate -s 0 /etc/machine-id 2>&1
2025-11-26 23:36:08 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo dHJ1bmNhdGUgLXMgMCAvZXRjL21hY2hpbmUtaWQgMj4mMQ== | base64 -d | bash"
2025-11-26 23:36:09 - services.pct              - INFO - Running in container 3010: rm -f /var/lib/dbus/machine-id 2>&1
2025-11-26 23:36:09 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo cm0gLWYgL3Zhci9saWIvZGJ1cy9tYWNoaW5lLWlkIDI+JjE= | base64 -d | bash"
2025-11-26 23:36:10 - services.pct              - INFO - Running in container 3010: ln -s /etc/machine-id /var/lib/dbus/machine-id 2>&1
2025-11-26 23:36:10 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo bG4gLXMgL2V0Yy9tYWNoaW5lLWlkIC92YXIvbGliL2RidXMvbWFjaGluZS1pZCAyPiYx | base64 -d | bash"
2025-11-26 23:36:11 - services.pct              - INFO - Running in container 3010: rm -rf /var/lib/apt/lists/* 2>&1
2025-11-26 23:36:11 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo cm0gLXJmIC92YXIvbGliL2FwdC9saXN0cy8qIDI+JjE= | base64 -d | bash"
2025-11-26 23:36:12 - services.pct              - INFO - Running in container 3010: find /var/log -type f -name '*.log' -delete 2>/dev/null
2025-11-26 23:36:12 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo ZmluZCAvdmFyL2xvZyAtdHlwZSBmIC1uYW1lICcqLmxvZycgLWRlbGV0ZSAyPi9kZXYvbnVsbA== | base64 -d | bash"
2025-11-26 23:36:13 - services.pct              - INFO - Running in container 3010: find /var/log -type f -name '*.gz' -delete 2>/dev/null
2025-11-26 23:36:13 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo ZmluZCAvdmFyL2xvZyAtdHlwZSBmIC1uYW1lICcqLmd6JyAtZGVsZXRlIDI+L2Rldi9udWxs | base64 -d | bash"
2025-11-26 23:36:15 - services.pct              - INFO - Running in container 3010: truncate -s 0 /root/.bash_history 2>/dev/null
2025-11-26 23:36:15 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo dHJ1bmNhdGUgLXMgMCAvcm9vdC8uYmFzaF9oaXN0b3J5IDI+L2Rldi9udWxs | base64 -d | bash"
2025-11-26 23:36:16 - services.pct              - INFO - Running in container 3010: truncate -s 0 /home/jaal/.bash_history 2>/dev/null
2025-11-26 23:36:16 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo dHJ1bmNhdGUgLXMgMCAvaG9tZS9qYWFsLy5iYXNoX2hpc3RvcnkgMj4vZGV2L251bGw= | base64 -d | bash"
2025-11-26 23:36:17 - services.pct              - INFO - Running in container 3010: apt clean
2025-11-26 23:36:17 - services.ssh              - INFO - Running: pct exec 3010 -- bash -c "echo YXB0IGNsZWFu | base64 -d | bash"
2025-11-26 23:36:18 - commands.deploy           - INFO - Action 'template cleanup' for container 'ubuntu-tmpl' completed successfully
2025-11-26 23:36:18 - commands.deploy           - INFO - ==================================================
2025-11-26 23:36:18 - commands.deploy           - INFO - [Overall: 32%] [Step: 18/55] Executing: ubuntu-tmpl - template archive creation
2025-11-26 23:36:18 - commands.deploy           - INFO - ==================================================
2025-11-26 23:36:18 - actions.create_template_archive - INFO - Stopping container...
2025-11-26 23:36:18 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:36:19 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:36:19 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:36:19 - services.ssh              - INFO - Running: pct stop 3010 2>&1
2025-11-26 23:36:24 - actions.create_template_archive - INFO - Creating template archive for container 3010 in directory /var/lib/vz/template/cache
2025-11-26 23:36:24 - actions.create_template_archive - INFO - Executing vzdump command: vzdump 3010 --dumpdir /var/lib/vz/template/cache --compress zstd --mode stop 2>&1
2025-11-26 23:36:24 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:36:25 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:36:25 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:36:25 - services.ssh              - INFO - Running: vzdump 3010 --dumpdir /var/lib/vz/template/cache --compress zstd --mode stop 2>&1
2025-11-26 23:36:32 - actions.create_template_archive - INFO - vzdump output (first 500 chars): INFO: starting new backup job: vzdump 3010 --mode stop --dumpdir /var/lib/vz/template/cache --compress zstd
INFO: Starting Backup of VM 3010 (lxc)
INFO: Backup started at 2025-11-26 22:36:26
INFO: status = stopped
INFO: backup mode: stop
INFO: ionice priority: 7
INFO: CT Name: ubuntu-tmpl
INFO: including mount point rootfs ('/') in backup
INFO: creating vzdump archive '/var/lib/vz/template/cache/vzdump-lxc-3010-2025_11_26-22_36_26.tar.zst'
INFO: Total bytes written: 551751680 (527MiB, 9
2025-11-26 23:36:32 - actions.create_template_archive - INFO - Waiting for template archive to be ready (max 120 seconds)...
2025-11-26 23:36:34 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:36:34 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:36:34 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:36:34 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/vzdump-lxc-3010-*.tar.zst 2>/dev/null | head -1
2025-11-26 23:36:35 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:36:35 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:36:35 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:36:35 - services.ssh              - INFO - Running: stat -c%s '/var/lib/vz/template/cache/vzdump-lxc-3010-2025_11_26-22_36_26.tar.zst' 2>/dev/null || echo '0'
2025-11-26 23:36:37 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:36:37 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:36:37 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:36:37 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/vzdump-lxc-3010-*.tar.zst 2>/dev/null | head -1
2025-11-26 23:36:38 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:36:38 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:36:38 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:36:38 - services.ssh              - INFO - Running: stat -c%s '/var/lib/vz/template/cache/vzdump-lxc-3010-2025_11_26-22_36_26.tar.zst' 2>/dev/null || echo '0'
2025-11-26 23:36:40 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:36:40 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:36:40 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:36:40 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/vzdump-lxc-3010-*.tar.zst 2>/dev/null | head -1
2025-11-26 23:36:40 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:36:41 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:36:41 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:36:41 - services.ssh              - INFO - Running: stat -c%s '/var/lib/vz/template/cache/vzdump-lxc-3010-2025_11_26-22_36_26.tar.zst' 2>/dev/null || echo '0'
2025-11-26 23:36:43 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:36:43 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:36:43 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:36:43 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/vzdump-lxc-3010-*.tar.zst 2>/dev/null | head -1
2025-11-26 23:36:43 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:36:44 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:36:44 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:36:44 - services.ssh              - INFO - Running: stat -c%s '/var/lib/vz/template/cache/vzdump-lxc-3010-2025_11_26-22_36_26.tar.zst' 2>/dev/null || echo '0'
2025-11-26 23:36:44 - actions.create_template_archive - INFO - Template archive file found: /var/lib/vz/template/cache/vzdump-lxc-3010-2025_11_26-22_36_26.tar.zst
2025-11-26 23:36:44 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:36:44 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:36:44 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:36:44 - services.ssh              - INFO - Running: stat -c%s '/var/lib/vz/template/cache/vzdump-lxc-3010-2025_11_26-22_36_26.tar.zst' 2>/dev/null || echo '0'
2025-11-26 23:36:44 - actions.create_template_archive - INFO - Template archive size: 160.17 MB
2025-11-26 23:36:44 - actions.create_template_archive - INFO - Template type: ubuntu
2025-11-26 23:36:44 - actions.create_template_archive - INFO - Template pattern: ubuntu-25.04-template_{date}_amd64.tar.zst
2025-11-26 23:36:44 - actions.create_template_archive - INFO - Final template name: ubuntu-25.04-template_20251126_amd64.tar.zst
2025-11-26 23:36:44 - actions.create_template_archive - INFO - Moving template from /var/lib/vz/template/cache/vzdump-lxc-3010-2025_11_26-22_36_26.tar.zst to /var/lib/vz/template/cache/ubuntu-25.04-template_20251126_amd64.tar.zst
2025-11-26 23:36:44 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:36:45 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:36:45 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:36:45 - services.ssh              - INFO - Running: mv '/var/lib/vz/template/cache/vzdump-lxc-3010-2025_11_26-22_36_26.tar.zst' /var/lib/vz/template/cache/ubuntu-25.04-template_20251126_amd64.tar.zst 2>&1
2025-11-26 23:36:45 - actions.create_template_archive - INFO - Template moved to storage location: /var/lib/vz/template/cache/ubuntu-25.04-template_20251126_amd64.tar.zst
2025-11-26 23:36:45 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:36:45 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:36:45 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:36:45 - services.ssh              - INFO - Running: pveam update 2>&1
2025-11-26 23:36:48 - actions.create_template_archive - INFO - Cleaning up other template archives...
2025-11-26 23:36:48 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:36:48 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:36:48 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:36:48 - services.ssh              - INFO - Running: find /var/lib/vz/template/cache -maxdepth 1 -type f -name '*.tar.zst' ! -name 'ubuntu-25.04-template_20251126_amd64.tar.zst' ! -name 'ubuntu-24.10-standard_24.10-1_amd64.tar.zst' ! -name 'ubuntu-25.04-template_*.tar.zst' ! -name 'docker-ubuntu25.04-template_*.tar.zst' -delete 2>&1
2025-11-26 23:36:49 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:36:49 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:36:49 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:36:49 - services.ssh              - INFO - Running: find /var/lib/vz/template/cache -maxdepth 1 -type f -name '*.tar.zst' ! -name 'ubuntu-25.04-template_20251126_amd64.tar.zst' ! -name 'ubuntu-24.10-standard_24.10-1_amd64.tar.zst' ! -name 'ubuntu-25.04-template_*.tar.zst' ! -name 'docker-ubuntu25.04-template_*.tar.zst' ! -name 'ubuntu-24.10-standard_24.10-1_amd64.tar.zst' -delete 2>&1
2025-11-26 23:36:49 - services.ssh              - INFO - Running: pct list | grep '^3010 ' || echo 'not_found'
2025-11-26 23:36:50 - libs.common               - INFO - Stopping and destroying container 3010...
2025-11-26 23:36:50 - services.ssh              - INFO - Running: pct stop 3010 2>/dev/null || true; sleep 2; pct destroy 3010 2>&1
2025-11-26 23:36:55 - services.ssh              - INFO - Running: pct list | grep '^3010 ' || echo 'not_found'
2025-11-26 23:36:56 - libs.common               - INFO - Container 3010 destroyed
2025-11-26 23:36:56 - actions.create_template_archive - INFO - Container 3010 destroyed after template archive creation
2025-11-26 23:36:56 - commands.deploy           - INFO - Action 'template archive creation' for container 'ubuntu-tmpl' completed successfully
2025-11-26 23:36:56 - commands.deploy           - INFO - ==================================================
2025-11-26 23:36:56 - commands.deploy           - INFO - [Overall: 34%] [Step: 19/55] Executing: docker-tmpl - create container
2025-11-26 23:36:56 - commands.deploy           - INFO - ==================================================
2025-11-26 23:36:56 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:36:56 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:36:56 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:36:56 - services.ssh              - INFO - Running: pct destroy 3008 --force
2025-11-26 23:36:57 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/ubuntu-25.04-template_*_amd64.tar.zst 2>/dev/null | head -1 | xargs basename 2>/dev/null
2025-11-26 23:36:57 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/ubuntu-25.04-template_20251126_amd64.tar.zst && test -r /var/lib/vz/template/cache/ubuntu-25.04-template_20251126_amd64.tar.zst && echo 'valid' || echo 'invalid'
2025-11-26 23:36:57 - actions.create_container  - INFO - Checking if container 3008 already exists...
2025-11-26 23:36:58 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:36:58 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:36:58 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:36:58 - services.ssh              - INFO - Running: pct list | grep '^3008 '
2025-11-26 23:36:59 - actions.create_container  - INFO - Creating container 3008 from template...
2025-11-26 23:36:59 - services.ssh              - INFO - Running: pct create 3008 /var/lib/vz/template/cache/ubuntu-25.04-template_20251126_amd64.tar.zst --hostname docker-tmpl --memory 4096 --swap 4096 --cores 8 --net0 name=eth0,bridge=vmbr0,firewall=0,gw=10.11.3.253,ip=10.11.3.8/24,ip6=dhcp,type=veth --rootfs sdb:40 --unprivileged 1 --ostype ubuntu --arch amd64
2025-11-26 23:37:05 - actions.create_container  - INFO - Setting container features...
2025-11-26 23:37:05 - services.ssh              - INFO - Running: pct set 3008 --features nesting=1,keyctl=1,fuse=1
2025-11-26 23:37:06 - actions.create_container  - INFO - Starting container 3008...
2025-11-26 23:37:06 - services.ssh              - INFO - Running: pct start 3008
2025-11-26 23:37:10 - actions.create_container  - INFO - Bringing up network interface...
2025-11-26 23:37:10 - services.pct              - INFO - Running in container 3008: ping -c 1 8.8.8.8
2025-11-26 23:37:10 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo cGluZyAtYyAxIDguOC44Ljg= | base64 -d | bash"
2025-11-26 23:37:11 - actions.create_container  - INFO - Network interface is up and reachable
2025-11-26 23:37:11 - services.pct              - INFO - Running in container 3008: id -u jaal >/dev/null 2>&1 || useradd -m -s /bin/bash -G sudo jaal
2025-11-26 23:37:11 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgfHwgdXNlcmFkZCAtbSAtcyAvYmluL2Jhc2ggLUcgc3VkbyBqYWFs | base64 -d | bash"
2025-11-26 23:37:12 - services.pct              - INFO - Running in container 3008: echo jaal:jaal123 | chpasswd
2025-11-26 23:37:12 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo ZWNobyBqYWFsOmphYWwxMjMgfCBjaHBhc3N3ZA== | base64 -d | bash"
2025-11-26 23:37:14 - actions.create_container  - INFO - Password set for user jaal
2025-11-26 23:37:14 - services.pct              - INFO - Running in container 3008: printf 'jaal ALL=(ALL) NOPASSWD: ALL
' > /etc/sudoers.d/jaal 2>&1
2025-11-26 23:37:14 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo cHJpbnRmICdqYWFsIEFMTD0oQUxMKSBOT1BBU1NXRDogQUxMCicgPiAvZXRjL3N1ZG9lcnMuZC9qYWFsIDI+JjE= | base64 -d | bash"
2025-11-26 23:37:15 - services.pct              - INFO - Running in container 3008: chmod 440 /etc/sudoers.d/jaal 2>&1
2025-11-26 23:37:15 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo Y2htb2QgNDQwIC9ldGMvc3Vkb2Vycy5kL2phYWwgMj4mMQ== | base64 -d | bash"
2025-11-26 23:37:16 - services.pct              - INFO - Running in container 3008: id -u jaal >/dev/null 2>&1 && echo 'exists' || echo 'missing'
2025-11-26 23:37:16 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyAnZXhpc3RzJyB8fCBlY2hvICdtaXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:37:17 - services.pct              - INFO - Running in container 3008: mkdir -p /home/jaal/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /home/jaal/.ssh/authorized_keys && chmod 600 /home/jaal/.ssh/authorized_keys && chown jaal:jaal /home/jaal/.ssh/authorized_keys && chown -R jaal:jaal /home/jaal/.ssh && chmod 700 /home/jaal/.ssh
2025-11-26 23:37:17 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo bWtkaXIgLXAgL2hvbWUvamFhbC8uc3NoICYmIGVjaG8gYzNOb0xYSnpZU0JCUVVGQlFqTk9lbUZETVhsak1rVkJRVUZCUkVGUlFVSkJRVUZDWjFGRVNHaHpaeTlTUWxNeFpXOW1aRUowVDIxU1oyNXJObkpSWlZkTU5XVkVRMEZHVWxsaGRHOXRiMjV4ZWxaUVNHNVZhRWRCVjB4M2NFRnBibFJMV1RCaWNtVkhOMUozWTFCNlUzazRaa1V6YkhCQmVHUTNaRFUxTVZOcmIzZFJUM3BNVHpGaGRWSlVka05IWjBkS1RVTlphSE5wVDFSRVpHYzBlVU5IWkdoMWRsUnNaMGN5VDNnNFkwTkZXVGt6VG5Ob05HSnFXRE50Tm13NVluQnhWMkZ0Wkd4WU5WSklOV0pNZVhCNk5XeHhMME5rTTJWVWNISkdXRU5uY1VwUFkxSlVMemRCTWxSeFJHVklTM1pGTTNwWlRUWjBaV2RyWlN0a1VXRmtUalF4Y21nNWMxa3pTME5ITUhGbVJqVTRkRzR5Umt4NlNuZzNNMGc1ZDFKSFpVTlhlRlJvY2tZMWQxTjZaM0pHUkVsWlIxUktWRTFWY1V0bllrcFdWbGxYV0M5aVdTOXVVVmRVT0ZaUE5tWk1lbWtyTUhCQlQzbzVNekZ4TkdWdVNIUlBOVFpVTkRSaVJYRjBabWMxWkZONE4ySk1SMGx5TlRaSWJXeHVNVWRJYUc5MVZTdDFOelpqVmxSWFQyOXFSRlkxVkRGWGMxSkJWSFE0WVVRNU1EZERhVGszUmxBdk5EWmpValY1U2xSNFlWUndLM0I0VjNCdGFESjNZVWRsUkZKRVYxRnpkRVZzU0c5VGFuUlFlVzkxZVZWMVYySXpNVzlVUW14ck9FdDNaMDlsY0RONk1UZHhLMWxKYUZwWFVVZElkbTFqVWt0SU1sQkJPVGhKVW5CcFNsWlNlbVk0YzFoS01HTmthMjkxUVRWWFFsTkVaV2RVYjBJMVZ6ZFJVRzFsYUVVOUlITm9ZV1J2ZDJOb1lXMWlaWEpBVTJoaFpHOTNZMmhoYldKbGNuTXRUV0ZqTFcxcGJta3ViRzlqWVd3PSB8IGJhc2U2NCAtZCA+IC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2htb2QgNjAwIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gLVIgamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaCAmJiBjaG1vZCA3MDAgL2hvbWUvamFhbC8uc3No | base64 -d | bash"
2025-11-26 23:37:18 - services.pct              - INFO - Running in container 3008: mkdir -p /root/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /root/.ssh/authorized_keys && chmod 600 /root/.ssh/authorized_keys
2025-11-26 23:37:18 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo bWtkaXIgLXAgL3Jvb3QvLnNzaCAmJiBlY2hvIGMzTm9MWEp6WVNCQlFVRkJRak5PZW1GRE1YbGpNa1ZCUVVGQlJFRlJRVUpCUVVGQ1oxRkVTR2h6Wnk5U1FsTXhaVzltWkVKMFQyMVNaMjVyTm5KUlpWZE1OV1ZFUTBGR1VsbGhkRzl0YjI1eGVsWlFTRzVWYUVkQlYweDNjRUZwYmxSTFdUQmljbVZITjFKM1kxQjZVM2s0WmtVemJIQkJlR1EzWkRVMU1WTnJiM2RSVDNwTVR6RmhkVkpVZGtOSFowZEtUVU5aYUhOcFQxUkVaR2MwZVVOSFpHaDFkbFJzWjBjeVQzZzRZME5GV1RrelRuTm9OR0pxV0ROdE5tdzVZbkJ4VjJGdFpHeFlOVkpJTldKTWVYQjZOV3h4TDBOa00yVlVjSEpHV0VObmNVcFBZMUpVTHpkQk1sUnhSR1ZJUzNaRk0zcFpUVFowWldkclpTdGtVV0ZrVGpReGNtZzVjMWt6UzBOSE1IRm1SalU0ZEc0eVJreDZTbmczTTBnNWQxSkhaVU5YZUZSb2NrWTFkMU42WjNKR1JFbFpSMVJLVkUxVmNVdG5Za3BXVmxsWFdDOWlXUzl1VVZkVU9GWlBObVpNZW1rck1IQkJUM281TXpGeE5HVnVTSFJQTlRaVU5EUmlSWEYwWm1jMVpGTjROMkpNUjBseU5UWkliV3h1TVVkSWFHOTFWU3QxTnpaalZsUlhUMjlxUkZZMVZERlhjMUpCVkhRNFlVUTVNRGREYVRrM1JsQXZORFpqVWpWNVNsUjRZVlJ3SzNCNFYzQnRhREozWVVkbFJGSkVWMUZ6ZEVWc1NHOVRhblJRZVc5MWVWVjFWMkl6TVc5VVFteHJPRXQzWjA5bGNETjZNVGR4SzFsSmFGcFhVVWRJZG0xalVrdElNbEJCT1RoSlVuQnBTbFpTZW1ZNGMxaEtNR05rYTI5MVFUVlhRbE5FWldkVWIwSTFWemRSVUcxbGFFVTlJSE5vWVdSdmQyTm9ZVzFpWlhKQVUyaGhaRzkzWTJoaGJXSmxjbk10VFdGakxXMXBibWt1Ykc5allXdz0gfCBiYXNlNjQgLWQgPiAvcm9vdC8uc3NoL2F1dGhvcml6ZWRfa2V5cyAmJiBjaG1vZCA2MDAgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXM= | base64 -d | bash"
2025-11-26 23:37:19 - services.pct              - INFO - Running in container 3008: test -f /home/jaal/.ssh/authorized_keys && test -f /root/.ssh/authorized_keys && echo 'keys_exist' || echo 'keys_missing'
2025-11-26 23:37:19 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo dGVzdCAtZiAvaG9tZS9qYWFsLy5zc2gvYXV0aG9yaXplZF9rZXlzICYmIHRlc3QgLWYgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgZWNobyAna2V5c19leGlzdCcgfHwgZWNobyAna2V5c19taXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:37:21 - services.pct              - INFO - SSH key setup verified successfully
2025-11-26 23:37:21 - services.pct              - INFO - Running in container 3008: dpkg -l | grep -q '^ii.*openssh-server' || echo 'not_installed'
2025-11-26 23:37:21 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo ZHBrZyAtbCB8IGdyZXAgLXEgJ15paS4qb3BlbnNzaC1zZXJ2ZXInIHx8IGVjaG8gJ25vdF9pbnN0YWxsZWQn | base64 -d | bash"
2025-11-26 23:37:22 - services.pct              - INFO - Running in container 3008: systemctl enable ssh 2>&1
2025-11-26 23:37:22 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 23:37:24 - services.pct              - INFO - Running in container 3008: systemctl start ssh 2>&1
2025-11-26 23:37:24 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 23:37:28 - services.pct              - INFO - Running in container 3008: systemctl is-active ssh 2>/dev/null || echo inactive
2025-11-26 23:37:28 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBzc2ggMj4vZGV2L251bGwgfHwgZWNobyBpbmFjdGl2ZQ== | base64 -d | bash"
2025-11-26 23:37:29 - services.pct              - INFO - SSH service is running
2025-11-26 23:37:29 - services.pct              - INFO - Running in container 3008: ss -tlnp | grep ':22 ' || netstat -tlnp 2>/dev/null | grep ':22 ' || echo 'not_listening'
2025-11-26 23:37:29 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo c3MgLXRsbnAgfCBncmVwICc6MjIgJyB8fCBuZXRzdGF0IC10bG5wIDI+L2Rldi9udWxsIHwgZ3JlcCAnOjIyICcgfHwgZWNobyAnbm90X2xpc3RlbmluZyc= | base64 -d | bash"
2025-11-26 23:37:30 - services.pct              - INFO - SSH listening check: LISTEN 0      4096         0.0.0.0:22        0.0.0.0:*    users:(("sshd",pid=157,fd=3),("systemd",pid=1,fd=116))
LISTEN 0      4096            [::]:22           [::]:*    users:(("sshd",pid=157,fd=4),("systemd",pid=1,fd=117))
2025-11-26 23:37:30 - services.pct              - INFO - Running in container 3008: grep -E '^ListenAddress|^#ListenAddress' /etc/ssh/sshd_config 2>/dev/null | head -5 || echo 'config_check_failed'
2025-11-26 23:37:30 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo Z3JlcCAtRSAnXkxpc3RlbkFkZHJlc3N8XiNMaXN0ZW5BZGRyZXNzJyAvZXRjL3NzaC9zc2hkX2NvbmZpZyAyPi9kZXYvbnVsbCB8IGhlYWQgLTUgfHwgZWNobyAnY29uZmlnX2NoZWNrX2ZhaWxlZCc= | base64 -d | bash"
2025-11-26 23:37:31 - services.pct              - INFO - SSH config check: #ListenAddress 0.0.0.0
#ListenAddress ::
2025-11-26 23:37:31 - services.pct              - INFO - Running in container 3008: timeout 1 bash -c '</dev/tcp/127.0.0.1/22' 2>&1 && echo 'localhost_ok' || echo 'localhost_failed'
2025-11-26 23:37:31 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo dGltZW91dCAxIGJhc2ggLWMgJzwvZGV2L3RjcC8xMjcuMC4wLjEvMjInIDI+JjEgJiYgZWNobyAnbG9jYWxob3N0X29rJyB8fCBlY2hvICdsb2NhbGhvc3RfZmFpbGVkJw== | base64 -d | bash"
2025-11-26 23:37:32 - services.pct              - INFO - SSH localhost connection test: localhost_ok
2025-11-26 23:37:32 - actions.create_container  - INFO - Waiting for container to be ready with SSH connectivity (up to 10 minutes)...
2025-11-26 23:37:32 - services.ssh              - INFO - Running: pct status 3008
2025-11-26 23:37:33 - services.pct              - INFO - Running in container 3008: echo test
2025-11-26 23:37:33 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo ZWNobyB0ZXN0 | base64 -d | bash"
2025-11-26 23:37:35 - services.pct              - INFO - Testing SSH connection to jaal@10.11.3.8...
2025-11-26 23:37:35 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:37:35 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:37:35 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.8
2025-11-26 23:37:35 - services.ssh              - INFO - Running: echo 'SSH connection test successful'
2025-11-26 23:37:35 - services.pct              - INFO - SSH connectivity verified - connection successful
2025-11-26 23:37:35 - services.pct              - INFO - Container is ready and SSH is accessible!
2025-11-26 23:37:35 - actions.create_container  - INFO - Container 3008 created successfully
2025-11-26 23:37:35 - commands.deploy           - INFO - Container 'docker-tmpl' created successfully
2025-11-26 23:37:35 - commands.deploy           - INFO - Setting up SSH connection to container docker-tmpl...
2025-11-26 23:37:36 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:37:36 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:37:36 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.8
2025-11-26 23:37:38 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:37:38 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:37:38 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:37:38 - commands.deploy           - INFO - ==================================================
2025-11-26 23:37:38 - commands.deploy           - INFO - [Overall: 36%] [Step: 20/55] Executing: docker-tmpl - Docker installation
2025-11-26 23:37:38 - commands.deploy           - INFO - ==================================================
2025-11-26 23:37:38 - actions.install_docker    - INFO - Installing Docker...
2025-11-26 23:37:38 - services.ssh              - INFO - Running: command -v curl
2025-11-26 23:37:38 - actions.install_docker    - INFO - Downloading Docker install script...
2025-11-26 23:37:38 - services.ssh              - INFO - Running: curl -f -s -S -L -o /tmp/get-docker.sh https://get.docker.com 2>&1
2025-11-26 23:37:38 - actions.install_docker    - INFO - Running Docker install script...
2025-11-26 23:37:38 - services.ssh              - INFO - Running: sh /tmp/get-docker.sh 2>&1
2025-11-26 23:38:03 - services.ssh              - INFO - Running: sudo -n bash -c 'command -v docker >/dev/null 2>&1 && echo installed || echo not_installed'
2025-11-26 23:38:03 - actions.install_docker    - INFO - Docker installed successfully via install script
2025-11-26 23:38:03 - commands.deploy           - INFO - Action 'Docker installation' for container 'docker-tmpl' completed successfully
2025-11-26 23:38:03 - commands.deploy           - INFO - ==================================================
2025-11-26 23:38:03 - commands.deploy           - INFO - [Overall: 38%] [Step: 21/55] Executing: docker-tmpl - Docker service start
2025-11-26 23:38:03 - commands.deploy           - INFO - ==================================================
2025-11-26 23:38:03 - actions.start_docker_service - INFO - Ensuring Docker service is running...
2025-11-26 23:38:03 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active docker 2>/dev/null || echo inactive'
2025-11-26 23:38:03 - actions.start_docker_service - INFO - Docker service already active, skipping start
2025-11-26 23:38:03 - commands.deploy           - INFO - Action 'Docker service start' for container 'docker-tmpl' completed successfully
2025-11-26 23:38:03 - commands.deploy           - INFO - ==================================================
2025-11-26 23:38:03 - commands.deploy           - INFO - [Overall: 40%] [Step: 22/55] Executing: docker-tmpl - template cleanup
2025-11-26 23:38:03 - commands.deploy           - INFO - ==================================================
2025-11-26 23:38:03 - services.pct              - INFO - Running in container 3008: rm -f /etc/apt/apt.conf.d/01proxy 2>&1
2025-11-26 23:38:03 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo cm0gLWYgL2V0Yy9hcHQvYXB0LmNvbmYuZC8wMXByb3h5IDI+JjE= | base64 -d | bash"
2025-11-26 23:38:04 - services.pct              - INFO - Running in container 3008: rm -f /etc/ssh/ssh_host_* 2>&1
2025-11-26 23:38:04 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo cm0gLWYgL2V0Yy9zc2gvc3NoX2hvc3RfKiAyPiYx | base64 -d | bash"
2025-11-26 23:38:05 - services.pct              - INFO - Running in container 3008: truncate -s 0 /etc/machine-id 2>&1
2025-11-26 23:38:05 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo dHJ1bmNhdGUgLXMgMCAvZXRjL21hY2hpbmUtaWQgMj4mMQ== | base64 -d | bash"
2025-11-26 23:38:07 - services.pct              - INFO - Running in container 3008: rm -f /var/lib/dbus/machine-id 2>&1
2025-11-26 23:38:07 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo cm0gLWYgL3Zhci9saWIvZGJ1cy9tYWNoaW5lLWlkIDI+JjE= | base64 -d | bash"
2025-11-26 23:38:08 - services.pct              - INFO - Running in container 3008: ln -s /etc/machine-id /var/lib/dbus/machine-id 2>&1
2025-11-26 23:38:08 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo bG4gLXMgL2V0Yy9tYWNoaW5lLWlkIC92YXIvbGliL2RidXMvbWFjaGluZS1pZCAyPiYx | base64 -d | bash"
2025-11-26 23:38:09 - services.pct              - INFO - Running in container 3008: rm -rf /var/lib/apt/lists/* 2>&1
2025-11-26 23:38:09 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo cm0gLXJmIC92YXIvbGliL2FwdC9saXN0cy8qIDI+JjE= | base64 -d | bash"
2025-11-26 23:38:10 - services.pct              - INFO - Running in container 3008: find /var/log -type f -name '*.log' -delete 2>/dev/null
2025-11-26 23:38:10 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo ZmluZCAvdmFyL2xvZyAtdHlwZSBmIC1uYW1lICcqLmxvZycgLWRlbGV0ZSAyPi9kZXYvbnVsbA== | base64 -d | bash"
2025-11-26 23:38:11 - services.pct              - INFO - Running in container 3008: find /var/log -type f -name '*.gz' -delete 2>/dev/null
2025-11-26 23:38:11 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo ZmluZCAvdmFyL2xvZyAtdHlwZSBmIC1uYW1lICcqLmd6JyAtZGVsZXRlIDI+L2Rldi9udWxs | base64 -d | bash"
2025-11-26 23:38:12 - services.pct              - INFO - Running in container 3008: truncate -s 0 /root/.bash_history 2>/dev/null
2025-11-26 23:38:12 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo dHJ1bmNhdGUgLXMgMCAvcm9vdC8uYmFzaF9oaXN0b3J5IDI+L2Rldi9udWxs | base64 -d | bash"
2025-11-26 23:38:14 - services.pct              - INFO - Running in container 3008: truncate -s 0 /home/jaal/.bash_history 2>/dev/null
2025-11-26 23:38:14 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo dHJ1bmNhdGUgLXMgMCAvaG9tZS9qYWFsLy5iYXNoX2hpc3RvcnkgMj4vZGV2L251bGw= | base64 -d | bash"
2025-11-26 23:38:15 - services.pct              - INFO - Running in container 3008: apt clean
2025-11-26 23:38:15 - services.ssh              - INFO - Running: pct exec 3008 -- bash -c "echo YXB0IGNsZWFu | base64 -d | bash"
2025-11-26 23:38:16 - commands.deploy           - INFO - Action 'template cleanup' for container 'docker-tmpl' completed successfully
2025-11-26 23:38:16 - commands.deploy           - INFO - ==================================================
2025-11-26 23:38:16 - commands.deploy           - INFO - [Overall: 41%] [Step: 23/55] Executing: docker-tmpl - template archive creation
2025-11-26 23:38:16 - commands.deploy           - INFO - ==================================================
2025-11-26 23:38:16 - actions.create_template_archive - INFO - Stopping container...
2025-11-26 23:38:16 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:38:16 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:38:16 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:38:16 - services.ssh              - INFO - Running: pct stop 3008 2>&1
2025-11-26 23:38:22 - actions.create_template_archive - INFO - Creating template archive for container 3008 in directory /var/lib/vz/template/cache
2025-11-26 23:38:22 - actions.create_template_archive - INFO - Executing vzdump command: vzdump 3008 --dumpdir /var/lib/vz/template/cache --compress zstd --mode stop 2>&1
2025-11-26 23:38:22 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:38:22 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:38:22 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:38:22 - services.ssh              - INFO - Running: vzdump 3008 --dumpdir /var/lib/vz/template/cache --compress zstd --mode stop 2>&1
2025-11-26 23:38:34 - actions.create_template_archive - INFO - vzdump output (first 500 chars): INFO: starting new backup job: vzdump 3008 --dumpdir /var/lib/vz/template/cache --mode stop --compress zstd
INFO: Starting Backup of VM 3008 (lxc)
INFO: Backup started at 2025-11-26 22:38:24
INFO: status = stopped
INFO: backup mode: stop
INFO: ionice priority: 7
INFO: CT Name: docker-tmpl
INFO: including mount point rootfs ('/') in backup
INFO: creating vzdump archive '/var/lib/vz/template/cache/vzdump-lxc-3008-2025_11_26-22_38_24.tar.zst'
INFO: Total bytes written: 1082040320 (1.1GiB, 
2025-11-26 23:38:34 - actions.create_template_archive - INFO - Waiting for template archive to be ready (max 120 seconds)...
2025-11-26 23:38:36 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:38:36 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:38:36 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:38:36 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/vzdump-lxc-3008-*.tar.zst 2>/dev/null | head -1
2025-11-26 23:38:37 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:38:37 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:38:37 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:38:37 - services.ssh              - INFO - Running: stat -c%s '/var/lib/vz/template/cache/vzdump-lxc-3008-2025_11_26-22_38_24.tar.zst' 2>/dev/null || echo '0'
2025-11-26 23:38:39 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:38:39 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:38:39 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:38:39 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/vzdump-lxc-3008-*.tar.zst 2>/dev/null | head -1
2025-11-26 23:38:40 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:38:40 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:38:40 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:38:40 - services.ssh              - INFO - Running: stat -c%s '/var/lib/vz/template/cache/vzdump-lxc-3008-2025_11_26-22_38_24.tar.zst' 2>/dev/null || echo '0'
2025-11-26 23:38:42 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:38:42 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:38:42 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:38:42 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/vzdump-lxc-3008-*.tar.zst 2>/dev/null | head -1
2025-11-26 23:38:43 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:38:43 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:38:43 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:38:43 - services.ssh              - INFO - Running: stat -c%s '/var/lib/vz/template/cache/vzdump-lxc-3008-2025_11_26-22_38_24.tar.zst' 2>/dev/null || echo '0'
2025-11-26 23:38:45 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:38:45 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:38:45 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:38:45 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/vzdump-lxc-3008-*.tar.zst 2>/dev/null | head -1
2025-11-26 23:38:46 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:38:46 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:38:46 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:38:46 - services.ssh              - INFO - Running: stat -c%s '/var/lib/vz/template/cache/vzdump-lxc-3008-2025_11_26-22_38_24.tar.zst' 2>/dev/null || echo '0'
2025-11-26 23:38:46 - actions.create_template_archive - INFO - Template archive file found: /var/lib/vz/template/cache/vzdump-lxc-3008-2025_11_26-22_38_24.tar.zst
2025-11-26 23:38:46 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:38:46 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:38:46 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:38:46 - services.ssh              - INFO - Running: stat -c%s '/var/lib/vz/template/cache/vzdump-lxc-3008-2025_11_26-22_38_24.tar.zst' 2>/dev/null || echo '0'
2025-11-26 23:38:46 - actions.create_template_archive - INFO - Template archive size: 312.80 MB
2025-11-26 23:38:46 - actions.create_template_archive - INFO - Template type: ubuntu+docker
2025-11-26 23:38:46 - actions.create_template_archive - INFO - Template pattern: docker-ubuntu25.04-template_{date}_amd64.tar.zst
2025-11-26 23:38:46 - actions.create_template_archive - INFO - Final template name: docker-ubuntu25.04-template_20251126_amd64.tar.zst
2025-11-26 23:38:46 - actions.create_template_archive - INFO - Moving template from /var/lib/vz/template/cache/vzdump-lxc-3008-2025_11_26-22_38_24.tar.zst to /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst
2025-11-26 23:38:47 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:38:47 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:38:47 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:38:47 - services.ssh              - INFO - Running: mv '/var/lib/vz/template/cache/vzdump-lxc-3008-2025_11_26-22_38_24.tar.zst' /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst 2>&1
2025-11-26 23:38:47 - actions.create_template_archive - INFO - Template moved to storage location: /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst
2025-11-26 23:38:47 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:38:47 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:38:47 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:38:47 - services.ssh              - INFO - Running: pveam update 2>&1
2025-11-26 23:38:50 - actions.create_template_archive - INFO - Cleaning up other template archives...
2025-11-26 23:38:50 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:38:50 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:38:50 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:38:50 - services.ssh              - INFO - Running: find /var/lib/vz/template/cache -maxdepth 1 -type f -name '*.tar.zst' ! -name 'docker-ubuntu25.04-template_20251126_amd64.tar.zst' ! -name 'ubuntu-24.10-standard_24.10-1_amd64.tar.zst' ! -name 'ubuntu-25.04-template_*.tar.zst' ! -name 'docker-ubuntu25.04-template_*.tar.zst' -delete 2>&1
2025-11-26 23:38:51 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:38:51 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:38:51 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:38:51 - services.ssh              - INFO - Running: find /var/lib/vz/template/cache -maxdepth 1 -type f -name '*.tar.zst' ! -name 'docker-ubuntu25.04-template_20251126_amd64.tar.zst' ! -name 'ubuntu-24.10-standard_24.10-1_amd64.tar.zst' ! -name 'ubuntu-25.04-template_*.tar.zst' ! -name 'docker-ubuntu25.04-template_*.tar.zst' ! -name 'ubuntu-24.10-standard_24.10-1_amd64.tar.zst' -delete 2>&1
2025-11-26 23:38:51 - services.ssh              - INFO - Running: pct list | grep '^3008 ' || echo 'not_found'
2025-11-26 23:38:52 - libs.common               - INFO - Stopping and destroying container 3008...
2025-11-26 23:38:52 - services.ssh              - INFO - Running: pct stop 3008 2>/dev/null || true; sleep 2; pct destroy 3008 2>&1
2025-11-26 23:38:57 - services.ssh              - INFO - Running: pct list | grep '^3008 ' || echo 'not_found'
2025-11-26 23:38:58 - libs.common               - INFO - Container 3008 destroyed
2025-11-26 23:38:58 - actions.create_template_archive - INFO - Container 3008 destroyed after template archive creation
2025-11-26 23:38:58 - commands.deploy           - INFO - Action 'template archive creation' for container 'docker-tmpl' completed successfully
2025-11-26 23:38:58 - commands.deploy           - INFO - ==================================================
2025-11-26 23:38:58 - commands.deploy           - INFO - [Overall: 43%] [Step: 24/55] Executing: pgsql - create container
2025-11-26 23:38:58 - commands.deploy           - INFO - ==================================================
2025-11-26 23:38:58 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:38:58 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:38:58 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:38:58 - services.ssh              - INFO - Running: pct destroy 3018 --force
2025-11-26 23:38:59 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/ubuntu-25.04-template_*_amd64.tar.zst 2>/dev/null | head -1 | xargs basename 2>/dev/null
2025-11-26 23:38:59 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/ubuntu-25.04-template_20251126_amd64.tar.zst && test -r /var/lib/vz/template/cache/ubuntu-25.04-template_20251126_amd64.tar.zst && echo 'valid' || echo 'invalid'
2025-11-26 23:38:59 - actions.create_container  - INFO - Checking if container 3018 already exists...
2025-11-26 23:39:00 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:39:00 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:39:00 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:39:00 - services.ssh              - INFO - Running: pct list | grep '^3018 '
2025-11-26 23:39:01 - actions.create_container  - INFO - Creating container 3018 from template...
2025-11-26 23:39:01 - services.ssh              - INFO - Running: pct create 3018 /var/lib/vz/template/cache/ubuntu-25.04-template_20251126_amd64.tar.zst --hostname pgsql --memory 2048 --swap 2048 --cores 2 --net0 name=eth0,bridge=vmbr0,firewall=0,gw=10.11.3.253,ip=10.11.3.18/24,ip6=dhcp,type=veth --rootfs sdb:30 --unprivileged 1 --ostype ubuntu --arch amd64
2025-11-26 23:39:08 - actions.create_container  - INFO - Setting container features...
2025-11-26 23:39:08 - services.ssh              - INFO - Running: pct set 3018 --features nesting=1,keyctl=1,fuse=1
2025-11-26 23:39:09 - actions.create_container  - INFO - Starting container 3018...
2025-11-26 23:39:09 - services.ssh              - INFO - Running: pct start 3018
2025-11-26 23:39:13 - actions.create_container  - INFO - Bringing up network interface...
2025-11-26 23:39:13 - services.pct              - INFO - Running in container 3018: ping -c 1 8.8.8.8
2025-11-26 23:39:13 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo cGluZyAtYyAxIDguOC44Ljg= | base64 -d | bash"
2025-11-26 23:39:14 - actions.create_container  - INFO - Network interface is up and reachable
2025-11-26 23:39:14 - services.pct              - INFO - Running in container 3018: id -u jaal >/dev/null 2>&1 || useradd -m -s /bin/bash -G sudo jaal
2025-11-26 23:39:14 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgfHwgdXNlcmFkZCAtbSAtcyAvYmluL2Jhc2ggLUcgc3VkbyBqYWFs | base64 -d | bash"
2025-11-26 23:39:15 - services.pct              - INFO - Running in container 3018: echo jaal:jaal123 | chpasswd
2025-11-26 23:39:15 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo ZWNobyBqYWFsOmphYWwxMjMgfCBjaHBhc3N3ZA== | base64 -d | bash"
2025-11-26 23:39:16 - actions.create_container  - INFO - Password set for user jaal
2025-11-26 23:39:16 - services.pct              - INFO - Running in container 3018: printf 'jaal ALL=(ALL) NOPASSWD: ALL
' > /etc/sudoers.d/jaal 2>&1
2025-11-26 23:39:16 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo cHJpbnRmICdqYWFsIEFMTD0oQUxMKSBOT1BBU1NXRDogQUxMCicgPiAvZXRjL3N1ZG9lcnMuZC9qYWFsIDI+JjE= | base64 -d | bash"
2025-11-26 23:39:18 - services.pct              - INFO - Running in container 3018: chmod 440 /etc/sudoers.d/jaal 2>&1
2025-11-26 23:39:18 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo Y2htb2QgNDQwIC9ldGMvc3Vkb2Vycy5kL2phYWwgMj4mMQ== | base64 -d | bash"
2025-11-26 23:39:19 - services.pct              - INFO - Running in container 3018: id -u jaal >/dev/null 2>&1 && echo 'exists' || echo 'missing'
2025-11-26 23:39:19 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyAnZXhpc3RzJyB8fCBlY2hvICdtaXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:39:20 - services.pct              - INFO - Running in container 3018: mkdir -p /home/jaal/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /home/jaal/.ssh/authorized_keys && chmod 600 /home/jaal/.ssh/authorized_keys && chown jaal:jaal /home/jaal/.ssh/authorized_keys && chown -R jaal:jaal /home/jaal/.ssh && chmod 700 /home/jaal/.ssh
2025-11-26 23:39:20 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo bWtkaXIgLXAgL2hvbWUvamFhbC8uc3NoICYmIGVjaG8gYzNOb0xYSnpZU0JCUVVGQlFqTk9lbUZETVhsak1rVkJRVUZCUkVGUlFVSkJRVUZDWjFGRVNHaHpaeTlTUWxNeFpXOW1aRUowVDIxU1oyNXJObkpSWlZkTU5XVkVRMEZHVWxsaGRHOXRiMjV4ZWxaUVNHNVZhRWRCVjB4M2NFRnBibFJMV1RCaWNtVkhOMUozWTFCNlUzazRaa1V6YkhCQmVHUTNaRFUxTVZOcmIzZFJUM3BNVHpGaGRWSlVka05IWjBkS1RVTlphSE5wVDFSRVpHYzBlVU5IWkdoMWRsUnNaMGN5VDNnNFkwTkZXVGt6VG5Ob05HSnFXRE50Tm13NVluQnhWMkZ0Wkd4WU5WSklOV0pNZVhCNk5XeHhMME5rTTJWVWNISkdXRU5uY1VwUFkxSlVMemRCTWxSeFJHVklTM1pGTTNwWlRUWjBaV2RyWlN0a1VXRmtUalF4Y21nNWMxa3pTME5ITUhGbVJqVTRkRzR5Umt4NlNuZzNNMGc1ZDFKSFpVTlhlRlJvY2tZMWQxTjZaM0pHUkVsWlIxUktWRTFWY1V0bllrcFdWbGxYV0M5aVdTOXVVVmRVT0ZaUE5tWk1lbWtyTUhCQlQzbzVNekZ4TkdWdVNIUlBOVFpVTkRSaVJYRjBabWMxWkZONE4ySk1SMGx5TlRaSWJXeHVNVWRJYUc5MVZTdDFOelpqVmxSWFQyOXFSRlkxVkRGWGMxSkJWSFE0WVVRNU1EZERhVGszUmxBdk5EWmpValY1U2xSNFlWUndLM0I0VjNCdGFESjNZVWRsUkZKRVYxRnpkRVZzU0c5VGFuUlFlVzkxZVZWMVYySXpNVzlVUW14ck9FdDNaMDlsY0RONk1UZHhLMWxKYUZwWFVVZElkbTFqVWt0SU1sQkJPVGhKVW5CcFNsWlNlbVk0YzFoS01HTmthMjkxUVRWWFFsTkVaV2RVYjBJMVZ6ZFJVRzFsYUVVOUlITm9ZV1J2ZDJOb1lXMWlaWEpBVTJoaFpHOTNZMmhoYldKbGNuTXRUV0ZqTFcxcGJta3ViRzlqWVd3PSB8IGJhc2U2NCAtZCA+IC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2htb2QgNjAwIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gLVIgamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaCAmJiBjaG1vZCA3MDAgL2hvbWUvamFhbC8uc3No | base64 -d | bash"
2025-11-26 23:39:21 - services.pct              - INFO - Running in container 3018: mkdir -p /root/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /root/.ssh/authorized_keys && chmod 600 /root/.ssh/authorized_keys
2025-11-26 23:39:21 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo bWtkaXIgLXAgL3Jvb3QvLnNzaCAmJiBlY2hvIGMzTm9MWEp6WVNCQlFVRkJRak5PZW1GRE1YbGpNa1ZCUVVGQlJFRlJRVUpCUVVGQ1oxRkVTR2h6Wnk5U1FsTXhaVzltWkVKMFQyMVNaMjVyTm5KUlpWZE1OV1ZFUTBGR1VsbGhkRzl0YjI1eGVsWlFTRzVWYUVkQlYweDNjRUZwYmxSTFdUQmljbVZITjFKM1kxQjZVM2s0WmtVemJIQkJlR1EzWkRVMU1WTnJiM2RSVDNwTVR6RmhkVkpVZGtOSFowZEtUVU5aYUhOcFQxUkVaR2MwZVVOSFpHaDFkbFJzWjBjeVQzZzRZME5GV1RrelRuTm9OR0pxV0ROdE5tdzVZbkJ4VjJGdFpHeFlOVkpJTldKTWVYQjZOV3h4TDBOa00yVlVjSEpHV0VObmNVcFBZMUpVTHpkQk1sUnhSR1ZJUzNaRk0zcFpUVFowWldkclpTdGtVV0ZrVGpReGNtZzVjMWt6UzBOSE1IRm1SalU0ZEc0eVJreDZTbmczTTBnNWQxSkhaVU5YZUZSb2NrWTFkMU42WjNKR1JFbFpSMVJLVkUxVmNVdG5Za3BXVmxsWFdDOWlXUzl1VVZkVU9GWlBObVpNZW1rck1IQkJUM281TXpGeE5HVnVTSFJQTlRaVU5EUmlSWEYwWm1jMVpGTjROMkpNUjBseU5UWkliV3h1TVVkSWFHOTFWU3QxTnpaalZsUlhUMjlxUkZZMVZERlhjMUpCVkhRNFlVUTVNRGREYVRrM1JsQXZORFpqVWpWNVNsUjRZVlJ3SzNCNFYzQnRhREozWVVkbFJGSkVWMUZ6ZEVWc1NHOVRhblJRZVc5MWVWVjFWMkl6TVc5VVFteHJPRXQzWjA5bGNETjZNVGR4SzFsSmFGcFhVVWRJZG0xalVrdElNbEJCT1RoSlVuQnBTbFpTZW1ZNGMxaEtNR05rYTI5MVFUVlhRbE5FWldkVWIwSTFWemRSVUcxbGFFVTlJSE5vWVdSdmQyTm9ZVzFpWlhKQVUyaGhaRzkzWTJoaGJXSmxjbk10VFdGakxXMXBibWt1Ykc5allXdz0gfCBiYXNlNjQgLWQgPiAvcm9vdC8uc3NoL2F1dGhvcml6ZWRfa2V5cyAmJiBjaG1vZCA2MDAgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXM= | base64 -d | bash"
2025-11-26 23:39:22 - services.pct              - INFO - Running in container 3018: test -f /home/jaal/.ssh/authorized_keys && test -f /root/.ssh/authorized_keys && echo 'keys_exist' || echo 'keys_missing'
2025-11-26 23:39:22 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo dGVzdCAtZiAvaG9tZS9qYWFsLy5zc2gvYXV0aG9yaXplZF9rZXlzICYmIHRlc3QgLWYgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgZWNobyAna2V5c19leGlzdCcgfHwgZWNobyAna2V5c19taXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:39:23 - services.pct              - INFO - SSH key setup verified successfully
2025-11-26 23:39:23 - services.pct              - INFO - Running in container 3018: dpkg -l | grep -q '^ii.*openssh-server' || echo 'not_installed'
2025-11-26 23:39:23 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo ZHBrZyAtbCB8IGdyZXAgLXEgJ15paS4qb3BlbnNzaC1zZXJ2ZXInIHx8IGVjaG8gJ25vdF9pbnN0YWxsZWQn | base64 -d | bash"
2025-11-26 23:39:24 - services.pct              - INFO - Running in container 3018: systemctl enable ssh 2>&1
2025-11-26 23:39:24 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 23:39:26 - services.pct              - INFO - Running in container 3018: systemctl start ssh 2>&1
2025-11-26 23:39:26 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 23:39:30 - services.pct              - INFO - Running in container 3018: systemctl is-active ssh 2>/dev/null || echo inactive
2025-11-26 23:39:30 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBzc2ggMj4vZGV2L251bGwgfHwgZWNobyBpbmFjdGl2ZQ== | base64 -d | bash"
2025-11-26 23:39:32 - services.pct              - INFO - SSH service is running
2025-11-26 23:39:32 - services.pct              - INFO - Running in container 3018: ss -tlnp | grep ':22 ' || netstat -tlnp 2>/dev/null | grep ':22 ' || echo 'not_listening'
2025-11-26 23:39:32 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo c3MgLXRsbnAgfCBncmVwICc6MjIgJyB8fCBuZXRzdGF0IC10bG5wIDI+L2Rldi9udWxsIHwgZ3JlcCAnOjIyICcgfHwgZWNobyAnbm90X2xpc3RlbmluZyc= | base64 -d | bash"
2025-11-26 23:39:33 - services.pct              - INFO - SSH listening check: LISTEN 0      4096         0.0.0.0:22        0.0.0.0:*    users:(("sshd",pid=164,fd=3),("systemd",pid=1,fd=112))
LISTEN 0      4096            [::]:22           [::]:*    users:(("sshd",pid=164,fd=4),("systemd",pid=1,fd=113))
2025-11-26 23:39:33 - services.pct              - INFO - Running in container 3018: grep -E '^ListenAddress|^#ListenAddress' /etc/ssh/sshd_config 2>/dev/null | head -5 || echo 'config_check_failed'
2025-11-26 23:39:33 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo Z3JlcCAtRSAnXkxpc3RlbkFkZHJlc3N8XiNMaXN0ZW5BZGRyZXNzJyAvZXRjL3NzaC9zc2hkX2NvbmZpZyAyPi9kZXYvbnVsbCB8IGhlYWQgLTUgfHwgZWNobyAnY29uZmlnX2NoZWNrX2ZhaWxlZCc= | base64 -d | bash"
2025-11-26 23:39:34 - services.pct              - INFO - SSH config check: #ListenAddress 0.0.0.0
#ListenAddress ::
2025-11-26 23:39:34 - services.pct              - INFO - Running in container 3018: timeout 1 bash -c '</dev/tcp/127.0.0.1/22' 2>&1 && echo 'localhost_ok' || echo 'localhost_failed'
2025-11-26 23:39:34 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo dGltZW91dCAxIGJhc2ggLWMgJzwvZGV2L3RjcC8xMjcuMC4wLjEvMjInIDI+JjEgJiYgZWNobyAnbG9jYWxob3N0X29rJyB8fCBlY2hvICdsb2NhbGhvc3RfZmFpbGVkJw== | base64 -d | bash"
2025-11-26 23:39:35 - services.pct              - INFO - SSH localhost connection test: localhost_ok
2025-11-26 23:39:35 - actions.create_container  - INFO - Waiting for container to be ready with SSH connectivity (up to 10 minutes)...
2025-11-26 23:39:35 - services.ssh              - INFO - Running: pct status 3018
2025-11-26 23:39:36 - services.pct              - INFO - Running in container 3018: echo test
2025-11-26 23:39:36 - services.ssh              - INFO - Running: pct exec 3018 -- bash -c "echo ZWNobyB0ZXN0 | base64 -d | bash"
2025-11-26 23:39:37 - services.pct              - INFO - Testing SSH connection to jaal@10.11.3.18...
2025-11-26 23:39:38 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:39:38 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:39:38 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.18
2025-11-26 23:39:38 - services.ssh              - INFO - Running: echo 'SSH connection test successful'
2025-11-26 23:39:38 - services.pct              - INFO - SSH connectivity verified - connection successful
2025-11-26 23:39:38 - services.pct              - INFO - Container is ready and SSH is accessible!
2025-11-26 23:39:38 - actions.create_container  - INFO - Container 3018 created successfully
2025-11-26 23:39:38 - commands.deploy           - INFO - Container 'pgsql' created successfully
2025-11-26 23:39:38 - commands.deploy           - INFO - Setting up SSH connection to container pgsql...
2025-11-26 23:39:38 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:39:38 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:39:38 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.18
2025-11-26 23:39:41 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:39:41 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:39:41 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:39:41 - commands.deploy           - INFO - ==================================================
2025-11-26 23:39:41 - commands.deploy           - INFO - [Overall: 45%] [Step: 25/55] Executing: pgsql - cloud-init wait
2025-11-26 23:39:41 - commands.deploy           - INFO - ==================================================
2025-11-26 23:39:41 - services.ssh              - INFO - Running: command -v cloud-init
2025-11-26 23:39:41 - actions.cloud_init_wait   - INFO - cloud-init not found, skipping
2025-11-26 23:39:41 - commands.deploy           - INFO - Action 'cloud-init wait' for container 'pgsql' completed successfully
2025-11-26 23:39:41 - commands.deploy           - INFO - ==================================================
2025-11-26 23:39:41 - commands.deploy           - INFO - [Overall: 47%] [Step: 26/55] Executing: pgsql - postgresql installation
2025-11-26 23:39:41 - commands.deploy           - INFO - ==================================================
2025-11-26 23:39:41 - actions.install_postgresql - INFO - Installing PostgreSQL 17 package...
2025-11-26 23:39:41 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:39:41 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:39:41 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:39:41 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:39:41 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:39:41 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:39:42 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:39:42 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:39:42 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:39:42 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:39:42 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:39:42 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:39:42 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:39:42 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:39:42 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:39:43 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:39:43 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:39:43 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:39:43 - services.ssh              - INFO - Running: sudo -n apt-get update -o APT::Get::Hide-Progress=true < /dev/null
2025-11-26 23:39:49 - services.apt              - INFO - apt update succeeded on attempt 1/20
2025-11-26 23:39:49 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:39:49 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:39:49 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:39:49 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:39:49 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:39:49 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:39:49 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:39:49 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:39:50 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:39:50 - services.ssh              - INFO - Running: sudo -n apt install -y -o APT::Get::Hide-Progress=true postgresql-17 postgresql-contrib
2025-11-26 23:40:08 - commands.deploy           - INFO - Action 'postgresql installation' for container 'pgsql' completed successfully
2025-11-26 23:40:08 - commands.deploy           - INFO - ==================================================
2025-11-26 23:40:08 - commands.deploy           - INFO - [Overall: 49%] [Step: 27/55] Executing: pgsql - postgresql service configuration
2025-11-26 23:40:08 - commands.deploy           - INFO - ==================================================
2025-11-26 23:40:08 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl enable postgresql@17-main && systemctl start postgresql@17-main 2>&1'
2025-11-26 23:40:19 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active postgresql@17-main 2>/dev/null || echo inactive'
2025-11-26 23:40:19 - services.ssh              - INFO - Running: sudo -n bash -c 'ss -tlnp | grep :5432 | grep -v '"'"'127.0.0.1'"'"' || echo '"'"'not_listening'"'"''
2025-11-26 23:40:19 - actions.configure_postgres_service - INFO - PostgreSQL is listening on all interfaces
2025-11-26 23:40:19 - commands.deploy           - INFO - Action 'postgresql service configuration' for container 'pgsql' completed successfully
2025-11-26 23:40:19 - commands.deploy           - INFO - ==================================================
2025-11-26 23:40:19 - commands.deploy           - INFO - [Overall: 50%] [Step: 28/55] Executing: pgsql - postgresql files configuration
2025-11-26 23:40:19 - commands.deploy           - INFO - ==================================================
2025-11-26 23:40:19 - services.ssh              - INFO - Running: sudo -n bash -c 'sed -i '"'"'/^#*listen_addresses.*/d'"'"' /etc/postgresql/17/main/postgresql.conf'
2025-11-26 23:40:19 - services.ssh              - INFO - Running: sudo -n bash -c 'grep -q '"'"'^listen_addresses ='"'"' /etc/postgresql/17/main/postgresql.conf && echo exists || echo not_exists'
2025-11-26 23:40:19 - services.ssh              - INFO - Running: sudo -n bash -c 'grep -n '"'"'^# CONNECTIONS AND AUTHENTICATION'"'"' /etc/postgresql/17/main/postgresql.conf | cut -d: -f1'
2025-11-26 23:40:19 - services.ssh              - INFO - Running: sudo -n bash -c 'echo YXdrIC12IG49NTUgLXYgcz0ibGlzdGVuX2FkZHJlc3NlcyA9ICcqJyIgJ05SPT1uIHtwcmludDsgcHJpbnQgczsgbmV4dH0xJyAvZXRjL3Bvc3RncmVzcWwvMTcvbWFpbi9wb3N0Z3Jlc3FsLmNvbmYgPiAvZXRjL3Bvc3RncmVzcWwvMTcvbWFpbi9wb3N0Z3Jlc3FsLmNvbmYudG1wICYmIG12IC9ldGMvcG9zdGdyZXNxbC8xNy9tYWluL3Bvc3RncmVzcWwuY29uZi50bXAgL2V0Yy9wb3N0Z3Jlc3FsLzE3L21haW4vcG9zdGdyZXNxbC5jb25mCg== | base64 -d | bash'
2025-11-26 23:40:19 - services.ssh              - INFO - Running: sudo -n bash -c 'sed -i '"'"'s/^#?port.*/port = 5432/'"'"' /etc/postgresql/17/main/postgresql.conf 2>&1'
2025-11-26 23:40:19 - services.ssh              - INFO - Running: sudo -n bash -c 'echo cHJpbnRmICdsb2NhbCBhbGwgYWxsIHBlZXIKaG9zdCBhbGwgYWxsIDEwLjExLjMuMC8yNCBtZDUKJyA+IC9ldGMvcG9zdGdyZXNxbC8xNy9tYWluL3BnX2hiYS5jb25mIDI+JjE= | base64 -d | bash'
2025-11-26 23:40:19 - actions.configure_postgres_files - INFO - Restarting PostgreSQL to apply configuration changes...
2025-11-26 23:40:19 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl restart postgresql@17-main 2>&1'
2025-11-26 23:40:25 - services.ssh              - INFO - Running: sudo -n bash -c 'ss -tlnp | grep :5432 | grep -v '"'"'127.0.0.1'"'"' || echo '"'"'not_listening'"'"''
2025-11-26 23:40:25 - actions.configure_postgres_files - INFO - PostgreSQL is listening on all interfaces after restart
2025-11-26 23:40:25 - commands.deploy           - INFO - Action 'postgresql files configuration' for container 'pgsql' completed successfully
2025-11-26 23:40:25 - commands.deploy           - INFO - ==================================================
2025-11-26 23:40:25 - commands.deploy           - INFO - [Overall: 52%] [Step: 29/55] Executing: pgsql - postgresql password setup
2025-11-26 23:40:25 - commands.deploy           - INFO - ==================================================
2025-11-26 23:40:25 - services.ssh              - INFO - Running: sudo -n -u postgres psql -c "ALTER USER postgres WITH PASSWORD 'postgres';" 2>&1
2025-11-26 23:40:25 - commands.deploy           - INFO - Action 'postgresql password setup' for container 'pgsql' completed successfully
2025-11-26 23:40:25 - commands.deploy           - INFO - ==================================================
2025-11-26 23:40:25 - commands.deploy           - INFO - [Overall: 54%] [Step: 30/55] Executing: haproxy - create container
2025-11-26 23:40:25 - commands.deploy           - INFO - ==================================================
2025-11-26 23:40:25 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:40:26 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:40:26 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:40:26 - services.ssh              - INFO - Running: pct destroy 3017 --force
2025-11-26 23:40:27 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/ubuntu-25.04-template_*_amd64.tar.zst 2>/dev/null | head -1 | xargs basename 2>/dev/null
2025-11-26 23:40:27 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/ubuntu-25.04-template_20251126_amd64.tar.zst && test -r /var/lib/vz/template/cache/ubuntu-25.04-template_20251126_amd64.tar.zst && echo 'valid' || echo 'invalid'
2025-11-26 23:40:27 - actions.create_container  - INFO - Checking if container 3017 already exists...
2025-11-26 23:40:27 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:40:27 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:40:27 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:40:27 - services.ssh              - INFO - Running: pct list | grep '^3017 '
2025-11-26 23:40:28 - actions.create_container  - INFO - Creating container 3017 from template...
2025-11-26 23:40:28 - services.ssh              - INFO - Running: pct create 3017 /var/lib/vz/template/cache/ubuntu-25.04-template_20251126_amd64.tar.zst --hostname haproxy --memory 1024 --swap 1024 --cores 2 --net0 name=eth0,bridge=vmbr0,firewall=0,gw=10.11.3.253,ip=10.11.3.17/24,ip6=dhcp,type=veth --rootfs sdb:10 --unprivileged 1 --ostype ubuntu --arch amd64
2025-11-26 23:40:35 - actions.create_container  - INFO - Setting container features...
2025-11-26 23:40:35 - services.ssh              - INFO - Running: pct set 3017 --features nesting=1,keyctl=1,fuse=1
2025-11-26 23:40:36 - actions.create_container  - INFO - Starting container 3017...
2025-11-26 23:40:36 - services.ssh              - INFO - Running: pct start 3017
2025-11-26 23:40:40 - actions.create_container  - INFO - Bringing up network interface...
2025-11-26 23:40:40 - services.pct              - INFO - Running in container 3017: ping -c 1 8.8.8.8
2025-11-26 23:40:40 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo cGluZyAtYyAxIDguOC44Ljg= | base64 -d | bash"
2025-11-26 23:40:41 - actions.create_container  - INFO - Network interface is up and reachable
2025-11-26 23:40:41 - services.pct              - INFO - Running in container 3017: id -u jaal >/dev/null 2>&1 || useradd -m -s /bin/bash -G sudo jaal
2025-11-26 23:40:41 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgfHwgdXNlcmFkZCAtbSAtcyAvYmluL2Jhc2ggLUcgc3VkbyBqYWFs | base64 -d | bash"
2025-11-26 23:40:42 - services.pct              - INFO - Running in container 3017: echo jaal:jaal123 | chpasswd
2025-11-26 23:40:42 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo ZWNobyBqYWFsOmphYWwxMjMgfCBjaHBhc3N3ZA== | base64 -d | bash"
2025-11-26 23:40:43 - actions.create_container  - INFO - Password set for user jaal
2025-11-26 23:40:43 - services.pct              - INFO - Running in container 3017: printf 'jaal ALL=(ALL) NOPASSWD: ALL
' > /etc/sudoers.d/jaal 2>&1
2025-11-26 23:40:43 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo cHJpbnRmICdqYWFsIEFMTD0oQUxMKSBOT1BBU1NXRDogQUxMCicgPiAvZXRjL3N1ZG9lcnMuZC9qYWFsIDI+JjE= | base64 -d | bash"
2025-11-26 23:40:45 - services.pct              - INFO - Running in container 3017: chmod 440 /etc/sudoers.d/jaal 2>&1
2025-11-26 23:40:45 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo Y2htb2QgNDQwIC9ldGMvc3Vkb2Vycy5kL2phYWwgMj4mMQ== | base64 -d | bash"
2025-11-26 23:40:46 - services.pct              - INFO - Running in container 3017: id -u jaal >/dev/null 2>&1 && echo 'exists' || echo 'missing'
2025-11-26 23:40:46 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyAnZXhpc3RzJyB8fCBlY2hvICdtaXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:40:47 - services.pct              - INFO - Running in container 3017: mkdir -p /home/jaal/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /home/jaal/.ssh/authorized_keys && chmod 600 /home/jaal/.ssh/authorized_keys && chown jaal:jaal /home/jaal/.ssh/authorized_keys && chown -R jaal:jaal /home/jaal/.ssh && chmod 700 /home/jaal/.ssh
2025-11-26 23:40:47 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo bWtkaXIgLXAgL2hvbWUvamFhbC8uc3NoICYmIGVjaG8gYzNOb0xYSnpZU0JCUVVGQlFqTk9lbUZETVhsak1rVkJRVUZCUkVGUlFVSkJRVUZDWjFGRVNHaHpaeTlTUWxNeFpXOW1aRUowVDIxU1oyNXJObkpSWlZkTU5XVkVRMEZHVWxsaGRHOXRiMjV4ZWxaUVNHNVZhRWRCVjB4M2NFRnBibFJMV1RCaWNtVkhOMUozWTFCNlUzazRaa1V6YkhCQmVHUTNaRFUxTVZOcmIzZFJUM3BNVHpGaGRWSlVka05IWjBkS1RVTlphSE5wVDFSRVpHYzBlVU5IWkdoMWRsUnNaMGN5VDNnNFkwTkZXVGt6VG5Ob05HSnFXRE50Tm13NVluQnhWMkZ0Wkd4WU5WSklOV0pNZVhCNk5XeHhMME5rTTJWVWNISkdXRU5uY1VwUFkxSlVMemRCTWxSeFJHVklTM1pGTTNwWlRUWjBaV2RyWlN0a1VXRmtUalF4Y21nNWMxa3pTME5ITUhGbVJqVTRkRzR5Umt4NlNuZzNNMGc1ZDFKSFpVTlhlRlJvY2tZMWQxTjZaM0pHUkVsWlIxUktWRTFWY1V0bllrcFdWbGxYV0M5aVdTOXVVVmRVT0ZaUE5tWk1lbWtyTUhCQlQzbzVNekZ4TkdWdVNIUlBOVFpVTkRSaVJYRjBabWMxWkZONE4ySk1SMGx5TlRaSWJXeHVNVWRJYUc5MVZTdDFOelpqVmxSWFQyOXFSRlkxVkRGWGMxSkJWSFE0WVVRNU1EZERhVGszUmxBdk5EWmpValY1U2xSNFlWUndLM0I0VjNCdGFESjNZVWRsUkZKRVYxRnpkRVZzU0c5VGFuUlFlVzkxZVZWMVYySXpNVzlVUW14ck9FdDNaMDlsY0RONk1UZHhLMWxKYUZwWFVVZElkbTFqVWt0SU1sQkJPVGhKVW5CcFNsWlNlbVk0YzFoS01HTmthMjkxUVRWWFFsTkVaV2RVYjBJMVZ6ZFJVRzFsYUVVOUlITm9ZV1J2ZDJOb1lXMWlaWEpBVTJoaFpHOTNZMmhoYldKbGNuTXRUV0ZqTFcxcGJta3ViRzlqWVd3PSB8IGJhc2U2NCAtZCA+IC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2htb2QgNjAwIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gLVIgamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaCAmJiBjaG1vZCA3MDAgL2hvbWUvamFhbC8uc3No | base64 -d | bash"
2025-11-26 23:40:48 - services.pct              - INFO - Running in container 3017: mkdir -p /root/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /root/.ssh/authorized_keys && chmod 600 /root/.ssh/authorized_keys
2025-11-26 23:40:48 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo bWtkaXIgLXAgL3Jvb3QvLnNzaCAmJiBlY2hvIGMzTm9MWEp6WVNCQlFVRkJRak5PZW1GRE1YbGpNa1ZCUVVGQlJFRlJRVUpCUVVGQ1oxRkVTR2h6Wnk5U1FsTXhaVzltWkVKMFQyMVNaMjVyTm5KUlpWZE1OV1ZFUTBGR1VsbGhkRzl0YjI1eGVsWlFTRzVWYUVkQlYweDNjRUZwYmxSTFdUQmljbVZITjFKM1kxQjZVM2s0WmtVemJIQkJlR1EzWkRVMU1WTnJiM2RSVDNwTVR6RmhkVkpVZGtOSFowZEtUVU5aYUhOcFQxUkVaR2MwZVVOSFpHaDFkbFJzWjBjeVQzZzRZME5GV1RrelRuTm9OR0pxV0ROdE5tdzVZbkJ4VjJGdFpHeFlOVkpJTldKTWVYQjZOV3h4TDBOa00yVlVjSEpHV0VObmNVcFBZMUpVTHpkQk1sUnhSR1ZJUzNaRk0zcFpUVFowWldkclpTdGtVV0ZrVGpReGNtZzVjMWt6UzBOSE1IRm1SalU0ZEc0eVJreDZTbmczTTBnNWQxSkhaVU5YZUZSb2NrWTFkMU42WjNKR1JFbFpSMVJLVkUxVmNVdG5Za3BXVmxsWFdDOWlXUzl1VVZkVU9GWlBObVpNZW1rck1IQkJUM281TXpGeE5HVnVTSFJQTlRaVU5EUmlSWEYwWm1jMVpGTjROMkpNUjBseU5UWkliV3h1TVVkSWFHOTFWU3QxTnpaalZsUlhUMjlxUkZZMVZERlhjMUpCVkhRNFlVUTVNRGREYVRrM1JsQXZORFpqVWpWNVNsUjRZVlJ3SzNCNFYzQnRhREozWVVkbFJGSkVWMUZ6ZEVWc1NHOVRhblJRZVc5MWVWVjFWMkl6TVc5VVFteHJPRXQzWjA5bGNETjZNVGR4SzFsSmFGcFhVVWRJZG0xalVrdElNbEJCT1RoSlVuQnBTbFpTZW1ZNGMxaEtNR05rYTI5MVFUVlhRbE5FWldkVWIwSTFWemRSVUcxbGFFVTlJSE5vWVdSdmQyTm9ZVzFpWlhKQVUyaGhaRzkzWTJoaGJXSmxjbk10VFdGakxXMXBibWt1Ykc5allXdz0gfCBiYXNlNjQgLWQgPiAvcm9vdC8uc3NoL2F1dGhvcml6ZWRfa2V5cyAmJiBjaG1vZCA2MDAgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXM= | base64 -d | bash"
2025-11-26 23:40:49 - services.pct              - INFO - Running in container 3017: test -f /home/jaal/.ssh/authorized_keys && test -f /root/.ssh/authorized_keys && echo 'keys_exist' || echo 'keys_missing'
2025-11-26 23:40:49 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo dGVzdCAtZiAvaG9tZS9qYWFsLy5zc2gvYXV0aG9yaXplZF9rZXlzICYmIHRlc3QgLWYgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgZWNobyAna2V5c19leGlzdCcgfHwgZWNobyAna2V5c19taXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:40:50 - services.pct              - INFO - SSH key setup verified successfully
2025-11-26 23:40:50 - services.pct              - INFO - Running in container 3017: dpkg -l | grep -q '^ii.*openssh-server' || echo 'not_installed'
2025-11-26 23:40:50 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo ZHBrZyAtbCB8IGdyZXAgLXEgJ15paS4qb3BlbnNzaC1zZXJ2ZXInIHx8IGVjaG8gJ25vdF9pbnN0YWxsZWQn | base64 -d | bash"
2025-11-26 23:40:52 - services.pct              - INFO - Running in container 3017: systemctl enable ssh 2>&1
2025-11-26 23:40:52 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 23:40:53 - services.pct              - INFO - Running in container 3017: systemctl start ssh 2>&1
2025-11-26 23:40:53 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 23:40:57 - services.pct              - INFO - Running in container 3017: systemctl is-active ssh 2>/dev/null || echo inactive
2025-11-26 23:40:57 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBzc2ggMj4vZGV2L251bGwgfHwgZWNobyBpbmFjdGl2ZQ== | base64 -d | bash"
2025-11-26 23:40:59 - services.pct              - INFO - SSH service is running
2025-11-26 23:40:59 - services.pct              - INFO - Running in container 3017: ss -tlnp | grep ':22 ' || netstat -tlnp 2>/dev/null | grep ':22 ' || echo 'not_listening'
2025-11-26 23:40:59 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo c3MgLXRsbnAgfCBncmVwICc6MjIgJyB8fCBuZXRzdGF0IC10bG5wIDI+L2Rldi9udWxsIHwgZ3JlcCAnOjIyICcgfHwgZWNobyAnbm90X2xpc3RlbmluZyc= | base64 -d | bash"
2025-11-26 23:41:00 - services.pct              - INFO - SSH listening check: LISTEN 0      4096         0.0.0.0:22        0.0.0.0:*    users:(("sshd",pid=149,fd=3),("systemd",pid=1,fd=78))
LISTEN 0      4096            [::]:22           [::]:*    users:(("sshd",pid=149,fd=4),("systemd",pid=1,fd=79))
2025-11-26 23:41:00 - services.pct              - INFO - Running in container 3017: grep -E '^ListenAddress|^#ListenAddress' /etc/ssh/sshd_config 2>/dev/null | head -5 || echo 'config_check_failed'
2025-11-26 23:41:00 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo Z3JlcCAtRSAnXkxpc3RlbkFkZHJlc3N8XiNMaXN0ZW5BZGRyZXNzJyAvZXRjL3NzaC9zc2hkX2NvbmZpZyAyPi9kZXYvbnVsbCB8IGhlYWQgLTUgfHwgZWNobyAnY29uZmlnX2NoZWNrX2ZhaWxlZCc= | base64 -d | bash"
2025-11-26 23:41:01 - services.pct              - INFO - SSH config check: #ListenAddress 0.0.0.0
#ListenAddress ::
2025-11-26 23:41:01 - services.pct              - INFO - Running in container 3017: timeout 1 bash -c '</dev/tcp/127.0.0.1/22' 2>&1 && echo 'localhost_ok' || echo 'localhost_failed'
2025-11-26 23:41:01 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo dGltZW91dCAxIGJhc2ggLWMgJzwvZGV2L3RjcC8xMjcuMC4wLjEvMjInIDI+JjEgJiYgZWNobyAnbG9jYWxob3N0X29rJyB8fCBlY2hvICdsb2NhbGhvc3RfZmFpbGVkJw== | base64 -d | bash"
2025-11-26 23:41:02 - services.pct              - INFO - SSH localhost connection test: localhost_ok
2025-11-26 23:41:02 - actions.create_container  - INFO - Waiting for container to be ready with SSH connectivity (up to 10 minutes)...
2025-11-26 23:41:02 - services.ssh              - INFO - Running: pct status 3017
2025-11-26 23:41:03 - services.pct              - INFO - Running in container 3017: echo test
2025-11-26 23:41:03 - services.ssh              - INFO - Running: pct exec 3017 -- bash -c "echo ZWNobyB0ZXN0 | base64 -d | bash"
2025-11-26 23:41:04 - services.pct              - INFO - Testing SSH connection to jaal@10.11.3.17...
2025-11-26 23:41:05 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:41:05 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:41:05 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.17
2025-11-26 23:41:05 - services.ssh              - INFO - Running: echo 'SSH connection test successful'
2025-11-26 23:41:05 - services.pct              - INFO - SSH connectivity verified - connection successful
2025-11-26 23:41:05 - services.pct              - INFO - Container is ready and SSH is accessible!
2025-11-26 23:41:05 - actions.create_container  - INFO - Container 3017 created successfully
2025-11-26 23:41:05 - commands.deploy           - INFO - Container 'haproxy' created successfully
2025-11-26 23:41:05 - commands.deploy           - INFO - Setting up SSH connection to container haproxy...
2025-11-26 23:41:05 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:41:05 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:41:05 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.17
2025-11-26 23:41:08 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:41:08 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:41:08 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:41:08 - commands.deploy           - INFO - ==================================================
2025-11-26 23:41:08 - commands.deploy           - INFO - [Overall: 56%] [Step: 31/55] Executing: haproxy - cloud-init wait
2025-11-26 23:41:08 - commands.deploy           - INFO - ==================================================
2025-11-26 23:41:08 - services.ssh              - INFO - Running: command -v cloud-init
2025-11-26 23:41:08 - actions.cloud_init_wait   - INFO - cloud-init not found, skipping
2025-11-26 23:41:08 - commands.deploy           - INFO - Action 'cloud-init wait' for container 'haproxy' completed successfully
2025-11-26 23:41:08 - commands.deploy           - INFO - ==================================================
2025-11-26 23:41:08 - commands.deploy           - INFO - [Overall: 58%] [Step: 32/55] Executing: haproxy - haproxy installation
2025-11-26 23:41:08 - commands.deploy           - INFO - ==================================================
2025-11-26 23:41:08 - actions.install_haproxy   - INFO - Installing haproxy package...
2025-11-26 23:41:08 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:41:08 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:41:08 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:41:08 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:41:08 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:41:08 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:41:09 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:41:09 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:41:09 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:41:09 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:41:09 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:41:09 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:41:09 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:41:09 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:41:09 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:41:10 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:41:10 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:41:10 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:41:10 - services.ssh              - INFO - Running: sudo -n apt-get update -o APT::Get::Hide-Progress=true < /dev/null
2025-11-26 23:41:16 - services.apt              - INFO - apt update succeeded on attempt 1/20
2025-11-26 23:41:16 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:41:16 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:41:16 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:41:16 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:41:16 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:41:16 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:41:16 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:41:16 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:41:16 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:41:16 - services.ssh              - INFO - Running: sudo -n apt install -y -o APT::Get::Hide-Progress=true haproxy
2025-11-26 23:41:21 - commands.deploy           - INFO - Action 'haproxy installation' for container 'haproxy' completed successfully
2025-11-26 23:41:21 - commands.deploy           - INFO - ==================================================
2025-11-26 23:41:21 - commands.deploy           - INFO - [Overall: 60%] [Step: 33/55] Executing: haproxy - haproxy configuration
2025-11-26 23:41:21 - commands.deploy           - INFO - ==================================================
2025-11-26 23:41:21 - services.ssh              - INFO - Running: sudo -n bash -c 'echo cHJpbnRmICdnbG9iYWwKICAgICAgICBsb2cgL2Rldi9sb2cgbG9jYWwwCiAgICAgICAgbG9nIC9kZXYvbG9nIGxvY2FsMSBub3RpY2UKICAgICAgICBtYXhjb25uIDIwNDgKICAgICAgICBkYWVtb24KICAgIGRlZmF1bHRzCiAgICAgICAgbG9nICAgICBnbG9iYWwKICAgICAgICBtb2RlICAgIGh0dHAKICAgICAgICBvcHRpb24gIGh0dHBsb2cKICAgICAgICBvcHRpb24gIGRvbnRsb2dudWxsCiAgICAgICAgdGltZW91dCBjb25uZWN0IDVzCiAgICAgICAgdGltZW91dCBjbGllbnQgIDUwcwogICAgICAgIHRpbWVvdXQgc2VydmVyICA1MHMKICAgIGZyb250ZW5kIGh0dHAtaW4KICAgICAgICBiaW5kICo6ODAKICAgICAgICBkZWZhdWx0X2JhY2tlbmQgbm9kZXMKICAgIGZyb250ZW5kIGh0dHBzLWluCiAgICAgICAgYmluZCAqOjQ0MwogICAgICAgIG1vZGUgaHR0cAogICAgICAgIGRlZmF1bHRfYmFja2VuZCBub2RlcwogICAgYmFja2VuZCBub2RlcwpzZXJ2ZXIgbm9kZTEgMTAuMTEuMy41OjgwIGNoZWNrCnNlcnZlciBub2RlMiAxMC4xMS4zLjY6ODAgY2hlY2sKc2VydmVyIG5vZGUzIDEwLjExLjMuNzo4MCBjaGVjawogICAgbGlzdGVuIHN0YXRzCiAgICAgICAgYmluZCAqOjg0MDQKICAgICAgICBtb2RlIGh0dHAKICAgICAgICBzdGF0cyBlbmFibGUKICAgICAgICBzdGF0cyB1cmkgLwogICAgICAgIHN0YXRzIHJlZnJlc2ggMTBzCicgPiAvZXRjL2hhcHJveHkvaGFwcm94eS5jZmcgMj4mMQ== | base64 -d | bash'
2025-11-26 23:41:21 - commands.deploy           - INFO - Action 'haproxy configuration' for container 'haproxy' completed successfully
2025-11-26 23:41:21 - commands.deploy           - INFO - ==================================================
2025-11-26 23:41:21 - commands.deploy           - INFO - [Overall: 61%] [Step: 34/55] Executing: haproxy - haproxy systemd override
2025-11-26 23:41:21 - commands.deploy           - INFO - ==================================================
2025-11-26 23:41:21 - services.ssh              - INFO - Running: sudo -n bash -c 'mkdir -p /etc/systemd/system/haproxy.service.d 2>&1'
2025-11-26 23:41:21 - services.ssh              - INFO - Running: sudo -n bash -c 'echo cHJpbnRmICdbU2VydmljZV0KVHlwZT1ub3RpZnkKUHJpdmF0ZU5ldHdvcms9bm8KUHJvdGVjdFN5c3RlbT1ubwpQcm90ZWN0SG9tZT1ubwpFeGVjU3RhcnQ9CkV4ZWNTdGFydD0vdXNyL3NiaW4vaGFwcm94eSAtV3MgLWYgJENPTkZJRyAtcCAkUElERklMRSAkRVhUUkFPUFRTCicgPiAvZXRjL3N5c3RlbWQvc3lzdGVtL2hhcHJveHkuc2VydmljZS5kL292ZXJyaWRlLmNvbmYgMj4mMQ== | base64 -d | bash'
2025-11-26 23:41:22 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl daemon-reload'
2025-11-26 23:41:22 - commands.deploy           - INFO - Action 'haproxy systemd override' for container 'haproxy' completed successfully
2025-11-26 23:41:22 - commands.deploy           - INFO - ==================================================
2025-11-26 23:41:22 - commands.deploy           - INFO - [Overall: 63%] [Step: 35/55] Executing: haproxy - haproxy service enablement
2025-11-26 23:41:22 - commands.deploy           - INFO - ==================================================
2025-11-26 23:41:22 - services.ssh              - INFO - Running: sudo -n bash -c 'haproxy -c -f /etc/haproxy/haproxy.cfg 2>&1'
2025-11-26 23:41:22 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl restart haproxy 2>&1'
2025-11-26 23:41:22 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl enable haproxy 2>&1'
2025-11-26 23:41:25 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active haproxy 2>/dev/null || echo inactive'
2025-11-26 23:41:25 - commands.deploy           - INFO - Action 'haproxy service enablement' for container 'haproxy' completed successfully
2025-11-26 23:41:25 - commands.deploy           - INFO - ==================================================
2025-11-26 23:41:25 - commands.deploy           - INFO - [Overall: 65%] [Step: 36/55] Executing: dns - create container
2025-11-26 23:41:25 - commands.deploy           - INFO - ==================================================
2025-11-26 23:41:25 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:41:25 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:41:25 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:41:25 - services.ssh              - INFO - Running: pct destroy 3019 --force
2025-11-26 23:41:26 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/docker-ubuntu25.04-template_*_amd64.tar.zst 2>/dev/null | head -1 | xargs basename 2>/dev/null
2025-11-26 23:41:26 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && test -r /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && echo 'valid' || echo 'invalid'
2025-11-26 23:41:27 - actions.create_container  - INFO - Checking if container 3019 already exists...
2025-11-26 23:41:27 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:41:27 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:41:27 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:41:27 - services.ssh              - INFO - Running: pct list | grep '^3019 '
2025-11-26 23:41:28 - actions.create_container  - INFO - Creating container 3019 from template...
2025-11-26 23:41:28 - services.ssh              - INFO - Running: pct create 3019 /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst --hostname dns --memory 2048 --swap 2048 --cores 4 --net0 name=eth0,bridge=vmbr0,firewall=0,gw=10.11.3.253,ip=10.11.3.19/24,ip6=dhcp,type=veth --rootfs sdb:20 --unprivileged 0 --ostype ubuntu --arch amd64
2025-11-26 23:41:37 - actions.create_container  - INFO - Setting container features...
2025-11-26 23:41:37 - services.ssh              - INFO - Running: pct set 3019 --features nesting=1,keyctl=1,fuse=1
2025-11-26 23:41:39 - actions.create_container  - INFO - Starting container 3019...
2025-11-26 23:41:39 - services.ssh              - INFO - Running: pct start 3019
2025-11-26 23:41:43 - actions.create_container  - INFO - Bringing up network interface...
2025-11-26 23:41:43 - services.pct              - INFO - Running in container 3019: ping -c 1 8.8.8.8
2025-11-26 23:41:43 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo cGluZyAtYyAxIDguOC44Ljg= | base64 -d | bash"
2025-11-26 23:41:44 - actions.create_container  - INFO - Network interface is up and reachable
2025-11-26 23:41:44 - services.pct              - INFO - Running in container 3019: id -u jaal >/dev/null 2>&1 || useradd -m -s /bin/bash -G sudo jaal
2025-11-26 23:41:44 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgfHwgdXNlcmFkZCAtbSAtcyAvYmluL2Jhc2ggLUcgc3VkbyBqYWFs | base64 -d | bash"
2025-11-26 23:41:45 - services.pct              - INFO - Running in container 3019: echo jaal:jaal123 | chpasswd
2025-11-26 23:41:45 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo ZWNobyBqYWFsOmphYWwxMjMgfCBjaHBhc3N3ZA== | base64 -d | bash"
2025-11-26 23:41:46 - actions.create_container  - INFO - Password set for user jaal
2025-11-26 23:41:46 - services.pct              - INFO - Running in container 3019: printf 'jaal ALL=(ALL) NOPASSWD: ALL
' > /etc/sudoers.d/jaal 2>&1
2025-11-26 23:41:46 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo cHJpbnRmICdqYWFsIEFMTD0oQUxMKSBOT1BBU1NXRDogQUxMCicgPiAvZXRjL3N1ZG9lcnMuZC9qYWFsIDI+JjE= | base64 -d | bash"
2025-11-26 23:41:47 - services.pct              - INFO - Running in container 3019: chmod 440 /etc/sudoers.d/jaal 2>&1
2025-11-26 23:41:47 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo Y2htb2QgNDQwIC9ldGMvc3Vkb2Vycy5kL2phYWwgMj4mMQ== | base64 -d | bash"
2025-11-26 23:41:48 - services.pct              - INFO - Running in container 3019: id -u jaal >/dev/null 2>&1 && echo 'exists' || echo 'missing'
2025-11-26 23:41:48 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyAnZXhpc3RzJyB8fCBlY2hvICdtaXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:41:49 - services.pct              - INFO - Running in container 3019: mkdir -p /home/jaal/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /home/jaal/.ssh/authorized_keys && chmod 600 /home/jaal/.ssh/authorized_keys && chown jaal:jaal /home/jaal/.ssh/authorized_keys && chown -R jaal:jaal /home/jaal/.ssh && chmod 700 /home/jaal/.ssh
2025-11-26 23:41:49 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo bWtkaXIgLXAgL2hvbWUvamFhbC8uc3NoICYmIGVjaG8gYzNOb0xYSnpZU0JCUVVGQlFqTk9lbUZETVhsak1rVkJRVUZCUkVGUlFVSkJRVUZDWjFGRVNHaHpaeTlTUWxNeFpXOW1aRUowVDIxU1oyNXJObkpSWlZkTU5XVkVRMEZHVWxsaGRHOXRiMjV4ZWxaUVNHNVZhRWRCVjB4M2NFRnBibFJMV1RCaWNtVkhOMUozWTFCNlUzazRaa1V6YkhCQmVHUTNaRFUxTVZOcmIzZFJUM3BNVHpGaGRWSlVka05IWjBkS1RVTlphSE5wVDFSRVpHYzBlVU5IWkdoMWRsUnNaMGN5VDNnNFkwTkZXVGt6VG5Ob05HSnFXRE50Tm13NVluQnhWMkZ0Wkd4WU5WSklOV0pNZVhCNk5XeHhMME5rTTJWVWNISkdXRU5uY1VwUFkxSlVMemRCTWxSeFJHVklTM1pGTTNwWlRUWjBaV2RyWlN0a1VXRmtUalF4Y21nNWMxa3pTME5ITUhGbVJqVTRkRzR5Umt4NlNuZzNNMGc1ZDFKSFpVTlhlRlJvY2tZMWQxTjZaM0pHUkVsWlIxUktWRTFWY1V0bllrcFdWbGxYV0M5aVdTOXVVVmRVT0ZaUE5tWk1lbWtyTUhCQlQzbzVNekZ4TkdWdVNIUlBOVFpVTkRSaVJYRjBabWMxWkZONE4ySk1SMGx5TlRaSWJXeHVNVWRJYUc5MVZTdDFOelpqVmxSWFQyOXFSRlkxVkRGWGMxSkJWSFE0WVVRNU1EZERhVGszUmxBdk5EWmpValY1U2xSNFlWUndLM0I0VjNCdGFESjNZVWRsUkZKRVYxRnpkRVZzU0c5VGFuUlFlVzkxZVZWMVYySXpNVzlVUW14ck9FdDNaMDlsY0RONk1UZHhLMWxKYUZwWFVVZElkbTFqVWt0SU1sQkJPVGhKVW5CcFNsWlNlbVk0YzFoS01HTmthMjkxUVRWWFFsTkVaV2RVYjBJMVZ6ZFJVRzFsYUVVOUlITm9ZV1J2ZDJOb1lXMWlaWEpBVTJoaFpHOTNZMmhoYldKbGNuTXRUV0ZqTFcxcGJta3ViRzlqWVd3PSB8IGJhc2U2NCAtZCA+IC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2htb2QgNjAwIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gLVIgamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaCAmJiBjaG1vZCA3MDAgL2hvbWUvamFhbC8uc3No | base64 -d | bash"
2025-11-26 23:41:51 - services.pct              - INFO - Running in container 3019: mkdir -p /root/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /root/.ssh/authorized_keys && chmod 600 /root/.ssh/authorized_keys
2025-11-26 23:41:51 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo bWtkaXIgLXAgL3Jvb3QvLnNzaCAmJiBlY2hvIGMzTm9MWEp6WVNCQlFVRkJRak5PZW1GRE1YbGpNa1ZCUVVGQlJFRlJRVUpCUVVGQ1oxRkVTR2h6Wnk5U1FsTXhaVzltWkVKMFQyMVNaMjVyTm5KUlpWZE1OV1ZFUTBGR1VsbGhkRzl0YjI1eGVsWlFTRzVWYUVkQlYweDNjRUZwYmxSTFdUQmljbVZITjFKM1kxQjZVM2s0WmtVemJIQkJlR1EzWkRVMU1WTnJiM2RSVDNwTVR6RmhkVkpVZGtOSFowZEtUVU5aYUhOcFQxUkVaR2MwZVVOSFpHaDFkbFJzWjBjeVQzZzRZME5GV1RrelRuTm9OR0pxV0ROdE5tdzVZbkJ4VjJGdFpHeFlOVkpJTldKTWVYQjZOV3h4TDBOa00yVlVjSEpHV0VObmNVcFBZMUpVTHpkQk1sUnhSR1ZJUzNaRk0zcFpUVFowWldkclpTdGtVV0ZrVGpReGNtZzVjMWt6UzBOSE1IRm1SalU0ZEc0eVJreDZTbmczTTBnNWQxSkhaVU5YZUZSb2NrWTFkMU42WjNKR1JFbFpSMVJLVkUxVmNVdG5Za3BXVmxsWFdDOWlXUzl1VVZkVU9GWlBObVpNZW1rck1IQkJUM281TXpGeE5HVnVTSFJQTlRaVU5EUmlSWEYwWm1jMVpGTjROMkpNUjBseU5UWkliV3h1TVVkSWFHOTFWU3QxTnpaalZsUlhUMjlxUkZZMVZERlhjMUpCVkhRNFlVUTVNRGREYVRrM1JsQXZORFpqVWpWNVNsUjRZVlJ3SzNCNFYzQnRhREozWVVkbFJGSkVWMUZ6ZEVWc1NHOVRhblJRZVc5MWVWVjFWMkl6TVc5VVFteHJPRXQzWjA5bGNETjZNVGR4SzFsSmFGcFhVVWRJZG0xalVrdElNbEJCT1RoSlVuQnBTbFpTZW1ZNGMxaEtNR05rYTI5MVFUVlhRbE5FWldkVWIwSTFWemRSVUcxbGFFVTlJSE5vWVdSdmQyTm9ZVzFpWlhKQVUyaGhaRzkzWTJoaGJXSmxjbk10VFdGakxXMXBibWt1Ykc5allXdz0gfCBiYXNlNjQgLWQgPiAvcm9vdC8uc3NoL2F1dGhvcml6ZWRfa2V5cyAmJiBjaG1vZCA2MDAgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXM= | base64 -d | bash"
2025-11-26 23:41:52 - services.pct              - INFO - Running in container 3019: test -f /home/jaal/.ssh/authorized_keys && test -f /root/.ssh/authorized_keys && echo 'keys_exist' || echo 'keys_missing'
2025-11-26 23:41:52 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo dGVzdCAtZiAvaG9tZS9qYWFsLy5zc2gvYXV0aG9yaXplZF9rZXlzICYmIHRlc3QgLWYgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgZWNobyAna2V5c19leGlzdCcgfHwgZWNobyAna2V5c19taXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:41:53 - services.pct              - INFO - SSH key setup verified successfully
2025-11-26 23:41:53 - services.pct              - INFO - Running in container 3019: dpkg -l | grep -q '^ii.*openssh-server' || echo 'not_installed'
2025-11-26 23:41:53 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo ZHBrZyAtbCB8IGdyZXAgLXEgJ15paS4qb3BlbnNzaC1zZXJ2ZXInIHx8IGVjaG8gJ25vdF9pbnN0YWxsZWQn | base64 -d | bash"
2025-11-26 23:41:54 - services.pct              - INFO - Running in container 3019: systemctl enable ssh 2>&1
2025-11-26 23:41:54 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 23:41:56 - services.pct              - INFO - Running in container 3019: systemctl start ssh 2>&1
2025-11-26 23:41:56 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 23:42:00 - services.pct              - INFO - Running in container 3019: systemctl is-active ssh 2>/dev/null || echo inactive
2025-11-26 23:42:00 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBzc2ggMj4vZGV2L251bGwgfHwgZWNobyBpbmFjdGl2ZQ== | base64 -d | bash"
2025-11-26 23:42:01 - services.pct              - INFO - SSH service is running
2025-11-26 23:42:01 - services.pct              - INFO - Running in container 3019: ss -tlnp | grep ':22 ' || netstat -tlnp 2>/dev/null | grep ':22 ' || echo 'not_listening'
2025-11-26 23:42:01 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo c3MgLXRsbnAgfCBncmVwICc6MjIgJyB8fCBuZXRzdGF0IC10bG5wIDI+L2Rldi9udWxsIHwgZ3JlcCAnOjIyICcgfHwgZWNobyAnbm90X2xpc3RlbmluZyc= | base64 -d | bash"
2025-11-26 23:42:02 - services.pct              - INFO - SSH listening check: LISTEN 0      4096         0.0.0.0:22        0.0.0.0:*    users:(("sshd",pid=149,fd=3),("systemd",pid=1,fd=153))
LISTEN 0      4096            [::]:22           [::]:*    users:(("sshd",pid=149,fd=4),("systemd",pid=1,fd=154))
2025-11-26 23:42:02 - services.pct              - INFO - Running in container 3019: grep -E '^ListenAddress|^#ListenAddress' /etc/ssh/sshd_config 2>/dev/null | head -5 || echo 'config_check_failed'
2025-11-26 23:42:02 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo Z3JlcCAtRSAnXkxpc3RlbkFkZHJlc3N8XiNMaXN0ZW5BZGRyZXNzJyAvZXRjL3NzaC9zc2hkX2NvbmZpZyAyPi9kZXYvbnVsbCB8IGhlYWQgLTUgfHwgZWNobyAnY29uZmlnX2NoZWNrX2ZhaWxlZCc= | base64 -d | bash"
2025-11-26 23:42:03 - services.pct              - INFO - SSH config check: #ListenAddress 0.0.0.0
#ListenAddress ::
2025-11-26 23:42:03 - services.pct              - INFO - Running in container 3019: timeout 1 bash -c '</dev/tcp/127.0.0.1/22' 2>&1 && echo 'localhost_ok' || echo 'localhost_failed'
2025-11-26 23:42:03 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo dGltZW91dCAxIGJhc2ggLWMgJzwvZGV2L3RjcC8xMjcuMC4wLjEvMjInIDI+JjEgJiYgZWNobyAnbG9jYWxob3N0X29rJyB8fCBlY2hvICdsb2NhbGhvc3RfZmFpbGVkJw== | base64 -d | bash"
2025-11-26 23:42:04 - services.pct              - INFO - SSH localhost connection test: localhost_ok
2025-11-26 23:42:04 - actions.create_container  - INFO - Waiting for container to be ready with SSH connectivity (up to 10 minutes)...
2025-11-26 23:42:04 - services.ssh              - INFO - Running: pct status 3019
2025-11-26 23:42:05 - services.pct              - INFO - Running in container 3019: echo test
2025-11-26 23:42:05 - services.ssh              - INFO - Running: pct exec 3019 -- bash -c "echo ZWNobyB0ZXN0 | base64 -d | bash"
2025-11-26 23:42:07 - services.pct              - INFO - Testing SSH connection to jaal@10.11.3.19...
2025-11-26 23:42:07 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:42:07 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:42:07 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.19
2025-11-26 23:42:07 - services.ssh              - INFO - Running: echo 'SSH connection test successful'
2025-11-26 23:42:07 - services.pct              - INFO - SSH connectivity verified - connection successful
2025-11-26 23:42:07 - services.pct              - INFO - Container is ready and SSH is accessible!
2025-11-26 23:42:07 - actions.create_container  - INFO - Container 3019 created successfully
2025-11-26 23:42:07 - commands.deploy           - INFO - Container 'dns' created successfully
2025-11-26 23:42:07 - commands.deploy           - INFO - Setting up SSH connection to container dns...
2025-11-26 23:42:08 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:42:08 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:42:08 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.19
2025-11-26 23:42:10 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:42:10 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:42:10 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:42:10 - commands.deploy           - INFO - ==================================================
2025-11-26 23:42:10 - commands.deploy           - INFO - [Overall: 67%] [Step: 37/55] Executing: dns - cloud-init wait
2025-11-26 23:42:10 - commands.deploy           - INFO - ==================================================
2025-11-26 23:42:10 - services.ssh              - INFO - Running: command -v cloud-init
2025-11-26 23:42:10 - actions.cloud_init_wait   - INFO - cloud-init not found, skipping
2025-11-26 23:42:10 - commands.deploy           - INFO - Action 'cloud-init wait' for container 'dns' completed successfully
2025-11-26 23:42:10 - commands.deploy           - INFO - ==================================================
2025-11-26 23:42:10 - commands.deploy           - INFO - [Overall: 69%] [Step: 38/55] Executing: dns - dotnet installation
2025-11-26 23:42:10 - commands.deploy           - INFO - ==================================================
2025-11-26 23:42:10 - actions.install_dotnet    - INFO - Installing .NET SDK...
2025-11-26 23:42:10 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:42:10 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:42:10 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:42:10 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:42:11 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:42:11 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:42:11 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:42:11 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:42:11 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:42:11 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:42:11 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:42:11 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:42:11 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:42:12 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:42:12 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:42:12 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:42:12 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:42:12 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:42:12 - services.ssh              - INFO - Running: sudo -n apt-get update -o APT::Get::Hide-Progress=true < /dev/null
2025-11-26 23:42:18 - services.apt              - INFO - apt update succeeded on attempt 1/20
2025-11-26 23:42:18 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock-frontend && echo exists || echo not_found 2>/dev/null
2025-11-26 23:42:18 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock-frontend 2>/dev/null | head -1
2025-11-26 23:42:18 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock-frontend 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:42:19 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/dpkg/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:42:19 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/dpkg/lock 2>/dev/null | head -1
2025-11-26 23:42:19 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/dpkg/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:42:19 - services.ssh              - INFO - Running: sudo -n test -f /var/lib/apt/lists/lock && echo exists || echo not_found 2>/dev/null
2025-11-26 23:42:19 - services.ssh              - INFO - Running: sudo -n lsof -t /var/lib/apt/lists/lock 2>/dev/null | head -1
2025-11-26 23:42:19 - services.ssh              - INFO - Running: sudo -n fuser /var/lib/apt/lists/lock 2>/dev/null | grep -oE '[0-9]+' | head -1
2025-11-26 23:42:19 - services.ssh              - INFO - Running: sudo -n apt install -y -o APT::Get::Hide-Progress=true dotnet-sdk-8.0
2025-11-26 23:42:32 - commands.deploy           - INFO - Action 'dotnet installation' for container 'dns' completed successfully
2025-11-26 23:42:32 - commands.deploy           - INFO - ==================================================
2025-11-26 23:42:32 - commands.deploy           - INFO - [Overall: 70%] [Step: 39/55] Executing: dns - disable systemd resolved
2025-11-26 23:42:32 - commands.deploy           - INFO - ==================================================
2025-11-26 23:42:32 - actions.disable_systemd_resolved - INFO - Disabling systemd-resolved to free port 53...
2025-11-26 23:42:32 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl stop systemd-resolved 2>&1'
2025-11-26 23:42:32 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl disable systemd-resolved 2>&1'
2025-11-26 23:42:32 - actions.disable_systemd_resolved - INFO - Configuring static resolv.conf...
2025-11-26 23:42:32 - services.ssh              - INFO - Running: sudo -n bash -c 'rm -f /etc/resolv.conf'
2025-11-26 23:42:33 - services.ssh              - INFO - Running: sudo -n bash -c 'echo cHJpbnRmICduYW1lc2VydmVyIDguOC44LjgKbmFtZXNlcnZlciAxLjEuMS4xCm5hbWVzZXJ2ZXIgOC44LjQuNAonID4gL2V0Yy9yZXNvbHYuY29uZiAyPiYx | base64 -d | bash'
2025-11-26 23:42:33 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active systemd-resolved 2>/dev/null || echo inactive'
2025-11-26 23:42:33 - actions.disable_systemd_resolved - INFO - systemd-resolved is stopped and disabled
2025-11-26 23:42:33 - commands.deploy           - INFO - Action 'disable systemd resolved' for container 'dns' completed successfully
2025-11-26 23:42:33 - commands.deploy           - INFO - ==================================================
2025-11-26 23:42:33 - commands.deploy           - INFO - [Overall: 72%] [Step: 40/55] Executing: dns - sins dns installation
2025-11-26 23:42:33 - commands.deploy           - INFO - ==================================================
2025-11-26 23:42:33 - actions.install_sins_dns  - INFO - Ensuring git is installed...
2025-11-26 23:42:33 - services.ssh              - INFO - Running: sudo -n bash -c 'command -v git >/dev/null && echo exists || echo missing'
2025-11-26 23:42:33 - actions.install_sins_dns  - INFO - Cloning SiNS repository...
2025-11-26 23:42:33 - services.ssh              - INFO - Running: sudo -n bash -c 'cd /opt && rm -rf sins && git clone https://github.com/judyandiealvarez/SiNS.git sins'
2025-11-26 23:42:34 - services.ssh              - INFO - Running: sudo -n bash -c 'test -d /opt/sins && echo exists || echo missing'
2025-11-26 23:42:34 - actions.install_sins_dns  - INFO - Configuring SiNS application settings...
2025-11-26 23:42:34 - services.ssh              - INFO - Running: sudo -n bash -c 'echo ewogICJDb25uZWN0aW9uU3RyaW5ncyI6IHsKICAgICJEZWZhdWx0Q29ubmVjdGlvbiI6ICJIb3N0PTEwLjExLjMuMTg7UG9ydD01NDMyO0RhdGFiYXNlPWRuc19zZXJ2ZXI7VXNlcm5hbWU9cG9zdGdyZXM7UGFzc3dvcmQ9cG9zdGdyZXMiCiAgfSwKICAiRG5zU2V0dGluZ3MiOiB7CiAgICAiUG9ydCI6IDUzCiAgfSwKICAiV2ViU2V0dGluZ3MiOiB7CiAgICAiUG9ydCI6IDgwCiAgfQp9 | base64 -d > /opt/sins/sins/appsettings.Production.json'
2025-11-26 23:42:34 - actions.install_sins_dns  - INFO - Building SiNS application...
2025-11-26 23:42:34 - services.ssh              - INFO - Running: sudo -n bash -c 'cd /opt/sins/sins && dotnet publish -c Release -o /opt/sins/app'
2025-11-26 23:42:49 - services.ssh              - INFO - Running: sudo -n bash -c 'test -f /opt/sins/app/sins.dll && echo exists || echo missing'
2025-11-26 23:42:49 - services.ssh              - INFO - Running: sudo -n bash -c 'echo ewogICJDb25uZWN0aW9uU3RyaW5ncyI6IHsKICAgICJEZWZhdWx0Q29ubmVjdGlvbiI6ICJIb3N0PTEwLjExLjMuMTg7UG9ydD01NDMyO0RhdGFiYXNlPWRuc19zZXJ2ZXI7VXNlcm5hbWU9cG9zdGdyZXM7UGFzc3dvcmQ9cG9zdGdyZXMiCiAgfSwKICAiRG5zU2V0dGluZ3MiOiB7CiAgICAiUG9ydCI6IDUzCiAgfSwKICAiV2ViU2V0dGluZ3MiOiB7CiAgICAiUG9ydCI6IDgwCiAgfQp9 | base64 -d > /opt/sins/app/appsettings.json'
2025-11-26 23:42:49 - commands.deploy           - INFO - Action 'sins dns installation' for container 'dns' completed successfully
2025-11-26 23:42:49 - commands.deploy           - INFO - ==================================================
2025-11-26 23:42:49 - commands.deploy           - INFO - [Overall: 74%] [Step: 41/55] Executing: dns - sins dns service configuration
2025-11-26 23:42:49 - commands.deploy           - INFO - ==================================================
2025-11-26 23:42:49 - actions.configure_sins_service - INFO - Creating SiNS systemd service...
2025-11-26 23:42:49 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl stop sins 2>/dev/null || true; echo W1VuaXRdCkRlc2NyaXB0aW9uPVNpTlMgRE5TIFNlcnZlcgpBZnRlcj1uZXR3b3JrLnRhcmdldAoKW1NlcnZpY2VdClR5cGU9c2ltcGxlClVzZXI9cm9vdApXb3JraW5nRGlyZWN0b3J5PS9vcHQvc2lucy9hcHAKRXhlY1N0YXJ0PS91c3IvYmluL2RvdG5ldCAvb3B0L3NpbnMvYXBwL3NpbnMuZGxsClJlc3RhcnQ9YWx3YXlzClJlc3RhcnRTZWM9MTAKCltJbnN0YWxsXQpXYW50ZWRCeT1tdWx0aS11c2VyLnRhcmdldAo= | base64 -d > /etc/systemd/system/sins.service && systemctl daemon-reload'
2025-11-26 23:42:50 - commands.deploy           - INFO - Action 'sins dns service configuration' for container 'dns' completed successfully
2025-11-26 23:42:50 - commands.deploy           - INFO - ==================================================
2025-11-26 23:42:50 - commands.deploy           - INFO - [Overall: 76%] [Step: 42/55] Executing: dns - sins dns service enablement
2025-11-26 23:42:50 - commands.deploy           - INFO - ==================================================
2025-11-26 23:42:50 - actions.enable_sins_service - INFO - Enabling and starting SiNS service...
2025-11-26 23:42:50 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl enable sins && systemctl start sins 2>&1'
2025-11-26 23:42:53 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active sins 2>/dev/null || echo inactive'
2025-11-26 23:42:53 - services.ssh              - INFO - Running: sudo -n bash -c 'ss -tulnp | grep -E '"'"':53.*sins|:53.*dotnet'"'"' || echo '"'"'not_listening'"'"''
2025-11-26 23:42:53 - actions.enable_sins_service - WARNING - SiNS service is active but not listening on port 53
2025-11-26 23:42:53 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl status sins --no-pager 2>&1'
2025-11-26 23:42:53 - services.ssh              - INFO - Running: sudo -n bash -c 'pgrep -f sins.dll >/dev/null && echo running || echo not_running'
2025-11-26 23:42:53 - actions.enable_sins_service - INFO - SiNS process is running despite inactive systemd status
2025-11-26 23:42:53 - commands.deploy           - INFO - Action 'sins dns service enablement' for container 'dns' completed successfully
2025-11-26 23:42:53 - commands.deploy           - INFO - ==================================================
2025-11-26 23:42:53 - commands.deploy           - INFO - [Overall: 78%] [Step: 43/55] Executing: swarm-manager - create container
2025-11-26 23:42:53 - commands.deploy           - INFO - ==================================================
2025-11-26 23:42:54 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:42:54 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:42:54 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:42:54 - services.ssh              - INFO - Running: pct destroy 3005 --force
2025-11-26 23:42:55 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/docker-ubuntu25.04-template_*_amd64.tar.zst 2>/dev/null | head -1 | xargs basename 2>/dev/null
2025-11-26 23:42:55 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && test -r /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && echo 'valid' || echo 'invalid'
2025-11-26 23:42:55 - actions.create_container  - INFO - Checking if container 3005 already exists...
2025-11-26 23:42:55 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:42:55 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:42:55 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:42:55 - services.ssh              - INFO - Running: pct list | grep '^3005 '
2025-11-26 23:42:57 - actions.create_container  - INFO - Creating container 3005 from template...
2025-11-26 23:42:57 - services.ssh              - INFO - Running: pct create 3005 /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst --hostname swarm-manager --memory 4096 --swap 4096 --cores 8 --net0 name=eth0,bridge=vmbr0,firewall=0,gw=10.11.3.253,ip=10.11.3.5/24,ip6=dhcp,type=veth --rootfs sdb:40 --unprivileged 0 --ostype ubuntu --arch amd64
2025-11-26 23:43:06 - actions.create_container  - INFO - Setting container features...
2025-11-26 23:43:06 - services.ssh              - INFO - Running: pct set 3005 --features nesting=1,keyctl=1,fuse=1
2025-11-26 23:43:07 - actions.create_container  - INFO - Starting container 3005...
2025-11-26 23:43:07 - services.ssh              - INFO - Running: pct start 3005
2025-11-26 23:43:11 - actions.create_container  - INFO - Bringing up network interface...
2025-11-26 23:43:11 - services.pct              - INFO - Running in container 3005: ping -c 1 8.8.8.8
2025-11-26 23:43:11 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo cGluZyAtYyAxIDguOC44Ljg= | base64 -d | bash"
2025-11-26 23:43:12 - actions.create_container  - INFO - Network interface is up and reachable
2025-11-26 23:43:12 - services.pct              - INFO - Running in container 3005: id -u jaal >/dev/null 2>&1 || useradd -m -s /bin/bash -G sudo jaal
2025-11-26 23:43:12 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgfHwgdXNlcmFkZCAtbSAtcyAvYmluL2Jhc2ggLUcgc3VkbyBqYWFs | base64 -d | bash"
2025-11-26 23:43:13 - services.pct              - INFO - Running in container 3005: echo jaal:jaal123 | chpasswd
2025-11-26 23:43:13 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo ZWNobyBqYWFsOmphYWwxMjMgfCBjaHBhc3N3ZA== | base64 -d | bash"
2025-11-26 23:43:14 - actions.create_container  - INFO - Password set for user jaal
2025-11-26 23:43:14 - services.pct              - INFO - Running in container 3005: printf 'jaal ALL=(ALL) NOPASSWD: ALL
' > /etc/sudoers.d/jaal 2>&1
2025-11-26 23:43:14 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo cHJpbnRmICdqYWFsIEFMTD0oQUxMKSBOT1BBU1NXRDogQUxMCicgPiAvZXRjL3N1ZG9lcnMuZC9qYWFsIDI+JjE= | base64 -d | bash"
2025-11-26 23:43:15 - services.pct              - INFO - Running in container 3005: chmod 440 /etc/sudoers.d/jaal 2>&1
2025-11-26 23:43:15 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo Y2htb2QgNDQwIC9ldGMvc3Vkb2Vycy5kL2phYWwgMj4mMQ== | base64 -d | bash"
2025-11-26 23:43:17 - services.pct              - INFO - Running in container 3005: id -u jaal >/dev/null 2>&1 && echo 'exists' || echo 'missing'
2025-11-26 23:43:17 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyAnZXhpc3RzJyB8fCBlY2hvICdtaXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:43:18 - services.pct              - INFO - Running in container 3005: mkdir -p /home/jaal/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /home/jaal/.ssh/authorized_keys && chmod 600 /home/jaal/.ssh/authorized_keys && chown jaal:jaal /home/jaal/.ssh/authorized_keys && chown -R jaal:jaal /home/jaal/.ssh && chmod 700 /home/jaal/.ssh
2025-11-26 23:43:18 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo bWtkaXIgLXAgL2hvbWUvamFhbC8uc3NoICYmIGVjaG8gYzNOb0xYSnpZU0JCUVVGQlFqTk9lbUZETVhsak1rVkJRVUZCUkVGUlFVSkJRVUZDWjFGRVNHaHpaeTlTUWxNeFpXOW1aRUowVDIxU1oyNXJObkpSWlZkTU5XVkVRMEZHVWxsaGRHOXRiMjV4ZWxaUVNHNVZhRWRCVjB4M2NFRnBibFJMV1RCaWNtVkhOMUozWTFCNlUzazRaa1V6YkhCQmVHUTNaRFUxTVZOcmIzZFJUM3BNVHpGaGRWSlVka05IWjBkS1RVTlphSE5wVDFSRVpHYzBlVU5IWkdoMWRsUnNaMGN5VDNnNFkwTkZXVGt6VG5Ob05HSnFXRE50Tm13NVluQnhWMkZ0Wkd4WU5WSklOV0pNZVhCNk5XeHhMME5rTTJWVWNISkdXRU5uY1VwUFkxSlVMemRCTWxSeFJHVklTM1pGTTNwWlRUWjBaV2RyWlN0a1VXRmtUalF4Y21nNWMxa3pTME5ITUhGbVJqVTRkRzR5Umt4NlNuZzNNMGc1ZDFKSFpVTlhlRlJvY2tZMWQxTjZaM0pHUkVsWlIxUktWRTFWY1V0bllrcFdWbGxYV0M5aVdTOXVVVmRVT0ZaUE5tWk1lbWtyTUhCQlQzbzVNekZ4TkdWdVNIUlBOVFpVTkRSaVJYRjBabWMxWkZONE4ySk1SMGx5TlRaSWJXeHVNVWRJYUc5MVZTdDFOelpqVmxSWFQyOXFSRlkxVkRGWGMxSkJWSFE0WVVRNU1EZERhVGszUmxBdk5EWmpValY1U2xSNFlWUndLM0I0VjNCdGFESjNZVWRsUkZKRVYxRnpkRVZzU0c5VGFuUlFlVzkxZVZWMVYySXpNVzlVUW14ck9FdDNaMDlsY0RONk1UZHhLMWxKYUZwWFVVZElkbTFqVWt0SU1sQkJPVGhKVW5CcFNsWlNlbVk0YzFoS01HTmthMjkxUVRWWFFsTkVaV2RVYjBJMVZ6ZFJVRzFsYUVVOUlITm9ZV1J2ZDJOb1lXMWlaWEpBVTJoaFpHOTNZMmhoYldKbGNuTXRUV0ZqTFcxcGJta3ViRzlqWVd3PSB8IGJhc2U2NCAtZCA+IC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2htb2QgNjAwIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gLVIgamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaCAmJiBjaG1vZCA3MDAgL2hvbWUvamFhbC8uc3No | base64 -d | bash"
2025-11-26 23:43:19 - services.pct              - INFO - Running in container 3005: mkdir -p /root/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /root/.ssh/authorized_keys && chmod 600 /root/.ssh/authorized_keys
2025-11-26 23:43:19 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo bWtkaXIgLXAgL3Jvb3QvLnNzaCAmJiBlY2hvIGMzTm9MWEp6WVNCQlFVRkJRak5PZW1GRE1YbGpNa1ZCUVVGQlJFRlJRVUpCUVVGQ1oxRkVTR2h6Wnk5U1FsTXhaVzltWkVKMFQyMVNaMjVyTm5KUlpWZE1OV1ZFUTBGR1VsbGhkRzl0YjI1eGVsWlFTRzVWYUVkQlYweDNjRUZwYmxSTFdUQmljbVZITjFKM1kxQjZVM2s0WmtVemJIQkJlR1EzWkRVMU1WTnJiM2RSVDNwTVR6RmhkVkpVZGtOSFowZEtUVU5aYUhOcFQxUkVaR2MwZVVOSFpHaDFkbFJzWjBjeVQzZzRZME5GV1RrelRuTm9OR0pxV0ROdE5tdzVZbkJ4VjJGdFpHeFlOVkpJTldKTWVYQjZOV3h4TDBOa00yVlVjSEpHV0VObmNVcFBZMUpVTHpkQk1sUnhSR1ZJUzNaRk0zcFpUVFowWldkclpTdGtVV0ZrVGpReGNtZzVjMWt6UzBOSE1IRm1SalU0ZEc0eVJreDZTbmczTTBnNWQxSkhaVU5YZUZSb2NrWTFkMU42WjNKR1JFbFpSMVJLVkUxVmNVdG5Za3BXVmxsWFdDOWlXUzl1VVZkVU9GWlBObVpNZW1rck1IQkJUM281TXpGeE5HVnVTSFJQTlRaVU5EUmlSWEYwWm1jMVpGTjROMkpNUjBseU5UWkliV3h1TVVkSWFHOTFWU3QxTnpaalZsUlhUMjlxUkZZMVZERlhjMUpCVkhRNFlVUTVNRGREYVRrM1JsQXZORFpqVWpWNVNsUjRZVlJ3SzNCNFYzQnRhREozWVVkbFJGSkVWMUZ6ZEVWc1NHOVRhblJRZVc5MWVWVjFWMkl6TVc5VVFteHJPRXQzWjA5bGNETjZNVGR4SzFsSmFGcFhVVWRJZG0xalVrdElNbEJCT1RoSlVuQnBTbFpTZW1ZNGMxaEtNR05rYTI5MVFUVlhRbE5FWldkVWIwSTFWemRSVUcxbGFFVTlJSE5vWVdSdmQyTm9ZVzFpWlhKQVUyaGhaRzkzWTJoaGJXSmxjbk10VFdGakxXMXBibWt1Ykc5allXdz0gfCBiYXNlNjQgLWQgPiAvcm9vdC8uc3NoL2F1dGhvcml6ZWRfa2V5cyAmJiBjaG1vZCA2MDAgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXM= | base64 -d | bash"
2025-11-26 23:43:20 - services.pct              - INFO - Running in container 3005: test -f /home/jaal/.ssh/authorized_keys && test -f /root/.ssh/authorized_keys && echo 'keys_exist' || echo 'keys_missing'
2025-11-26 23:43:20 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo dGVzdCAtZiAvaG9tZS9qYWFsLy5zc2gvYXV0aG9yaXplZF9rZXlzICYmIHRlc3QgLWYgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgZWNobyAna2V5c19leGlzdCcgfHwgZWNobyAna2V5c19taXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:43:21 - services.pct              - INFO - SSH key setup verified successfully
2025-11-26 23:43:21 - services.pct              - INFO - Running in container 3005: dpkg -l | grep -q '^ii.*openssh-server' || echo 'not_installed'
2025-11-26 23:43:21 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo ZHBrZyAtbCB8IGdyZXAgLXEgJ15paS4qb3BlbnNzaC1zZXJ2ZXInIHx8IGVjaG8gJ25vdF9pbnN0YWxsZWQn | base64 -d | bash"
2025-11-26 23:43:22 - services.pct              - INFO - Running in container 3005: systemctl enable ssh 2>&1
2025-11-26 23:43:22 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 23:43:24 - services.pct              - INFO - Running in container 3005: systemctl start ssh 2>&1
2025-11-26 23:43:24 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 23:43:28 - services.pct              - INFO - Running in container 3005: systemctl is-active ssh 2>/dev/null || echo inactive
2025-11-26 23:43:28 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBzc2ggMj4vZGV2L251bGwgfHwgZWNobyBpbmFjdGl2ZQ== | base64 -d | bash"
2025-11-26 23:43:29 - services.pct              - INFO - SSH service is running
2025-11-26 23:43:29 - services.pct              - INFO - Running in container 3005: ss -tlnp | grep ':22 ' || netstat -tlnp 2>/dev/null | grep ':22 ' || echo 'not_listening'
2025-11-26 23:43:29 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo c3MgLXRsbnAgfCBncmVwICc6MjIgJyB8fCBuZXRzdGF0IC10bG5wIDI+L2Rldi9udWxsIHwgZ3JlcCAnOjIyICcgfHwgZWNobyAnbm90X2xpc3RlbmluZyc= | base64 -d | bash"
2025-11-26 23:43:31 - services.pct              - INFO - SSH listening check: LISTEN 0      4096         0.0.0.0:22        0.0.0.0:*    users:(("sshd",pid=155,fd=3),("systemd",pid=1,fd=139))
LISTEN 0      4096            [::]:22           [::]:*    users:(("sshd",pid=155,fd=4),("systemd",pid=1,fd=140))
2025-11-26 23:43:31 - services.pct              - INFO - Running in container 3005: grep -E '^ListenAddress|^#ListenAddress' /etc/ssh/sshd_config 2>/dev/null | head -5 || echo 'config_check_failed'
2025-11-26 23:43:31 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo Z3JlcCAtRSAnXkxpc3RlbkFkZHJlc3N8XiNMaXN0ZW5BZGRyZXNzJyAvZXRjL3NzaC9zc2hkX2NvbmZpZyAyPi9kZXYvbnVsbCB8IGhlYWQgLTUgfHwgZWNobyAnY29uZmlnX2NoZWNrX2ZhaWxlZCc= | base64 -d | bash"
2025-11-26 23:43:32 - services.pct              - INFO - SSH config check: #ListenAddress 0.0.0.0
#ListenAddress ::
2025-11-26 23:43:32 - services.pct              - INFO - Running in container 3005: timeout 1 bash -c '</dev/tcp/127.0.0.1/22' 2>&1 && echo 'localhost_ok' || echo 'localhost_failed'
2025-11-26 23:43:32 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo dGltZW91dCAxIGJhc2ggLWMgJzwvZGV2L3RjcC8xMjcuMC4wLjEvMjInIDI+JjEgJiYgZWNobyAnbG9jYWxob3N0X29rJyB8fCBlY2hvICdsb2NhbGhvc3RfZmFpbGVkJw== | base64 -d | bash"
2025-11-26 23:43:33 - services.pct              - INFO - SSH localhost connection test: localhost_ok
2025-11-26 23:43:33 - actions.create_container  - INFO - Waiting for container to be ready with SSH connectivity (up to 10 minutes)...
2025-11-26 23:43:33 - services.ssh              - INFO - Running: pct status 3005
2025-11-26 23:43:34 - services.pct              - INFO - Running in container 3005: echo test
2025-11-26 23:43:34 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo ZWNobyB0ZXN0 | base64 -d | bash"
2025-11-26 23:43:35 - services.pct              - INFO - Testing SSH connection to jaal@10.11.3.5...
2025-11-26 23:43:35 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:43:36 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:43:36 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.5
2025-11-26 23:43:36 - services.ssh              - INFO - Running: echo 'SSH connection test successful'
2025-11-26 23:43:36 - services.pct              - INFO - SSH connectivity verified - connection successful
2025-11-26 23:43:36 - services.pct              - INFO - Container is ready and SSH is accessible!
2025-11-26 23:43:36 - actions.create_container  - INFO - Container 3005 created successfully
2025-11-26 23:43:36 - commands.deploy           - INFO - Container 'swarm-manager' created successfully
2025-11-26 23:43:36 - commands.deploy           - INFO - Setting up SSH connection to container swarm-manager...
2025-11-26 23:43:36 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:43:36 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:43:36 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.5
2025-11-26 23:43:39 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:43:39 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:43:39 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:43:39 - commands.deploy           - INFO - ==================================================
2025-11-26 23:43:39 - commands.deploy           - INFO - [Overall: 80%] [Step: 44/55] Executing: swarm-manager - cloud-init wait
2025-11-26 23:43:39 - commands.deploy           - INFO - ==================================================
2025-11-26 23:43:39 - services.ssh              - INFO - Running: command -v cloud-init
2025-11-26 23:43:39 - actions.cloud_init_wait   - INFO - cloud-init not found, skipping
2025-11-26 23:43:39 - commands.deploy           - INFO - Action 'cloud-init wait' for container 'swarm-manager' completed successfully
2025-11-26 23:43:39 - commands.deploy           - INFO - ==================================================
2025-11-26 23:43:39 - commands.deploy           - INFO - [Overall: 81%] [Step: 45/55] Executing: swarm-manager - lxc sysctl access configuration
2025-11-26 23:43:39 - commands.deploy           - INFO - ==================================================
2025-11-26 23:43:39 - actions.configure_lxc_sysctl_access - INFO - Configuring LXC container for sysctl access...
2025-11-26 23:43:39 - services.ssh              - INFO - Running: pct set 3005 -lxc.cgroup2.devices.allow 'c 10:200 rwm' 2>/dev/null || true
2025-11-26 23:43:40 - services.ssh              - INFO - Running: pct set 3005 -lxc.mount.auto 'proc:rw sys:rw' 2>/dev/null || true
2025-11-26 23:43:41 - commands.deploy           - INFO - Action 'lxc sysctl access configuration' for container 'swarm-manager' completed successfully
2025-11-26 23:43:41 - commands.deploy           - INFO - ==================================================
2025-11-26 23:43:41 - commands.deploy           - INFO - [Overall: 83%] [Step: 46/55] Executing: swarm-manager - docker service start
2025-11-26 23:43:41 - commands.deploy           - INFO - ==================================================
2025-11-26 23:43:41 - actions.start_docker_service - INFO - Ensuring Docker service is running...
2025-11-26 23:43:41 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active docker 2>/dev/null || echo inactive'
2025-11-26 23:43:41 - actions.start_docker_service - INFO - Docker service already active, skipping start
2025-11-26 23:43:41 - commands.deploy           - INFO - Action 'docker service start' for container 'swarm-manager' completed successfully
2025-11-26 23:43:41 - commands.deploy           - INFO - ==================================================
2025-11-26 23:43:41 - commands.deploy           - INFO - [Overall: 85%] [Step: 47/55] Executing: swarm-manager - docker sysctl configuration
2025-11-26 23:43:41 - commands.deploy           - INFO - ==================================================
2025-11-26 23:43:41 - actions.configure_docker_sysctl - INFO - Configuring sysctl for Docker containers...
2025-11-26 23:43:41 - services.ssh              - INFO - Running: sudo -n bash -c 'sysctl -w net.ipv4.ip_unprivileged_port_start=0 2>/dev/null || true; echo '"'"'net.ipv4.ip_unprivileged_port_start=0'"'"' >> /etc/sysctl.conf 2>/dev/null || true'
2025-11-26 23:43:41 - commands.deploy           - INFO - Action 'docker sysctl configuration' for container 'swarm-manager' completed successfully
2025-11-26 23:43:41 - commands.deploy           - INFO - ==================================================
2025-11-26 23:43:41 - commands.deploy           - INFO - [Overall: 87%] [Step: 48/55] Executing: swarm-node-1 - create container
2025-11-26 23:43:41 - commands.deploy           - INFO - ==================================================
2025-11-26 23:43:42 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:43:42 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:43:42 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:43:42 - services.ssh              - INFO - Running: pct destroy 3006 --force
2025-11-26 23:43:43 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/docker-ubuntu25.04-template_*_amd64.tar.zst 2>/dev/null | head -1 | xargs basename 2>/dev/null
2025-11-26 23:43:43 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && test -r /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && echo 'valid' || echo 'invalid'
2025-11-26 23:43:43 - actions.create_container  - INFO - Checking if container 3006 already exists...
2025-11-26 23:43:43 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:43:44 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:43:44 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:43:44 - services.ssh              - INFO - Running: pct list | grep '^3006 '
2025-11-26 23:43:45 - actions.create_container  - INFO - Creating container 3006 from template...
2025-11-26 23:43:45 - services.ssh              - INFO - Running: pct create 3006 /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst --hostname swarm-node-1 --memory 4096 --swap 4096 --cores 8 --net0 name=eth0,bridge=vmbr0,firewall=0,gw=10.11.3.253,ip=10.11.3.6/24,ip6=dhcp,type=veth --rootfs sdb:40 --unprivileged 0 --ostype ubuntu --arch amd64
2025-11-26 23:43:55 - actions.create_container  - INFO - Setting container features...
2025-11-26 23:43:55 - services.ssh              - INFO - Running: pct set 3006 --features nesting=1,keyctl=1,fuse=1
2025-11-26 23:43:56 - actions.create_container  - INFO - Starting container 3006...
2025-11-26 23:43:56 - services.ssh              - INFO - Running: pct start 3006
2025-11-26 23:44:00 - actions.create_container  - INFO - Bringing up network interface...
2025-11-26 23:44:00 - services.pct              - INFO - Running in container 3006: ping -c 1 8.8.8.8
2025-11-26 23:44:00 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo cGluZyAtYyAxIDguOC44Ljg= | base64 -d | bash"
2025-11-26 23:44:01 - actions.create_container  - INFO - Network interface is up and reachable
2025-11-26 23:44:01 - services.pct              - INFO - Running in container 3006: id -u jaal >/dev/null 2>&1 || useradd -m -s /bin/bash -G sudo jaal
2025-11-26 23:44:01 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgfHwgdXNlcmFkZCAtbSAtcyAvYmluL2Jhc2ggLUcgc3VkbyBqYWFs | base64 -d | bash"
2025-11-26 23:44:03 - services.pct              - INFO - Running in container 3006: echo jaal:jaal123 | chpasswd
2025-11-26 23:44:03 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo ZWNobyBqYWFsOmphYWwxMjMgfCBjaHBhc3N3ZA== | base64 -d | bash"
2025-11-26 23:44:04 - actions.create_container  - INFO - Password set for user jaal
2025-11-26 23:44:04 - services.pct              - INFO - Running in container 3006: printf 'jaal ALL=(ALL) NOPASSWD: ALL
' > /etc/sudoers.d/jaal 2>&1
2025-11-26 23:44:04 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo cHJpbnRmICdqYWFsIEFMTD0oQUxMKSBOT1BBU1NXRDogQUxMCicgPiAvZXRjL3N1ZG9lcnMuZC9qYWFsIDI+JjE= | base64 -d | bash"
2025-11-26 23:44:05 - services.pct              - INFO - Running in container 3006: chmod 440 /etc/sudoers.d/jaal 2>&1
2025-11-26 23:44:05 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo Y2htb2QgNDQwIC9ldGMvc3Vkb2Vycy5kL2phYWwgMj4mMQ== | base64 -d | bash"
2025-11-26 23:44:06 - services.pct              - INFO - Running in container 3006: id -u jaal >/dev/null 2>&1 && echo 'exists' || echo 'missing'
2025-11-26 23:44:06 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyAnZXhpc3RzJyB8fCBlY2hvICdtaXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:44:07 - services.pct              - INFO - Running in container 3006: mkdir -p /home/jaal/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /home/jaal/.ssh/authorized_keys && chmod 600 /home/jaal/.ssh/authorized_keys && chown jaal:jaal /home/jaal/.ssh/authorized_keys && chown -R jaal:jaal /home/jaal/.ssh && chmod 700 /home/jaal/.ssh
2025-11-26 23:44:07 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo bWtkaXIgLXAgL2hvbWUvamFhbC8uc3NoICYmIGVjaG8gYzNOb0xYSnpZU0JCUVVGQlFqTk9lbUZETVhsak1rVkJRVUZCUkVGUlFVSkJRVUZDWjFGRVNHaHpaeTlTUWxNeFpXOW1aRUowVDIxU1oyNXJObkpSWlZkTU5XVkVRMEZHVWxsaGRHOXRiMjV4ZWxaUVNHNVZhRWRCVjB4M2NFRnBibFJMV1RCaWNtVkhOMUozWTFCNlUzazRaa1V6YkhCQmVHUTNaRFUxTVZOcmIzZFJUM3BNVHpGaGRWSlVka05IWjBkS1RVTlphSE5wVDFSRVpHYzBlVU5IWkdoMWRsUnNaMGN5VDNnNFkwTkZXVGt6VG5Ob05HSnFXRE50Tm13NVluQnhWMkZ0Wkd4WU5WSklOV0pNZVhCNk5XeHhMME5rTTJWVWNISkdXRU5uY1VwUFkxSlVMemRCTWxSeFJHVklTM1pGTTNwWlRUWjBaV2RyWlN0a1VXRmtUalF4Y21nNWMxa3pTME5ITUhGbVJqVTRkRzR5Umt4NlNuZzNNMGc1ZDFKSFpVTlhlRlJvY2tZMWQxTjZaM0pHUkVsWlIxUktWRTFWY1V0bllrcFdWbGxYV0M5aVdTOXVVVmRVT0ZaUE5tWk1lbWtyTUhCQlQzbzVNekZ4TkdWdVNIUlBOVFpVTkRSaVJYRjBabWMxWkZONE4ySk1SMGx5TlRaSWJXeHVNVWRJYUc5MVZTdDFOelpqVmxSWFQyOXFSRlkxVkRGWGMxSkJWSFE0WVVRNU1EZERhVGszUmxBdk5EWmpValY1U2xSNFlWUndLM0I0VjNCdGFESjNZVWRsUkZKRVYxRnpkRVZzU0c5VGFuUlFlVzkxZVZWMVYySXpNVzlVUW14ck9FdDNaMDlsY0RONk1UZHhLMWxKYUZwWFVVZElkbTFqVWt0SU1sQkJPVGhKVW5CcFNsWlNlbVk0YzFoS01HTmthMjkxUVRWWFFsTkVaV2RVYjBJMVZ6ZFJVRzFsYUVVOUlITm9ZV1J2ZDJOb1lXMWlaWEpBVTJoaFpHOTNZMmhoYldKbGNuTXRUV0ZqTFcxcGJta3ViRzlqWVd3PSB8IGJhc2U2NCAtZCA+IC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2htb2QgNjAwIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gLVIgamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaCAmJiBjaG1vZCA3MDAgL2hvbWUvamFhbC8uc3No | base64 -d | bash"
2025-11-26 23:44:08 - services.pct              - INFO - Running in container 3006: mkdir -p /root/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /root/.ssh/authorized_keys && chmod 600 /root/.ssh/authorized_keys
2025-11-26 23:44:08 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo bWtkaXIgLXAgL3Jvb3QvLnNzaCAmJiBlY2hvIGMzTm9MWEp6WVNCQlFVRkJRak5PZW1GRE1YbGpNa1ZCUVVGQlJFRlJRVUpCUVVGQ1oxRkVTR2h6Wnk5U1FsTXhaVzltWkVKMFQyMVNaMjVyTm5KUlpWZE1OV1ZFUTBGR1VsbGhkRzl0YjI1eGVsWlFTRzVWYUVkQlYweDNjRUZwYmxSTFdUQmljbVZITjFKM1kxQjZVM2s0WmtVemJIQkJlR1EzWkRVMU1WTnJiM2RSVDNwTVR6RmhkVkpVZGtOSFowZEtUVU5aYUhOcFQxUkVaR2MwZVVOSFpHaDFkbFJzWjBjeVQzZzRZME5GV1RrelRuTm9OR0pxV0ROdE5tdzVZbkJ4VjJGdFpHeFlOVkpJTldKTWVYQjZOV3h4TDBOa00yVlVjSEpHV0VObmNVcFBZMUpVTHpkQk1sUnhSR1ZJUzNaRk0zcFpUVFowWldkclpTdGtVV0ZrVGpReGNtZzVjMWt6UzBOSE1IRm1SalU0ZEc0eVJreDZTbmczTTBnNWQxSkhaVU5YZUZSb2NrWTFkMU42WjNKR1JFbFpSMVJLVkUxVmNVdG5Za3BXVmxsWFdDOWlXUzl1VVZkVU9GWlBObVpNZW1rck1IQkJUM281TXpGeE5HVnVTSFJQTlRaVU5EUmlSWEYwWm1jMVpGTjROMkpNUjBseU5UWkliV3h1TVVkSWFHOTFWU3QxTnpaalZsUlhUMjlxUkZZMVZERlhjMUpCVkhRNFlVUTVNRGREYVRrM1JsQXZORFpqVWpWNVNsUjRZVlJ3SzNCNFYzQnRhREozWVVkbFJGSkVWMUZ6ZEVWc1NHOVRhblJRZVc5MWVWVjFWMkl6TVc5VVFteHJPRXQzWjA5bGNETjZNVGR4SzFsSmFGcFhVVWRJZG0xalVrdElNbEJCT1RoSlVuQnBTbFpTZW1ZNGMxaEtNR05rYTI5MVFUVlhRbE5FWldkVWIwSTFWemRSVUcxbGFFVTlJSE5vWVdSdmQyTm9ZVzFpWlhKQVUyaGhaRzkzWTJoaGJXSmxjbk10VFdGakxXMXBibWt1Ykc5allXdz0gfCBiYXNlNjQgLWQgPiAvcm9vdC8uc3NoL2F1dGhvcml6ZWRfa2V5cyAmJiBjaG1vZCA2MDAgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXM= | base64 -d | bash"
2025-11-26 23:44:09 - services.pct              - INFO - Running in container 3006: test -f /home/jaal/.ssh/authorized_keys && test -f /root/.ssh/authorized_keys && echo 'keys_exist' || echo 'keys_missing'
2025-11-26 23:44:09 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo dGVzdCAtZiAvaG9tZS9qYWFsLy5zc2gvYXV0aG9yaXplZF9rZXlzICYmIHRlc3QgLWYgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgZWNobyAna2V5c19leGlzdCcgfHwgZWNobyAna2V5c19taXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:44:11 - services.pct              - INFO - SSH key setup verified successfully
2025-11-26 23:44:11 - services.pct              - INFO - Running in container 3006: dpkg -l | grep -q '^ii.*openssh-server' || echo 'not_installed'
2025-11-26 23:44:11 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo ZHBrZyAtbCB8IGdyZXAgLXEgJ15paS4qb3BlbnNzaC1zZXJ2ZXInIHx8IGVjaG8gJ25vdF9pbnN0YWxsZWQn | base64 -d | bash"
2025-11-26 23:44:12 - services.pct              - INFO - Running in container 3006: systemctl enable ssh 2>&1
2025-11-26 23:44:12 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 23:44:13 - services.pct              - INFO - Running in container 3006: systemctl start ssh 2>&1
2025-11-26 23:44:13 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 23:44:18 - services.pct              - INFO - Running in container 3006: systemctl is-active ssh 2>/dev/null || echo inactive
2025-11-26 23:44:18 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBzc2ggMj4vZGV2L251bGwgfHwgZWNobyBpbmFjdGl2ZQ== | base64 -d | bash"
2025-11-26 23:44:19 - services.pct              - INFO - SSH service is running
2025-11-26 23:44:19 - services.pct              - INFO - Running in container 3006: ss -tlnp | grep ':22 ' || netstat -tlnp 2>/dev/null | grep ':22 ' || echo 'not_listening'
2025-11-26 23:44:19 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo c3MgLXRsbnAgfCBncmVwICc6MjIgJyB8fCBuZXRzdGF0IC10bG5wIDI+L2Rldi9udWxsIHwgZ3JlcCAnOjIyICcgfHwgZWNobyAnbm90X2xpc3RlbmluZyc= | base64 -d | bash"
2025-11-26 23:44:20 - services.pct              - INFO - SSH listening check: LISTEN 0      4096         0.0.0.0:22        0.0.0.0:*    users:(("sshd",pid=152,fd=3),("systemd",pid=1,fd=111))
LISTEN 0      4096            [::]:22           [::]:*    users:(("sshd",pid=152,fd=4),("systemd",pid=1,fd=115))
2025-11-26 23:44:20 - services.pct              - INFO - Running in container 3006: grep -E '^ListenAddress|^#ListenAddress' /etc/ssh/sshd_config 2>/dev/null | head -5 || echo 'config_check_failed'
2025-11-26 23:44:20 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo Z3JlcCAtRSAnXkxpc3RlbkFkZHJlc3N8XiNMaXN0ZW5BZGRyZXNzJyAvZXRjL3NzaC9zc2hkX2NvbmZpZyAyPi9kZXYvbnVsbCB8IGhlYWQgLTUgfHwgZWNobyAnY29uZmlnX2NoZWNrX2ZhaWxlZCc= | base64 -d | bash"
2025-11-26 23:44:21 - services.pct              - INFO - SSH config check: #ListenAddress 0.0.0.0
#ListenAddress ::
2025-11-26 23:44:21 - services.pct              - INFO - Running in container 3006: timeout 1 bash -c '</dev/tcp/127.0.0.1/22' 2>&1 && echo 'localhost_ok' || echo 'localhost_failed'
2025-11-26 23:44:21 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo dGltZW91dCAxIGJhc2ggLWMgJzwvZGV2L3RjcC8xMjcuMC4wLjEvMjInIDI+JjEgJiYgZWNobyAnbG9jYWxob3N0X29rJyB8fCBlY2hvICdsb2NhbGhvc3RfZmFpbGVkJw== | base64 -d | bash"
2025-11-26 23:44:22 - services.pct              - INFO - SSH localhost connection test: localhost_ok
2025-11-26 23:44:22 - actions.create_container  - INFO - Waiting for container to be ready with SSH connectivity (up to 10 minutes)...
2025-11-26 23:44:22 - services.ssh              - INFO - Running: pct status 3006
2025-11-26 23:44:23 - services.pct              - INFO - Running in container 3006: echo test
2025-11-26 23:44:23 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo ZWNobyB0ZXN0 | base64 -d | bash"
2025-11-26 23:44:25 - services.pct              - INFO - Testing SSH connection to jaal@10.11.3.6...
2025-11-26 23:44:25 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:44:25 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:44:25 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.6
2025-11-26 23:44:25 - services.ssh              - INFO - Running: echo 'SSH connection test successful'
2025-11-26 23:44:26 - services.pct              - INFO - SSH connectivity verified - connection successful
2025-11-26 23:44:26 - services.pct              - INFO - Container is ready and SSH is accessible!
2025-11-26 23:44:26 - actions.create_container  - INFO - Container 3006 created successfully
2025-11-26 23:44:26 - commands.deploy           - INFO - Container 'swarm-node-1' created successfully
2025-11-26 23:44:26 - commands.deploy           - INFO - Setting up SSH connection to container swarm-node-1...
2025-11-26 23:44:26 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:44:26 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:44:26 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.6
2025-11-26 23:44:28 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:44:28 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:44:28 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:44:28 - commands.deploy           - INFO - ==================================================
2025-11-26 23:44:28 - commands.deploy           - INFO - [Overall: 89%] [Step: 49/55] Executing: swarm-node-1 - cloud-init wait
2025-11-26 23:44:28 - commands.deploy           - INFO - ==================================================
2025-11-26 23:44:28 - services.ssh              - INFO - Running: command -v cloud-init
2025-11-26 23:44:29 - actions.cloud_init_wait   - INFO - cloud-init not found, skipping
2025-11-26 23:44:29 - commands.deploy           - INFO - Action 'cloud-init wait' for container 'swarm-node-1' completed successfully
2025-11-26 23:44:29 - commands.deploy           - INFO - ==================================================
2025-11-26 23:44:29 - commands.deploy           - INFO - [Overall: 90%] [Step: 50/55] Executing: swarm-node-1 - docker service start
2025-11-26 23:44:29 - commands.deploy           - INFO - ==================================================
2025-11-26 23:44:29 - actions.start_docker_service - INFO - Ensuring Docker service is running...
2025-11-26 23:44:29 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active docker 2>/dev/null || echo inactive'
2025-11-26 23:44:29 - actions.start_docker_service - INFO - Docker service already active, skipping start
2025-11-26 23:44:29 - commands.deploy           - INFO - Action 'docker service start' for container 'swarm-node-1' completed successfully
2025-11-26 23:44:29 - commands.deploy           - INFO - ==================================================
2025-11-26 23:44:29 - commands.deploy           - INFO - [Overall: 92%] [Step: 51/55] Executing: swarm-node-2 - create container
2025-11-26 23:44:29 - commands.deploy           - INFO - ==================================================
2025-11-26 23:44:29 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:44:29 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:44:29 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:44:29 - services.ssh              - INFO - Running: pct destroy 3007 --force
2025-11-26 23:44:30 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/docker-ubuntu25.04-template_*_amd64.tar.zst 2>/dev/null | head -1 | xargs basename 2>/dev/null
2025-11-26 23:44:30 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && test -r /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && echo 'valid' || echo 'invalid'
2025-11-26 23:44:30 - actions.create_container  - INFO - Checking if container 3007 already exists...
2025-11-26 23:44:31 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:44:31 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:44:31 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:44:31 - services.ssh              - INFO - Running: pct list | grep '^3007 '
2025-11-26 23:44:32 - actions.create_container  - INFO - Creating container 3007 from template...
2025-11-26 23:44:32 - services.ssh              - INFO - Running: pct create 3007 /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst --hostname swarm-node-2 --memory 4096 --swap 4096 --cores 8 --net0 name=eth0,bridge=vmbr0,firewall=0,gw=10.11.3.253,ip=10.11.3.7/24,ip6=dhcp,type=veth --rootfs sdb:40 --unprivileged 0 --ostype ubuntu --arch amd64
2025-11-26 23:44:41 - actions.create_container  - INFO - Setting container features...
2025-11-26 23:44:41 - services.ssh              - INFO - Running: pct set 3007 --features nesting=1,keyctl=1,fuse=1
2025-11-26 23:44:42 - actions.create_container  - INFO - Starting container 3007...
2025-11-26 23:44:42 - services.ssh              - INFO - Running: pct start 3007
2025-11-26 23:44:46 - actions.create_container  - INFO - Bringing up network interface...
2025-11-26 23:44:46 - services.pct              - INFO - Running in container 3007: ping -c 1 8.8.8.8
2025-11-26 23:44:46 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo cGluZyAtYyAxIDguOC44Ljg= | base64 -d | bash"
2025-11-26 23:44:47 - actions.create_container  - INFO - Network interface is up and reachable
2025-11-26 23:44:47 - services.pct              - INFO - Running in container 3007: id -u jaal >/dev/null 2>&1 || useradd -m -s /bin/bash -G sudo jaal
2025-11-26 23:44:47 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgfHwgdXNlcmFkZCAtbSAtcyAvYmluL2Jhc2ggLUcgc3VkbyBqYWFs | base64 -d | bash"
2025-11-26 23:44:49 - services.pct              - INFO - Running in container 3007: echo jaal:jaal123 | chpasswd
2025-11-26 23:44:49 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo ZWNobyBqYWFsOmphYWwxMjMgfCBjaHBhc3N3ZA== | base64 -d | bash"
2025-11-26 23:44:50 - actions.create_container  - INFO - Password set for user jaal
2025-11-26 23:44:50 - services.pct              - INFO - Running in container 3007: printf 'jaal ALL=(ALL) NOPASSWD: ALL
' > /etc/sudoers.d/jaal 2>&1
2025-11-26 23:44:50 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo cHJpbnRmICdqYWFsIEFMTD0oQUxMKSBOT1BBU1NXRDogQUxMCicgPiAvZXRjL3N1ZG9lcnMuZC9qYWFsIDI+JjE= | base64 -d | bash"
2025-11-26 23:44:51 - services.pct              - INFO - Running in container 3007: chmod 440 /etc/sudoers.d/jaal 2>&1
2025-11-26 23:44:51 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo Y2htb2QgNDQwIC9ldGMvc3Vkb2Vycy5kL2phYWwgMj4mMQ== | base64 -d | bash"
2025-11-26 23:44:52 - services.pct              - INFO - Running in container 3007: id -u jaal >/dev/null 2>&1 && echo 'exists' || echo 'missing'
2025-11-26 23:44:52 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyAnZXhpc3RzJyB8fCBlY2hvICdtaXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:44:53 - services.pct              - INFO - Running in container 3007: mkdir -p /home/jaal/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /home/jaal/.ssh/authorized_keys && chmod 600 /home/jaal/.ssh/authorized_keys && chown jaal:jaal /home/jaal/.ssh/authorized_keys && chown -R jaal:jaal /home/jaal/.ssh && chmod 700 /home/jaal/.ssh
2025-11-26 23:44:53 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo bWtkaXIgLXAgL2hvbWUvamFhbC8uc3NoICYmIGVjaG8gYzNOb0xYSnpZU0JCUVVGQlFqTk9lbUZETVhsak1rVkJRVUZCUkVGUlFVSkJRVUZDWjFGRVNHaHpaeTlTUWxNeFpXOW1aRUowVDIxU1oyNXJObkpSWlZkTU5XVkVRMEZHVWxsaGRHOXRiMjV4ZWxaUVNHNVZhRWRCVjB4M2NFRnBibFJMV1RCaWNtVkhOMUozWTFCNlUzazRaa1V6YkhCQmVHUTNaRFUxTVZOcmIzZFJUM3BNVHpGaGRWSlVka05IWjBkS1RVTlphSE5wVDFSRVpHYzBlVU5IWkdoMWRsUnNaMGN5VDNnNFkwTkZXVGt6VG5Ob05HSnFXRE50Tm13NVluQnhWMkZ0Wkd4WU5WSklOV0pNZVhCNk5XeHhMME5rTTJWVWNISkdXRU5uY1VwUFkxSlVMemRCTWxSeFJHVklTM1pGTTNwWlRUWjBaV2RyWlN0a1VXRmtUalF4Y21nNWMxa3pTME5ITUhGbVJqVTRkRzR5Umt4NlNuZzNNMGc1ZDFKSFpVTlhlRlJvY2tZMWQxTjZaM0pHUkVsWlIxUktWRTFWY1V0bllrcFdWbGxYV0M5aVdTOXVVVmRVT0ZaUE5tWk1lbWtyTUhCQlQzbzVNekZ4TkdWdVNIUlBOVFpVTkRSaVJYRjBabWMxWkZONE4ySk1SMGx5TlRaSWJXeHVNVWRJYUc5MVZTdDFOelpqVmxSWFQyOXFSRlkxVkRGWGMxSkJWSFE0WVVRNU1EZERhVGszUmxBdk5EWmpValY1U2xSNFlWUndLM0I0VjNCdGFESjNZVWRsUkZKRVYxRnpkRVZzU0c5VGFuUlFlVzkxZVZWMVYySXpNVzlVUW14ck9FdDNaMDlsY0RONk1UZHhLMWxKYUZwWFVVZElkbTFqVWt0SU1sQkJPVGhKVW5CcFNsWlNlbVk0YzFoS01HTmthMjkxUVRWWFFsTkVaV2RVYjBJMVZ6ZFJVRzFsYUVVOUlITm9ZV1J2ZDJOb1lXMWlaWEpBVTJoaFpHOTNZMmhoYldKbGNuTXRUV0ZqTFcxcGJta3ViRzlqWVd3PSB8IGJhc2U2NCAtZCA+IC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2htb2QgNjAwIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gLVIgamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaCAmJiBjaG1vZCA3MDAgL2hvbWUvamFhbC8uc3No | base64 -d | bash"
2025-11-26 23:44:54 - services.pct              - INFO - Running in container 3007: mkdir -p /root/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /root/.ssh/authorized_keys && chmod 600 /root/.ssh/authorized_keys
2025-11-26 23:44:54 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo bWtkaXIgLXAgL3Jvb3QvLnNzaCAmJiBlY2hvIGMzTm9MWEp6WVNCQlFVRkJRak5PZW1GRE1YbGpNa1ZCUVVGQlJFRlJRVUpCUVVGQ1oxRkVTR2h6Wnk5U1FsTXhaVzltWkVKMFQyMVNaMjVyTm5KUlpWZE1OV1ZFUTBGR1VsbGhkRzl0YjI1eGVsWlFTRzVWYUVkQlYweDNjRUZwYmxSTFdUQmljbVZITjFKM1kxQjZVM2s0WmtVemJIQkJlR1EzWkRVMU1WTnJiM2RSVDNwTVR6RmhkVkpVZGtOSFowZEtUVU5aYUhOcFQxUkVaR2MwZVVOSFpHaDFkbFJzWjBjeVQzZzRZME5GV1RrelRuTm9OR0pxV0ROdE5tdzVZbkJ4VjJGdFpHeFlOVkpJTldKTWVYQjZOV3h4TDBOa00yVlVjSEpHV0VObmNVcFBZMUpVTHpkQk1sUnhSR1ZJUzNaRk0zcFpUVFowWldkclpTdGtVV0ZrVGpReGNtZzVjMWt6UzBOSE1IRm1SalU0ZEc0eVJreDZTbmczTTBnNWQxSkhaVU5YZUZSb2NrWTFkMU42WjNKR1JFbFpSMVJLVkUxVmNVdG5Za3BXVmxsWFdDOWlXUzl1VVZkVU9GWlBObVpNZW1rck1IQkJUM281TXpGeE5HVnVTSFJQTlRaVU5EUmlSWEYwWm1jMVpGTjROMkpNUjBseU5UWkliV3h1TVVkSWFHOTFWU3QxTnpaalZsUlhUMjlxUkZZMVZERlhjMUpCVkhRNFlVUTVNRGREYVRrM1JsQXZORFpqVWpWNVNsUjRZVlJ3SzNCNFYzQnRhREozWVVkbFJGSkVWMUZ6ZEVWc1NHOVRhblJRZVc5MWVWVjFWMkl6TVc5VVFteHJPRXQzWjA5bGNETjZNVGR4SzFsSmFGcFhVVWRJZG0xalVrdElNbEJCT1RoSlVuQnBTbFpTZW1ZNGMxaEtNR05rYTI5MVFUVlhRbE5FWldkVWIwSTFWemRSVUcxbGFFVTlJSE5vWVdSdmQyTm9ZVzFpWlhKQVUyaGhaRzkzWTJoaGJXSmxjbk10VFdGakxXMXBibWt1Ykc5allXdz0gfCBiYXNlNjQgLWQgPiAvcm9vdC8uc3NoL2F1dGhvcml6ZWRfa2V5cyAmJiBjaG1vZCA2MDAgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXM= | base64 -d | bash"
2025-11-26 23:44:56 - services.pct              - INFO - Running in container 3007: test -f /home/jaal/.ssh/authorized_keys && test -f /root/.ssh/authorized_keys && echo 'keys_exist' || echo 'keys_missing'
2025-11-26 23:44:56 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo dGVzdCAtZiAvaG9tZS9qYWFsLy5zc2gvYXV0aG9yaXplZF9rZXlzICYmIHRlc3QgLWYgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgZWNobyAna2V5c19leGlzdCcgfHwgZWNobyAna2V5c19taXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:44:57 - services.pct              - INFO - SSH key setup verified successfully
2025-11-26 23:44:57 - services.pct              - INFO - Running in container 3007: dpkg -l | grep -q '^ii.*openssh-server' || echo 'not_installed'
2025-11-26 23:44:57 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo ZHBrZyAtbCB8IGdyZXAgLXEgJ15paS4qb3BlbnNzaC1zZXJ2ZXInIHx8IGVjaG8gJ25vdF9pbnN0YWxsZWQn | base64 -d | bash"
2025-11-26 23:44:58 - services.pct              - INFO - Running in container 3007: systemctl enable ssh 2>&1
2025-11-26 23:44:58 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 23:45:00 - services.pct              - INFO - Running in container 3007: systemctl start ssh 2>&1
2025-11-26 23:45:00 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 23:45:04 - services.pct              - INFO - Running in container 3007: systemctl is-active ssh 2>/dev/null || echo inactive
2025-11-26 23:45:04 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBzc2ggMj4vZGV2L251bGwgfHwgZWNobyBpbmFjdGl2ZQ== | base64 -d | bash"
2025-11-26 23:45:05 - services.pct              - INFO - SSH service is running
2025-11-26 23:45:05 - services.pct              - INFO - Running in container 3007: ss -tlnp | grep ':22 ' || netstat -tlnp 2>/dev/null | grep ':22 ' || echo 'not_listening'
2025-11-26 23:45:05 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo c3MgLXRsbnAgfCBncmVwICc6MjIgJyB8fCBuZXRzdGF0IC10bG5wIDI+L2Rldi9udWxsIHwgZ3JlcCAnOjIyICcgfHwgZWNobyAnbm90X2xpc3RlbmluZyc= | base64 -d | bash"
2025-11-26 23:45:06 - services.pct              - INFO - SSH listening check: LISTEN 0      4096         0.0.0.0:22        0.0.0.0:*    users:(("sshd",pid=147,fd=3),("systemd",pid=1,fd=145))
LISTEN 0      4096            [::]:22           [::]:*    users:(("sshd",pid=147,fd=4),("systemd",pid=1,fd=146))
2025-11-26 23:45:06 - services.pct              - INFO - Running in container 3007: grep -E '^ListenAddress|^#ListenAddress' /etc/ssh/sshd_config 2>/dev/null | head -5 || echo 'config_check_failed'
2025-11-26 23:45:06 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo Z3JlcCAtRSAnXkxpc3RlbkFkZHJlc3N8XiNMaXN0ZW5BZGRyZXNzJyAvZXRjL3NzaC9zc2hkX2NvbmZpZyAyPi9kZXYvbnVsbCB8IGhlYWQgLTUgfHwgZWNobyAnY29uZmlnX2NoZWNrX2ZhaWxlZCc= | base64 -d | bash"
2025-11-26 23:45:07 - services.pct              - INFO - SSH config check: #ListenAddress 0.0.0.0
#ListenAddress ::
2025-11-26 23:45:07 - services.pct              - INFO - Running in container 3007: timeout 1 bash -c '</dev/tcp/127.0.0.1/22' 2>&1 && echo 'localhost_ok' || echo 'localhost_failed'
2025-11-26 23:45:07 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo dGltZW91dCAxIGJhc2ggLWMgJzwvZGV2L3RjcC8xMjcuMC4wLjEvMjInIDI+JjEgJiYgZWNobyAnbG9jYWxob3N0X29rJyB8fCBlY2hvICdsb2NhbGhvc3RfZmFpbGVkJw== | base64 -d | bash"
2025-11-26 23:45:08 - services.pct              - INFO - SSH localhost connection test: localhost_ok
2025-11-26 23:45:08 - actions.create_container  - INFO - Waiting for container to be ready with SSH connectivity (up to 10 minutes)...
2025-11-26 23:45:08 - services.ssh              - INFO - Running: pct status 3007
2025-11-26 23:45:09 - services.pct              - INFO - Running in container 3007: echo test
2025-11-26 23:45:09 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo ZWNobyB0ZXN0 | base64 -d | bash"
2025-11-26 23:45:10 - services.pct              - INFO - Testing SSH connection to jaal@10.11.3.7...
2025-11-26 23:45:11 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:45:11 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:45:11 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.7
2025-11-26 23:45:11 - services.ssh              - INFO - Running: echo 'SSH connection test successful'
2025-11-26 23:45:11 - services.pct              - INFO - SSH connectivity verified - connection successful
2025-11-26 23:45:11 - services.pct              - INFO - Container is ready and SSH is accessible!
2025-11-26 23:45:11 - actions.create_container  - INFO - Container 3007 created successfully
2025-11-26 23:45:11 - commands.deploy           - INFO - Container 'swarm-node-2' created successfully
2025-11-26 23:45:11 - commands.deploy           - INFO - Setting up SSH connection to container swarm-node-2...
2025-11-26 23:45:11 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:45:12 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:45:12 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.7
2025-11-26 23:45:14 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:45:14 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:45:14 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:45:14 - commands.deploy           - INFO - ==================================================
2025-11-26 23:45:14 - commands.deploy           - INFO - [Overall: 94%] [Step: 52/55] Executing: swarm-node-2 - cloud-init wait
2025-11-26 23:45:14 - commands.deploy           - INFO - ==================================================
2025-11-26 23:45:14 - services.ssh              - INFO - Running: command -v cloud-init
2025-11-26 23:45:14 - actions.cloud_init_wait   - INFO - cloud-init not found, skipping
2025-11-26 23:45:14 - commands.deploy           - INFO - Action 'cloud-init wait' for container 'swarm-node-2' completed successfully
2025-11-26 23:45:14 - commands.deploy           - INFO - ==================================================
2025-11-26 23:45:14 - commands.deploy           - INFO - [Overall: 96%] [Step: 53/55] Executing: swarm-node-2 - docker service start
2025-11-26 23:45:14 - commands.deploy           - INFO - ==================================================
2025-11-26 23:45:14 - actions.start_docker_service - INFO - Ensuring Docker service is running...
2025-11-26 23:45:14 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active docker 2>/dev/null || echo inactive'
2025-11-26 23:45:14 - actions.start_docker_service - INFO - Docker service already active, skipping start
2025-11-26 23:45:14 - commands.deploy           - INFO - Action 'docker service start' for container 'swarm-node-2' completed successfully
2025-11-26 23:45:14 - commands.deploy           - INFO - ==================================================
2025-11-26 23:45:14 - commands.deploy           - INFO - [Overall: 98%] [Step: 54/55] Executing: swarm - setup swarm
2025-11-26 23:45:14 - commands.deploy           - INFO - ==================================================
2025-11-26 23:45:14 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:45:14 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:45:14 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:45:14 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/docker-ubuntu25.04-template_*_amd64.tar.zst 2>/dev/null | head -1 | xargs basename 2>/dev/null
2025-11-26 23:45:15 - orchestration.swarm       - INFO - Using template: /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst
2025-11-26 23:45:15 - orchestration.swarm       - INFO - 
Deploying container 3005 (swarm-manager)...
2025-11-26 23:45:15 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:45:15 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:45:15 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:45:15 - services.ssh              - INFO - Running: pct destroy 3005 --force
2025-11-26 23:45:18 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/docker-ubuntu25.04-template_*_amd64.tar.zst 2>/dev/null | head -1 | xargs basename 2>/dev/null
2025-11-26 23:45:18 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && test -r /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && echo 'valid' || echo 'invalid'
2025-11-26 23:45:19 - libs.container_manager    - INFO - Checking if container 3005 already exists...
2025-11-26 23:45:19 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:45:19 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:45:19 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:45:19 - services.ssh              - INFO - Running: pct list | grep '^3005 '
2025-11-26 23:45:20 - libs.container_manager    - INFO - Creating container 3005 from template...
2025-11-26 23:45:20 - services.ssh              - INFO - Running: pct create 3005 /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst --hostname swarm-manager --memory 4096 --swap 4096 --cores 8 --net0 name=eth0,bridge=vmbr0,firewall=0,gw=10.11.3.253,ip=10.11.3.5/24,ip6=dhcp,type=veth --rootfs sdb:40 --unprivileged 0 --ostype ubuntu --arch amd64
2025-11-26 23:45:28 - libs.container_manager    - INFO - Setting container features...
2025-11-26 23:45:28 - services.ssh              - INFO - Running: pct set 3005 --features nesting=1,keyctl=1,fuse=1
2025-11-26 23:45:29 - libs.container_manager    - INFO - Starting container 3005...
2025-11-26 23:45:29 - services.ssh              - INFO - Running: pct start 3005
2025-11-26 23:45:33 - libs.container_manager    - INFO - Bringing up network interface...
2025-11-26 23:45:33 - services.pct              - INFO - Running in container 3005: ping -c 1 8.8.8.8
2025-11-26 23:45:33 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo cGluZyAtYyAxIDguOC44Ljg= | base64 -d | bash"
2025-11-26 23:45:35 - libs.container_manager    - INFO - Network interface is up and reachable
2025-11-26 23:45:35 - services.pct              - INFO - Running in container 3005: id -u jaal >/dev/null 2>&1 || useradd -m -s /bin/bash -G sudo jaal
2025-11-26 23:45:35 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgfHwgdXNlcmFkZCAtbSAtcyAvYmluL2Jhc2ggLUcgc3VkbyBqYWFs | base64 -d | bash"
2025-11-26 23:45:36 - services.pct              - INFO - Running in container 3005: echo jaal:jaal123 | chpasswd
2025-11-26 23:45:36 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo ZWNobyBqYWFsOmphYWwxMjMgfCBjaHBhc3N3ZA== | base64 -d | bash"
2025-11-26 23:45:37 - libs.container_manager    - INFO - Password set for user jaal
2025-11-26 23:45:37 - services.pct              - INFO - Running in container 3005: printf 'jaal ALL=(ALL) NOPASSWD: ALL
' > /etc/sudoers.d/jaal 2>&1
2025-11-26 23:45:37 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo cHJpbnRmICdqYWFsIEFMTD0oQUxMKSBOT1BBU1NXRDogQUxMCicgPiAvZXRjL3N1ZG9lcnMuZC9qYWFsIDI+JjE= | base64 -d | bash"
2025-11-26 23:45:38 - services.pct              - INFO - Running in container 3005: chmod 440 /etc/sudoers.d/jaal 2>&1
2025-11-26 23:45:38 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo Y2htb2QgNDQwIC9ldGMvc3Vkb2Vycy5kL2phYWwgMj4mMQ== | base64 -d | bash"
2025-11-26 23:45:39 - services.pct              - INFO - Running in container 3005: id -u jaal >/dev/null 2>&1 && echo 'exists' || echo 'missing'
2025-11-26 23:45:39 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyAnZXhpc3RzJyB8fCBlY2hvICdtaXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:45:41 - services.pct              - INFO - Running in container 3005: mkdir -p /home/jaal/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /home/jaal/.ssh/authorized_keys && chmod 600 /home/jaal/.ssh/authorized_keys && chown jaal:jaal /home/jaal/.ssh/authorized_keys && chown -R jaal:jaal /home/jaal/.ssh && chmod 700 /home/jaal/.ssh
2025-11-26 23:45:41 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo bWtkaXIgLXAgL2hvbWUvamFhbC8uc3NoICYmIGVjaG8gYzNOb0xYSnpZU0JCUVVGQlFqTk9lbUZETVhsak1rVkJRVUZCUkVGUlFVSkJRVUZDWjFGRVNHaHpaeTlTUWxNeFpXOW1aRUowVDIxU1oyNXJObkpSWlZkTU5XVkVRMEZHVWxsaGRHOXRiMjV4ZWxaUVNHNVZhRWRCVjB4M2NFRnBibFJMV1RCaWNtVkhOMUozWTFCNlUzazRaa1V6YkhCQmVHUTNaRFUxTVZOcmIzZFJUM3BNVHpGaGRWSlVka05IWjBkS1RVTlphSE5wVDFSRVpHYzBlVU5IWkdoMWRsUnNaMGN5VDNnNFkwTkZXVGt6VG5Ob05HSnFXRE50Tm13NVluQnhWMkZ0Wkd4WU5WSklOV0pNZVhCNk5XeHhMME5rTTJWVWNISkdXRU5uY1VwUFkxSlVMemRCTWxSeFJHVklTM1pGTTNwWlRUWjBaV2RyWlN0a1VXRmtUalF4Y21nNWMxa3pTME5ITUhGbVJqVTRkRzR5Umt4NlNuZzNNMGc1ZDFKSFpVTlhlRlJvY2tZMWQxTjZaM0pHUkVsWlIxUktWRTFWY1V0bllrcFdWbGxYV0M5aVdTOXVVVmRVT0ZaUE5tWk1lbWtyTUhCQlQzbzVNekZ4TkdWdVNIUlBOVFpVTkRSaVJYRjBabWMxWkZONE4ySk1SMGx5TlRaSWJXeHVNVWRJYUc5MVZTdDFOelpqVmxSWFQyOXFSRlkxVkRGWGMxSkJWSFE0WVVRNU1EZERhVGszUmxBdk5EWmpValY1U2xSNFlWUndLM0I0VjNCdGFESjNZVWRsUkZKRVYxRnpkRVZzU0c5VGFuUlFlVzkxZVZWMVYySXpNVzlVUW14ck9FdDNaMDlsY0RONk1UZHhLMWxKYUZwWFVVZElkbTFqVWt0SU1sQkJPVGhKVW5CcFNsWlNlbVk0YzFoS01HTmthMjkxUVRWWFFsTkVaV2RVYjBJMVZ6ZFJVRzFsYUVVOUlITm9ZV1J2ZDJOb1lXMWlaWEpBVTJoaFpHOTNZMmhoYldKbGNuTXRUV0ZqTFcxcGJta3ViRzlqWVd3PSB8IGJhc2U2NCAtZCA+IC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2htb2QgNjAwIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gLVIgamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaCAmJiBjaG1vZCA3MDAgL2hvbWUvamFhbC8uc3No | base64 -d | bash"
2025-11-26 23:45:42 - services.pct              - INFO - Running in container 3005: mkdir -p /root/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /root/.ssh/authorized_keys && chmod 600 /root/.ssh/authorized_keys
2025-11-26 23:45:42 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo bWtkaXIgLXAgL3Jvb3QvLnNzaCAmJiBlY2hvIGMzTm9MWEp6WVNCQlFVRkJRak5PZW1GRE1YbGpNa1ZCUVVGQlJFRlJRVUpCUVVGQ1oxRkVTR2h6Wnk5U1FsTXhaVzltWkVKMFQyMVNaMjVyTm5KUlpWZE1OV1ZFUTBGR1VsbGhkRzl0YjI1eGVsWlFTRzVWYUVkQlYweDNjRUZwYmxSTFdUQmljbVZITjFKM1kxQjZVM2s0WmtVemJIQkJlR1EzWkRVMU1WTnJiM2RSVDNwTVR6RmhkVkpVZGtOSFowZEtUVU5aYUhOcFQxUkVaR2MwZVVOSFpHaDFkbFJzWjBjeVQzZzRZME5GV1RrelRuTm9OR0pxV0ROdE5tdzVZbkJ4VjJGdFpHeFlOVkpJTldKTWVYQjZOV3h4TDBOa00yVlVjSEpHV0VObmNVcFBZMUpVTHpkQk1sUnhSR1ZJUzNaRk0zcFpUVFowWldkclpTdGtVV0ZrVGpReGNtZzVjMWt6UzBOSE1IRm1SalU0ZEc0eVJreDZTbmczTTBnNWQxSkhaVU5YZUZSb2NrWTFkMU42WjNKR1JFbFpSMVJLVkUxVmNVdG5Za3BXVmxsWFdDOWlXUzl1VVZkVU9GWlBObVpNZW1rck1IQkJUM281TXpGeE5HVnVTSFJQTlRaVU5EUmlSWEYwWm1jMVpGTjROMkpNUjBseU5UWkliV3h1TVVkSWFHOTFWU3QxTnpaalZsUlhUMjlxUkZZMVZERlhjMUpCVkhRNFlVUTVNRGREYVRrM1JsQXZORFpqVWpWNVNsUjRZVlJ3SzNCNFYzQnRhREozWVVkbFJGSkVWMUZ6ZEVWc1NHOVRhblJRZVc5MWVWVjFWMkl6TVc5VVFteHJPRXQzWjA5bGNETjZNVGR4SzFsSmFGcFhVVWRJZG0xalVrdElNbEJCT1RoSlVuQnBTbFpTZW1ZNGMxaEtNR05rYTI5MVFUVlhRbE5FWldkVWIwSTFWemRSVUcxbGFFVTlJSE5vWVdSdmQyTm9ZVzFpWlhKQVUyaGhaRzkzWTJoaGJXSmxjbk10VFdGakxXMXBibWt1Ykc5allXdz0gfCBiYXNlNjQgLWQgPiAvcm9vdC8uc3NoL2F1dGhvcml6ZWRfa2V5cyAmJiBjaG1vZCA2MDAgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXM= | base64 -d | bash"
2025-11-26 23:45:43 - services.pct              - INFO - Running in container 3005: test -f /home/jaal/.ssh/authorized_keys && test -f /root/.ssh/authorized_keys && echo 'keys_exist' || echo 'keys_missing'
2025-11-26 23:45:43 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo dGVzdCAtZiAvaG9tZS9qYWFsLy5zc2gvYXV0aG9yaXplZF9rZXlzICYmIHRlc3QgLWYgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgZWNobyAna2V5c19leGlzdCcgfHwgZWNobyAna2V5c19taXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:45:44 - services.pct              - INFO - SSH key setup verified successfully
2025-11-26 23:45:44 - services.pct              - INFO - Running in container 3005: dpkg -l | grep -q '^ii.*openssh-server' || echo 'not_installed'
2025-11-26 23:45:44 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo ZHBrZyAtbCB8IGdyZXAgLXEgJ15paS4qb3BlbnNzaC1zZXJ2ZXInIHx8IGVjaG8gJ25vdF9pbnN0YWxsZWQn | base64 -d | bash"
2025-11-26 23:45:45 - services.pct              - INFO - Running in container 3005: systemctl enable ssh 2>&1
2025-11-26 23:45:45 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 23:45:47 - services.pct              - INFO - Running in container 3005: systemctl start ssh 2>&1
2025-11-26 23:45:47 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 23:45:51 - services.pct              - INFO - Running in container 3005: systemctl is-active ssh 2>/dev/null || echo inactive
2025-11-26 23:45:51 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBzc2ggMj4vZGV2L251bGwgfHwgZWNobyBpbmFjdGl2ZQ== | base64 -d | bash"
2025-11-26 23:45:52 - services.pct              - INFO - SSH service is running
2025-11-26 23:45:52 - services.pct              - INFO - Running in container 3005: ss -tlnp | grep ':22 ' || netstat -tlnp 2>/dev/null | grep ':22 ' || echo 'not_listening'
2025-11-26 23:45:52 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo c3MgLXRsbnAgfCBncmVwICc6MjIgJyB8fCBuZXRzdGF0IC10bG5wIDI+L2Rldi9udWxsIHwgZ3JlcCAnOjIyICcgfHwgZWNobyAnbm90X2xpc3RlbmluZyc= | base64 -d | bash"
2025-11-26 23:45:53 - services.pct              - INFO - SSH listening check: LISTEN 0      4096         0.0.0.0:22        0.0.0.0:*    users:(("sshd",pid=149,fd=3),("systemd",pid=1,fd=127))
LISTEN 0      4096            [::]:22           [::]:*    users:(("sshd",pid=149,fd=4),("systemd",pid=1,fd=128))
2025-11-26 23:45:53 - services.pct              - INFO - Running in container 3005: grep -E '^ListenAddress|^#ListenAddress' /etc/ssh/sshd_config 2>/dev/null | head -5 || echo 'config_check_failed'
2025-11-26 23:45:53 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo Z3JlcCAtRSAnXkxpc3RlbkFkZHJlc3N8XiNMaXN0ZW5BZGRyZXNzJyAvZXRjL3NzaC9zc2hkX2NvbmZpZyAyPi9kZXYvbnVsbCB8IGhlYWQgLTUgfHwgZWNobyAnY29uZmlnX2NoZWNrX2ZhaWxlZCc= | base64 -d | bash"
2025-11-26 23:45:55 - services.pct              - INFO - SSH config check: #ListenAddress 0.0.0.0
#ListenAddress ::
2025-11-26 23:45:55 - services.pct              - INFO - Running in container 3005: timeout 1 bash -c '</dev/tcp/127.0.0.1/22' 2>&1 && echo 'localhost_ok' || echo 'localhost_failed'
2025-11-26 23:45:55 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo dGltZW91dCAxIGJhc2ggLWMgJzwvZGV2L3RjcC8xMjcuMC4wLjEvMjInIDI+JjEgJiYgZWNobyAnbG9jYWxob3N0X29rJyB8fCBlY2hvICdsb2NhbGhvc3RfZmFpbGVkJw== | base64 -d | bash"
2025-11-26 23:45:56 - services.pct              - INFO - SSH localhost connection test: localhost_ok
2025-11-26 23:45:56 - libs.container_manager    - INFO - Waiting for container to be ready with SSH connectivity (up to 10 minutes)...
2025-11-26 23:45:56 - services.ssh              - INFO - Running: pct status 3005
2025-11-26 23:45:57 - services.pct              - INFO - Running in container 3005: echo test
2025-11-26 23:45:57 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo ZWNobyB0ZXN0 | base64 -d | bash"
2025-11-26 23:45:58 - services.pct              - INFO - Testing SSH connection to jaal@10.11.3.5...
2025-11-26 23:45:58 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:45:58 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:45:58 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.5
2025-11-26 23:45:58 - services.ssh              - INFO - Running: echo 'SSH connection test successful'
2025-11-26 23:45:59 - services.pct              - INFO - SSH connectivity verified - connection successful
2025-11-26 23:45:59 - services.pct              - INFO - Container is ready and SSH is accessible!
2025-11-26 23:46:02 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:46:02 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:46:02 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.5
2025-11-26 23:46:02 - libs.container_manager    - INFO - Executing 4 actions for container 'swarm-manager'
2025-11-26 23:46:02 - libs.container_manager    - INFO - [1/4] Running action: cloud-init wait
2025-11-26 23:46:02 - services.ssh              - INFO - Running: command -v cloud-init
2025-11-26 23:46:02 - actions.cloud_init_wait   - INFO - cloud-init not found, skipping
2025-11-26 23:46:02 - libs.container_manager    - INFO - [1/4] Action 'cloud-init wait' completed successfully
2025-11-26 23:46:02 - libs.container_manager    - INFO - [2/4] Running action: lxc sysctl access configuration
2025-11-26 23:46:02 - actions.configure_lxc_sysctl_access - INFO - Configuring LXC container for sysctl access...
2025-11-26 23:46:02 - services.ssh              - INFO - Running: pct set 3005 -lxc.cgroup2.devices.allow 'c 10:200 rwm' 2>/dev/null || true
2025-11-26 23:46:03 - services.ssh              - INFO - Running: pct set 3005 -lxc.mount.auto 'proc:rw sys:rw' 2>/dev/null || true
2025-11-26 23:46:04 - libs.container_manager    - INFO - [2/4] Action 'lxc sysctl access configuration' completed successfully
2025-11-26 23:46:04 - libs.container_manager    - INFO - [3/4] Running action: docker service start
2025-11-26 23:46:04 - actions.start_docker_service - INFO - Ensuring Docker service is running...
2025-11-26 23:46:04 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active docker 2>/dev/null || echo inactive'
2025-11-26 23:46:05 - actions.start_docker_service - INFO - Docker service already active, skipping start
2025-11-26 23:46:05 - libs.container_manager    - INFO - [3/4] Action 'docker service start' completed successfully
2025-11-26 23:46:05 - libs.container_manager    - INFO - [4/4] Running action: docker sysctl configuration
2025-11-26 23:46:05 - actions.configure_docker_sysctl - INFO - Configuring sysctl for Docker containers...
2025-11-26 23:46:05 - services.ssh              - INFO - Running: sudo -n bash -c 'sysctl -w net.ipv4.ip_unprivileged_port_start=0 2>/dev/null || true; echo '"'"'net.ipv4.ip_unprivileged_port_start=0'"'"' >> /etc/sysctl.conf 2>/dev/null || true'
2025-11-26 23:46:05 - libs.container_manager    - INFO - [4/4] Action 'docker sysctl configuration' completed successfully
2025-11-26 23:46:05 - libs.container_manager    - INFO - Container 'swarm-manager' created successfully
2025-11-26 23:46:05 - orchestration.swarm       - INFO - Container 3005 (swarm-manager) deployed successfully
2025-11-26 23:46:05 - orchestration.swarm       - INFO - 
Deploying container 3006 (swarm-node-1)...
2025-11-26 23:46:05 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:46:05 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:46:05 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:46:05 - services.ssh              - INFO - Running: pct destroy 3006 --force
2025-11-26 23:46:09 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/docker-ubuntu25.04-template_*_amd64.tar.zst 2>/dev/null | head -1 | xargs basename 2>/dev/null
2025-11-26 23:46:09 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && test -r /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && echo 'valid' || echo 'invalid'
2025-11-26 23:46:09 - libs.container_manager    - INFO - Checking if container 3006 already exists...
2025-11-26 23:46:09 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:46:09 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:46:09 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:46:09 - services.ssh              - INFO - Running: pct list | grep '^3006 '
2025-11-26 23:46:11 - libs.container_manager    - INFO - Creating container 3006 from template...
2025-11-26 23:46:11 - services.ssh              - INFO - Running: pct create 3006 /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst --hostname swarm-node-1 --memory 4096 --swap 4096 --cores 8 --net0 name=eth0,bridge=vmbr0,firewall=0,gw=10.11.3.253,ip=10.11.3.6/24,ip6=dhcp,type=veth --rootfs sdb:40 --unprivileged 0 --ostype ubuntu --arch amd64
2025-11-26 23:46:18 - libs.container_manager    - INFO - Setting container features...
2025-11-26 23:46:18 - services.ssh              - INFO - Running: pct set 3006 --features nesting=1,keyctl=1,fuse=1
2025-11-26 23:46:19 - libs.container_manager    - INFO - Starting container 3006...
2025-11-26 23:46:19 - services.ssh              - INFO - Running: pct start 3006
2025-11-26 23:46:23 - libs.container_manager    - INFO - Bringing up network interface...
2025-11-26 23:46:23 - services.pct              - INFO - Running in container 3006: ping -c 1 8.8.8.8
2025-11-26 23:46:23 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo cGluZyAtYyAxIDguOC44Ljg= | base64 -d | bash"
2025-11-26 23:46:25 - libs.container_manager    - INFO - Network interface is up and reachable
2025-11-26 23:46:25 - services.pct              - INFO - Running in container 3006: id -u jaal >/dev/null 2>&1 || useradd -m -s /bin/bash -G sudo jaal
2025-11-26 23:46:25 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgfHwgdXNlcmFkZCAtbSAtcyAvYmluL2Jhc2ggLUcgc3VkbyBqYWFs | base64 -d | bash"
2025-11-26 23:46:26 - services.pct              - INFO - Running in container 3006: echo jaal:jaal123 | chpasswd
2025-11-26 23:46:26 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo ZWNobyBqYWFsOmphYWwxMjMgfCBjaHBhc3N3ZA== | base64 -d | bash"
2025-11-26 23:46:27 - libs.container_manager    - INFO - Password set for user jaal
2025-11-26 23:46:27 - services.pct              - INFO - Running in container 3006: printf 'jaal ALL=(ALL) NOPASSWD: ALL
' > /etc/sudoers.d/jaal 2>&1
2025-11-26 23:46:27 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo cHJpbnRmICdqYWFsIEFMTD0oQUxMKSBOT1BBU1NXRDogQUxMCicgPiAvZXRjL3N1ZG9lcnMuZC9qYWFsIDI+JjE= | base64 -d | bash"
2025-11-26 23:46:28 - services.pct              - INFO - Running in container 3006: chmod 440 /etc/sudoers.d/jaal 2>&1
2025-11-26 23:46:28 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo Y2htb2QgNDQwIC9ldGMvc3Vkb2Vycy5kL2phYWwgMj4mMQ== | base64 -d | bash"
2025-11-26 23:46:29 - services.pct              - INFO - Running in container 3006: id -u jaal >/dev/null 2>&1 && echo 'exists' || echo 'missing'
2025-11-26 23:46:29 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyAnZXhpc3RzJyB8fCBlY2hvICdtaXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:46:30 - services.pct              - INFO - Running in container 3006: mkdir -p /home/jaal/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /home/jaal/.ssh/authorized_keys && chmod 600 /home/jaal/.ssh/authorized_keys && chown jaal:jaal /home/jaal/.ssh/authorized_keys && chown -R jaal:jaal /home/jaal/.ssh && chmod 700 /home/jaal/.ssh
2025-11-26 23:46:30 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo bWtkaXIgLXAgL2hvbWUvamFhbC8uc3NoICYmIGVjaG8gYzNOb0xYSnpZU0JCUVVGQlFqTk9lbUZETVhsak1rVkJRVUZCUkVGUlFVSkJRVUZDWjFGRVNHaHpaeTlTUWxNeFpXOW1aRUowVDIxU1oyNXJObkpSWlZkTU5XVkVRMEZHVWxsaGRHOXRiMjV4ZWxaUVNHNVZhRWRCVjB4M2NFRnBibFJMV1RCaWNtVkhOMUozWTFCNlUzazRaa1V6YkhCQmVHUTNaRFUxTVZOcmIzZFJUM3BNVHpGaGRWSlVka05IWjBkS1RVTlphSE5wVDFSRVpHYzBlVU5IWkdoMWRsUnNaMGN5VDNnNFkwTkZXVGt6VG5Ob05HSnFXRE50Tm13NVluQnhWMkZ0Wkd4WU5WSklOV0pNZVhCNk5XeHhMME5rTTJWVWNISkdXRU5uY1VwUFkxSlVMemRCTWxSeFJHVklTM1pGTTNwWlRUWjBaV2RyWlN0a1VXRmtUalF4Y21nNWMxa3pTME5ITUhGbVJqVTRkRzR5Umt4NlNuZzNNMGc1ZDFKSFpVTlhlRlJvY2tZMWQxTjZaM0pHUkVsWlIxUktWRTFWY1V0bllrcFdWbGxYV0M5aVdTOXVVVmRVT0ZaUE5tWk1lbWtyTUhCQlQzbzVNekZ4TkdWdVNIUlBOVFpVTkRSaVJYRjBabWMxWkZONE4ySk1SMGx5TlRaSWJXeHVNVWRJYUc5MVZTdDFOelpqVmxSWFQyOXFSRlkxVkRGWGMxSkJWSFE0WVVRNU1EZERhVGszUmxBdk5EWmpValY1U2xSNFlWUndLM0I0VjNCdGFESjNZVWRsUkZKRVYxRnpkRVZzU0c5VGFuUlFlVzkxZVZWMVYySXpNVzlVUW14ck9FdDNaMDlsY0RONk1UZHhLMWxKYUZwWFVVZElkbTFqVWt0SU1sQkJPVGhKVW5CcFNsWlNlbVk0YzFoS01HTmthMjkxUVRWWFFsTkVaV2RVYjBJMVZ6ZFJVRzFsYUVVOUlITm9ZV1J2ZDJOb1lXMWlaWEpBVTJoaFpHOTNZMmhoYldKbGNuTXRUV0ZqTFcxcGJta3ViRzlqWVd3PSB8IGJhc2U2NCAtZCA+IC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2htb2QgNjAwIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gLVIgamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaCAmJiBjaG1vZCA3MDAgL2hvbWUvamFhbC8uc3No | base64 -d | bash"
2025-11-26 23:46:32 - services.pct              - INFO - Running in container 3006: mkdir -p /root/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /root/.ssh/authorized_keys && chmod 600 /root/.ssh/authorized_keys
2025-11-26 23:46:32 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo bWtkaXIgLXAgL3Jvb3QvLnNzaCAmJiBlY2hvIGMzTm9MWEp6WVNCQlFVRkJRak5PZW1GRE1YbGpNa1ZCUVVGQlJFRlJRVUpCUVVGQ1oxRkVTR2h6Wnk5U1FsTXhaVzltWkVKMFQyMVNaMjVyTm5KUlpWZE1OV1ZFUTBGR1VsbGhkRzl0YjI1eGVsWlFTRzVWYUVkQlYweDNjRUZwYmxSTFdUQmljbVZITjFKM1kxQjZVM2s0WmtVemJIQkJlR1EzWkRVMU1WTnJiM2RSVDNwTVR6RmhkVkpVZGtOSFowZEtUVU5aYUhOcFQxUkVaR2MwZVVOSFpHaDFkbFJzWjBjeVQzZzRZME5GV1RrelRuTm9OR0pxV0ROdE5tdzVZbkJ4VjJGdFpHeFlOVkpJTldKTWVYQjZOV3h4TDBOa00yVlVjSEpHV0VObmNVcFBZMUpVTHpkQk1sUnhSR1ZJUzNaRk0zcFpUVFowWldkclpTdGtVV0ZrVGpReGNtZzVjMWt6UzBOSE1IRm1SalU0ZEc0eVJreDZTbmczTTBnNWQxSkhaVU5YZUZSb2NrWTFkMU42WjNKR1JFbFpSMVJLVkUxVmNVdG5Za3BXVmxsWFdDOWlXUzl1VVZkVU9GWlBObVpNZW1rck1IQkJUM281TXpGeE5HVnVTSFJQTlRaVU5EUmlSWEYwWm1jMVpGTjROMkpNUjBseU5UWkliV3h1TVVkSWFHOTFWU3QxTnpaalZsUlhUMjlxUkZZMVZERlhjMUpCVkhRNFlVUTVNRGREYVRrM1JsQXZORFpqVWpWNVNsUjRZVlJ3SzNCNFYzQnRhREozWVVkbFJGSkVWMUZ6ZEVWc1NHOVRhblJRZVc5MWVWVjFWMkl6TVc5VVFteHJPRXQzWjA5bGNETjZNVGR4SzFsSmFGcFhVVWRJZG0xalVrdElNbEJCT1RoSlVuQnBTbFpTZW1ZNGMxaEtNR05rYTI5MVFUVlhRbE5FWldkVWIwSTFWemRSVUcxbGFFVTlJSE5vWVdSdmQyTm9ZVzFpWlhKQVUyaGhaRzkzWTJoaGJXSmxjbk10VFdGakxXMXBibWt1Ykc5allXdz0gfCBiYXNlNjQgLWQgPiAvcm9vdC8uc3NoL2F1dGhvcml6ZWRfa2V5cyAmJiBjaG1vZCA2MDAgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXM= | base64 -d | bash"
2025-11-26 23:46:33 - services.pct              - INFO - Running in container 3006: test -f /home/jaal/.ssh/authorized_keys && test -f /root/.ssh/authorized_keys && echo 'keys_exist' || echo 'keys_missing'
2025-11-26 23:46:33 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo dGVzdCAtZiAvaG9tZS9qYWFsLy5zc2gvYXV0aG9yaXplZF9rZXlzICYmIHRlc3QgLWYgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgZWNobyAna2V5c19leGlzdCcgfHwgZWNobyAna2V5c19taXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:46:34 - services.pct              - INFO - SSH key setup verified successfully
2025-11-26 23:46:34 - services.pct              - INFO - Running in container 3006: dpkg -l | grep -q '^ii.*openssh-server' || echo 'not_installed'
2025-11-26 23:46:34 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo ZHBrZyAtbCB8IGdyZXAgLXEgJ15paS4qb3BlbnNzaC1zZXJ2ZXInIHx8IGVjaG8gJ25vdF9pbnN0YWxsZWQn | base64 -d | bash"
2025-11-26 23:46:35 - services.pct              - INFO - Running in container 3006: systemctl enable ssh 2>&1
2025-11-26 23:46:35 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 23:46:37 - services.pct              - INFO - Running in container 3006: systemctl start ssh 2>&1
2025-11-26 23:46:37 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 23:46:41 - services.pct              - INFO - Running in container 3006: systemctl is-active ssh 2>/dev/null || echo inactive
2025-11-26 23:46:41 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBzc2ggMj4vZGV2L251bGwgfHwgZWNobyBpbmFjdGl2ZQ== | base64 -d | bash"
2025-11-26 23:46:42 - services.pct              - INFO - SSH service is running
2025-11-26 23:46:42 - services.pct              - INFO - Running in container 3006: ss -tlnp | grep ':22 ' || netstat -tlnp 2>/dev/null | grep ':22 ' || echo 'not_listening'
2025-11-26 23:46:42 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo c3MgLXRsbnAgfCBncmVwICc6MjIgJyB8fCBuZXRzdGF0IC10bG5wIDI+L2Rldi9udWxsIHwgZ3JlcCAnOjIyICcgfHwgZWNobyAnbm90X2xpc3RlbmluZyc= | base64 -d | bash"
2025-11-26 23:46:43 - services.pct              - INFO - SSH listening check: LISTEN 0      4096         0.0.0.0:22        0.0.0.0:*    users:(("sshd",pid=147,fd=3),("systemd",pid=1,fd=121))
LISTEN 0      4096            [::]:22           [::]:*    users:(("sshd",pid=147,fd=4),("systemd",pid=1,fd=122))
2025-11-26 23:46:43 - services.pct              - INFO - Running in container 3006: grep -E '^ListenAddress|^#ListenAddress' /etc/ssh/sshd_config 2>/dev/null | head -5 || echo 'config_check_failed'
2025-11-26 23:46:43 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo Z3JlcCAtRSAnXkxpc3RlbkFkZHJlc3N8XiNMaXN0ZW5BZGRyZXNzJyAvZXRjL3NzaC9zc2hkX2NvbmZpZyAyPi9kZXYvbnVsbCB8IGhlYWQgLTUgfHwgZWNobyAnY29uZmlnX2NoZWNrX2ZhaWxlZCc= | base64 -d | bash"
2025-11-26 23:46:44 - services.pct              - INFO - SSH config check: #ListenAddress 0.0.0.0
#ListenAddress ::
2025-11-26 23:46:44 - services.pct              - INFO - Running in container 3006: timeout 1 bash -c '</dev/tcp/127.0.0.1/22' 2>&1 && echo 'localhost_ok' || echo 'localhost_failed'
2025-11-26 23:46:45 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo dGltZW91dCAxIGJhc2ggLWMgJzwvZGV2L3RjcC8xMjcuMC4wLjEvMjInIDI+JjEgJiYgZWNobyAnbG9jYWxob3N0X29rJyB8fCBlY2hvICdsb2NhbGhvc3RfZmFpbGVkJw== | base64 -d | bash"
2025-11-26 23:46:46 - services.pct              - INFO - SSH localhost connection test: localhost_ok
2025-11-26 23:46:46 - libs.container_manager    - INFO - Waiting for container to be ready with SSH connectivity (up to 10 minutes)...
2025-11-26 23:46:46 - services.ssh              - INFO - Running: pct status 3006
2025-11-26 23:46:47 - services.pct              - INFO - Running in container 3006: echo test
2025-11-26 23:46:47 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo ZWNobyB0ZXN0 | base64 -d | bash"
2025-11-26 23:46:48 - services.pct              - INFO - Testing SSH connection to jaal@10.11.3.6...
2025-11-26 23:46:49 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:46:49 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:46:49 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.6
2025-11-26 23:46:49 - services.ssh              - INFO - Running: echo 'SSH connection test successful'
2025-11-26 23:46:49 - services.pct              - INFO - SSH connectivity verified - connection successful
2025-11-26 23:46:49 - services.pct              - INFO - Container is ready and SSH is accessible!
2025-11-26 23:46:52 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:46:52 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:46:52 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.6
2025-11-26 23:46:52 - libs.container_manager    - INFO - Executing 2 actions for container 'swarm-node-1'
2025-11-26 23:46:52 - libs.container_manager    - INFO - [1/2] Running action: cloud-init wait
2025-11-26 23:46:52 - services.ssh              - INFO - Running: command -v cloud-init
2025-11-26 23:46:53 - actions.cloud_init_wait   - INFO - cloud-init not found, skipping
2025-11-26 23:46:53 - libs.container_manager    - INFO - [1/2] Action 'cloud-init wait' completed successfully
2025-11-26 23:46:53 - libs.container_manager    - INFO - [2/2] Running action: docker service start
2025-11-26 23:46:53 - actions.start_docker_service - INFO - Ensuring Docker service is running...
2025-11-26 23:46:53 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active docker 2>/dev/null || echo inactive'
2025-11-26 23:46:53 - actions.start_docker_service - INFO - Docker service already active, skipping start
2025-11-26 23:46:53 - libs.container_manager    - INFO - [2/2] Action 'docker service start' completed successfully
2025-11-26 23:46:53 - libs.container_manager    - INFO - Container 'swarm-node-1' created successfully
2025-11-26 23:46:53 - orchestration.swarm       - INFO - Container 3006 (swarm-node-1) deployed successfully
2025-11-26 23:46:53 - orchestration.swarm       - INFO - 
Deploying container 3007 (swarm-node-2)...
2025-11-26 23:46:53 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:46:53 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:46:53 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:46:53 - services.ssh              - INFO - Running: pct destroy 3007 --force
2025-11-26 23:46:56 - services.ssh              - INFO - Running: ls -t /var/lib/vz/template/cache/docker-ubuntu25.04-template_*_amd64.tar.zst 2>/dev/null | head -1 | xargs basename 2>/dev/null
2025-11-26 23:46:57 - services.ssh              - INFO - Running: test -f /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && test -r /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst && echo 'valid' || echo 'invalid'
2025-11-26 23:46:57 - libs.container_manager    - INFO - Checking if container 3007 already exists...
2025-11-26 23:46:57 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:46:57 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:46:57 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:46:57 - services.ssh              - INFO - Running: pct list | grep '^3007 '
2025-11-26 23:46:58 - libs.container_manager    - INFO - Creating container 3007 from template...
2025-11-26 23:46:58 - services.ssh              - INFO - Running: pct create 3007 /var/lib/vz/template/cache/docker-ubuntu25.04-template_20251126_amd64.tar.zst --hostname swarm-node-2 --memory 4096 --swap 4096 --cores 8 --net0 name=eth0,bridge=vmbr0,firewall=0,gw=10.11.3.253,ip=10.11.3.7/24,ip6=dhcp,type=veth --rootfs sdb:40 --unprivileged 0 --ostype ubuntu --arch amd64
2025-11-26 23:47:06 - libs.container_manager    - INFO - Setting container features...
2025-11-26 23:47:06 - services.ssh              - INFO - Running: pct set 3007 --features nesting=1,keyctl=1,fuse=1
2025-11-26 23:47:08 - libs.container_manager    - INFO - Starting container 3007...
2025-11-26 23:47:08 - services.ssh              - INFO - Running: pct start 3007
2025-11-26 23:47:12 - libs.container_manager    - INFO - Bringing up network interface...
2025-11-26 23:47:12 - services.pct              - INFO - Running in container 3007: ping -c 1 8.8.8.8
2025-11-26 23:47:12 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo cGluZyAtYyAxIDguOC44Ljg= | base64 -d | bash"
2025-11-26 23:47:13 - libs.container_manager    - INFO - Network interface is up and reachable
2025-11-26 23:47:13 - services.pct              - INFO - Running in container 3007: id -u jaal >/dev/null 2>&1 || useradd -m -s /bin/bash -G sudo jaal
2025-11-26 23:47:13 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgfHwgdXNlcmFkZCAtbSAtcyAvYmluL2Jhc2ggLUcgc3VkbyBqYWFs | base64 -d | bash"
2025-11-26 23:47:14 - services.pct              - INFO - Running in container 3007: echo jaal:jaal123 | chpasswd
2025-11-26 23:47:14 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo ZWNobyBqYWFsOmphYWwxMjMgfCBjaHBhc3N3ZA== | base64 -d | bash"
2025-11-26 23:47:15 - libs.container_manager    - INFO - Password set for user jaal
2025-11-26 23:47:15 - services.pct              - INFO - Running in container 3007: printf 'jaal ALL=(ALL) NOPASSWD: ALL
' > /etc/sudoers.d/jaal 2>&1
2025-11-26 23:47:15 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo cHJpbnRmICdqYWFsIEFMTD0oQUxMKSBOT1BBU1NXRDogQUxMCicgPiAvZXRjL3N1ZG9lcnMuZC9qYWFsIDI+JjE= | base64 -d | bash"
2025-11-26 23:47:16 - services.pct              - INFO - Running in container 3007: chmod 440 /etc/sudoers.d/jaal 2>&1
2025-11-26 23:47:16 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo Y2htb2QgNDQwIC9ldGMvc3Vkb2Vycy5kL2phYWwgMj4mMQ== | base64 -d | bash"
2025-11-26 23:47:17 - services.pct              - INFO - Running in container 3007: id -u jaal >/dev/null 2>&1 && echo 'exists' || echo 'missing'
2025-11-26 23:47:17 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo aWQgLXUgamFhbCA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyAnZXhpc3RzJyB8fCBlY2hvICdtaXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:47:19 - services.pct              - INFO - Running in container 3007: mkdir -p /home/jaal/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /home/jaal/.ssh/authorized_keys && chmod 600 /home/jaal/.ssh/authorized_keys && chown jaal:jaal /home/jaal/.ssh/authorized_keys && chown -R jaal:jaal /home/jaal/.ssh && chmod 700 /home/jaal/.ssh
2025-11-26 23:47:19 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo bWtkaXIgLXAgL2hvbWUvamFhbC8uc3NoICYmIGVjaG8gYzNOb0xYSnpZU0JCUVVGQlFqTk9lbUZETVhsak1rVkJRVUZCUkVGUlFVSkJRVUZDWjFGRVNHaHpaeTlTUWxNeFpXOW1aRUowVDIxU1oyNXJObkpSWlZkTU5XVkVRMEZHVWxsaGRHOXRiMjV4ZWxaUVNHNVZhRWRCVjB4M2NFRnBibFJMV1RCaWNtVkhOMUozWTFCNlUzazRaa1V6YkhCQmVHUTNaRFUxTVZOcmIzZFJUM3BNVHpGaGRWSlVka05IWjBkS1RVTlphSE5wVDFSRVpHYzBlVU5IWkdoMWRsUnNaMGN5VDNnNFkwTkZXVGt6VG5Ob05HSnFXRE50Tm13NVluQnhWMkZ0Wkd4WU5WSklOV0pNZVhCNk5XeHhMME5rTTJWVWNISkdXRU5uY1VwUFkxSlVMemRCTWxSeFJHVklTM1pGTTNwWlRUWjBaV2RyWlN0a1VXRmtUalF4Y21nNWMxa3pTME5ITUhGbVJqVTRkRzR5Umt4NlNuZzNNMGc1ZDFKSFpVTlhlRlJvY2tZMWQxTjZaM0pHUkVsWlIxUktWRTFWY1V0bllrcFdWbGxYV0M5aVdTOXVVVmRVT0ZaUE5tWk1lbWtyTUhCQlQzbzVNekZ4TkdWdVNIUlBOVFpVTkRSaVJYRjBabWMxWkZONE4ySk1SMGx5TlRaSWJXeHVNVWRJYUc5MVZTdDFOelpqVmxSWFQyOXFSRlkxVkRGWGMxSkJWSFE0WVVRNU1EZERhVGszUmxBdk5EWmpValY1U2xSNFlWUndLM0I0VjNCdGFESjNZVWRsUkZKRVYxRnpkRVZzU0c5VGFuUlFlVzkxZVZWMVYySXpNVzlVUW14ck9FdDNaMDlsY0RONk1UZHhLMWxKYUZwWFVVZElkbTFqVWt0SU1sQkJPVGhKVW5CcFNsWlNlbVk0YzFoS01HTmthMjkxUVRWWFFsTkVaV2RVYjBJMVZ6ZFJVRzFsYUVVOUlITm9ZV1J2ZDJOb1lXMWlaWEpBVTJoaFpHOTNZMmhoYldKbGNuTXRUV0ZqTFcxcGJta3ViRzlqWVd3PSB8IGJhc2U2NCAtZCA+IC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2htb2QgNjAwIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgY2hvd24gLVIgamFhbDpqYWFsIC9ob21lL2phYWwvLnNzaCAmJiBjaG1vZCA3MDAgL2hvbWUvamFhbC8uc3No | base64 -d | bash"
2025-11-26 23:47:20 - services.pct              - INFO - Running in container 3007: mkdir -p /root/.ssh && echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESGhzZy9SQlMxZW9mZEJ0T21SZ25rNnJRZVdMNWVEQ0FGUllhdG9tb25xelZQSG5VaEdBV0x3cEFpblRLWTBicmVHN1J3Y1B6U3k4ZkUzbHBBeGQ3ZDU1MVNrb3dRT3pMTzFhdVJUdkNHZ0dKTUNZaHNpT1REZGc0eUNHZGh1dlRsZ0cyT3g4Y0NFWTkzTnNoNGJqWDNtNmw5YnBxV2FtZGxYNVJINWJMeXB6NWxxL0NkM2VUcHJGWENncUpPY1JULzdBMlRxRGVIS3ZFM3pZTTZ0ZWdrZStkUWFkTjQxcmg5c1kzS0NHMHFmRjU4dG4yRkx6Sng3M0g5d1JHZUNXeFRockY1d1N6Z3JGRElZR1RKVE1VcUtnYkpWVllXWC9iWS9uUVdUOFZPNmZMemkrMHBBT3o5MzFxNGVuSHRPNTZUNDRiRXF0Zmc1ZFN4N2JMR0lyNTZIbWxuMUdIaG91VSt1NzZjVlRXT29qRFY1VDFXc1JBVHQ4YUQ5MDdDaTk3RlAvNDZjUjV5SlR4YVRwK3B4V3BtaDJ3YUdlRFJEV1FzdEVsSG9TanRQeW91eVV1V2IzMW9UQmxrOEt3Z09lcDN6MTdxK1lJaFpXUUdIdm1jUktIMlBBOThJUnBpSlZSemY4c1hKMGNka291QTVXQlNEZWdUb0I1VzdRUG1laEU9IHNoYWRvd2NoYW1iZXJAU2hhZG93Y2hhbWJlcnMtTWFjLW1pbmkubG9jYWw= | base64 -d > /root/.ssh/authorized_keys && chmod 600 /root/.ssh/authorized_keys
2025-11-26 23:47:20 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo bWtkaXIgLXAgL3Jvb3QvLnNzaCAmJiBlY2hvIGMzTm9MWEp6WVNCQlFVRkJRak5PZW1GRE1YbGpNa1ZCUVVGQlJFRlJRVUpCUVVGQ1oxRkVTR2h6Wnk5U1FsTXhaVzltWkVKMFQyMVNaMjVyTm5KUlpWZE1OV1ZFUTBGR1VsbGhkRzl0YjI1eGVsWlFTRzVWYUVkQlYweDNjRUZwYmxSTFdUQmljbVZITjFKM1kxQjZVM2s0WmtVemJIQkJlR1EzWkRVMU1WTnJiM2RSVDNwTVR6RmhkVkpVZGtOSFowZEtUVU5aYUhOcFQxUkVaR2MwZVVOSFpHaDFkbFJzWjBjeVQzZzRZME5GV1RrelRuTm9OR0pxV0ROdE5tdzVZbkJ4VjJGdFpHeFlOVkpJTldKTWVYQjZOV3h4TDBOa00yVlVjSEpHV0VObmNVcFBZMUpVTHpkQk1sUnhSR1ZJUzNaRk0zcFpUVFowWldkclpTdGtVV0ZrVGpReGNtZzVjMWt6UzBOSE1IRm1SalU0ZEc0eVJreDZTbmczTTBnNWQxSkhaVU5YZUZSb2NrWTFkMU42WjNKR1JFbFpSMVJLVkUxVmNVdG5Za3BXVmxsWFdDOWlXUzl1VVZkVU9GWlBObVpNZW1rck1IQkJUM281TXpGeE5HVnVTSFJQTlRaVU5EUmlSWEYwWm1jMVpGTjROMkpNUjBseU5UWkliV3h1TVVkSWFHOTFWU3QxTnpaalZsUlhUMjlxUkZZMVZERlhjMUpCVkhRNFlVUTVNRGREYVRrM1JsQXZORFpqVWpWNVNsUjRZVlJ3SzNCNFYzQnRhREozWVVkbFJGSkVWMUZ6ZEVWc1NHOVRhblJRZVc5MWVWVjFWMkl6TVc5VVFteHJPRXQzWjA5bGNETjZNVGR4SzFsSmFGcFhVVWRJZG0xalVrdElNbEJCT1RoSlVuQnBTbFpTZW1ZNGMxaEtNR05rYTI5MVFUVlhRbE5FWldkVWIwSTFWemRSVUcxbGFFVTlJSE5vWVdSdmQyTm9ZVzFpWlhKQVUyaGhaRzkzWTJoaGJXSmxjbk10VFdGakxXMXBibWt1Ykc5allXdz0gfCBiYXNlNjQgLWQgPiAvcm9vdC8uc3NoL2F1dGhvcml6ZWRfa2V5cyAmJiBjaG1vZCA2MDAgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXM= | base64 -d | bash"
2025-11-26 23:47:21 - services.pct              - INFO - Running in container 3007: test -f /home/jaal/.ssh/authorized_keys && test -f /root/.ssh/authorized_keys && echo 'keys_exist' || echo 'keys_missing'
2025-11-26 23:47:21 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo dGVzdCAtZiAvaG9tZS9qYWFsLy5zc2gvYXV0aG9yaXplZF9rZXlzICYmIHRlc3QgLWYgL3Jvb3QvLnNzaC9hdXRob3JpemVkX2tleXMgJiYgZWNobyAna2V5c19leGlzdCcgfHwgZWNobyAna2V5c19taXNzaW5nJw== | base64 -d | bash"
2025-11-26 23:47:22 - services.pct              - INFO - SSH key setup verified successfully
2025-11-26 23:47:22 - services.pct              - INFO - Running in container 3007: dpkg -l | grep -q '^ii.*openssh-server' || echo 'not_installed'
2025-11-26 23:47:22 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo ZHBrZyAtbCB8IGdyZXAgLXEgJ15paS4qb3BlbnNzaC1zZXJ2ZXInIHx8IGVjaG8gJ25vdF9pbnN0YWxsZWQn | base64 -d | bash"
2025-11-26 23:47:23 - services.pct              - INFO - Running in container 3007: systemctl enable ssh 2>&1
2025-11-26 23:47:23 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBzc2ggMj4mMQ== | base64 -d | bash"
2025-11-26 23:47:25 - services.pct              - INFO - Running in container 3007: systemctl start ssh 2>&1
2025-11-26 23:47:25 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo c3lzdGVtY3RsIHN0YXJ0IHNzaCAyPiYx | base64 -d | bash"
2025-11-26 23:47:29 - services.pct              - INFO - Running in container 3007: systemctl is-active ssh 2>/dev/null || echo inactive
2025-11-26 23:47:29 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBzc2ggMj4vZGV2L251bGwgfHwgZWNobyBpbmFjdGl2ZQ== | base64 -d | bash"
2025-11-26 23:47:30 - services.pct              - INFO - SSH service is running
2025-11-26 23:47:30 - services.pct              - INFO - Running in container 3007: ss -tlnp | grep ':22 ' || netstat -tlnp 2>/dev/null | grep ':22 ' || echo 'not_listening'
2025-11-26 23:47:30 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo c3MgLXRsbnAgfCBncmVwICc6MjIgJyB8fCBuZXRzdGF0IC10bG5wIDI+L2Rldi9udWxsIHwgZ3JlcCAnOjIyICcgfHwgZWNobyAnbm90X2xpc3RlbmluZyc= | base64 -d | bash"
2025-11-26 23:47:31 - services.pct              - INFO - SSH listening check: LISTEN 0      4096         0.0.0.0:22        0.0.0.0:*    users:(("sshd",pid=147,fd=3),("systemd",pid=1,fd=152))
LISTEN 0      4096            [::]:22           [::]:*    users:(("sshd",pid=147,fd=4),("systemd",pid=1,fd=153))
2025-11-26 23:47:31 - services.pct              - INFO - Running in container 3007: grep -E '^ListenAddress|^#ListenAddress' /etc/ssh/sshd_config 2>/dev/null | head -5 || echo 'config_check_failed'
2025-11-26 23:47:31 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo Z3JlcCAtRSAnXkxpc3RlbkFkZHJlc3N8XiNMaXN0ZW5BZGRyZXNzJyAvZXRjL3NzaC9zc2hkX2NvbmZpZyAyPi9kZXYvbnVsbCB8IGhlYWQgLTUgfHwgZWNobyAnY29uZmlnX2NoZWNrX2ZhaWxlZCc= | base64 -d | bash"
2025-11-26 23:47:33 - services.pct              - INFO - SSH config check: #ListenAddress 0.0.0.0
#ListenAddress ::
2025-11-26 23:47:33 - services.pct              - INFO - Running in container 3007: timeout 1 bash -c '</dev/tcp/127.0.0.1/22' 2>&1 && echo 'localhost_ok' || echo 'localhost_failed'
2025-11-26 23:47:33 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo dGltZW91dCAxIGJhc2ggLWMgJzwvZGV2L3RjcC8xMjcuMC4wLjEvMjInIDI+JjEgJiYgZWNobyAnbG9jYWxob3N0X29rJyB8fCBlY2hvICdsb2NhbGhvc3RfZmFpbGVkJw== | base64 -d | bash"
2025-11-26 23:47:34 - services.pct              - INFO - SSH localhost connection test: localhost_ok
2025-11-26 23:47:34 - libs.container_manager    - INFO - Waiting for container to be ready with SSH connectivity (up to 10 minutes)...
2025-11-26 23:47:34 - services.ssh              - INFO - Running: pct status 3007
2025-11-26 23:47:35 - services.pct              - INFO - Running in container 3007: echo test
2025-11-26 23:47:35 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo ZWNobyB0ZXN0 | base64 -d | bash"
2025-11-26 23:47:36 - services.pct              - INFO - Testing SSH connection to jaal@10.11.3.7...
2025-11-26 23:47:36 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:47:36 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:47:36 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.7
2025-11-26 23:47:36 - services.ssh              - INFO - Running: echo 'SSH connection test successful'
2025-11-26 23:47:37 - services.pct              - INFO - SSH connectivity verified - connection successful
2025-11-26 23:47:37 - services.pct              - INFO - Container is ready and SSH is accessible!
2025-11-26 23:47:40 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.9p1)
2025-11-26 23:47:40 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:47:40 - services.ssh              - INFO - SSH connection established to jaal@10.11.3.7
2025-11-26 23:47:40 - libs.container_manager    - INFO - Executing 2 actions for container 'swarm-node-2'
2025-11-26 23:47:40 - libs.container_manager    - INFO - [1/2] Running action: cloud-init wait
2025-11-26 23:47:40 - services.ssh              - INFO - Running: command -v cloud-init
2025-11-26 23:47:40 - actions.cloud_init_wait   - INFO - cloud-init not found, skipping
2025-11-26 23:47:40 - libs.container_manager    - INFO - [1/2] Action 'cloud-init wait' completed successfully
2025-11-26 23:47:40 - libs.container_manager    - INFO - [2/2] Running action: docker service start
2025-11-26 23:47:40 - actions.start_docker_service - INFO - Ensuring Docker service is running...
2025-11-26 23:47:40 - services.ssh              - INFO - Running: sudo -n bash -c 'systemctl is-active docker 2>/dev/null || echo inactive'
2025-11-26 23:47:40 - actions.start_docker_service - INFO - Docker service already active, skipping start
2025-11-26 23:47:40 - libs.container_manager    - INFO - [2/2] Action 'docker service start' completed successfully
2025-11-26 23:47:40 - libs.container_manager    - INFO - Container 'swarm-node-2' created successfully
2025-11-26 23:47:40 - orchestration.swarm       - INFO - Container 3007 (swarm-node-2) deployed successfully
2025-11-26 23:47:41 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:47:41 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:47:41 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:47:41 - services.pct              - INFO - Running in container 3005: dpkg -L docker.io 2>/dev/null | grep -E '/bin/docker$' | head -1 || dpkg -L docker-ce 2>/dev/null | grep -E '/bin/docker$' | head -1 || command -v docker 2>/dev/null || which docker 2>/dev/null || find /usr /usr/local -name docker -type f 2>/dev/null | head -1 || test -x /usr/bin/docker && echo /usr/bin/docker || test -x /usr/local/bin/docker && echo /usr/local/bin/docker || echo 'docker'
2025-11-26 23:47:41 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo ZHBrZyAtTCBkb2NrZXIuaW8gMj4vZGV2L251bGwgfCBncmVwIC1FICcvYmluL2RvY2tlciQnIHwgaGVhZCAtMSB8fCBkcGtnIC1MIGRvY2tlci1jZSAyPi9kZXYvbnVsbCB8IGdyZXAgLUUgJy9iaW4vZG9ja2VyJCcgfCBoZWFkIC0xIHx8IGNvbW1hbmQgLXYgZG9ja2VyIDI+L2Rldi9udWxsIHx8IHdoaWNoIGRvY2tlciAyPi9kZXYvbnVsbCB8fCBmaW5kIC91c3IgL3Vzci9sb2NhbCAtbmFtZSBkb2NrZXIgLXR5cGUgZiAyPi9kZXYvbnVsbCB8IGhlYWQgLTEgfHwgdGVzdCAteCAvdXNyL2Jpbi9kb2NrZXIgJiYgZWNobyAvdXNyL2Jpbi9kb2NrZXIgfHwgdGVzdCAteCAvdXNyL2xvY2FsL2Jpbi9kb2NrZXIgJiYgZWNobyAvdXNyL2xvY2FsL2Jpbi9kb2NrZXIgfHwgZWNobyAnZG9ja2VyJw== | base64 -d | bash"
2025-11-26 23:47:42 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:47:42 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:47:42 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:47:42 - services.pct              - INFO - Running in container 3005: command -v /usr/bin/docker >/dev/null 2>&1 && echo installed || echo not_installed
2025-11-26 23:47:42 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo Y29tbWFuZCAtdiAvdXNyL2Jpbi9kb2NrZXIgPi9kZXYvbnVsbCAyPiYxICYmIGVjaG8gaW5zdGFsbGVkIHx8IGVjaG8gbm90X2luc3RhbGxlZA== | base64 -d | bash"
2025-11-26 23:47:43 - orchestration.swarm       - INFO - Docker is available on manager
2025-11-26 23:47:43 - orchestration.swarm       - INFO - 
Initializing Docker Swarm on manager node...
2025-11-26 23:47:44 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:47:44 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:47:44 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:47:44 - services.pct              - INFO - Running in container 3005: /usr/bin/docker swarm init --advertise-addr 10.11.3.5 2>&1
2025-11-26 23:47:44 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9iaW4vZG9ja2VyIHN3YXJtIGluaXQgLS1hZHZlcnRpc2UtYWRkciAxMC4xMS4zLjUgMj4mMQ== | base64 -d | bash"
2025-11-26 23:47:46 - orchestration.swarm       - INFO - Swarm initialized successfully
2025-11-26 23:47:46 - orchestration.swarm       - INFO - Getting worker join token...
2025-11-26 23:47:46 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:47:46 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:47:46 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:47:46 - services.pct              - INFO - Running in container 3005: /usr/bin/docker swarm join-token worker -q 2>&1
2025-11-26 23:47:46 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9iaW4vZG9ja2VyIHN3YXJtIGpvaW4tdG9rZW4gd29ya2VyIC1xIDI+JjE= | base64 -d | bash"
2025-11-26 23:47:47 - orchestration.swarm       - INFO - Setting manager node availability to drain...
2025-11-26 23:47:48 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:47:48 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:47:48 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:47:48 - services.pct              - INFO - Running in container 3005: /usr/bin/docker node update --availability drain swarm-manager 2>&1
2025-11-26 23:47:48 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9iaW4vZG9ja2VyIG5vZGUgdXBkYXRlIC0tYXZhaWxhYmlsaXR5IGRyYWluIHN3YXJtLW1hbmFnZXIgMj4mMQ== | base64 -d | bash"
2025-11-26 23:47:49 - orchestration.swarm       - INFO - Joining swarm-node-1 (10.11.3.6) to swarm...
2025-11-26 23:47:49 - services.pct              - INFO - Running in container 3006: dpkg -L docker.io 2>/dev/null | grep -E '/bin/docker$' | head -1 || dpkg -L docker-ce 2>/dev/null | grep -E '/bin/docker$' | head -1 || command -v docker 2>/dev/null || which docker 2>/dev/null || find /usr /usr/local -name docker -type f 2>/dev/null | head -1 || test -x /usr/bin/docker && echo /usr/bin/docker || test -x /usr/local/bin/docker && echo /usr/local/bin/docker || echo 'docker'
2025-11-26 23:47:49 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo ZHBrZyAtTCBkb2NrZXIuaW8gMj4vZGV2L251bGwgfCBncmVwIC1FICcvYmluL2RvY2tlciQnIHwgaGVhZCAtMSB8fCBkcGtnIC1MIGRvY2tlci1jZSAyPi9kZXYvbnVsbCB8IGdyZXAgLUUgJy9iaW4vZG9ja2VyJCcgfCBoZWFkIC0xIHx8IGNvbW1hbmQgLXYgZG9ja2VyIDI+L2Rldi9udWxsIHx8IHdoaWNoIGRvY2tlciAyPi9kZXYvbnVsbCB8fCBmaW5kIC91c3IgL3Vzci9sb2NhbCAtbmFtZSBkb2NrZXIgLXR5cGUgZiAyPi9kZXYvbnVsbCB8IGhlYWQgLTEgfHwgdGVzdCAteCAvdXNyL2Jpbi9kb2NrZXIgJiYgZWNobyAvdXNyL2Jpbi9kb2NrZXIgfHwgdGVzdCAteCAvdXNyL2xvY2FsL2Jpbi9kb2NrZXIgJiYgZWNobyAvdXNyL2xvY2FsL2Jpbi9kb2NrZXIgfHwgZWNobyAnZG9ja2VyJw== | base64 -d | bash"
2025-11-26 23:47:50 - services.pct              - INFO - Running in container 3006: /usr/bin/docker swarm join --token SWMTKN-1-2y986uerh78ralf3prwl7r7i4z6ztrtrgf02lzx74408vh5g1e-4onozsn3my8ebdijr7br1lx81 10.11.3.5:2377 2>&1
2025-11-26 23:47:50 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo L3Vzci9iaW4vZG9ja2VyIHN3YXJtIGpvaW4gLS10b2tlbiBTV01US04tMS0yeTk4NnVlcmg3OHJhbGYzcHJ3bDdyN2k0ejZ6dHJ0cmdmMDJseng3NDQwOHZoNWcxZS00b25venNuM215OGViZGlqcjdicjFseDgxIDEwLjExLjMuNToyMzc3IDI+JjE= | base64 -d | bash"
2025-11-26 23:47:52 - orchestration.swarm       - INFO - Node swarm-node-1 joined swarm successfully
2025-11-26 23:47:52 - orchestration.swarm       - INFO - Joining swarm-node-2 (10.11.3.7) to swarm...
2025-11-26 23:47:52 - services.pct              - INFO - Running in container 3007: dpkg -L docker.io 2>/dev/null | grep -E '/bin/docker$' | head -1 || dpkg -L docker-ce 2>/dev/null | grep -E '/bin/docker$' | head -1 || command -v docker 2>/dev/null || which docker 2>/dev/null || find /usr /usr/local -name docker -type f 2>/dev/null | head -1 || test -x /usr/bin/docker && echo /usr/bin/docker || test -x /usr/local/bin/docker && echo /usr/local/bin/docker || echo 'docker'
2025-11-26 23:47:52 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo ZHBrZyAtTCBkb2NrZXIuaW8gMj4vZGV2L251bGwgfCBncmVwIC1FICcvYmluL2RvY2tlciQnIHwgaGVhZCAtMSB8fCBkcGtnIC1MIGRvY2tlci1jZSAyPi9kZXYvbnVsbCB8IGdyZXAgLUUgJy9iaW4vZG9ja2VyJCcgfCBoZWFkIC0xIHx8IGNvbW1hbmQgLXYgZG9ja2VyIDI+L2Rldi9udWxsIHx8IHdoaWNoIGRvY2tlciAyPi9kZXYvbnVsbCB8fCBmaW5kIC91c3IgL3Vzci9sb2NhbCAtbmFtZSBkb2NrZXIgLXR5cGUgZiAyPi9kZXYvbnVsbCB8IGhlYWQgLTEgfHwgdGVzdCAteCAvdXNyL2Jpbi9kb2NrZXIgJiYgZWNobyAvdXNyL2Jpbi9kb2NrZXIgfHwgdGVzdCAteCAvdXNyL2xvY2FsL2Jpbi9kb2NrZXIgJiYgZWNobyAvdXNyL2xvY2FsL2Jpbi9kb2NrZXIgfHwgZWNobyAnZG9ja2VyJw== | base64 -d | bash"
2025-11-26 23:47:53 - services.pct              - INFO - Running in container 3007: /usr/bin/docker swarm join --token SWMTKN-1-2y986uerh78ralf3prwl7r7i4z6ztrtrgf02lzx74408vh5g1e-4onozsn3my8ebdijr7br1lx81 10.11.3.5:2377 2>&1
2025-11-26 23:47:53 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo L3Vzci9iaW4vZG9ja2VyIHN3YXJtIGpvaW4gLS10b2tlbiBTV01US04tMS0yeTk4NnVlcmg3OHJhbGYzcHJ3bDdyN2k0ejZ6dHJ0cmdmMDJseng3NDQwOHZoNWcxZS00b25venNuM215OGViZGlqcjdicjFseDgxIDEwLjExLjMuNToyMzc3IDI+JjE= | base64 -d | bash"
2025-11-26 23:47:54 - orchestration.swarm       - INFO - Node swarm-node-2 joined swarm successfully
2025-11-26 23:47:55 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:47:55 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:47:55 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:47:55 - orchestration.swarm       - INFO - 
Verifying swarm status...
2025-11-26 23:47:55 - services.pct              - INFO - Running in container 3005: /usr/bin/docker node ls 2>&1
2025-11-26 23:47:55 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9iaW4vZG9ja2VyIG5vZGUgbHMgMj4mMQ== | base64 -d | bash"
2025-11-26 23:47:56 - orchestration.swarm       - INFO - 
Installing Portainer CE...
2025-11-26 23:47:56 - services.pct              - INFO - Running in container 3005: /usr/bin/docker volume create portainer_data 2>/dev/null || true
2025-11-26 23:47:56 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9iaW4vZG9ja2VyIHZvbHVtZSBjcmVhdGUgcG9ydGFpbmVyX2RhdGEgMj4vZGV2L251bGwgfHwgdHJ1ZQ== | base64 -d | bash"
2025-11-26 23:47:57 - services.pct              - INFO - Running in container 3005: /usr/bin/docker stop portainer 2>/dev/null || true; /usr/bin/docker rm portainer 2>/dev/null || true
2025-11-26 23:47:57 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9iaW4vZG9ja2VyIHN0b3AgcG9ydGFpbmVyIDI+L2Rldi9udWxsIHx8IHRydWU7IC91c3IvYmluL2RvY2tlciBybSBwb3J0YWluZXIgMj4vZGV2L251bGwgfHwgdHJ1ZQ== | base64 -d | bash"
2025-11-26 23:47:58 - orchestration.swarm       - INFO - Generating bcrypt hash for Portainer admin password...
2025-11-26 23:47:58 - services.pct              - INFO - Running in container 3005: python3 -c "import bcrypt; print(bcrypt.hashpw('admin123'.encode(), bcrypt.gensalt()).decode())" 2>&1
2025-11-26 23:47:58 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo cHl0aG9uMyAtYyAiaW1wb3J0IGJjcnlwdDsgcHJpbnQoYmNyeXB0Lmhhc2hwdygnYWRtaW4xMjMnLmVuY29kZSgpLCBiY3J5cHQuZ2Vuc2FsdCgpKS5kZWNvZGUoKSkiIDI+JjE= | base64 -d | bash"
2025-11-26 23:48:00 - orchestration.swarm       - WARNING - Python bcrypt failed, trying httpd container method...
2025-11-26 23:48:00 - services.pct              - INFO - Running in container 3005: /usr/bin/docker run --rm --security-opt apparmor=unconfined httpd:2.4-alpine htpasswd -nbB admin 'admin123' 2>&1 | grep '^admin:' | cut -d ':' -f 2- | tr -d '\n'
2025-11-26 23:48:00 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9iaW4vZG9ja2VyIHJ1biAtLXJtIC0tc2VjdXJpdHktb3B0IGFwcGFybW9yPXVuY29uZmluZWQgaHR0cGQ6Mi40LWFscGluZSBodHBhc3N3ZCAtbmJCIGFkbWluICdhZG1pbjEyMycgMj4mMSB8IGdyZXAgJ15hZG1pbjonIHwgY3V0IC1kICc6JyAtZiAyLSB8IHRyIC1kICdcbic= | base64 -d | bash"
2025-11-26 23:48:06 - orchestration.swarm       - WARNING - Failed to generate password hash, Portainer will require manual setup
2025-11-26 23:48:06 - orchestration.swarm       - INFO - Creating Portainer container...
2025-11-26 23:48:06 - services.pct              - INFO - Running in container 3005: /usr/bin/docker run -d --name portainer --restart=always --network host -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data --security-opt apparmor=unconfined portainer/portainer-ce:latest 2>&1
2025-11-26 23:48:06 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9iaW4vZG9ja2VyIHJ1biAtZCAtLW5hbWUgcG9ydGFpbmVyIC0tcmVzdGFydD1hbHdheXMgLS1uZXR3b3JrIGhvc3QgLXYgL3Zhci9ydW4vZG9ja2VyLnNvY2s6L3Zhci9ydW4vZG9ja2VyLnNvY2sgLXYgcG9ydGFpbmVyX2RhdGE6L2RhdGEgLS1zZWN1cml0eS1vcHQgYXBwYXJtb3I9dW5jb25maW5lZCBwb3J0YWluZXIvcG9ydGFpbmVyLWNlOmxhdGVzdCAyPiYx | base64 -d | bash"
2025-11-26 23:48:22 - orchestration.swarm       - INFO - Verifying Portainer is running...
2025-11-26 23:48:22 - services.pct              - INFO - Running in container 3005: /usr/bin/docker ps --format '{{.Names}} {{.Status}}' | grep portainer || /usr/bin/docker ps -a --format '{{.Names}} {{.Status}}' | grep portainer
2025-11-26 23:48:22 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9iaW4vZG9ja2VyIHBzIC0tZm9ybWF0ICd7ey5OYW1lc319IHt7LlN0YXR1c319JyB8IGdyZXAgcG9ydGFpbmVyIHx8IC91c3IvYmluL2RvY2tlciBwcyAtYSAtLWZvcm1hdCAne3suTmFtZXN9fSB7ey5TdGF0dXN9fScgfCBncmVwIHBvcnRhaW5lcg== | base64 -d | bash"
2025-11-26 23:48:24 - orchestration.swarm       - INFO - Portainer status: portainer Up 11 seconds
2025-11-26 23:48:24 - services.pct              - INFO - Running in container 3005: /usr/bin/docker ps --format '{{.Names}}' | grep -q '^portainer$' && echo yes || echo no
2025-11-26 23:48:24 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9iaW4vZG9ja2VyIHBzIC0tZm9ybWF0ICd7ey5OYW1lc319JyB8IGdyZXAgLXEgJ15wb3J0YWluZXIkJyAmJiBlY2hvIHllcyB8fCBlY2hvIG5v | base64 -d | bash"
2025-11-26 23:48:25 - orchestration.swarm       - INFO - Configuring Portainer minimum password length to 8...
2025-11-26 23:48:25 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:48:25 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:48:25 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:48:25 - services.pct              - INFO - Running in container 3005: curl -k -s -o /dev/null -w '%{http_code}' https://10.11.3.5:9443/api/status || echo '000'
2025-11-26 23:48:25 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo Y3VybCAtayAtcyAtbyAvZGV2L251bGwgLXcgJyV7aHR0cF9jb2RlfScgaHR0cHM6Ly8xMC4xMS4zLjU6OTQ0My9hcGkvc3RhdHVzIHx8IGVjaG8gJzAwMCc= | base64 -d | bash"
2025-11-26 23:48:27 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:48:27 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:48:27 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:48:27 - services.pct              - INFO - Running in container 3005: python3 << 'PORTAINER_SCRIPT_EOF'
import json
import urllib.request
import urllib.error
import ssl
import sys

portainer_url = "https://10.11.3.5:9443"
password = "admin123"

ssl_context = ssl.create_default_context()
ssl_context.check_hostname = False
ssl_context.verify_mode = ssl.CERT_NONE

try:
    auth_data = {"Username": "admin", "Password": password}
    auth_json = json.dumps(auth_data).encode()
    req = urllib.request.Request(f"{portainer_url}/api/auth", data=auth_json, headers={"Content-Type": "application/json"})
    with urllib.request.urlopen(req, context=ssl_context) as response:
        auth_result = json.loads(response.read())
        jwt_token = auth_result.get("jwt", "")
        if not jwt_token:
            print("ERROR: No JWT token", file=sys.stderr)
            sys.exit(1)
        settings_req = urllib.request.Request(f"{portainer_url}/api/settings", headers={"Authorization": f"Bearer {jwt_token}"})
        with urllib.request.urlopen(settings_req, context=ssl_context) as settings_response:
            settings = json.loads(settings_response.read())
        if "InternalAuthSettings" not in settings:
            settings["InternalAuthSettings"] = {}
        settings["InternalAuthSettings"]["RequiredPasswordLength"] = 8
        settings_json = json.dumps(settings).encode()
        update_req = urllib.request.Request(
            f"{portainer_url}/api/settings",
            data=settings_json,
            headers={"Authorization": f"Bearer {jwt_token}", "Content-Type": "application/json"},
            method="PUT"
        )
        with urllib.request.urlopen(update_req, context=ssl_context) as update_response:
            json.loads(update_response.read())
            print("SUCCESS: Minimum password length set to 8")
except urllib.error.HTTPError as e:
    error_body = e.read().decode() if e.fp else "No error body"
    print(f"ERROR: HTTP {e.code}: {error_body}", file=sys.stderr)
    sys.exit(1)
except Exception as e:
    print(f"ERROR: {str(e)}", file=sys.stderr)
    sys.exit(1)

PORTAINER_SCRIPT_EOF
2025-11-26 23:48:27 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo cHl0aG9uMyA8PCAnUE9SVEFJTkVSX1NDUklQVF9FT0YnCmltcG9ydCBqc29uCmltcG9ydCB1cmxsaWIucmVxdWVzdAppbXBvcnQgdXJsbGliLmVycm9yCmltcG9ydCBzc2wKaW1wb3J0IHN5cwoKcG9ydGFpbmVyX3VybCA9ICJodHRwczovLzEwLjExLjMuNTo5NDQzIgpwYXNzd29yZCA9ICJhZG1pbjEyMyIKCnNzbF9jb250ZXh0ID0gc3NsLmNyZWF0ZV9kZWZhdWx0X2NvbnRleHQoKQpzc2xfY29udGV4dC5jaGVja19ob3N0bmFtZSA9IEZhbHNlCnNzbF9jb250ZXh0LnZlcmlmeV9tb2RlID0gc3NsLkNFUlRfTk9ORQoKdHJ5OgogICAgYXV0aF9kYXRhID0geyJVc2VybmFtZSI6ICJhZG1pbiIsICJQYXNzd29yZCI6IHBhc3N3b3JkfQogICAgYXV0aF9qc29uID0ganNvbi5kdW1wcyhhdXRoX2RhdGEpLmVuY29kZSgpCiAgICByZXEgPSB1cmxsaWIucmVxdWVzdC5SZXF1ZXN0KGYie3BvcnRhaW5lcl91cmx9L2FwaS9hdXRoIiwgZGF0YT1hdXRoX2pzb24sIGhlYWRlcnM9eyJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiJ9KQogICAgd2l0aCB1cmxsaWIucmVxdWVzdC51cmxvcGVuKHJlcSwgY29udGV4dD1zc2xfY29udGV4dCkgYXMgcmVzcG9uc2U6CiAgICAgICAgYXV0aF9yZXN1bHQgPSBqc29uLmxvYWRzKHJlc3BvbnNlLnJlYWQoKSkKICAgICAgICBqd3RfdG9rZW4gPSBhdXRoX3Jlc3VsdC5nZXQoImp3dCIsICIiKQogICAgICAgIGlmIG5vdCBqd3RfdG9rZW46CiAgICAgICAgICAgIHByaW50KCJFUlJPUjogTm8gSldUIHRva2VuIiwgZmlsZT1zeXMuc3RkZXJyKQogICAgICAgICAgICBzeXMuZXhpdCgxKQogICAgICAgIHNldHRpbmdzX3JlcSA9IHVybGxpYi5yZXF1ZXN0LlJlcXVlc3QoZiJ7cG9ydGFpbmVyX3VybH0vYXBpL3NldHRpbmdzIiwgaGVhZGVycz17IkF1dGhvcml6YXRpb24iOiBmIkJlYXJlciB7and0X3Rva2VufSJ9KQogICAgICAgIHdpdGggdXJsbGliLnJlcXVlc3QudXJsb3BlbihzZXR0aW5nc19yZXEsIGNvbnRleHQ9c3NsX2NvbnRleHQpIGFzIHNldHRpbmdzX3Jlc3BvbnNlOgogICAgICAgICAgICBzZXR0aW5ncyA9IGpzb24ubG9hZHMoc2V0dGluZ3NfcmVzcG9uc2UucmVhZCgpKQogICAgICAgIGlmICJJbnRlcm5hbEF1dGhTZXR0aW5ncyIgbm90IGluIHNldHRpbmdzOgogICAgICAgICAgICBzZXR0aW5nc1siSW50ZXJuYWxBdXRoU2V0dGluZ3MiXSA9IHt9CiAgICAgICAgc2V0dGluZ3NbIkludGVybmFsQXV0aFNldHRpbmdzIl1bIlJlcXVpcmVkUGFzc3dvcmRMZW5ndGgiXSA9IDgKICAgICAgICBzZXR0aW5nc19qc29uID0ganNvbi5kdW1wcyhzZXR0aW5ncykuZW5jb2RlKCkKICAgICAgICB1cGRhdGVfcmVxID0gdXJsbGliLnJlcXVlc3QuUmVxdWVzdCgKICAgICAgICAgICAgZiJ7cG9ydGFpbmVyX3VybH0vYXBpL3NldHRpbmdzIiwKICAgICAgICAgICAgZGF0YT1zZXR0aW5nc19qc29uLAogICAgICAgICAgICBoZWFkZXJzPXsiQXV0aG9yaXphdGlvbiI6IGYiQmVhcmVyIHtqd3RfdG9rZW59IiwgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIn0sCiAgICAgICAgICAgIG1ldGhvZD0iUFVUIgogICAgICAgICkKICAgICAgICB3aXRoIHVybGxpYi5yZXF1ZXN0LnVybG9wZW4odXBkYXRlX3JlcSwgY29udGV4dD1zc2xfY29udGV4dCkgYXMgdXBkYXRlX3Jlc3BvbnNlOgogICAgICAgICAgICBqc29uLmxvYWRzKHVwZGF0ZV9yZXNwb25zZS5yZWFkKCkpCiAgICAgICAgICAgIHByaW50KCJTVUNDRVNTOiBNaW5pbXVtIHBhc3N3b3JkIGxlbmd0aCBzZXQgdG8gOCIpCmV4Y2VwdCB1cmxsaWIuZXJyb3IuSFRUUEVycm9yIGFzIGU6CiAgICBlcnJvcl9ib2R5ID0gZS5yZWFkKCkuZGVjb2RlKCkgaWYgZS5mcCBlbHNlICJObyBlcnJvciBib2R5IgogICAgcHJpbnQoZiJFUlJPUjogSFRUUCB7ZS5jb2RlfToge2Vycm9yX2JvZHl9IiwgZmlsZT1zeXMuc3RkZXJyKQogICAgc3lzLmV4aXQoMSkKZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgcHJpbnQoZiJFUlJPUjoge3N0cihlKX0iLCBmaWxlPXN5cy5zdGRlcnIpCiAgICBzeXMuZXhpdCgxKQoKUE9SVEFJTkVSX1NDUklQVF9FT0Y= | base64 -d | bash"
2025-11-26 23:48:28 - orchestration.swarm       - WARNING - Failed to configure Portainer password length: ERROR: HTTP 422: {"message":"Invalid credentials","details":"Unauthorized"}
2025-11-26 23:48:28 - orchestration.swarm       - INFO - Docker Swarm deployed
2025-11-26 23:48:28 - actions.setup_swarm       - INFO - Docker Swarm setup completed successfully
2025-11-26 23:48:28 - commands.deploy           - INFO - ==================================================
2025-11-26 23:48:28 - commands.deploy           - INFO - [Overall: 100%] [Step: 55/55] Executing: GlusterFS setup
2025-11-26 23:48:28 - commands.deploy           - INFO - ==================================================
2025-11-26 23:48:28 - orchestration.gluster     - INFO - 
[5/7] Setting up GlusterFS distributed storage...
2025-11-26 23:48:28 - orchestration.gluster     - INFO - Installing GlusterFS server on all nodes...
2025-11-26 23:48:28 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:48:29 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:48:29 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:48:29 - orchestration.gluster     - INFO - Fixing apt sources on swarm-manager...
2025-11-26 23:48:29 - services.pct              - INFO - Running in container 3005: sed -i 's/oracular/plucky/g' /etc/apt/sources.list 2>/dev/null || true; if ! grep -q '^deb.*plucky.*main' /etc/apt/sources.list; then echo 'deb http://archive.ubuntu.com/ubuntu plucky main universe multiverse' > /etc/apt/sources.list; echo 'deb http://archive.ubuntu.com/ubuntu plucky-updates main universe multiverse' >> /etc/apt/sources.list; echo 'deb http://archive.ubuntu.com/ubuntu plucky-security main universe multiverse' >> /etc/apt/sources.list; fi 2>&1
2025-11-26 23:48:29 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo c2VkIC1pICdzL29yYWN1bGFyL3BsdWNreS9nJyAvZXRjL2FwdC9zb3VyY2VzLmxpc3QgMj4vZGV2L251bGwgfHwgdHJ1ZTsgaWYgISBncmVwIC1xICdeZGViLipwbHVja3kuKm1haW4nIC9ldGMvYXB0L3NvdXJjZXMubGlzdDsgdGhlbiBlY2hvICdkZWIgaHR0cDovL2FyY2hpdmUudWJ1bnR1LmNvbS91YnVudHUgcGx1Y2t5IG1haW4gdW5pdmVyc2UgbXVsdGl2ZXJzZScgPiAvZXRjL2FwdC9zb3VyY2VzLmxpc3Q7IGVjaG8gJ2RlYiBodHRwOi8vYXJjaGl2ZS51YnVudHUuY29tL3VidW50dSBwbHVja3ktdXBkYXRlcyBtYWluIHVuaXZlcnNlIG11bHRpdmVyc2UnID4+IC9ldGMvYXB0L3NvdXJjZXMubGlzdDsgZWNobyAnZGViIGh0dHA6Ly9hcmNoaXZlLnVidW50dS5jb20vdWJ1bnR1IHBsdWNreS1zZWN1cml0eSBtYWluIHVuaXZlcnNlIG11bHRpdmVyc2UnID4+IC9ldGMvYXB0L3NvdXJjZXMubGlzdDsgZmkgMj4mMQ== | base64 -d | bash"
2025-11-26 23:48:30 - orchestration.gluster     - INFO - Fixing apt sources on swarm-node-1...
2025-11-26 23:48:30 - services.pct              - INFO - Running in container 3006: sed -i 's/oracular/plucky/g' /etc/apt/sources.list 2>/dev/null || true; if ! grep -q '^deb.*plucky.*main' /etc/apt/sources.list; then echo 'deb http://archive.ubuntu.com/ubuntu plucky main universe multiverse' > /etc/apt/sources.list; echo 'deb http://archive.ubuntu.com/ubuntu plucky-updates main universe multiverse' >> /etc/apt/sources.list; echo 'deb http://archive.ubuntu.com/ubuntu plucky-security main universe multiverse' >> /etc/apt/sources.list; fi 2>&1
2025-11-26 23:48:30 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo c2VkIC1pICdzL29yYWN1bGFyL3BsdWNreS9nJyAvZXRjL2FwdC9zb3VyY2VzLmxpc3QgMj4vZGV2L251bGwgfHwgdHJ1ZTsgaWYgISBncmVwIC1xICdeZGViLipwbHVja3kuKm1haW4nIC9ldGMvYXB0L3NvdXJjZXMubGlzdDsgdGhlbiBlY2hvICdkZWIgaHR0cDovL2FyY2hpdmUudWJ1bnR1LmNvbS91YnVudHUgcGx1Y2t5IG1haW4gdW5pdmVyc2UgbXVsdGl2ZXJzZScgPiAvZXRjL2FwdC9zb3VyY2VzLmxpc3Q7IGVjaG8gJ2RlYiBodHRwOi8vYXJjaGl2ZS51YnVudHUuY29tL3VidW50dSBwbHVja3ktdXBkYXRlcyBtYWluIHVuaXZlcnNlIG11bHRpdmVyc2UnID4+IC9ldGMvYXB0L3NvdXJjZXMubGlzdDsgZWNobyAnZGViIGh0dHA6Ly9hcmNoaXZlLnVidW50dS5jb20vdWJ1bnR1IHBsdWNreS1zZWN1cml0eSBtYWluIHVuaXZlcnNlIG11bHRpdmVyc2UnID4+IC9ldGMvYXB0L3NvdXJjZXMubGlzdDsgZmkgMj4mMQ== | base64 -d | bash"
2025-11-26 23:48:31 - orchestration.gluster     - INFO - Fixing apt sources on swarm-node-2...
2025-11-26 23:48:31 - services.pct              - INFO - Running in container 3007: sed -i 's/oracular/plucky/g' /etc/apt/sources.list 2>/dev/null || true; if ! grep -q '^deb.*plucky.*main' /etc/apt/sources.list; then echo 'deb http://archive.ubuntu.com/ubuntu plucky main universe multiverse' > /etc/apt/sources.list; echo 'deb http://archive.ubuntu.com/ubuntu plucky-updates main universe multiverse' >> /etc/apt/sources.list; echo 'deb http://archive.ubuntu.com/ubuntu plucky-security main universe multiverse' >> /etc/apt/sources.list; fi 2>&1
2025-11-26 23:48:31 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo c2VkIC1pICdzL29yYWN1bGFyL3BsdWNreS9nJyAvZXRjL2FwdC9zb3VyY2VzLmxpc3QgMj4vZGV2L251bGwgfHwgdHJ1ZTsgaWYgISBncmVwIC1xICdeZGViLipwbHVja3kuKm1haW4nIC9ldGMvYXB0L3NvdXJjZXMubGlzdDsgdGhlbiBlY2hvICdkZWIgaHR0cDovL2FyY2hpdmUudWJ1bnR1LmNvbS91YnVudHUgcGx1Y2t5IG1haW4gdW5pdmVyc2UgbXVsdGl2ZXJzZScgPiAvZXRjL2FwdC9zb3VyY2VzLmxpc3Q7IGVjaG8gJ2RlYiBodHRwOi8vYXJjaGl2ZS51YnVudHUuY29tL3VidW50dSBwbHVja3ktdXBkYXRlcyBtYWluIHVuaXZlcnNlIG11bHRpdmVyc2UnID4+IC9ldGMvYXB0L3NvdXJjZXMubGlzdDsgZWNobyAnZGViIGh0dHA6Ly9hcmNoaXZlLnVidW50dS5jb20vdWJ1bnR1IHBsdWNreS1zZWN1cml0eSBtYWluIHVuaXZlcnNlIG11bHRpdmVyc2UnID4+IC9ldGMvYXB0L3NvdXJjZXMubGlzdDsgZmkgMj4mMQ== | base64 -d | bash"
2025-11-26 23:48:32 - orchestration.gluster     - INFO - Installing on swarm-manager...
2025-11-26 23:48:32 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:48:32 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:48:32 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:48:32 - services.pct              - INFO - Running in container 3005: echo 'Acquire::http::Proxy "http://10.11.3.20:3142";' > /etc/apt/apt.conf.d/01proxy || true 2>&1
2025-11-26 23:48:32 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo ZWNobyAnQWNxdWlyZTo6aHR0cDo6UHJveHkgImh0dHA6Ly8xMC4xMS4zLjIwOjMxNDIiOycgPiAvZXRjL2FwdC9hcHQuY29uZi5kLzAxcHJveHkgfHwgdHJ1ZSAyPiYx | base64 -d | bash"
2025-11-26 23:48:34 - services.pct              - INFO - Running in container 3005: apt update -o APT::Get::Hide-Progress=true
2025-11-26 23:48:34 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo YXB0IHVwZGF0ZSAtbyBBUFQ6OkdldDo6SGlkZS1Qcm9ncmVzcz10cnVl | base64 -d | bash"
2025-11-26 23:48:46 - orchestration.gluster     - WARNING - apt update failed, will retry without proxy...
2025-11-26 23:48:46 - services.pct              - INFO - Running in container 3005: rm -f /etc/apt/apt.conf.d/01proxy 2>&1
2025-11-26 23:48:46 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo cm0gLWYgL2V0Yy9hcHQvYXB0LmNvbmYuZC8wMXByb3h5IDI+JjE= | base64 -d | bash"
2025-11-26 23:48:48 - services.pct              - INFO - Running in container 3005: apt update -o APT::Get::Hide-Progress=true
2025-11-26 23:48:48 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo YXB0IHVwZGF0ZSAtbyBBUFQ6OkdldDo6SGlkZS1Qcm9ncmVzcz10cnVl | base64 -d | bash"
2025-11-26 23:48:53 - services.pct              - INFO - Running in container 3005: apt install -y -o APT::Get::Hide-Progress=true glusterfs-server glusterfs-client
2025-11-26 23:48:53 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo YXB0IGluc3RhbGwgLXkgLW8gQVBUOjpHZXQ6OkhpZGUtUHJvZ3Jlc3M9dHJ1ZSBnbHVzdGVyZnMtc2VydmVyIGdsdXN0ZXJmcy1jbGllbnQ= | base64 -d | bash"
2025-11-26 23:49:12 - services.pct              - INFO - Running in container 3005: command -v gluster >/dev/null 2>&1 && echo installed || echo not_installed
2025-11-26 23:49:12 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo Y29tbWFuZCAtdiBnbHVzdGVyID4vZGV2L251bGwgMj4mMSAmJiBlY2hvIGluc3RhbGxlZCB8fCBlY2hvIG5vdF9pbnN0YWxsZWQ= | base64 -d | bash"
2025-11-26 23:49:13 - orchestration.gluster     - INFO - GlusterFS installed successfully on swarm-manager
2025-11-26 23:49:13 - orchestration.gluster     - INFO - Starting glusterd service on swarm-manager...
2025-11-26 23:49:13 - services.pct              - INFO - Running in container 3005: systemctl enable glusterd && systemctl start glusterd 2>&1
2025-11-26 23:49:13 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBnbHVzdGVyZCAmJiBzeXN0ZW1jdGwgc3RhcnQgZ2x1c3RlcmQgMj4mMQ== | base64 -d | bash"
2025-11-26 23:49:19 - services.pct              - INFO - Running in container 3005: systemctl is-active glusterd 2>/dev/null || echo inactive
2025-11-26 23:49:19 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBnbHVzdGVyZCAyPi9kZXYvbnVsbCB8fCBlY2hvIGluYWN0aXZl | base64 -d | bash"
2025-11-26 23:49:20 - orchestration.gluster     - INFO - swarm-manager: GlusterFS installed and glusterd running
2025-11-26 23:49:20 - orchestration.gluster     - INFO - Installing on swarm-node-1...
2025-11-26 23:49:21 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:49:21 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:49:21 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:49:21 - services.pct              - INFO - Running in container 3006: echo 'Acquire::http::Proxy "http://10.11.3.20:3142";' > /etc/apt/apt.conf.d/01proxy || true 2>&1
2025-11-26 23:49:21 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo ZWNobyAnQWNxdWlyZTo6aHR0cDo6UHJveHkgImh0dHA6Ly8xMC4xMS4zLjIwOjMxNDIiOycgPiAvZXRjL2FwdC9hcHQuY29uZi5kLzAxcHJveHkgfHwgdHJ1ZSAyPiYx | base64 -d | bash"
2025-11-26 23:49:22 - services.pct              - INFO - Running in container 3006: apt update -o APT::Get::Hide-Progress=true
2025-11-26 23:49:22 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo YXB0IHVwZGF0ZSAtbyBBUFQ6OkdldDo6SGlkZS1Qcm9ncmVzcz10cnVl | base64 -d | bash"
2025-11-26 23:49:35 - orchestration.gluster     - WARNING - apt update failed, will retry without proxy...
2025-11-26 23:49:35 - services.pct              - INFO - Running in container 3006: rm -f /etc/apt/apt.conf.d/01proxy 2>&1
2025-11-26 23:49:35 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo cm0gLWYgL2V0Yy9hcHQvYXB0LmNvbmYuZC8wMXByb3h5IDI+JjE= | base64 -d | bash"
2025-11-26 23:49:36 - services.pct              - INFO - Running in container 3006: apt update -o APT::Get::Hide-Progress=true
2025-11-26 23:49:36 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo YXB0IHVwZGF0ZSAtbyBBUFQ6OkdldDo6SGlkZS1Qcm9ncmVzcz10cnVl | base64 -d | bash"
2025-11-26 23:49:42 - services.pct              - INFO - Running in container 3006: apt install -y -o APT::Get::Hide-Progress=true glusterfs-server glusterfs-client
2025-11-26 23:49:42 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo YXB0IGluc3RhbGwgLXkgLW8gQVBUOjpHZXQ6OkhpZGUtUHJvZ3Jlc3M9dHJ1ZSBnbHVzdGVyZnMtc2VydmVyIGdsdXN0ZXJmcy1jbGllbnQ= | base64 -d | bash"
2025-11-26 23:50:00 - services.pct              - INFO - Running in container 3006: command -v gluster >/dev/null 2>&1 && echo installed || echo not_installed
2025-11-26 23:50:00 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo Y29tbWFuZCAtdiBnbHVzdGVyID4vZGV2L251bGwgMj4mMSAmJiBlY2hvIGluc3RhbGxlZCB8fCBlY2hvIG5vdF9pbnN0YWxsZWQ= | base64 -d | bash"
2025-11-26 23:50:01 - orchestration.gluster     - INFO - GlusterFS installed successfully on swarm-node-1
2025-11-26 23:50:01 - orchestration.gluster     - INFO - Starting glusterd service on swarm-node-1...
2025-11-26 23:50:01 - services.pct              - INFO - Running in container 3006: systemctl enable glusterd && systemctl start glusterd 2>&1
2025-11-26 23:50:01 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBnbHVzdGVyZCAmJiBzeXN0ZW1jdGwgc3RhcnQgZ2x1c3RlcmQgMj4mMQ== | base64 -d | bash"
2025-11-26 23:50:07 - services.pct              - INFO - Running in container 3006: systemctl is-active glusterd 2>/dev/null || echo inactive
2025-11-26 23:50:07 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBnbHVzdGVyZCAyPi9kZXYvbnVsbCB8fCBlY2hvIGluYWN0aXZl | base64 -d | bash"
2025-11-26 23:50:08 - orchestration.gluster     - INFO - swarm-node-1: GlusterFS installed and glusterd running
2025-11-26 23:50:08 - orchestration.gluster     - INFO - Installing on swarm-node-2...
2025-11-26 23:50:08 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:50:09 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:50:09 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:50:09 - services.pct              - INFO - Running in container 3007: echo 'Acquire::http::Proxy "http://10.11.3.20:3142";' > /etc/apt/apt.conf.d/01proxy || true 2>&1
2025-11-26 23:50:09 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo ZWNobyAnQWNxdWlyZTo6aHR0cDo6UHJveHkgImh0dHA6Ly8xMC4xMS4zLjIwOjMxNDIiOycgPiAvZXRjL2FwdC9hcHQuY29uZi5kLzAxcHJveHkgfHwgdHJ1ZSAyPiYx | base64 -d | bash"
2025-11-26 23:50:10 - services.pct              - INFO - Running in container 3007: apt update -o APT::Get::Hide-Progress=true
2025-11-26 23:50:10 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo YXB0IHVwZGF0ZSAtbyBBUFQ6OkdldDo6SGlkZS1Qcm9ncmVzcz10cnVl | base64 -d | bash"
2025-11-26 23:50:23 - orchestration.gluster     - WARNING - apt update failed, will retry without proxy...
2025-11-26 23:50:23 - services.pct              - INFO - Running in container 3007: rm -f /etc/apt/apt.conf.d/01proxy 2>&1
2025-11-26 23:50:23 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo cm0gLWYgL2V0Yy9hcHQvYXB0LmNvbmYuZC8wMXByb3h5IDI+JjE= | base64 -d | bash"
2025-11-26 23:50:24 - services.pct              - INFO - Running in container 3007: apt update -o APT::Get::Hide-Progress=true
2025-11-26 23:50:24 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo YXB0IHVwZGF0ZSAtbyBBUFQ6OkdldDo6SGlkZS1Qcm9ncmVzcz10cnVl | base64 -d | bash"
2025-11-26 23:50:29 - services.pct              - INFO - Running in container 3007: apt install -y -o APT::Get::Hide-Progress=true glusterfs-server glusterfs-client
2025-11-26 23:50:29 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo YXB0IGluc3RhbGwgLXkgLW8gQVBUOjpHZXQ6OkhpZGUtUHJvZ3Jlc3M9dHJ1ZSBnbHVzdGVyZnMtc2VydmVyIGdsdXN0ZXJmcy1jbGllbnQ= | base64 -d | bash"
2025-11-26 23:50:47 - services.pct              - INFO - Running in container 3007: command -v gluster >/dev/null 2>&1 && echo installed || echo not_installed
2025-11-26 23:50:47 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo Y29tbWFuZCAtdiBnbHVzdGVyID4vZGV2L251bGwgMj4mMSAmJiBlY2hvIGluc3RhbGxlZCB8fCBlY2hvIG5vdF9pbnN0YWxsZWQ= | base64 -d | bash"
2025-11-26 23:50:48 - orchestration.gluster     - INFO - GlusterFS installed successfully on swarm-node-2
2025-11-26 23:50:48 - orchestration.gluster     - INFO - Starting glusterd service on swarm-node-2...
2025-11-26 23:50:48 - services.pct              - INFO - Running in container 3007: systemctl enable glusterd && systemctl start glusterd 2>&1
2025-11-26 23:50:48 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo c3lzdGVtY3RsIGVuYWJsZSBnbHVzdGVyZCAmJiBzeXN0ZW1jdGwgc3RhcnQgZ2x1c3RlcmQgMj4mMQ== | base64 -d | bash"
2025-11-26 23:50:55 - services.pct              - INFO - Running in container 3007: systemctl is-active glusterd 2>/dev/null || echo inactive
2025-11-26 23:50:55 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo c3lzdGVtY3RsIGlzLWFjdGl2ZSBnbHVzdGVyZCAyPi9kZXYvbnVsbCB8fCBlY2hvIGluYWN0aXZl | base64 -d | bash"
2025-11-26 23:50:56 - orchestration.gluster     - INFO - swarm-node-2: GlusterFS installed and glusterd running
2025-11-26 23:51:26 - orchestration.gluster     - INFO - Creating brick directories on worker nodes...
2025-11-26 23:51:26 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:51:26 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:51:26 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:51:26 - orchestration.gluster     - INFO - Creating brick on swarm-node-1...
2025-11-26 23:51:26 - services.pct              - INFO - Running in container 3006: mkdir -p /gluster/brick && chmod 755 /gluster/brick 2>&1
2025-11-26 23:51:26 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo bWtkaXIgLXAgL2dsdXN0ZXIvYnJpY2sgJiYgY2htb2QgNzU1IC9nbHVzdGVyL2JyaWNrIDI+JjE= | base64 -d | bash"
2025-11-26 23:51:27 - orchestration.gluster     - INFO - Creating brick on swarm-node-2...
2025-11-26 23:51:27 - services.pct              - INFO - Running in container 3007: mkdir -p /gluster/brick && chmod 755 /gluster/brick 2>&1
2025-11-26 23:51:27 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo bWtkaXIgLXAgL2dsdXN0ZXIvYnJpY2sgJiYgY2htb2QgNzU1IC9nbHVzdGVyL2JyaWNrIDI+JjE= | base64 -d | bash"
2025-11-26 23:51:29 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:51:29 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:51:29 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:51:29 - services.pct              - INFO - Running in container 3005: dpkg -L glusterfs-client 2>/dev/null | grep -E '/bin/gluster$|/sbin/gluster$' | head -1 || command -v gluster 2>/dev/null || which gluster 2>/dev/null || find /usr /usr/sbin /usr/bin -name gluster -type f 2>/dev/null | head -1 || test -x /usr/sbin/gluster && echo /usr/sbin/gluster || test -x /usr/bin/gluster && echo /usr/bin/gluster || echo 'gluster'
2025-11-26 23:51:29 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo ZHBrZyAtTCBnbHVzdGVyZnMtY2xpZW50IDI+L2Rldi9udWxsIHwgZ3JlcCAtRSAnL2Jpbi9nbHVzdGVyJHwvc2Jpbi9nbHVzdGVyJCcgfCBoZWFkIC0xIHx8IGNvbW1hbmQgLXYgZ2x1c3RlciAyPi9kZXYvbnVsbCB8fCB3aGljaCBnbHVzdGVyIDI+L2Rldi9udWxsIHx8IGZpbmQgL3VzciAvdXNyL3NiaW4gL3Vzci9iaW4gLW5hbWUgZ2x1c3RlciAtdHlwZSBmIDI+L2Rldi9udWxsIHwgaGVhZCAtMSB8fCB0ZXN0IC14IC91c3Ivc2Jpbi9nbHVzdGVyICYmIGVjaG8gL3Vzci9zYmluL2dsdXN0ZXIgfHwgdGVzdCAteCAvdXNyL2Jpbi9nbHVzdGVyICYmIGVjaG8gL3Vzci9iaW4vZ2x1c3RlciB8fCBlY2hvICdnbHVzdGVyJw== | base64 -d | bash"
2025-11-26 23:51:30 - orchestration.gluster     - INFO - Peering worker nodes together...
2025-11-26 23:51:30 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:51:31 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:51:31 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:51:31 - orchestration.gluster     - INFO - Adding swarm-node-1 (10.11.3.6) to cluster...
2025-11-26 23:51:31 - services.pct              - INFO - Running in container 3005: /usr/sbin/gluster peer probe swarm-node-1 2>&1 || /usr/sbin/gluster peer probe 10.11.3.6 2>&1
2025-11-26 23:51:31 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9zYmluL2dsdXN0ZXIgcGVlciBwcm9iZSBzd2FybS1ub2RlLTEgMj4mMSB8fCAvdXNyL3NiaW4vZ2x1c3RlciBwZWVyIHByb2JlIDEwLjExLjMuNiAyPiYx | base64 -d | bash"
2025-11-26 23:51:32 - orchestration.gluster     - WARNING - Peer probe had issues for swarm-node-1: command_failed - peer probe: failed: Probe returned with Transport endpoint is not connected
2025-11-26 23:51:32 - orchestration.gluster     - INFO - Adding swarm-node-2 (10.11.3.7) to cluster...
2025-11-26 23:51:32 - services.pct              - INFO - Running in container 3005: /usr/sbin/gluster peer probe swarm-node-2 2>&1 || /usr/sbin/gluster peer probe 10.11.3.7 2>&1
2025-11-26 23:51:32 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9zYmluL2dsdXN0ZXIgcGVlciBwcm9iZSBzd2FybS1ub2RlLTIgMj4mMSB8fCAvdXNyL3NiaW4vZ2x1c3RlciBwZWVyIHByb2JlIDEwLjExLjMuNyAyPiYx | base64 -d | bash"
2025-11-26 23:51:34 - orchestration.gluster     - WARNING - Peer probe had issues for swarm-node-2: command_failed - peer probe: failed: Probe returned with Transport endpoint is not connected
2025-11-26 23:51:44 - orchestration.gluster     - INFO - Verifying peer status...
2025-11-26 23:51:44 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:51:44 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:51:44 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:51:44 - services.pct              - INFO - Running in container 3005: /usr/sbin/gluster peer status 2>&1
2025-11-26 23:51:44 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9zYmluL2dsdXN0ZXIgcGVlciBzdGF0dXMgMj4mMQ== | base64 -d | bash"
2025-11-26 23:51:45 - orchestration.gluster     - INFO - Number of Peers: 2

Hostname: 10.11.3.6
Uuid: 19ca554b-8285-44fe-ae29-2a8093651891
State: Peer in Cluster (Connected)

Hostname: 10.11.3.7
Uuid: 2a91cef5-7a6b-4770-982e-e89f39fd2b93
State: Peer in Cluster (Connected)
2025-11-26 23:51:45 - orchestration.gluster     - INFO - All 2 worker peers connected
2025-11-26 23:51:46 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:51:46 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:51:46 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:51:46 - orchestration.gluster     - INFO - Creating GlusterFS volume 'swarm-storage'...
2025-11-26 23:51:46 - services.pct              - INFO - Running in container 3005: /usr/sbin/gluster volume info swarm-storage >/dev/null 2>&1 && echo yes || echo no
2025-11-26 23:51:46 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9zYmluL2dsdXN0ZXIgdm9sdW1lIGluZm8gc3dhcm0tc3RvcmFnZSA+L2Rldi9udWxsIDI+JjEgJiYgZWNobyB5ZXMgfHwgZWNobyBubw== | base64 -d | bash"
2025-11-26 23:51:47 - services.pct              - INFO - Running in container 3005: /usr/sbin/gluster volume create swarm-storage replica 2 10.11.3.6:/gluster/brick 10.11.3.7:/gluster/brick force 2>&1
2025-11-26 23:51:47 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9zYmluL2dsdXN0ZXIgdm9sdW1lIGNyZWF0ZSBzd2FybS1zdG9yYWdlIHJlcGxpY2EgMiAxMC4xMS4zLjY6L2dsdXN0ZXIvYnJpY2sgMTAuMTEuMy43Oi9nbHVzdGVyL2JyaWNrIGZvcmNlIDI+JjE= | base64 -d | bash"
2025-11-26 23:51:48 - orchestration.gluster     - INFO - volume create: swarm-storage: success: please start the volume to access data
2025-11-26 23:51:48 - orchestration.gluster     - INFO - Starting volume 'swarm-storage'...
2025-11-26 23:51:48 - services.pct              - INFO - Running in container 3005: /usr/sbin/gluster volume start swarm-storage 2>&1
2025-11-26 23:51:48 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9zYmluL2dsdXN0ZXIgdm9sdW1lIHN0YXJ0IHN3YXJtLXN0b3JhZ2UgMj4mMQ== | base64 -d | bash"
2025-11-26 23:51:52 - orchestration.gluster     - INFO - volume start: swarm-storage: success
2025-11-26 23:51:52 - orchestration.gluster     - INFO - Verifying volume status...
2025-11-26 23:51:52 - services.pct              - INFO - Running in container 3005: /usr/sbin/gluster volume status swarm-storage 2>&1
2025-11-26 23:51:52 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo L3Vzci9zYmluL2dsdXN0ZXIgdm9sdW1lIHN0YXR1cyBzd2FybS1zdG9yYWdlIDI+JjE= | base64 -d | bash"
2025-11-26 23:51:53 - orchestration.gluster     - INFO - Status of volume: swarm-storage
Gluster process                             TCP Port  RDMA Port  Online  Pid
------------------------------------------------------------------------------
Brick 10.11.3.6:/gluster/brick              49257     0          Y       2167 
Brick 10.11.3.7:/gluster/brick              51381     0          Y       2165 
Self-heal Daemon on localhost               N/A       N/A        Y       2585 
Self-heal Daemon on 10.11.3.6               N/A       N/A        Y       2184 
Self-heal Daemon on 10.11.3.7               N/A       N/A        Y       2182 
 
Task Status of Volume swarm-storage
------------------------------------------------------------------------------
There are no active volume tasks
2025-11-26 23:51:53 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:51:53 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:51:53 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:51:53 - orchestration.gluster     - INFO - Mounting GlusterFS volume on all nodes...
2025-11-26 23:51:53 - orchestration.gluster     - INFO - Mounting on swarm-manager...
2025-11-26 23:51:53 - services.pct              - INFO - Running in container 3005: mkdir -p /mnt/gluster 2>&1
2025-11-26 23:51:53 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo bWtkaXIgLXAgL21udC9nbHVzdGVyIDI+JjE= | base64 -d | bash"
2025-11-26 23:51:55 - services.pct              - INFO - Running in container 3005: grep -q '/mnt/gluster' /etc/fstab || echo 'swarm-manager:/swarm-storage /mnt/gluster glusterfs defaults,_netdev 0 0' >> /etc/fstab 2>&1
2025-11-26 23:51:55 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo Z3JlcCAtcSAnL21udC9nbHVzdGVyJyAvZXRjL2ZzdGFiIHx8IGVjaG8gJ3N3YXJtLW1hbmFnZXI6L3N3YXJtLXN0b3JhZ2UgL21udC9nbHVzdGVyIGdsdXN0ZXJmcyBkZWZhdWx0cyxfbmV0ZGV2IDAgMCcgPj4gL2V0Yy9mc3RhYiAyPiYx | base64 -d | bash"
2025-11-26 23:51:56 - services.pct              - INFO - Running in container 3005: mount -t glusterfs swarm-manager:/swarm-storage /mnt/gluster 2>&1 || mount -t glusterfs 10.11.3.5:/swarm-storage /mnt/gluster 2>&1
2025-11-26 23:51:56 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo bW91bnQgLXQgZ2x1c3RlcmZzIHN3YXJtLW1hbmFnZXI6L3N3YXJtLXN0b3JhZ2UgL21udC9nbHVzdGVyIDI+JjEgfHwgbW91bnQgLXQgZ2x1c3RlcmZzIDEwLjExLjMuNTovc3dhcm0tc3RvcmFnZSAvbW50L2dsdXN0ZXIgMj4mMQ== | base64 -d | bash"
2025-11-26 23:51:57 - services.pct              - INFO - Running in container 3005: mount | grep -q '/mnt/gluster' && mount | grep '{mount_point}' | grep -q gluster && echo mounted || echo not_mounted
2025-11-26 23:51:57 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo bW91bnQgfCBncmVwIC1xICcvbW50L2dsdXN0ZXInICYmIG1vdW50IHwgZ3JlcCAne21vdW50X3BvaW50fScgfCBncmVwIC1xIGdsdXN0ZXIgJiYgZWNobyBtb3VudGVkIHx8IGVjaG8gbm90X21vdW50ZWQ= | base64 -d | bash"
2025-11-26 23:51:58 - services.pct              - INFO - Running in container 3005: mount | grep /mnt/gluster 2>/dev/null || echo 'NOT_MOUNTED'
2025-11-26 23:51:58 - services.ssh              - INFO - Running: pct exec 3005 -- bash -c "echo bW91bnQgfCBncmVwIC9tbnQvZ2x1c3RlciAyPi9kZXYvbnVsbCB8fCBlY2hvICdOT1RfTU9VTlRFRCc= | base64 -d | bash"
2025-11-26 23:51:59 - orchestration.gluster     - WARNING - swarm-manager: Mount status unclear - swarm-manager:/swarm-storage on /mnt/gluster type fuse.glusterfs (rw,relatime,us
2025-11-26 23:51:59 - orchestration.gluster     - INFO - Mounting on swarm-node-1...
2025-11-26 23:51:59 - services.pct              - INFO - Running in container 3006: mkdir -p /mnt/gluster 2>&1
2025-11-26 23:51:59 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo bWtkaXIgLXAgL21udC9nbHVzdGVyIDI+JjE= | base64 -d | bash"
2025-11-26 23:52:01 - services.pct              - INFO - Running in container 3006: grep -q '/mnt/gluster' /etc/fstab || echo 'swarm-manager:/swarm-storage /mnt/gluster glusterfs defaults,_netdev 0 0' >> /etc/fstab 2>&1
2025-11-26 23:52:01 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo Z3JlcCAtcSAnL21udC9nbHVzdGVyJyAvZXRjL2ZzdGFiIHx8IGVjaG8gJ3N3YXJtLW1hbmFnZXI6L3N3YXJtLXN0b3JhZ2UgL21udC9nbHVzdGVyIGdsdXN0ZXJmcyBkZWZhdWx0cyxfbmV0ZGV2IDAgMCcgPj4gL2V0Yy9mc3RhYiAyPiYx | base64 -d | bash"
2025-11-26 23:52:02 - services.pct              - INFO - Running in container 3006: mount -t glusterfs swarm-manager:/swarm-storage /mnt/gluster 2>&1 || mount -t glusterfs 10.11.3.5:/swarm-storage /mnt/gluster 2>&1
2025-11-26 23:52:02 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo bW91bnQgLXQgZ2x1c3RlcmZzIHN3YXJtLW1hbmFnZXI6L3N3YXJtLXN0b3JhZ2UgL21udC9nbHVzdGVyIDI+JjEgfHwgbW91bnQgLXQgZ2x1c3RlcmZzIDEwLjExLjMuNTovc3dhcm0tc3RvcmFnZSAvbW50L2dsdXN0ZXIgMj4mMQ== | base64 -d | bash"
2025-11-26 23:52:03 - services.pct              - INFO - Running in container 3006: mount | grep -q '/mnt/gluster' && mount | grep '{mount_point}' | grep -q gluster && echo mounted || echo not_mounted
2025-11-26 23:52:03 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo bW91bnQgfCBncmVwIC1xICcvbW50L2dsdXN0ZXInICYmIG1vdW50IHwgZ3JlcCAne21vdW50X3BvaW50fScgfCBncmVwIC1xIGdsdXN0ZXIgJiYgZWNobyBtb3VudGVkIHx8IGVjaG8gbm90X21vdW50ZWQ= | base64 -d | bash"
2025-11-26 23:52:04 - services.pct              - INFO - Running in container 3006: mount | grep /mnt/gluster 2>/dev/null || echo 'NOT_MOUNTED'
2025-11-26 23:52:04 - services.ssh              - INFO - Running: pct exec 3006 -- bash -c "echo bW91bnQgfCBncmVwIC9tbnQvZ2x1c3RlciAyPi9kZXYvbnVsbCB8fCBlY2hvICdOT1RfTU9VTlRFRCc= | base64 -d | bash"
2025-11-26 23:52:05 - orchestration.gluster     - WARNING - swarm-node-1: Mount status unclear - 10.11.3.5:/swarm-storage on /mnt/gluster type fuse.glusterfs (rw,relatime,user_i
2025-11-26 23:52:05 - orchestration.gluster     - INFO - Mounting on swarm-node-2...
2025-11-26 23:52:05 - services.pct              - INFO - Running in container 3007: mkdir -p /mnt/gluster 2>&1
2025-11-26 23:52:05 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo bWtkaXIgLXAgL21udC9nbHVzdGVyIDI+JjE= | base64 -d | bash"
2025-11-26 23:52:07 - services.pct              - INFO - Running in container 3007: grep -q '/mnt/gluster' /etc/fstab || echo 'swarm-manager:/swarm-storage /mnt/gluster glusterfs defaults,_netdev 0 0' >> /etc/fstab 2>&1
2025-11-26 23:52:07 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo Z3JlcCAtcSAnL21udC9nbHVzdGVyJyAvZXRjL2ZzdGFiIHx8IGVjaG8gJ3N3YXJtLW1hbmFnZXI6L3N3YXJtLXN0b3JhZ2UgL21udC9nbHVzdGVyIGdsdXN0ZXJmcyBkZWZhdWx0cyxfbmV0ZGV2IDAgMCcgPj4gL2V0Yy9mc3RhYiAyPiYx | base64 -d | bash"
2025-11-26 23:52:08 - services.pct              - INFO - Running in container 3007: mount -t glusterfs swarm-manager:/swarm-storage /mnt/gluster 2>&1 || mount -t glusterfs 10.11.3.5:/swarm-storage /mnt/gluster 2>&1
2025-11-26 23:52:08 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo bW91bnQgLXQgZ2x1c3RlcmZzIHN3YXJtLW1hbmFnZXI6L3N3YXJtLXN0b3JhZ2UgL21udC9nbHVzdGVyIDI+JjEgfHwgbW91bnQgLXQgZ2x1c3RlcmZzIDEwLjExLjMuNTovc3dhcm0tc3RvcmFnZSAvbW50L2dsdXN0ZXIgMj4mMQ== | base64 -d | bash"
2025-11-26 23:52:09 - services.pct              - INFO - Running in container 3007: mount | grep -q '/mnt/gluster' && mount | grep '{mount_point}' | grep -q gluster && echo mounted || echo not_mounted
2025-11-26 23:52:09 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo bW91bnQgfCBncmVwIC1xICcvbW50L2dsdXN0ZXInICYmIG1vdW50IHwgZ3JlcCAne21vdW50X3BvaW50fScgfCBncmVwIC1xIGdsdXN0ZXIgJiYgZWNobyBtb3VudGVkIHx8IGVjaG8gbm90X21vdW50ZWQ= | base64 -d | bash"
2025-11-26 23:52:10 - services.pct              - INFO - Running in container 3007: mount | grep /mnt/gluster 2>/dev/null || echo 'NOT_MOUNTED'
2025-11-26 23:52:10 - services.ssh              - INFO - Running: pct exec 3007 -- bash -c "echo bW91bnQgfCBncmVwIC9tbnQvZ2x1c3RlciAyPi9kZXYvbnVsbCB8fCBlY2hvICdOT1RfTU9VTlRFRCc= | base64 -d | bash"
2025-11-26 23:52:12 - orchestration.gluster     - WARNING - swarm-node-2: Mount status unclear - 10.11.3.5:/swarm-storage on /mnt/gluster type fuse.glusterfs (rw,relatime,user_i
2025-11-26 23:52:12 - orchestration.gluster     - INFO - GlusterFS distributed storage setup complete
2025-11-26 23:52:12 - orchestration.gluster     - INFO -   Volume: swarm-storage
2025-11-26 23:52:12 - orchestration.gluster     - INFO -   Mount point: /mnt/gluster on all nodes
2025-11-26 23:52:12 - orchestration.gluster     - INFO -   Replication: 2x
2025-11-26 23:52:12 - commands.deploy           - INFO - Checking service ports...
2025-11-26 23:52:17 - paramiko.transport        - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-11-26 23:52:17 - paramiko.transport        - INFO - Authentication (publickey) successful!
2025-11-26 23:52:17 - services.ssh              - INFO - SSH connection established to root@10.11.3.4
2025-11-26 23:52:17 - services.ssh              - INFO - Running: nc -zv 10.11.3.20 3142 2>&1
2025-11-26 23:52:17 - commands.deploy           - INFO -    apt-cache: 10.11.3.20:3142
2025-11-26 23:52:17 - services.ssh              - INFO - Running: nc -zv 10.11.3.18 5432 2>&1
2025-11-26 23:52:17 - commands.deploy           - INFO -    PostgreSQL: 10.11.3.18:5432
2025-11-26 23:52:17 - services.ssh              - INFO - Running: nc -zv 10.11.3.17 80 2>&1
2025-11-26 23:52:17 - commands.deploy           - INFO -    HAProxy HTTP: 10.11.3.17:80
2025-11-26 23:52:17 - services.ssh              - INFO - Running: nc -zv 10.11.3.17 8404 2>&1
2025-11-26 23:52:17 - commands.deploy           - INFO -    HAProxy Stats: 10.11.3.17:8404
2025-11-26 23:52:17 - services.ssh              - INFO - Running: nc -zv 10.11.3.19 53 2>&1
2025-11-26 23:52:18 - services.ssh              - INFO - Running: nc -zuv 10.11.3.19 53 2>&1
2025-11-26 23:52:18 - commands.deploy           - INFO -    DNS: 10.11.3.19:53
2025-11-26 23:52:18 - services.ssh              - INFO - Running: nc -zv 10.11.3.5 2377 2>&1
2025-11-26 23:52:18 - commands.deploy           - INFO -    Docker Swarm: 10.11.3.5:2377
2025-11-26 23:52:18 - services.ssh              - INFO - Running: nc -zv 10.11.3.5 9443 2>&1
2025-11-26 23:52:18 - commands.deploy           - INFO -    Portainer: 10.11.3.5:9443
2025-11-26 23:52:18 - services.ssh              - INFO - Running: nc -zv 10.11.3.5 24007 2>&1
2025-11-26 23:52:18 - commands.deploy           - INFO -    GlusterFS: 10.11.3.5:24007
2025-11-26 23:52:18 - commands.deploy           - INFO - 
==================================================
2025-11-26 23:52:18 - commands.deploy           - INFO - Deploy Complete!
2025-11-26 23:52:18 - commands.deploy           - INFO - ==================================================
2025-11-26 23:52:18 - commands.deploy           - INFO - 
Containers:
2025-11-26 23:52:18 - commands.deploy           - INFO -   - 3020: apt-cache (10.11.3.20)
2025-11-26 23:52:18 - commands.deploy           - INFO -   - 3018: pgsql (10.11.3.18)
2025-11-26 23:52:18 - commands.deploy           - INFO -   - 3017: haproxy (10.11.3.17)
2025-11-26 23:52:18 - commands.deploy           - INFO -   - 3019: dns (10.11.3.19)
2025-11-26 23:52:18 - commands.deploy           - INFO -   - 3005: swarm-manager (10.11.3.5)
2025-11-26 23:52:18 - commands.deploy           - INFO -   - 3006: swarm-node-1 (10.11.3.6)
2025-11-26 23:52:18 - commands.deploy           - INFO -   - 3007: swarm-node-2 (10.11.3.7)
2025-11-26 23:52:18 - commands.deploy           - INFO - 
Portainer: https://10.11.3.5:9443
2025-11-26 23:52:18 - commands.deploy           - INFO - PostgreSQL: 10.11.3.18:5432
2025-11-26 23:52:18 - commands.deploy           - INFO - HAProxy: http://10.11.3.17:80 (Stats: http://10.11.3.17:8404)
2025-11-26 23:52:18 - commands.deploy           - INFO - 
GlusterFS:
2025-11-26 23:52:18 - commands.deploy           - INFO -   Volume: swarm-storage
2025-11-26 23:52:18 - commands.deploy           - INFO -   Mount: /mnt/gluster on all nodes
2025-11-26 23:52:18 - commands.deploy           - INFO - 
 All service ports are responding
